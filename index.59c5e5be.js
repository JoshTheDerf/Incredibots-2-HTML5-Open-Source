function t(t,e,i,s){Object.defineProperty(t,e,{get:i,set:s,enumerable:!0,configurable:!0})}function i(t,e){return Object.keys(e).forEach((function(i){"default"!==i&&"__esModule"!==i&&Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[i]}})})),t}function s(t){return t&&t.__esModule?t.default:t}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=r.parcelRequire94c2;null==a&&((a=function(t){if(t in n)return n[t].exports;if(t in o){var e=o[t];delete o[t];var i={id:t,exports:{}};return n[t]=i,e.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){o[t]=e},r.parcelRequire94c2=a),a.register("fyf1v",(function(e,i){var s,r;t(e.exports,"resolve",(()=>r),(t=>r=t)),t(e.exports,"register",(()=>s),(t=>s=t));var n={};s=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)n[e[i]]=t[e[i]]},r=function(t){var e=n[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),a("fyf1v").register(JSON.parse('{"eFEHu":"index.59c5e5be.js","BolLZ":"robot.47e74b96.dat","8i9w5":"replay.714e298e.dat","faeoS":"spaceship.521ab837.dat","3E4Tu":"race.513b64f4.dat","1wGsW":"roll_01.9192084c.mp3","7W7Hn":"click_02.e5637f17.mp3","46jrC":"create_shape_1.59ee3593.mp3","kfnQD":"create_shape_2.c786fee5.mp3","5LyFZ":"create_shape_3.12f2b745.mp3","9ogY7":"create_shape_4.856a78dd.mp3","iMjMP":"create_shape_5.8e06deea.mp3","8CiaQ":"create_joint_1.7edfe195.mp3","1x8XD":"create_joint_2.e65114ff.mp3","jjs3O":"create_joint_3.cfd02bc7.mp3","dgwWW":"create_joint_4.ca7c8736.mp3","l8S3n":"create_joint_5.e435b7a3.mp3","lKD9J":"Incredibots_Intro.9b66ac1b.mp3","kjyvk":"Incredibots_Win_r1.784437cc.mp3","eNZQ7":"Incredibots_Lose_r2.be1d518c.mp3","bBlAE":"incredibots2_logo.d33ce15b.png","3Omtd":"Incredibots_Congratulations_1.f26b2349.png","gaanQ":"levelselect_box_1_L.726c89f5.png","5Erx8":"levelselect_box_1_M.bf6b6f33.png","aTIhA":"levelselect_box_1_R.0d6e7e77.png","7ZUPD":"levelselect_box_2_L.e54babff.png","3uQm8":"levelselect_box_2_M.fc2d9226.png","lR76d":"levelselect_box_2_R.12978dc3.png","8o9cX":"levelselect_box_other_L.c38ceea9.png","f4TIO":"levelselect_box_other_M.90fe414b.png","bGMYI":"levelselect_box_other_R.5823d47a.png","1d9nZ":"levelselect_checkbox_levels_A.78209366.png","cPnrf":"levelselect_checkbox_levels_B.15ba5d97.png","iG0Bx":"levelselect_starthere_text.943b276e.png","iQIsd":"levelselect_starthere_arrow.e177f182.png","5GQhb":"button_red_base.60c1dd90.png","1jYQG":"button_red_roll.2d557a4c.png","kVHpm":"button_red_click.39296415.png","3TvBj":"button_purple_base.2b047c8c.png","e3n17":"button_purple_roll.c9c01cc8.png","eabsy":"button_purple_click.5b4ba4c8.png","2coDs":"button_blue_base.8b87acce.png","i0Q83":"button_blue_roll.9f6c6404.png","7A0lF":"button_blue_click.864e73a1.png","jmWJG":"button_pink_base.7131554c.png","6m2Ir":"button_pink_roll.f05401d6.png","hHvwR":"button_pink_click.63f40964.png","eTKns":"button_orange_base.cc4afd64.png","lUmCX":"button_orange_roll.994630a2.png","lC0IJ":"button_orange_click.496030ea.png","fyF78":"button_play_base.13147446.png","2QlGh":"button_play_roll.d952cef5.png","4wduP":"button_play_click.0514e9bb.png","8wmZY":"button_X_base.c3ac1277.png","1yx4D":"button_X_roll.30691c8a.png","cbHP4":"button_X_click.e40a375f.png","1DFxY":"box120_top.dcb271a5.png","QDCHH":"box120_bot.ec07ffaa.png","iYbx8":"box120_mid.2e2fd55d.png","dQq4H":"box154_top.0ead9cbe.png","664Hz":"box154_bot.d0bf9b25.png","eTxPh":"box154_mid.e5510139.png","jf38N":"box200_top.eb4b5e64.png","hvYKr":"box200_bot.be80ab05.png","jbyAM":"box200_mid.a786b17e.png","T2OoQ":"box248_top.0ed94aff.png","3AzLE":"box248_bot.9eb11a19.png","aHI8b":"box248_mid.a999c607.png","4Yy29":"box547_top.ad8315f2.png","6fM5k":"box547_bot.bf6c359e.png","euKVD":"box547_mid.d7626b7d.png","5r3DH":"topbox_left.6ed270f4.png","bWcVw":"topbox_right.c52da1a2.png","4FCeL":"topbox_mid.f111163f.png","4u7FZ":"chall_ed_restrictions_box_L.3e02e3d5.png","dU4wG":"chall_ed_restrictions_box_R.9dbeeefe.png","7cY5T":"chall_ed_restrictions_box_M.1aa8ba1b.png","earm4":"chall_ed_winloss_box_L.2efd7354.png","jqVaB":"chall_ed_winloss_box_R.e79977ca.png","hs4dr":"chall_ed_winloss_box_M.c7d35f65.png","k6Sfz":"chall_ed_winloss_box_linebox.9707d898.png","3rznl":"chall_ed_winloss_box_linehoriz.ce44e46a.png","01nYM":"menubar.71fa10aa.png","d6JBj":"menubar_roll.c30a6a87.png","5REBf":"menubox_chkboxA_base.10afeb04.png","5ci7c":"menubox_chkboxA_roll.37188b71.png","BehQz":"menubox_chkboxA_click.ef9d36c2.png","jShUj":"menubox_chkboxB_base.21fb6849.png","gi9jE":"menubox_chkboxB_roll.8951b29e.png","3qg54":"menubox_chkboxB_click.33252f97.png","6xsxY":"chkboxA_base.008317e6.png","4g9F7":"chkboxA_roll.f000a773.png","fm3qp":"chkboxA_click.be5d6773.png","gmRFe":"chkboxA_disabled.d2f6e069.png","2bRho":"chkboxB_base.1a07a509.png","dtwrn":"chkboxB_roll.4b1aa23d.png","3PRIg":"chkboxB_click.28381664.png","2JvDc":"chkboxB_disabled.a12ecfac.png","gvWuZ":"txtbox_base.3cfe6648.png","2wxwK":"txtbox_roll.660d2a69.png","hXPnz":"txtbox_base_disabled.d95803f4.png","ftFAj":"button_purplearrow_base.c07e6053.png","1Zfem":"button_purplearrow_roll.9948974f.png","ju8JF":"button_purplearrow_click.e8452c24.png","aNhL2":"listboxentry_base.e11d1742.png","aydti":"listboxentry_roll.c42a33d7.png","5ZayP":"listboxentry_active.e531cea4.png","j7QpO":"listboxentry_wide_base.44914d79.png","lSj1X":"listboxentry_wide_roll.45e49a4a.png","17y8G":"listboxentry_wide_active.a918ff3b.png","gv2nk":"slider_groove.6a7ab4c6.png","7PI7P":"slider_groove_disabled.13ed9d9e.png","8vJax":"slider_arrow.8cfe3d72.png","emROc":"cloud_0.49dd52a8.png","8NEg3":"cloud_1.ca6befad.png","8tGLu":"cloud_2.6516e46f.png","bR50Z":"cloud_3.ed46e360.png","k4a0b":"cloud_4.5a57035a.png","WBL1A":"cloud_5.1279e583.png","hsZXf":"cloud_6.d5e9f8fc.png","FL9n9":"cloud_7.4bbc0847.png","gTTE3":"cloud_8.3ca5b857.png","aXEti":"cloud_9.1d5a1969.png"}')),a.register("7qcjp",(function(e,s){t(e.exports,"useDeprecated",(()=>k)),t(e.exports,"VERSION",(()=>N)),t(e.exports,"filters",(()=>V)),t(e.exports,"utils",(()=>a("5pLOZ"))),a("5tsPZ");var r=a("5pLOZ"),n=(r=a("5pLOZ"),a("gd6GH")),o=(n=a("gd6GH"),a("5xWdg")),h=(o=a("5xWdg"),a("1ggcG")),l=(h=a("1ggcG"),a("8lrKM")),c=(l=a("8lrKM"),a("cx946")),d=(c=a("cx946"),a("hzsgD")),u=(d=a("hzsgD"),a("5gmF4")),p=(u=a("5gmF4"),a("ccCdY")),m=(p=a("ccCdY"),a("9uIz8")),f=(m=a("9uIz8"),a("deEcN")),_=(f=a("deEcN"),a("cHFFH")),g=(_=a("cHFFH"),a("k3j5h")),b=(g=a("k3j5h"),a("NGgBA")),y=a("6awPM"),w=a("9CJ8p"),v=a("fFXRU"),x=a("9zcHJ"),S=a("4ND2p");a("epj5y"),a("cap9B"),a("h54C1");var A=a("44Xx0"),P=a("8TYxR"),C=a("kpTES"),T=a("VYQOJ"),E=a("k5gBw"),R=a("6tlxD"),B=a("eIsNh"),D=a("f6Kro"),I=a("euDAX"),M=a("4Y6fG"),O=a("iZTtn"),L=function(t,e){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function G(t,e){function i(){this.constructor=t}L(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var F="5.0.0";function k(){var t=this;Object.defineProperties(t,{SVG_SIZE:{get:function(){return r.deprecation(F,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),t.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return r.deprecation(F,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),t.Transform}},TransformBase:{get:function(){return r.deprecation(F,"PIXI.TransformBase class has been removed, use PIXI.Transform"),t.Transform}},TRANSFORM_MODE:{get:function(){return r.deprecation(F,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return r.deprecation(F,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),t.Renderer}},CanvasRenderTarget:{get:function(){return r.deprecation(F,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),t.utils.CanvasRenderTarget}},loader:{get:function(){return r.deprecation(F,"PIXI.loader instance has moved to PIXI.Loader.shared"),t.Loader.shared}},FilterManager:{get:function(){return r.deprecation(F,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),t.systems.FilterSystem}},CanvasTinter:{get:function(){return r.deprecation("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),t.canvasUtils}},GroupD8:{get:function(){return r.deprecation("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),t.groupD8}}}),t.accessibility={},Object.defineProperties(t.accessibility,{AccessibilityManager:{get:function(){return r.deprecation("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),t.AccessibilityManager}}}),t.interaction={},Object.defineProperties(t.interaction,{InteractionManager:{get:function(){return r.deprecation("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),t.InteractionManager}},InteractionData:{get:function(){return r.deprecation("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),t.InteractionData}},InteractionEvent:{get:function(){return r.deprecation("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),t.InteractionEvent}}}),t.prepare={},Object.defineProperties(t.prepare,{BasePrepare:{get:function(){return r.deprecation("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),t.BasePrepare}},Prepare:{get:function(){return r.deprecation("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),t.Prepare}},CanvasPrepare:{get:function(){return r.deprecation("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),t.CanvasPrepare}}}),t.extract={},Object.defineProperties(t.extract,{Extract:{get:function(){return r.deprecation("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),t.Extract}},CanvasExtract:{get:function(){return r.deprecation("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),t.CanvasExtract}}}),t.extras={},Object.defineProperties(t.extras,{TilingSprite:{get:function(){return r.deprecation(F,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),t.TilingSprite}},TilingSpriteRenderer:{get:function(){return r.deprecation(F,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),t.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return r.deprecation(F,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),t.AnimatedSprite}},BitmapText:{get:function(){return r.deprecation(F,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),t.BitmapText}}}),t.TilingSprite.fromFrame=function(e,i,s){return r.deprecation("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),t.TilingSprite.from(e,{width:i,height:s})},t.TilingSprite.fromImage=function(e,i,s,n){return void 0===n&&(n={}),r.deprecation("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),n&&"object"!=typeof n&&(n={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),n.width=i,n.height=s,t.TilingSprite.from(e,n)},Object.defineProperties(t.utils,{getSvgSize:{get:function(){return r.deprecation(F,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),t.resources.SVGResource.getSize}}}),t.mesh={},Object.defineProperties(t.mesh,{Mesh:{get:function(){return r.deprecation(F,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),t.SimpleMesh}},NineSlicePlane:{get:function(){return r.deprecation(F,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),t.NineSlicePlane}},Plane:{get:function(){return r.deprecation(F,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),t.SimplePlane}},Rope:{get:function(){return r.deprecation(F,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),t.SimpleRope}},RawMesh:{get:function(){return r.deprecation(F,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),t.Mesh}},CanvasMeshRenderer:{get:function(){return r.deprecation(F,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),t.CanvasMeshRenderer}},MeshRenderer:{get:function(){return r.deprecation(F,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),t.MeshRenderer}}}),t.particles={},Object.defineProperties(t.particles,{ParticleContainer:{get:function(){return r.deprecation(F,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),t.ParticleContainer}},ParticleRenderer:{get:function(){return r.deprecation(F,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),t.ParticleRenderer}}}),t.ticker={},Object.defineProperties(t.ticker,{Ticker:{get:function(){return r.deprecation(F,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),t.Ticker}},shared:{get:function(){return r.deprecation(F,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),t.Ticker.shared}}}),t.loaders={},Object.defineProperties(t.loaders,{Loader:{get:function(){return r.deprecation(F,"PIXI.loaders.Loader class has moved to PIXI.Loader"),t.Loader}},Resource:{get:function(){return r.deprecation(F,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),t.LoaderResource}},bitmapFontParser:{get:function(){return r.deprecation(F,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),t.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){r.deprecation(F,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return r.deprecation(F,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),t.SpritesheetLoader.use}},getResourcePath:{get:function(){return r.deprecation(F,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),t.SpritesheetLoader.getResourcePath}}}),t.Loader.addPixiMiddleware=function(e){return r.deprecation(F,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),t.loaders.Loader.registerPlugin({use:e()})};var e=function(t){return"on"+t.charAt(0).toUpperCase()+t.slice(1)};Object.assign(t.Loader.prototype,{on:function(t){var i=e(t);r.deprecation(F,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+i+".add")},once:function(t){var i=e(t);r.deprecation(F,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+i+".once")},off:function(t){var i=e(t);r.deprecation(F,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+i+".detach")}}),Object.defineProperty(t.extract,"WebGLExtract",{get:function(){return r.deprecation(F,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),t.Extract}}),Object.defineProperty(t.prepare,"WebGLPrepare",{get:function(){return r.deprecation(F,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),t.Prepare}}),t.Container.prototype._renderWebGL=function(t){r.deprecation(F,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(t)},t.Container.prototype.renderWebGL=function(t){r.deprecation(F,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(t)},t.DisplayObject.prototype.renderWebGL=function(t){r.deprecation(F,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(t)},t.Container.prototype.renderAdvancedWebGL=function(t){r.deprecation(F,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(t)},Object.defineProperties(t.settings,{TRANSFORM_MODE:{get:function(){return r.deprecation(F,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){r.deprecation(F,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var i=t.BaseTexture;i.prototype.loadSource=function(e){r.deprecation(F,"PIXI.BaseTexture.loadSource method has been deprecated");var i=t.resources.autoDetectResource(e);i.internal=!0,this.setResource(i),this.update()};var s=!1;Object.defineProperties(i.prototype,{hasLoaded:{get:function(){return r.deprecation(F,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var t;return r.deprecation(F,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(t=this.resource)||void 0===t?void 0:t.url},set:function(t){r.deprecation(F,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=t)}},source:{get:function(){return r.deprecation(F,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(t){r.deprecation(F,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=t)}},premultiplyAlpha:{get:function(){return r.deprecation("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){r.deprecation("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}},_id:{get:function(){return s||(r.deprecation("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),s=!0),this._batchLocation},set:function(t){this._batchLocation=t}}}),i.fromImage=function(t,e,s,n){r.deprecation(F,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var o={scale:n,crossorigin:e};return i.from(t,{scaleMode:s,resourceOptions:o})},i.fromCanvas=function(t,e){return r.deprecation(F,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),i.from(t,{scaleMode:e})},i.fromSVG=function(t,e,s,n){r.deprecation(F,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var o={scale:n,crossorigin:e};return i.from(t,{scaleMode:s,resourceOptions:o})},Object.defineProperties(t.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return r.deprecation("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){r.deprecation("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}}}),t.Point.prototype.copy=function(t){return r.deprecation(F,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(t)},t.ObservablePoint.prototype.copy=function(t){return r.deprecation(F,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(t)},t.Rectangle.prototype.copy=function(t){return r.deprecation(F,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(t)},t.Matrix.prototype.copy=function(t){return r.deprecation(F,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(t)},t.systems.StateSystem.prototype.setState=function(t){return r.deprecation("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(t)},Object.assign(t.systems.FilterSystem.prototype,{getRenderTarget:function(t,e){return r.deprecation(F,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,e)},returnRenderTarget:function(t){r.deprecation(F,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(t)},calculateScreenSpaceMatrix:function(t){r.deprecation(F,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var e=t.identity(),i=this.activeState,s=i.sourceFrame,n=i.destinationFrame;return e.translate(s.x/n.width,s.y/n.height),e.scale(n.width,n.height),e},calculateNormalizedScreenSpaceMatrix:function(t){r.deprecation(F,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var e=this.activeState,i=e.sourceFrame,s=e.destinationFrame,n=t.identity();n.translate(i.x/s.width,i.y/s.height);var o=s.width/i.width,a=s.height/i.height;return n.scale(o,a),n}}),Object.defineProperties(t.RenderTexture.prototype,{sourceFrame:{get:function(){return r.deprecation(F,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return r.deprecation(F,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var n=function(t){function e(e,i,s,n){return r.deprecation(F,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!0,e,i,s,n)||this}return G(e,t),e}(t.filters.BlurFilterPass),o=function(t){function e(e,i,s,n){return r.deprecation(F,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!1,e,i,s,n)||this}return G(e,t),e}(t.filters.BlurFilterPass);Object.assign(t.filters,{BlurXFilter:n,BlurYFilter:o});var a=t.Sprite,h=t.Texture,l=t.Graphics;function c(t,e,i,s){return r.deprecation(F,"PIXI.Sprite."+t+" method is deprecated, use PIXI.Sprite.from"),a.from(e,{resourceOptions:{scale:s,crossorigin:i}})}function d(t,e,i,s){return r.deprecation(F,"PIXI.Texture."+t+" method is deprecated, use PIXI.Texture.from"),h.from(e,{resourceOptions:{scale:s,crossorigin:i}})}l.prototype.generateCanvasTexture||(l.prototype.generateCanvasTexture=function(){r.deprecation(F,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(l.prototype,"graphicsData",{get:function(){return r.deprecation(F,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),a.fromImage=c.bind(null,"fromImage"),a.fromSVG=c.bind(null,"fromSVG"),a.fromCanvas=c.bind(null,"fromCanvas"),a.fromVideo=c.bind(null,"fromVideo"),a.fromFrame=c.bind(null,"fromFrame"),h.fromImage=d.bind(null,"fromImage"),h.fromSVG=d.bind(null,"fromSVG"),h.fromCanvas=d.bind(null,"fromCanvas"),h.fromVideo=d.bind(null,"fromVideo"),h.fromFrame=d.bind(null,"fromFrame"),Object.defineProperty(t.AbstractRenderer.prototype,"autoResize",{get:function(){return r.deprecation(F,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(t){r.deprecation(F,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=t}}),Object.defineProperty(t.Renderer.prototype,"textureManager",{get:function(){return r.deprecation(F,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),t.utils.mixins={mixin:function(){r.deprecation(F,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){r.deprecation(F,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){r.deprecation(F,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(t.BitmapText.prototype,"font",{get:function(){return r.deprecation("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(e){if(r.deprecation("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),e){var i={font:e};this._upgradeStyle(i),i.fontSize=i.fontSize||t.BitmapFont.available[i.fontName].size,this._fontName=i.fontName,this._fontSize=i.fontSize,this.dirty=!0}}})}l.Renderer.registerPlugin("accessibility",n.AccessibilityManager),l.Renderer.registerPlugin("extract",c.Extract),l.Renderer.registerPlugin("interaction",o.InteractionManager),l.Renderer.registerPlugin("particle",u.ParticleRenderer),l.Renderer.registerPlugin("prepare",p.Prepare),l.Renderer.registerPlugin("batch",l.BatchRenderer),l.Renderer.registerPlugin("tilingSprite",f.TilingSpriteRenderer),d.Loader.registerPlugin(_.BitmapFontLoader),d.Loader.registerPlugin(m.SpritesheetLoader),h.Application.registerPlugin(g.TickerPlugin),h.Application.registerPlugin(d.AppLoaderPlugin);var N="5.3.10",V={AlphaFilter:b.AlphaFilter,BlurFilter:y.BlurFilter,BlurFilterPass:y.BlurFilterPass,ColorMatrixFilter:w.ColorMatrixFilter,DisplacementFilter:v.DisplacementFilter,FXAAFilter:x.FXAAFilter,NoiseFilter:S.NoiseFilter};i(e.exports,n),i(e.exports,o),i(e.exports,h),i(e.exports,l),i(e.exports,c),i(e.exports,d),i(e.exports,u),i(e.exports,p),i(e.exports,m),i(e.exports,f),i(e.exports,_),i(e.exports,g),i(e.exports,A),i(e.exports,P),i(e.exports,C),i(e.exports,T),i(e.exports,E),i(e.exports,R),i(e.exports,B),i(e.exports,D),i(e.exports,I),i(e.exports,M),i(e.exports,O)})),a.register("5tsPZ",(function(t,e){var i=a("9JNkE"),r=a("5F7Wq");window.Promise||(window.Promise=i.Polyfill),Object.assign||(Object.assign=s(r));if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!window.performance||!window.performance.now){var n=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-n}}for(var o=Date.now(),h=["ms","moz","webkit","o"],l=0;l<h.length&&!window.requestAnimationFrame;++l){var c=h[l];window.requestAnimationFrame=window[c+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+o-e;return i<0&&(i=0),o=e,window.setTimeout((function(){o=Date.now(),t(performance.now())}),i)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array)})),a.register("9JNkE",(function(t,e){!function(e){var i=e.Promise,s=i&&"resolve"in i&&"reject"in i&&"all"in i&&"race"in i&&function(){var t;return new i((function(e){t=e})),"function"==typeof t}();void 0!==t.exports&&t.exports?(t.exports.Promise=s?i:S,t.exports.Polyfill=S):"function"==typeof define&&define.amd?define((function(){return s?i:S})):s||(e.Promise=S);var r="pending",n="sealed",o="fulfilled",a="rejected",h=function(){};function l(t){return"[object Array]"===Object.prototype.toString.call(t)}var c,d="undefined"!=typeof setImmediate?setImmediate:setTimeout,u=[];function p(){for(var t=0;t<u.length;t++)u[t][0](u[t][1]);u=[],c=!1}function m(t,e){u.push([t,e]),c||(c=!0,d(p,0))}function f(t){var e=t.owner,i=e.state_,s=e.data_,r=t[i],n=t.then;if("function"==typeof r){i=o;try{s=r(s)}catch(t){y(n,t)}}_(n,s)||(i===o&&g(n,s),i===a&&y(n,s))}function _(t,e){var i;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var s=e.then;if("function"==typeof s)return s.call(e,(function(s){i||(i=!0,e!==s?g(t,s):b(t,s))}),(function(e){i||(i=!0,y(t,e))})),!0}}catch(e){return i||y(t,e),!0}return!1}function g(t,e){t!==e&&_(t,e)||b(t,e)}function b(t,e){t.state_===r&&(t.state_=n,t.data_=e,m(v,t))}function y(t,e){t.state_===r&&(t.state_=n,t.data_=e,m(x,t))}function w(t){var e=t.then_;t.then_=void 0;for(var i=0;i<e.length;i++)f(e[i])}function v(t){t.state_=o,w(t)}function x(t){t.state_=a,w(t)}function S(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof S==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function i(t){y(e,t)}try{t((function(t){g(e,t)}),i)}catch(t){i(t)}}(t,this)}S.prototype={constructor:S,state_:r,then_:null,data_:void 0,then:function(t,e){var i={owner:this,then:new this.constructor(h),fulfilled:t,rejected:e};return this.state_===o||this.state_===a?m(f,i):this.then_.push(i),i.then},catch:function(t){return this.then(null,t)}},S.all=function(t){if(!l(t))throw new TypeError("You must pass an array to Promise.all().");return new this((function(e,i){var s=[],r=0;function n(t){return r++,function(i){s[t]=i,--r||e(s)}}for(var o,a=0;a<t.length;a++)(o=t[a])&&"function"==typeof o.then?o.then(n(a),i):s[a]=o;r||e(s)}))},S.race=function(t){if(!l(t))throw new TypeError("You must pass an array to Promise.race().");return new this((function(e,i){for(var s,r=0;r<t.length;r++)(s=t[r])&&"function"==typeof s.then?s.then(e,i):e(s)}))},S.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this((function(e){e(t)}))},S.reject=function(t){return new this((function(e,i){i(t)}))}}("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:t.exports)})),a.register("5F7Wq",(function(t,e){var i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;if("abc"[5]="de","5"===Object.getOwnPropertyNames("abc")[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var o,a,h=n(t),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))s.call(o,c)&&(h[c]=o[c]);if(i){a=i(o);for(var d=0;d<a.length;d++)r.call(o,a[d])&&(h[a[d]]=o[a[d]])}}return h}})),a.register("5pLOZ",(function(e,i){t(e.exports,"deprecation",(()=>I)),t(e.exports,"hex2string",(()=>p)),t(e.exports,"decomposeDataUri",(()=>W)),t(e.exports,"premultiplyBlendMode",(()=>f)),t(e.exports,"premultiplyTintToRgba",(()=>y)),t(e.exports,"ProgramCache",(()=>M)),t(e.exports,"correctBlendMode",(()=>_)),t(e.exports,"DATA_URI",(()=>U)),t(e.exports,"removeItems",(()=>T)),t(e.exports,"clearTextureCache",(()=>F)),t(e.exports,"destroyTextureCache",(()=>G)),t(e.exports,"interleaveTypedArrays",(()=>S)),t(e.exports,"premultiplyTint",(()=>b)),t(e.exports,"BaseTextureCache",(()=>L)),t(e.exports,"isWebGLSupported",(()=>d)),t(e.exports,"uid",(()=>B)),t(e.exports,"createIndicesForQuads",(()=>w)),t(e.exports,"getResolutionOfUrl",(()=>X)),t(e.exports,"hex2rgb",(()=>u)),t(e.exports,"rgb2hex",(()=>u)),t(e.exports,"CanvasRenderTarget",(()=>k)),t(e.exports,"log2",(()=>C)),t(e.exports,"premultiplyRgba",(()=>g)),t(e.exports,"isPow2",(()=>P)),t(e.exports,"TextureCache",(()=>O)),t(e.exports,"sign",(()=>E)),t(e.exports,"trimCanvas",(()=>N)),t(e.exports,"string2hex",(()=>m)),t(e.exports,"getBufferType",(()=>v)),t(e.exports,"skipHello",(()=>l)),t(e.exports,"nextPow2",(()=>A)),t(e.exports,"determineCrossOrigin",(()=>j)),t(e.exports,"sayHello",(()=>c)),t(e.exports,"isMobile",(()=>a("iZTtn").isMobile)),t(e.exports,"EventEmitter",(()=>a("bqYnE").default)),t(e.exports,"earcut",(()=>a("4SIPH").default)),t(e.exports,"url",(()=>a("89zMi").default));var s=a("iZTtn"),r=(s=a("iZTtn"),a("bqYnE"),a("4SIPH"),a("89zMi")),n=(r=a("89zMi"),a("44Xx0"));s.settings.RETINA_PREFIX=/@([0-9\.]+)x/,s.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var o,h=!1;function l(){h=!0}function c(t){var e;if(!h){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 5.3.10 - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,i)}else window.console&&window.console.log("PixiJS 5.3.10 - "+t+" - http://www.pixijs.com/");h=!0}}function d(){return void 0===o&&(o=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:s.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!i||!i.getContextAttributes().stencil);if(i){var n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,r}catch(t){return!1}}()),o}function u(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function p(t){var e=t.toString(16);return"#"+(e="000000".substr(0,6-e.length)+e)}function m(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}function u(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var f=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[n.BLEND_MODES.NORMAL_NPM]=n.BLEND_MODES.NORMAL,t[n.BLEND_MODES.ADD_NPM]=n.BLEND_MODES.ADD,t[n.BLEND_MODES.SCREEN_NPM]=n.BLEND_MODES.SCREEN,e[n.BLEND_MODES.NORMAL]=n.BLEND_MODES.NORMAL_NPM,e[n.BLEND_MODES.ADD]=n.BLEND_MODES.ADD_NPM,e[n.BLEND_MODES.SCREEN]=n.BLEND_MODES.SCREEN_NPM;var s=[];return s.push(e),s.push(t),s}();function _(t,e){return f[e?1:0][t]}function g(t,e,i,s){return i=i||new Float32Array(4),s||void 0===s?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function b(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,s=t>>8&255,r=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((s=s*e+.5|0)<<8)+(r=r*e+.5|0)}function y(t,e,i,s){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(s||void 0===s)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function w(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var s=0,r=0;s<i;s+=6,r+=4)e[s+0]=r+0,e[s+1]=r+1,e[s+2]=r+2,e[s+3]=r+0,e[s+4]=r+2,e[s+5]=r+3;return e}function v(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var x={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function S(t,e){for(var i=0,s=0,r={},n=0;n<t.length;n++)s+=e[n],i+=t[n].length;var o=new ArrayBuffer(4*i),a=null,h=0;for(n=0;n<t.length;n++){var l=e[n],c=t[n],d=v(c);r[d]||(r[d]=new x[d](o)),a=r[d];for(var u=0;u<c.length;u++){a[(u/l|0)*s+h+u%l]=c[u]}h+=l}return new Float32Array(o)}function A(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function P(t){return!(t&t-1||!t)}function C(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function T(t,e,i){var s,r=t.length;if(!(e>=r||0===i)){var n=r-(i=e+i>r?r-e:i);for(s=e;s<n;++s)t[s]=t[s+i];t.length=n}}function E(t){return 0===t?0:t<0?-1:1}var R=0;function B(){return++R}var D={};function I(t,e,i){if(void 0===i&&(i=3),!D[e]){var s=(new Error).stack;void 0===s?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(s=s.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(s))),D[e]=!0}}var M={},O=Object.create(null),L=Object.create(null);function G(){var t;for(t in O)O[t].destroy();for(t in L)L[t].destroy()}function F(){var t;for(t in O)delete O[t];for(t in L)delete L[t]}var k=function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||s.settings.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),t}();function N(t){var e,i,s,r=t.width,n=t.height,o=t.getContext("2d"),a=o.getImageData(0,0,r,n).data,h=a.length,l={top:null,left:null,right:null,bottom:null},c=null;for(e=0;e<h;e+=4)0!==a[e+3]&&(i=e/4%r,s=~~(e/4/r),null===l.top&&(l.top=s),(null===l.left||i<l.left)&&(l.left=i),(null===l.right||l.right<i)&&(l.right=i+1),(null===l.bottom||l.bottom<s)&&(l.bottom=s));return null!==l.top&&(r=l.right-l.left,n=l.bottom-l.top+1,c=o.getImageData(l.left,l.top,r,n)),{height:n,width:r,data:c}}var V,U=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function W(t){var e=U.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function j(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,V||(V=document.createElement("a")),V.href=t;var i=r.parse(V.href),s=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&s&&i.protocol===e.protocol?"":"anonymous"}function X(t,e){var i=s.settings.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}})),a.register("iZTtn",(function(e,i){t(e.exports,"settings",(()=>r)),t(e.exports,"isMobile",(()=>s)),a("kstnA");var s=a("cx5e1").default(window.navigator);var r={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(s.tablet||s.phone){var i;if(s.apple.device)if(i=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(i[1],10)<11&&(e=!1);if(s.android.device)if(i=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(i[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:s.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!s.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}})),a.register("kstnA",(function(e,i){t(e.exports,"default",(()=>a("cx5e1").default)),t(e.exports,"default",(()=>a("cx5e1").default));a("cx5e1"),a("cx5e1")})),a.register("cx5e1",(function(e,i){t(e.exports,"default",(()=>y));var s=/iPhone/i,r=/iPod/i,n=/iPad/i,o=/\biOS-universal(?:.+)Mac\b/i,a=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,l=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,c=/Silk/i,d=/Windows Phone/i,u=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,m=/BB10/i,f=/Opera Mini/i,_=/\b(CriOS|Chrome)(?:.+)Mobile/i,g=/Mobile(?:.+)Firefox\b/i,b=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};function y(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,y=i.split("[FBAN");void 0!==y[1]&&(i=y[0]),void 0!==(y=i.split("Twitter"))[1]&&(i=y[0]);var w=function(t){return function(e){return e.test(t)}}(i),v={apple:{phone:w(s)&&!w(d),ipod:w(r),tablet:!w(s)&&(w(n)||b(e))&&!w(d),universal:w(o),device:(w(s)||w(r)||w(n)||w(o)||b(e))&&!w(d)},amazon:{phone:w(l),tablet:!w(l)&&w(c),device:w(l)||w(c)},android:{phone:!w(d)&&w(l)||!w(d)&&w(a),tablet:!w(d)&&!w(l)&&!w(a)&&(w(c)||w(h)),device:!w(d)&&(w(l)||w(c)||w(a)||w(h))||w(/\bokhttp\b/i)},windows:{phone:w(d),tablet:w(u),device:w(d)||w(u)},other:{blackberry:w(p),blackberry10:w(m),opera:w(f),firefox:w(g),chrome:w(_),device:w(p)||w(m)||w(f)||w(g)||w(_)},any:!1,phone:!1,tablet:!1};return v.any=v.apple.device||v.android.device||v.windows.device||v.other.device,v.phone=v.apple.phone||v.android.phone||v.windows.phone,v.tablet=v.apple.tablet||v.android.tablet||v.windows.tablet,v}})),a.register("bqYnE",(function(t,e){var i=Object.prototype.hasOwnProperty,s="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,i,r,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new n(i,r||t,o),h=s?s+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function h(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(s=!1)),h.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)i.call(t,e)&&r.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},h.prototype.listeners=function(t){var e=s?s+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,n=i.length,o=new Array(n);r<n;r++)o[r]=i[r].fn;return o},h.prototype.listenerCount=function(t){var e=s?s+t:t,i=this._events[e];return i?i.fn?1:i.length:0},h.prototype.emit=function(t,e,i,r,n,o){var a=s?s+t:t;if(!this._events[a])return!1;var h,l,c=this._events[a],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,r),!0;case 5:return c.fn.call(c.context,e,i,r,n),!0;case 6:return c.fn.call(c.context,e,i,r,n,o),!0}for(l=1,h=new Array(d-1);l<d;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var u,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;case 4:c[l].fn.call(c[l].context,e,i,r);break;default:if(!h)for(u=1,h=new Array(d-1);u<d;u++)h[u-1]=arguments[u];c[l].fn.apply(c[l].context,h)}}return!0},h.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},h.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},h.prototype.removeListener=function(t,e,i,r){var n=s?s+t:t;if(!this._events[n])return this;if(!e)return a(this,n),this;var o=this._events[n];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||a(this,n);else{for(var h=0,l=[],c=o.length;h<c;h++)(o[h].fn!==e||r&&!o[h].once||i&&o[h].context!==i)&&l.push(o[h]);l.length?this._events[n]=1===l.length?l[0]:l:a(this,n)}return this},h.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=s,h.EventEmitter=h,t.exports=h})),a.register("4SIPH",(function(t,e){function i(t,e,i){i=i||2;var o,a,h,l,u,p,f,_=e&&e.length,g=_?e[0]*i:t.length,b=s(t,0,g,i,!0),y=[];if(!b||b.next===b.prev)return y;if(_&&(b=function(t,e,i,n){var o,a,h,l=[];for(o=0,a=e.length;o<a;o++)(h=s(t,e[o]*n,o<a-1?e[o+1]*n:t.length,n,!1))===h.next&&(h.steiner=!0),l.push(m(h));for(l.sort(c),o=0;o<l.length;o++)i=r(i=d(l[o],i),i.next);return i}(t,e,b,i)),t.length>80*i){o=h=t[0],a=l=t[1];for(var w=i;w<g;w+=i)(u=t[w])<o&&(o=u),(p=t[w+1])<a&&(a=p),u>h&&(h=u),p>l&&(l=p);f=0!==(f=Math.max(h-o,l-a))?1/f:0}return n(b,y,i,o,a,f),y}function s(t,e,i,s,r){var n,o;if(r===T(t,e,i,s)>0)for(n=e;n<i;n+=s)o=A(n,t[n],t[n+1],o);else for(n=i-s;n>=e;n-=s)o=A(n,t[n],t[n+1],o);return o&&b(o,o.next)&&(P(o),o=o.next),o}function r(t,e){if(!t)return t;e||(e=t);var i,s=t;do{if(i=!1,s.steiner||!b(s,s.next)&&0!==g(s.prev,s,s.next))s=s.next;else{if(P(s),(s=e=s.prev)===s.next)break;i=!0}}while(i||s!==e);return e}function n(t,e,i,s,c,d,u){if(t){!u&&d&&function(t,e,i,s){var r=t;do{null===r.z&&(r.z=p(r.x,r.y,e,i,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,s,r,n,o,a,h,l=1;do{for(i=t,t=null,n=null,o=0;i;){for(o++,s=i,a=0,e=0;e<l&&(a++,s=s.nextZ);e++);for(h=l;a>0||h>0&&s;)0!==a&&(0===h||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,h--),n?n.nextZ=r:t=r,r.prevZ=n,n=r;i=s}n.nextZ=null,l*=2}while(o>1)}(r)}(t,s,c,d);for(var m,f,_=t;t.prev!==t.next;)if(m=t.prev,f=t.next,d?a(t,s,c,d):o(t))e.push(m.i/i),e.push(t.i/i),e.push(f.i/i),P(t),t=f.next,_=f.next;else if((t=f)===_){u?1===u?n(t=h(r(t),e,i),e,i,s,c,d,2):2===u&&l(t,e,i,s,c,d):n(r(t),e,i,s,c,d,1);break}}}function o(t){var e=t.prev,i=t,s=t.next;if(g(e,i,s)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(f(e.x,e.y,i.x,i.y,s.x,s.y,r.x,r.y)&&g(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function a(t,e,i,s){var r=t.prev,n=t,o=t.next;if(g(r,n,o)>=0)return!1;for(var a=r.x<n.x?r.x<o.x?r.x:o.x:n.x<o.x?n.x:o.x,h=r.y<n.y?r.y<o.y?r.y:o.y:n.y<o.y?n.y:o.y,l=r.x>n.x?r.x>o.x?r.x:o.x:n.x>o.x?n.x:o.x,c=r.y>n.y?r.y>o.y?r.y:o.y:n.y>o.y?n.y:o.y,d=p(a,h,e,i,s),u=p(l,c,e,i,s),m=t.prevZ,_=t.nextZ;m&&m.z>=d&&_&&_.z<=u;){if(m!==t.prev&&m!==t.next&&f(r.x,r.y,n.x,n.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;if(m=m.prevZ,_!==t.prev&&_!==t.next&&f(r.x,r.y,n.x,n.y,o.x,o.y,_.x,_.y)&&g(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;m&&m.z>=d;){if(m!==t.prev&&m!==t.next&&f(r.x,r.y,n.x,n.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;_&&_.z<=u;){if(_!==t.prev&&_!==t.next&&f(r.x,r.y,n.x,n.y,o.x,o.y,_.x,_.y)&&g(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function h(t,e,i){var s=t;do{var n=s.prev,o=s.next.next;!b(n,o)&&y(n,s,s.next,o)&&x(n,o)&&x(o,n)&&(e.push(n.i/i),e.push(s.i/i),e.push(o.i/i),P(s),P(s.next),s=t=o),s=s.next}while(s!==t);return r(s)}function l(t,e,i,s,o,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&_(h,l)){var c=S(h,l);return h=r(h,h.next),c=r(c,c.next),n(h,e,i,s,o,a),void n(c,e,i,s,o,a)}l=l.next}h=h.next}while(h!==t)}function c(t,e){return t.x-e.x}function d(t,e){var i=function(t,e){var i,s=e,r=t.x,n=t.y,o=-1/0;do{if(n<=s.y&&n>=s.next.y&&s.next.y!==s.y){var a=s.x+(n-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(a<=r&&a>o){if(o=a,a===r){if(n===s.y)return s;if(n===s.next.y)return s.next}i=s.x<s.next.x?s:s.next}}s=s.next}while(s!==e);if(!i)return null;if(r===o)return i;var h,l=i,c=i.x,d=i.y,p=1/0;s=i;do{r>=s.x&&s.x>=c&&r!==s.x&&f(n<d?r:o,n,c,d,n<d?o:r,n,s.x,s.y)&&(h=Math.abs(n-s.y)/(r-s.x),x(s,t)&&(h<p||h===p&&(s.x>i.x||s.x===i.x&&u(i,s)))&&(i=s,p=h)),s=s.next}while(s!==l);return i}(t,e);if(!i)return e;var s=S(i,t),n=r(i,i.next);return r(s,s.next),e===i?n:e}function u(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function p(t,e,i,s,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function m(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function f(t,e,i,s,r,n,o,a){return(r-o)*(e-a)-(t-o)*(n-a)>=0&&(t-o)*(s-a)-(i-o)*(e-a)>=0&&(i-o)*(n-a)-(r-o)*(s-a)>=0}function _(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&y(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var i=t,s=!1,r=(t.x+e.x)/2,n=(t.y+e.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&r<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||b(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,i,s){var r=v(g(t,e,i)),n=v(g(t,e,s)),o=v(g(i,s,t)),a=v(g(i,s,e));return r!==n&&o!==a||(!(0!==r||!w(t,i,e))||(!(0!==n||!w(t,s,e))||(!(0!==o||!w(i,t,s))||!(0!==a||!w(i,e,s)))))}function w(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function v(t){return t>0?1:t<0?-1:0}function x(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function S(t,e){var i=new C(t.i,t.x,t.y),s=new C(e.i,e.x,e.y),r=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,s.next=i,i.prev=s,n.next=s,s.prev=n,s}function A(t,e,i,s){var r=new C(t,e,i);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function P(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,i,s){for(var r=0,n=e,o=i-s;n<i;n+=s)r+=(t[o]-t[n])*(t[n+1]+t[o+1]),o=n;return r}t.exports=i,t.exports.default=i,i.deviation=function(t,e,i,s){var r=e&&e.length,n=r?e[0]*i:t.length,o=Math.abs(T(t,0,n,i));if(r)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,c=a<h-1?e[a+1]*i:t.length;o-=Math.abs(T(t,l,c,i))}var d=0;for(a=0;a<s.length;a+=3){var u=s[a]*i,p=s[a+1]*i,m=s[a+2]*i;d+=Math.abs((t[u]-t[m])*(t[p+1]-t[u+1])-(t[u]-t[p])*(t[m+1]-t[u+1]))}return 0===o&&0===d?0:Math.abs((d-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},s=0,r=0;r<t.length;r++){for(var n=0;n<t[r].length;n++)for(var o=0;o<e;o++)i.vertices.push(t[r][n][o]);r>0&&(s+=t[r-1].length,i.holes.push(s))}return i}})),a.register("89zMi",(function(e,i){var s,r,n,o,h;t(e.exports,"format",(()=>h),(t=>h=t)),t(e.exports,"Url",(()=>r),(t=>r=t)),t(e.exports,"resolveObject",(()=>o),(t=>o=t)),t(e.exports,"parse",(()=>s),(t=>s=t)),t(e.exports,"resolve",(()=>n),(t=>n=t));var l=a("dMyYH"),c=a("8wicf");function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}s=P,n=function(t,e){return P(t,!1,!0).resolve(e)},o=function(t,e){return t?P(t,!1,!0).resolveObject(e):e},h=function(t){c.isString(t)&&(t=P(t));return t instanceof d?t.format():d.prototype.format.call(t)},r=d;var u=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),_=["'"].concat(f),g=["%","/","?",";","#"].concat(_),b=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=a("5VCHH");function P(t,e,i){if(t&&c.isObject(t)&&t instanceof d)return t;var s=new d;return s.parse(t,e,i),s}d.prototype.parse=function(t,e,i){if(!c.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),r=-1!==s&&s<t.indexOf("#")?"?":"#",n=t.split(r);n[0]=n[0].replace(/\\/g,"/");var o=t=n.join(r);if(o=o.trim(),!i&&1===t.split("#").length){var a=m.exec(o);if(a)return this.path=o,this.href=o,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?A.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=u.exec(o);if(h){var d=(h=h[0]).toLowerCase();this.protocol=d,o=o.substr(h.length)}if(i||h||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var p="//"===o.substr(0,2);!p||h&&x[h]||(o=o.substr(2),this.slashes=!0)}if(!x[h]&&(p||h&&!S[h])){for(var f,P,C=-1,T=0;T<b.length;T++){-1!==(E=o.indexOf(b[T]))&&(-1===C||E<C)&&(C=E)}-1!==(P=-1===C?o.lastIndexOf("@"):o.lastIndexOf("@",C))&&(f=o.slice(0,P),o=o.slice(P+1),this.auth=decodeURIComponent(f)),C=-1;for(T=0;T<g.length;T++){var E;-1!==(E=o.indexOf(g[T]))&&(-1===C||E<C)&&(C=E)}-1===C&&(C=o.length),this.host=o.slice(0,C),o=o.slice(C),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var B=this.hostname.split(/\./),D=(T=0,B.length);T<D;T++){var I=B[T];if(I&&!I.match(y)){for(var M="",O=0,L=I.length;O<L;O++)I.charCodeAt(O)>127?M+="x":M+=I[O];if(!M.match(y)){var G=B.slice(0,T),F=B.slice(T+1),k=I.match(w);k&&(G.push(k[1]),F.unshift(k[2])),F.length&&(o="/"+F.join(".")+o),this.hostname=G.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=l.toASCII(this.hostname));var N=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+N,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!v[d])for(T=0,D=_.length;T<D;T++){var U=_[T];if(-1!==o.indexOf(U)){var W=encodeURIComponent(U);W===U&&(W=escape(U)),o=o.split(U).join(W)}}var j=o.indexOf("#");-1!==j&&(this.hash=o.substr(j),o=o.slice(0,j));var X=o.indexOf("?");if(-1!==X?(this.search=o.substr(X),this.query=o.substr(X+1),e&&(this.query=A.parse(this.query)),o=o.slice(0,X)):e&&(this.search="",this.query={}),o&&(this.pathname=o),S[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){N=this.pathname||"";var Y=this.search||"";this.path=N+Y}return this.href=this.format(),this},d.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",s=this.hash||"",r=!1,n="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(n=A.stringify(this.query));var o=this.search||n&&"?"+n||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||S[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),s&&"#"!==s.charAt(0)&&(s="#"+s),o&&"?"!==o.charAt(0)&&(o="?"+o),e+r+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+s},d.prototype.resolve=function(t){return this.resolveObject(P(t,!1,!0)).format()},d.prototype.resolveObject=function(t){if(c.isString(t)){var e=new d;e.parse(t,!1,!0),t=e}for(var i=new d,s=Object.keys(this),r=0;r<s.length;r++){var n=s[r];i[n]=this[n]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var h=o[a];"protocol"!==h&&(i[h]=t[h])}return S[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!S[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var p=l[u];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||x[t.protocol])i.pathname=t.pathname;else{for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),i.pathname=m.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var f=i.pathname||"",_=i.search||"";i.path=f+_}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var g=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=b||g||i.host&&t.pathname,w=y,v=i.pathname&&i.pathname.split("/")||[],A=(m=t.pathname&&t.pathname.split("/")||[],i.protocol&&!S[i.protocol]);if(A&&(i.hostname="",i.port=null,i.host&&(""===v[0]?v[0]=i.host:v.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),y=y&&(""===m[0]||""===v[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,v=m;else if(m.length)v||(v=[]),v.pop(),v=v.concat(m),i.search=t.search,i.query=t.query;else if(!c.isNullOrUndefined(t.search)){if(A)i.hostname=i.host=v.shift(),(R=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=R.shift(),i.host=i.hostname=R.shift());return i.search=t.search,i.query=t.query,c.isNull(i.pathname)&&c.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!v.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var P=v.slice(-1)[0],C=(i.host||t.host||v.length>1)&&("."===P||".."===P)||""===P,T=0,E=v.length;E>=0;E--)"."===(P=v[E])?v.splice(E,1):".."===P?(v.splice(E,1),T++):T&&(v.splice(E,1),T--);if(!y&&!w)for(;T--;)v.unshift("..");!y||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),C&&"/"!==v.join("/").substr(-1)&&v.push("");var R,B=""===v[0]||v[0]&&"/"===v[0].charAt(0);A&&(i.hostname=i.host=B?"":v.length?v.shift():"",(R=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=R.shift(),i.host=i.hostname=R.shift()));return(y=y||i.host&&v.length)&&!B&&v.unshift(""),v.length?i.pathname=v.join("/"):(i.pathname=null,i.path=null),c.isNull(i.pathname)&&c.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},d.prototype.parseHost=function(){var t=this.host,e=p.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}})),a.register("dMyYH",(function(t,e){!function(i){var s="object"==typeof e&&e&&!e.nodeType&&e,n=t&&!t.nodeType&&t,o="object"==typeof r&&r;o.global!==o&&o.window!==o&&o.self!==o||(i=o);var a,h,l=2147483647,c=36,d=/^xn--/,u=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,_=String.fromCharCode;function g(t){throw new RangeError(m[t])}function b(t,e){for(var i=t.length,s=[];i--;)s[i]=e(t[i]);return s}function y(t,e){var i=t.split("@"),s="";return i.length>1&&(s=i[0]+"@",t=i[1]),s+b((t=t.replace(p,".")).split("."),e).join(".")}function w(t){for(var e,i,s=[],r=0,n=t.length;r<n;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<n?56320==(64512&(i=t.charCodeAt(r++)))?s.push(((1023&e)<<10)+(1023&i)+65536):(s.push(e),r--):s.push(e);return s}function v(t){return b(t,(function(t){var e="";return t>65535&&(e+=_((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=_(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function S(t,e,i){var s=0;for(t=i?f(t/700):t>>1,t+=f(t/e);t>455;s+=c)t=f(t/35);return f(s+36*t/(t+38))}function A(t){var e,i,s,r,n,o,a,h,d,u,p,m=[],_=t.length,b=0,y=128,w=72;for((i=t.lastIndexOf("-"))<0&&(i=0),s=0;s<i;++s)t.charCodeAt(s)>=128&&g("not-basic"),m.push(t.charCodeAt(s));for(r=i>0?i+1:0;r<_;){for(n=b,o=1,a=c;r>=_&&g("invalid-input"),((h=(p=t.charCodeAt(r++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:c)>=c||h>f((l-b)/o))&&g("overflow"),b+=h*o,!(h<(d=a<=w?1:a>=w+26?26:a-w));a+=c)o>f(l/(u=c-d))&&g("overflow"),o*=u;w=S(b-n,e=m.length+1,0==n),f(b/e)>l-y&&g("overflow"),y+=f(b/e),b%=e,m.splice(b++,0,y)}return v(m)}function P(t){var e,i,s,r,n,o,a,h,d,u,p,m,b,y,v,A=[];for(m=(t=w(t)).length,e=128,i=0,n=72,o=0;o<m;++o)(p=t[o])<128&&A.push(_(p));for(s=r=A.length,r&&A.push("-");s<m;){for(a=l,o=0;o<m;++o)(p=t[o])>=e&&p<a&&(a=p);for(a-e>f((l-i)/(b=s+1))&&g("overflow"),i+=(a-e)*b,e=a,o=0;o<m;++o)if((p=t[o])<e&&++i>l&&g("overflow"),p==e){for(h=i,d=c;!(h<(u=d<=n?1:d>=n+26?26:d-n));d+=c)v=h-u,y=c-u,A.push(_(x(u+v%y,0))),h=f(v/y);A.push(_(x(h,0))),n=S(i,b,s==r),i=0,++s}++i,++e}return A.join("")}if(a={version:"1.4.1",ucs2:{decode:w,encode:v},decode:A,encode:P,toASCII:function(t){return y(t,(function(t){return u.test(t)?"xn--"+P(t):t}))},toUnicode:function(t){return y(t,(function(t){return d.test(t)?A(t.slice(4).toLowerCase()):t}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return a}));else if(s&&n)if(t.exports==s)n.exports=a;else for(h in a)a.hasOwnProperty(h)&&(s[h]=a[h]);else i.punycode=a}(this)})),a.register("8wicf",(function(t,e){t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}})),a.register("5VCHH",(function(e,i){var s,r;t(e.exports,"stringify",(()=>s),(t=>s=t)),t(e.exports,"parse",(()=>r),(t=>r=t)),r=a("31WqV"),s=a("eilJY")})),a.register("31WqV",(function(t,e){function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var h=1e3;n&&"number"==typeof n.maxKeys&&(h=n.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var c=0;c<l;++c){var d,u,p,m,f=t[c].replace(a,"%20"),_=f.indexOf(r);_>=0?(d=f.substr(0,_),u=f.substr(_+1)):(d=f,u=""),p=decodeURIComponent(d),m=decodeURIComponent(u),i(o,p)?s(o[p])?o[p].push(m):o[p]=[o[p],m]:o[p]=m}return o};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}})),a.register("eilJY",(function(t,e){var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,o,a){return e=e||"&",o=o||"=",null===t&&(t=void 0),"object"==typeof t?r(n(t),(function(n){var a=encodeURIComponent(i(n))+o;return s(t[n])?r(t[n],(function(t){return a+encodeURIComponent(i(t))})).join(e):a+encodeURIComponent(i(t[n]))})).join(e):a?encodeURIComponent(i(a))+o+encodeURIComponent(i(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function r(t,e){if(t.map)return t.map(e);for(var i=[],s=0;s<t.length;s++)i.push(e(t[s],s));return i}var n=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}})),a.register("44Xx0",(function(e,i){
/*!
 * @pixi/constants - v5.3.10
 * Compiled Mon, 07 Jun 2021 22:37:25 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var s,r,n,o,a,h,l,c,d,u,p,m,f,_,g,b,y,w,v,x,S,A,P,C,T,E,R,B,D,I,M,O,L,G;t(e.exports,"MIPMAP_MODES",(()=>S)),t(e.exports,"TARGETS",(()=>f)),t(e.exports,"MASK_TYPES",(()=>M)),t(e.exports,"BLEND_MODES",(()=>l)),t(e.exports,"RENDERER_TYPE",(()=>n)),t(e.exports,"FORMATS",(()=>p)),t(e.exports,"WRAP_MODES",(()=>v)),t(e.exports,"PRECISION",(()=>D)),t(e.exports,"DRAW_MODES",(()=>d)),t(e.exports,"GC_MODES",(()=>R)),t(e.exports,"MSAA_QUALITY",(()=>L)),t(e.exports,"ENV",(()=>s)),t(e.exports,"ALPHA_MODES",(()=>P)),t(e.exports,"BUFFER_BITS",(()=>a)),t(e.exports,"SCALE_MODES",(()=>y)),t(e.exports,"CLEAR_MODES",(()=>T)),t(e.exports,"TYPES",(()=>g)),(r=s||(s={}))[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",(o=n||(n={}))[o.UNKNOWN=0]="UNKNOWN",o[o.WEBGL=1]="WEBGL",o[o.CANVAS=2]="CANVAS",(h=a||(a={}))[h.COLOR=16384]="COLOR",h[h.DEPTH=256]="DEPTH",h[h.STENCIL=1024]="STENCIL",(c=l||(l={}))[c.NORMAL=0]="NORMAL",c[c.ADD=1]="ADD",c[c.MULTIPLY=2]="MULTIPLY",c[c.SCREEN=3]="SCREEN",c[c.OVERLAY=4]="OVERLAY",c[c.DARKEN=5]="DARKEN",c[c.LIGHTEN=6]="LIGHTEN",c[c.COLOR_DODGE=7]="COLOR_DODGE",c[c.COLOR_BURN=8]="COLOR_BURN",c[c.HARD_LIGHT=9]="HARD_LIGHT",c[c.SOFT_LIGHT=10]="SOFT_LIGHT",c[c.DIFFERENCE=11]="DIFFERENCE",c[c.EXCLUSION=12]="EXCLUSION",c[c.HUE=13]="HUE",c[c.SATURATION=14]="SATURATION",c[c.COLOR=15]="COLOR",c[c.LUMINOSITY=16]="LUMINOSITY",c[c.NORMAL_NPM=17]="NORMAL_NPM",c[c.ADD_NPM=18]="ADD_NPM",c[c.SCREEN_NPM=19]="SCREEN_NPM",c[c.NONE=20]="NONE",c[c.SRC_OVER=0]="SRC_OVER",c[c.SRC_IN=21]="SRC_IN",c[c.SRC_OUT=22]="SRC_OUT",c[c.SRC_ATOP=23]="SRC_ATOP",c[c.DST_OVER=24]="DST_OVER",c[c.DST_IN=25]="DST_IN",c[c.DST_OUT=26]="DST_OUT",c[c.DST_ATOP=27]="DST_ATOP",c[c.ERASE=26]="ERASE",c[c.SUBTRACT=28]="SUBTRACT",c[c.XOR=29]="XOR",(u=d||(d={}))[u.POINTS=0]="POINTS",u[u.LINES=1]="LINES",u[u.LINE_LOOP=2]="LINE_LOOP",u[u.LINE_STRIP=3]="LINE_STRIP",u[u.TRIANGLES=4]="TRIANGLES",u[u.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",u[u.TRIANGLE_FAN=6]="TRIANGLE_FAN",(m=p||(p={}))[m.RGBA=6408]="RGBA",m[m.RGB=6407]="RGB",m[m.ALPHA=6406]="ALPHA",m[m.LUMINANCE=6409]="LUMINANCE",m[m.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",m[m.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",m[m.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(_=f||(f={}))[_.TEXTURE_2D=3553]="TEXTURE_2D",_[_.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",_[_.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",_[_.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",_[_.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",_[_.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",_[_.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",_[_.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",_[_.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(b=g||(g={}))[b.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",b[b.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",b[b.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",b[b.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",b[b.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",b[b.FLOAT=5126]="FLOAT",b[b.HALF_FLOAT=36193]="HALF_FLOAT",(w=y||(y={}))[w.NEAREST=0]="NEAREST",w[w.LINEAR=1]="LINEAR",(x=v||(v={}))[x.CLAMP=33071]="CLAMP",x[x.REPEAT=10497]="REPEAT",x[x.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(A=S||(S={}))[A.OFF=0]="OFF",A[A.POW2=1]="POW2",A[A.ON=2]="ON",(C=P||(P={}))[C.NPM=0]="NPM",C[C.UNPACK=1]="UNPACK",C[C.PMA=2]="PMA",C[C.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",C[C.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",C[C.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(E=T||(T={}))[E.NO=0]="NO",E[E.YES=1]="YES",E[E.AUTO=2]="AUTO",E[E.BLEND=0]="BLEND",E[E.CLEAR=1]="CLEAR",E[E.BLIT=2]="BLIT",(B=R||(R={}))[B.AUTO=0]="AUTO",B[B.MANUAL=1]="MANUAL",(I=D||(D={})).LOW="lowp",I.MEDIUM="mediump",I.HIGH="highp",(O=M||(M={}))[O.NONE=0]="NONE",O[O.SCISSOR=1]="SCISSOR",O[O.STENCIL=2]="STENCIL",O[O.SPRITE=3]="SPRITE",(G=L||(L={}))[G.NONE=0]="NONE",G[G.LOW=2]="LOW",G[G.MEDIUM=4]="MEDIUM",G[G.HIGH=8]="HIGH"})),a.register("gd6GH",(function(e,i){t(e.exports,"accessibleTarget",(()=>o)),t(e.exports,"AccessibilityManager",(()=>h));var s=a("8TYxR");a("5pLOZ");var r=a("iZTtn"),n=a("5pLOZ"),o={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};s.DisplayObject.mixin(o);var h=function(){function t(t){this._hookDiv=null,(r.isMobile.tablet||r.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessability for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){var t=performance.now();if(!(r.isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=this.renderer.resolution,s=e.width/this.renderer.width*i,o=e.height/this.renderer.height*i,a=this.div;a.style.left=e.left+"px",a.style.top=e.top+"px",a.style.width=this.renderer.width+"px",a.style.height=this.renderer.height+"px";for(var h=0;h<this.children.length;h++){var l=this.children[h];if(l.renderId!==this.renderId)l._accessibleActive=!1,n.removeItems(this.children,h,1),this.div.removeChild(l._accessibleDiv),this.pool.push(l._accessibleDiv),l._accessibleDiv=null,h--;else{a=l._accessibleDiv;var c=l.hitArea,d=l.worldTransform;l.hitArea?(a.style.left=(d.tx+c.x*d.a)*s+"px",a.style.top=(d.ty+c.y*d.d)*o+"px",a.style.width=c.width*d.a*s+"px",a.style.height=c.height*d.d*o+"px"):(c=l.getBounds(),this.capHitArea(c),a.style.left=c.x*s+"px",a.style.top=c.y*o+"px",a.style.width=c.width*s+"px",a.style.height=c.height*o+"px",a.title!==l.accessibleTitle&&null!==l.accessibleTitle&&(a.title=l.accessibleTitle),a.getAttribute("aria-label")!==l.accessibleHint&&null!==l.accessibleHint&&a.setAttribute("aria-label",l.accessibleHint)),l.accessibleTitle===a.title&&l.tabIndex===a.tabIndex||(a.title=l.accessibleTitle,a.tabIndex=l.tabIndex,this.debug&&this.updateDebugHTML(a))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}()})),a.register("8TYxR",(function(e,i){t(e.exports,"Container",(()=>f)),t(e.exports,"DisplayObject",(()=>u)),t(e.exports,"TemporaryDisplayObject",(()=>p)),t(e.exports,"Bounds",(()=>l));var r=a("iZTtn"),n=a("VYQOJ"),o=a("5pLOZ"),h=a("bqYnE");r.settings.SORTABLE_CHILDREN=!1;var l=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:((t=t||new n.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,s=this.maxX,r=this.maxY,n=t[0],o=t[1];e=n<e?n:e,i=o<i?o:i,s=n>s?n:s,r=o>r?o:r,e=(n=t[2])<e?n:e,i=(o=t[3])<i?o:i,s=n>s?n:s,r=o>r?o:r,e=(n=t[4])<e?n:e,i=(o=t[5])<i?o:i,s=n>s?n:s,r=o>r?o:r,e=(n=t[6])<e?n:e,i=(o=t[7])<i?o:i,s=n>s?n:s,r=o>r?o:r,this.minX=e,this.minY=i,this.maxX=s,this.maxY=r},t.prototype.addFrame=function(t,e,i,s,r){this.addFrameMatrix(t.worldTransform,e,i,s,r)},t.prototype.addFrameMatrix=function(t,e,i,s,r){var n=t.a,o=t.b,a=t.c,h=t.d,l=t.tx,c=t.ty,d=this.minX,u=this.minY,p=this.maxX,m=this.maxY,f=n*e+a*i+l,_=o*e+h*i+c;d=f<d?f:d,u=_<u?_:u,p=f>p?f:p,m=_>m?_:m,d=(f=n*s+a*i+l)<d?f:d,u=(_=o*s+h*i+c)<u?_:u,p=f>p?f:p,m=_>m?_:m,d=(f=n*e+a*r+l)<d?f:d,u=(_=o*e+h*r+c)<u?_:u,p=f>p?f:p,m=_>m?_:m,d=(f=n*s+a*r+l)<d?f:d,u=(_=o*s+h*r+c)<u?_:u,p=f>p?f:p,m=_>m?_:m,this.minX=d,this.minY=u,this.maxX=p,this.maxY=m},t.prototype.addVertexData=function(t,e,i){for(var s=this.minX,r=this.minY,n=this.maxX,o=this.maxY,a=e;a<i;a+=2){var h=t[a],l=t[a+1];s=h<s?h:s,r=l<r?l:r,n=h>n?h:n,o=l>o?l:o}this.minX=s,this.minY=r,this.maxX=n,this.maxY=o},t.prototype.addVertices=function(t,e,i,s){this.addVerticesMatrix(t.worldTransform,e,i,s)},t.prototype.addVerticesMatrix=function(t,e,i,s,r,n){void 0===r&&(r=0),void 0===n&&(n=r);for(var o=t.a,a=t.b,h=t.c,l=t.d,c=t.tx,d=t.ty,u=this.minX,p=this.minY,m=this.maxX,f=this.maxY,_=i;_<s;_+=2){var g=e[_],b=e[_+1],y=o*g+h*b+c,w=l*b+a*g+d;u=Math.min(u,y-r),m=Math.max(m,y+r),p=Math.min(p,w-n),f=Math.max(f,w+n)}this.minX=u,this.minY=p,this.maxX=m,this.maxY=f},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,s=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>s?t.maxX:s,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,s=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,n=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&s<=n){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=s<a?s:a,this.maxX=r>h?r:h,this.maxY=n>l?n:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,n=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&s<=n){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=s<a?s:a,this.maxX=r>h?r:h,this.maxY=n>l?n:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,i,s,r,n){t-=r,e-=n,i+=r,s+=n,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>s?this.maxY:s},t}(),c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function d(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var u=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new n.Transform,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new l,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return d(e,t),e.mixin=function(t){for(var i=Object.keys(t),s=0;s<i.length;++s){var r=i[s];Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new n.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),t=this._localBoundsRect),this._localBounds||(this._localBounds=new l);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,r=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=s,this._bounds.updateID+=this._boundsID-r,o},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,s){return e&&(t=e.toGlobal(t,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,s,r,n,o,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===s&&(s=1),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=s||1,this.rotation=r,this.skew.x=n,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new p),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*n.RAD_TO_DEG},set:function(t){this.transform.rotation=t*n.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1);(this._mask=t,this._mask)&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),e}(s(h)),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return d(e,t),e}(u);function m(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}u.prototype.displayObjectUpdateTransform=u.prototype.updateTransform;var f=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=r.settings.SORTABLE_CHILDREN,e.sortDirty=!1,e}return d(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var s=0;s<e.length;s++)this.addChild(e[s]);else{var r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),s=this.getChildIndex(e);this.children[i]=e,this.children[s]=t,this.onChildrenChange(i<s?i:s)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);o.removeItems(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var s=0;s<e.length;s++)this.removeChild(e[s]);else{var r=e[0],n=this.children.indexOf(r);if(-1===n)return null;r.parent=null,r.transform._parentID=-1,o.removeItems(this.children,n,1),this._boundsID++,this.onChildrenChange(n),r.emit("removed",this),this.emit("childRemoved",r,this,n)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,o.removeItems(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var i,s=t,r=e-s;if(r>0&&r<=e){i=this.children.splice(s,r);for(var n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var s=this.children[e];s._lastSortedIndex=e,t||0===s.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(m),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,i){void 0===i&&(i=!1);var s=t.prototype.getLocalBounds.call(this,e);if(!i)for(var r=0,n=this.children.length;r<n;++r){var o=this.children[r];o.visible&&o.updateTransform()}return s},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<e.length;s++)e[s].enabled&&this._enabledFilters.push(e[s]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);s=0;for(var r=this.children.length;s<r;s++)this.children[s].render(t);t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,s=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<s.length;++r)s[r].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(u);f.prototype.containerUpdateTransform=f.prototype.updateTransform})),a.register("VYQOJ",(function(e,i){t(e.exports,"Circle",(()=>l)),t(e.exports,"Polygon",(()=>d)),t(e.exports,"PI_2",(()=>n)),t(e.exports,"Point",(()=>p)),t(e.exports,"Transform",(()=>A)),t(e.exports,"RAD_TO_DEG",(()=>o)),t(e.exports,"DEG_TO_RAD",(()=>a)),t(e.exports,"Rectangle",(()=>h)),t(e.exports,"ObservablePoint",(()=>m)),t(e.exports,"SHAPES",(()=>s)),t(e.exports,"Matrix",(()=>f)),t(e.exports,"Ellipse",(()=>c)),t(e.exports,"groupD8",(()=>S)),t(e.exports,"RoundedRectangle",(()=>u));
/*!
 * @pixi/math - v5.3.10
 * Compiled Mon, 07 Jun 2021 22:37:25 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var s,r,n=2*Math.PI,o=180/Math.PI,a=Math.PI/180;(r=s||(s={}))[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC";var h=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=s.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=s,this.height=Math.max(r-s,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,s=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=s-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=s,this.height=r-s,this},t}(),l=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=s.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,s=this.x-t,r=this.y-e;return(s*=s)+(r*=r)<=i},t.prototype.getBounds=function(){return new h(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}(),c=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=i,this.height=r,this.type=s.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,s=(e-this.y)/this.height;return(i*=i)+(s*=s)<=1},t.prototype.getBounds=function(){return new h(this.x-this.width,this.y-this.height,this.width,this.height)},t}(),d=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var r=Array.isArray(e[0])?e[0]:e;if("number"!=typeof r[0]){for(var n=[],o=0,a=r.length;o<a;o++)n.push(r[o].x,r[o].y);r=n}this.points=r,this.type=s.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,s=this.points.length/2,r=0,n=s-1;r<s;n=r++){var o=this.points[2*r],a=this.points[2*r+1],h=this.points[2*n],l=this.points[2*n+1];a>e!=l>e&&t<(e-a)/(l-a)*(h-o)+o&&(i=!i)}return i},t}(),u=function(){function t(t,e,i,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=20),this.x=t,this.y=e,this.width=i,this.height=r,this.radius=n,this.type=s.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),s=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+s*s<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+s*s<=r)return!0;if(i*i+(s=e-(this.y+this.height-this.radius))*s<=r)return!0;if((i=t-(this.x+this.radius))*i+s*s<=r)return!0}return!1},t}(),p=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t}(),m=function(){function t(t,e,i,s){void 0===i&&(i=0),void 0===s&&(s=0),this._x=i,this._y=s,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),f=function(){function t(t,e,i,s,r,n){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===r&&(r=0),void 0===n&&(n=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=s,this.tx=r,this.ty=n}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,s,r,n){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=r,this.ty=n,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new p;var i=t.x,s=t.y;return e.x=this.a*i+this.c*s+this.tx,e.y=this.b*i+this.d*s+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new p;var i=1/(this.a*this.d+this.c*-this.b),s=t.x,r=t.y;return e.x=this.d*i*s+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),s=this.a,r=this.c,n=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=n*e-this.ty*i,this.ty=n*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,s=this.c,r=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,s,r,n,o,a,h){return this.a=Math.cos(o+h)*r,this.b=Math.sin(o+h)*r,this.c=-Math.sin(o-a)*n,this.d=Math.cos(o-a)*n,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,s=this.c,r=this.d,o=-Math.atan2(-s,r),a=Math.atan2(i,e),h=Math.abs(o+a);return h<1e-5||Math.abs(n-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(s*s+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,s=this.d,r=this.tx,n=t*s-e*i;return this.a=s/n,this.b=-e/n,this.c=-i/n,this.d=t/n,this.tx=(i*this.ty-s*r)/n,this.ty=-(t*this.ty-e*r)/n,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),_=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],g=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],b=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],y=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],w=[],v=[],x=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];w.push(e);for(var i=0;i<16;i++)for(var s=x(_[t]*_[i]+b[t]*g[i]),r=x(g[t]*_[i]+y[t]*g[i]),n=x(_[t]*b[i]+b[t]*y[i]),o=x(g[t]*b[i]+y[t]*y[i]),a=0;a<16;a++)if(_[a]===s&&g[a]===r&&b[a]===n&&y[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new f;h.set(_[t],g[t],b[t],y[t],0,0),v.push(h)}}();var S={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return _[t]},uY:function(t){return g[t]},vX:function(t){return b[t]},vY:function(t){return y[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return w[t][e]},sub:function(t,e){return w[t][S.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?S.S:S.N:2*Math.abs(e)<=Math.abs(t)?t>0?S.E:S.W:e>0?t>0?S.SE:S.SW:t>0?S.NE:S.NW},matrixAppendRotationInv:function(t,e,i,s){void 0===i&&(i=0),void 0===s&&(s=0);var r=v[S.inv(e)];r.tx=i,r.ty=s,t.append(r)}},A=function(){function t(){this.worldTransform=new f,this.localTransform=new f,this.position=new m(this.onChange,this,0,0),this.scale=new m(this.onChange,this,1,1),this.pivot=new m(this.onChange,this,0,0),this.skew=new m(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,s=this.worldTransform;s.a=e.a*i.a+e.b*i.c,s.b=e.a*i.b+e.b*i.d,s.c=e.c*i.a+e.d*i.c,s.d=e.c*i.b+e.d*i.d,s.tx=e.tx*i.a+e.ty*i.c+i.tx,s.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()})),a.register("5xWdg",(function(e,i){t(e.exports,"InteractionTrackingData",(()=>u)),t(e.exports,"InteractionManager",(()=>_)),t(e.exports,"InteractionEvent",(()=>d)),t(e.exports,"InteractionData",(()=>l)),t(e.exports,"interactiveTarget",(()=>m));var r=a("VYQOJ"),n=a("k3j5h"),o=a("8TYxR");a("5pLOZ");var h=a("bqYnE"),l=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new r.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var d=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),u=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),p=function(){function t(){this._tempPoint=new r.Point}return t.prototype.recursiveFindHit=function(t,e,i,s,r){if(!e||!e.visible)return!1;var n=t.data.global,o=!1,a=r=e.interactive||r,h=!0;if(e.hitArea?(s&&(e.worldTransform.applyInverse(n,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(s=!1,h=!1)),a=!1):e._mask&&s&&(e._mask.containsPoint&&e._mask.containsPoint(n)||(s=!1)),h&&e.interactiveChildren&&e.children)for(var l=e.children,c=l.length-1;c>=0;c--){var d=l[c],u=this.recursiveFindHit(t,d,i,s,a);if(u){if(!d.parent)continue;a=!1,u&&(t.target&&(s=!1),o=!0)}}return r&&(s&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(n)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o},t.prototype.findHit=function(t,e,i,s){this.recursiveFindHit(t,e,i,s,!1)},t}(),m={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};o.DisplayObject.mixin(m);var f={target:null,data:{global:null}},_=function(t){function e(e,i){var s=t.call(this)||this;return i=i||{},s.renderer=e,s.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,s.interactionFrequency=i.interactionFrequency||10,s.mouse=new l,s.mouse.identifier=1,s.mouse.global.set(-999999),s.activeInteractionData={},s.activeInteractionData[1]=s.mouse,s.interactionDataPool=[],s.eventData=new d,s.interactionDOMElement=null,s.moveWhenInside=!1,s.eventsAdded=!1,s.tickerAdded=!1,s.mouseOverRenderer=!1,s.supportsTouchEvents="ontouchstart"in window,s.supportsPointerEvents=!!window.PointerEvent,s.onPointerUp=s.onPointerUp.bind(s),s.processPointerUp=s.processPointerUp.bind(s),s.onPointerCancel=s.onPointerCancel.bind(s),s.processPointerCancel=s.processPointerCancel.bind(s),s.onPointerDown=s.onPointerDown.bind(s),s.processPointerDown=s.processPointerDown.bind(s),s.onPointerMove=s.onPointerMove.bind(s),s.processPointerMove=s.processPointerMove.bind(s),s.onPointerOut=s.onPointerOut.bind(s),s.processPointerOverOut=s.processPointerOverOut.bind(s),s.onPointerOver=s.onPointerOver.bind(s),s.cursorStyles={default:"inherit",pointer:"pointer"},s.currentCursorMode=null,s.cursor=null,s.resolution=1,s.delayedEvents=[],s.search=new p,s._tempDisplayObject=new o.TemporaryDisplayObject,s._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,s.setTargetElement(s.renderer.view,s.renderer.resolution),s}return function(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return f.target=null,f.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(f,e,null,!0),f.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(n.Ticker.system.add(this.tickerUpdate,this,n.UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(n.Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var s;s=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=1/this.resolution;t.x=(e-s.left)*(this.interactionDOMElement.width/s.width)*r,t.y=(i-s.top)*(this.interactionDOMElement.height/s.height)*r},e.prototype.processInteractive=function(t,e,i,s){var r=this.search.findHit(t,e,i,s),n=this.delayedEvents;if(!n.length)return r;t.stopPropagationHint=!1;var o=n.length;this.delayedEvents=[];for(var a=0;a<o;a++){var h=n[a],l=h.displayObject,c=h.eventString,d=h.eventData;d.stopsPropagatingAt===l&&(d.stopPropagationHint=!0),this.dispatchEvent(l,c,d)}return r},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,s=0;s<i;s++){var r=e[s],n=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,n);if(o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===r.pointerType)this.emit("touchstart",o);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var s=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new u(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===s.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===s.pointerType||"pen"===s.pointerType){var n=2===s.button;n?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,n?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var s=this.normalizeToPointerData(t),r=s.length,n=t.target!==this.interactionDOMElement?"outside":"",o=0;o<r;o++){var a=s[o],h=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,i,e||!n),this.emit(e?"pointercancel":"pointerup"+n,l),"mouse"===a.pointerType||"pen"===a.pointerType){var c=2===a.button;this.emit(c?"rightup"+n:"mouseup"+n,l)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+n,l),this.releaseInteractionDataForPointerId(a.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,s=t.data.identifier;void 0!==e.trackedPointers[s]&&(delete e.trackedPointers[s],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var s=t.data,r=t.data.identifier,n=e.trackedPointers[r],o="touch"===s.pointerType,a="mouse"===s.pointerType||"pen"===s.pointerType,h=!1;if(a){var l=2===s.button,c=u.FLAGS,d=l?c.RIGHT_DOWN:c.LEFT_DOWN,p=void 0!==n&&n.flags&d;i?(this.dispatchEvent(e,l?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,l?"rightclick":"click",t),h=!0)):p&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),n&&(l?n.rightDown=!1:n.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),n&&(a&&!h||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),n.over=!1))):n&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),n&&n.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=e.length,s=0;s<i;s++){var r=e[s],n=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,n);o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===r.pointerType&&this.emit("touchmove",o),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var s=t.data,r="touch"===s.pointerType,n="mouse"===s.pointerType||"pen"===s.pointerType;n&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),n&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),s=this.configureInteractionEventForDOMEvent(this.eventData,e,i);s.data.originalEvent=e,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var s=t.data,r=t.data.identifier,n="mouse"===s.pointerType||"pen"===s.pointerType,o=e.trackedPointers[r];i&&!o&&(o=e.trackedPointers[r]=new u(r)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(e,"pointerover",t),n&&this.delayDispatchEvent(e,"mouseover",t)),n&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),n&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),s=this.configureInteractionEventForDOMEvent(this.eventData,e,i);s.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",s)},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new l).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,s=t.changedTouches.length;i<s;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else if(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent)e.push(t);else{var n=t;void 0===n.isPrimary&&(n.isPrimary=!0),void 0===n.width&&(n.width=1),void 0===n.height&&(n.height=1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="mouse"),void 0===n.pointerId&&(n.pointerId=1),void 0===n.pressure&&(n.pressure=.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),n.isNormalized=!0,e.push(n)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(s(h))})),a.register("k3j5h",(function(e,i){t(e.exports,"UPDATE_PRIORITY",(()=>s)),t(e.exports,"Ticker",(()=>h)),t(e.exports,"TickerPlugin",(()=>l));var s,r,n=a("iZTtn");n.settings.TARGET_FPMS=.06,(r=s||(s={}))[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY";var o=function(){function t(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=0),void 0===s&&(s=!1),this.fn=t,this.context=e,this.priority=i,this.once=s,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),h=function(){function t(){var t=this;this._head=new o(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/n.settings.TARGET_FPMS,this.elapsedMS=1/n.settings.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=s.NORMAL),this._addListener(new o(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=s.NORMAL),this._addListener(new o(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*n.settings.TARGET_FPMS;for(var s=this._head,r=s.next;r;)r=r.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,n.settings.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),l=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,s.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?h.shared:new h,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()})),a.register("1ggcG",(function(e,i){t(e.exports,"Application",(()=>n));var s=a("8TYxR"),r=a("8lrKM"),n=function(){function t(e){var i=this;e=Object.assign({forceCanvas:!1},e),this.renderer=r.autoDetectRenderer(e),this.stage=new s.Container,t._plugins.forEach((function(t){t.init.call(i,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,i){var s=this,r=t._plugins.slice(0);r.reverse(),r.forEach((function(t){t.destroy.call(s)})),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null},t}();n._plugins=[];var o=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,i;if(e.cancelResize(),e._resizeTo===window)t=window.innerWidth,i=window.innerHeight;else{var s=e._resizeTo;t=s.clientWidth,i=s.clientHeight}e.renderer.resize(t,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();n.registerPlugin(o)})),a.register("8lrKM",(function(e,i){t(e.exports,"TextureUvs",(()=>O)),t(e.exports,"RenderTexturePool",(()=>N)),t(e.exports,"Geometry",(()=>J)),t(e.exports,"QuadUv",(()=>K)),t(e.exports,"Shader",(()=>Gt)),t(e.exports,"GLProgram",(()=>Qt)),t(e.exports,"Filter",(()=>kt)),t(e.exports,"AbstractRenderer",(()=>he)),t(e.exports,"ViewableBuffer",(()=>fe)),t(e.exports,"BatchRenderer",(()=>xe)),t(e.exports,"ObjectRenderer",(()=>et)),t(e.exports,"Texture",(()=>G)),t(e.exports,"resources",(()=>R)),t(e.exports,"autoDetectRenderer",(()=>ce)),t(e.exports,"RenderTexture",(()=>k)),t(e.exports,"TextureMatrix",(()=>Vt)),t(e.exports,"State",(()=>Ft)),t(e.exports,"defaultVertex",(()=>de)),t(e.exports,"System",(()=>B)),t(e.exports,"BatchPluginFactory",(()=>ve)),t(e.exports,"AbstractBatchRenderer",(()=>_e)),t(e.exports,"SpriteMaskFilter",(()=>Ut)),t(e.exports,"GLTexture",(()=>re)),t(e.exports,"BatchShaderGenerator",(()=>ge)),t(e.exports,"BatchGeometry",(()=>be)),t(e.exports,"Attribute",(()=>V)),t(e.exports,"BatchTextureArray",(()=>me)),t(e.exports,"BaseRenderTexture",(()=>M)),t(e.exports,"IGLUniformData",(()=>Zt)),t(e.exports,"defaultFilterVertex",(()=>ue)),t(e.exports,"Renderer",(()=>le)),t(e.exports,"MaskData",(()=>dt)),t(e.exports,"FilterState",(()=>$)),t(e.exports,"Quad",(()=>q)),t(e.exports,"checkMaxIfStatementsInShader",(()=>It)),t(e.exports,"systems",(()=>oe)),t(e.exports,"BatchDrawCall",(()=>pe)),t(e.exports,"GLFramebuffer",(()=>nt)),t(e.exports,"UniformGroup",(()=>Q)),t(e.exports,"uniformParsers",(()=>Ct)),t(e.exports,"Buffer",(()=>W)),t(e.exports,"BaseTexture",(()=>y)),t(e.exports,"Program",(()=>Lt)),t(e.exports,"Framebuffer",(()=>I));var r=a("iZTtn"),n=a("44Xx0"),o=a("5pLOZ"),h=a("bqYnE"),l=(r=a("iZTtn"),a("eIsNh")),c=a("k3j5h"),d=a("VYQOJ");r.settings.PREFER_ENV=r.isMobile.any?n.ENV.WEBGL:n.ENV.WEBGL2,r.settings.STRICT_TEXTURE_CACHE=!1;var u=[];function p(t,e){if(!t)return null;var i="";if("string"==typeof t){var s=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);s&&(i=s[1].toLowerCase())}for(var r=u.length-1;r>=0;--r){var n=u[r];if(n.test&&n.test(t,i))return new n(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function f(t,e){function i(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var _=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new l.Runner("setRealSize"),this.onUpdate=new l.Runner("update"),this.onError=new l.Runner("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),g=function(t){function e(e,i){var s=this,r=i||{},n=r.width,o=r.height;if(!n||!o)throw new Error("BufferResource width or height invalid");return(s=t.call(this,n,o)||this).data=e,s}return f(e,t),e.prototype.upload=function(t,e,i){var s=t.gl;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.ALPHA_MODES.UNPACK),i.width===e.width&&i.height===e.height?s.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,s.texImage2D(e.target,0,i.internalFormat,e.width,e.height,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(_),b={scaleMode:n.SCALE_MODES.NEAREST,format:n.FORMATS.RGBA,alphaMode:n.ALPHA_MODES.NPM},y=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var s=t.call(this)||this,a=(i=i||{}).alphaMode,h=i.mipmap,l=i.anisotropicLevel,c=i.scaleMode,d=i.width,u=i.height,m=i.wrapMode,f=i.format,g=i.type,b=i.target,y=i.resolution,w=i.resourceOptions;return!e||e instanceof _||((e=p(e,w)).internal=!0),s.width=d||0,s.height=u||0,s.resolution=y||r.settings.RESOLUTION,s.mipmap=void 0!==h?h:r.settings.MIPMAP_TEXTURES,s.anisotropicLevel=void 0!==l?l:r.settings.ANISOTROPIC_LEVEL,s.wrapMode=m||r.settings.WRAP_MODE,s.scaleMode=void 0!==c?c:r.settings.SCALE_MODE,s.format=f||n.FORMATS.RGBA,s.type=g||n.TYPES.UNSIGNED_BYTE,s.target=b||n.TARGETS.TEXTURE_2D,s.alphaMode=void 0!==a?a:n.ALPHA_MODES.UNPACK,void 0!==i.premultiplyAlpha&&(s.premultiplyAlpha=i.premultiplyAlpha),s.uid=o.uid(),s.touched=0,s.isPowerOfTwo=!1,s._refreshPOT(),s._glTextures={},s.dirtyId=0,s.dirtyStyleId=0,s.cacheId=null,s.valid=d>0&&u>0,s.textureCacheIds=[],s.destroyed=!1,s.resource=null,s._batchEnabled=0,s._batchLocation=0,s.parentTextureArray=null,s.setResource(e),s}return f(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=o.isPow2(this.realWidth)&&o.isPow2(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete o.BaseTextureCache[this.cacheId],delete o.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,i,s){void 0===s&&(s=r.settings.STRICT_TEXTURE_CACHE);var n="string"==typeof t,a=null;n?a=t:(t._pixiId||(t._pixiId="pixiid_"+o.uid()),a=t._pixiId);var h=o.BaseTextureCache[a];if(n&&s&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||((h=new e(t,i)).cacheId=a,e.addToCache(h,a)),h},e.fromBuffer=function(t,i,s,r){t=t||new Float32Array(i*s*4);var o=new g(t,{width:i,height:s}),a=t instanceof Float32Array?n.TYPES.FLOAT:n.TYPES.UNSIGNED_BYTE;return new e(o,Object.assign(b,r||{width:i,height:s,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),o.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete o.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)delete o.BaseTextureCache[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(s(h)),w=function(t){function e(e,i){var s=this,r=i||{},n=r.width,o=r.height;(s=t.call(this,n,o)||this).items=[],s.itemDirtyIds=[];for(var a=0;a<e;a++){var h=new y;s.items.push(h),s.itemDirtyIds.push(-2)}return s.length=e,s._load=null,s.baseTexture=null,s}return f(e,t),e.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof _?this.addResourceAt(t[i],i):this.addResourceAt(p(t[i],e),i))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],i=e.realWidth,s=e.realHeight;return t.resize(i,s),Promise.resolve(t)})),this._load},e}(_),v=function(t){function e(e,i){var s,r,n=this,o=i||{},a=o.width,h=o.height;return Array.isArray(e)?(s=e,r=e.length):r=e,n=t.call(this,r,{width:a,height:h})||this,s&&n.initFromArray(s,i),n}return f(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=n.TARGETS.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,i){var s=this,r=s.length,n=s.itemDirtyIds,o=s.items,a=t.gl;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,r,0,e.format,e.type,null);for(var h=0;h<r;h++){var l=o[h];n[h]<l.dirtyId&&(n[h]=l.dirtyId,l.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,h,l.resource.width,l.resource.height,1,e.format,e.type,l.resource.source))}return!0},e}(w),x=function(t){function e(e){var i=this,s=e,r=s.naturalWidth||s.videoWidth||s.width,n=s.naturalHeight||s.videoHeight||s.height;return(i=t.call(this,r,n)||this).source=e,i.noSubImage=!1,i}return f(e,t),e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=o.determineCrossOrigin(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,s){var r=t.gl,o=e.realWidth,a=e.realHeight;return s=s||this.source,r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.ALPHA_MODES.UNPACK),this.noSubImage||e.target!==r.TEXTURE_2D||i.width!==o||i.height!==a?(i.width=o,i.height=a,r.texImage2D(e.target,0,e.format,e.format,e.type,s)):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,s),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,s=e.naturalHeight||e.videoHeight||e.height;this.resize(i,s),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(_),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(x),A=function(t){function e(i,s){var r=this,o=s||{},a=o.width,h=o.height,l=o.autoLoad,c=o.linkBaseTexture;if(i&&i.length!==e.SIDES)throw new Error("Invalid length. Got "+i.length+", expected 6");r=t.call(this,6,{width:a,height:h})||this;for(var d=0;d<e.SIDES;d++)r.items[d].target=n.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+d;return r.linkBaseTexture=!1!==c,i&&r.initFromArray(i,s),!1!==l&&r.load(),r}return f(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=n.TARGETS.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,i){if(void 0===i&&(i=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=n.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,i,s){for(var r=this.itemDirtyIds,n=0;n<e.SIDES;n++){var o=this.items[n];r[n]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(t,o,s),r[n]=o.dirtyId):r[n]<-1&&(t.gl.texImage2D(o.target,0,s.internalFormat,i.realWidth,i.realHeight,0,i.format,s.type,null),r[n]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(w),P=function(t){function e(e,i){var s=this;if(i=i||{},!(e instanceof HTMLImageElement)){var n=new Image;x.crossOrigin(n,e,i.crossorigin),n.src=e,e=n}return s=t.call(this,e)||this,!e.complete&&s._width&&s._height&&(s._width=0,s._height=0),s.url=e.src,s._process=null,s.preserveBitmap=!1,s.createBitmap=(void 0!==i.createBitmap?i.createBitmap:r.settings.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,s.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,void 0!==i.premultiplyAlpha&&(s.premultiplyAlpha=i.premultiplyAlpha),s.bitmap=null,s._load=null,!1!==i.autoLoad&&s.load(),s}return f(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,i){var s=e.source;e.url=s.src;var r=function(){e.destroyed||(s.onload=null,s.onerror=null,e.resize(s.width,s.height),e._load=null,e.createBitmap?t(e.process()):t(e))};s.complete&&s.src?r():(s.onload=r,s.onerror=function(t){i(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===n.ALPHA_MODES.UNPACK?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},e.prototype.upload=function(e,i,s){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,s,this.bitmap),!this.preserveBitmap){var r=!0,n=i._glTextures;for(var o in n){var a=n[o];if(a!==s&&a.dirtyId!==i.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(x),C=function(t){function e(e,i){var s=this;return i=i||{},(s=t.call(this,document.createElement("canvas"))||this)._width=0,s._height=0,s.svg=e,s.scale=i.scale||1,s._overrideWidth=i.width,s._overrideHeight=i.height,s._resolve=null,s._crossorigin=i.crossorigin,s._load=null,!1!==i.autoLoad&&s.load(),s}return f(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;x.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(i){t._resolve&&(e.onerror=null,t.onError.emit(i))},e.onload=function(){if(t._resolve){var i=e.width,s=e.height;if(!i||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=i*t.scale,n=s*t.scale;(t._overrideWidth||t._overrideHeight)&&(r=t._overrideWidth||t._overrideHeight/s*i,n=t._overrideHeight||t._overrideWidth/i*s),r=Math.round(r),n=Math.round(n);var a=t.source;a.width=r,a.height=n,a._pixiId="canvas_"+o.uid(),a.getContext("2d").drawImage(e,0,0,i,s,0,0,r,n),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),s={};return i&&(s[i[1]]=Math.round(parseFloat(i[3])),s[i[5]]=Math.round(parseFloat(i[7]))),s},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(x),T=function(t){function e(i,s){var r=this;if(s=s||{},!(i instanceof HTMLVideoElement)){var n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),"string"==typeof i&&(i=[i]);var o=i[0].src||i[0];x.crossOrigin(n,o,s.crossorigin);for(var a=0;a<i.length;++a){var h=document.createElement("source"),l=i[a],c=l.src,d=l.mime,u=(c=c||i[a]).split("?").shift().toLowerCase(),p=u.substr(u.lastIndexOf(".")+1);d=d||e.MIME_TYPES[p]||"video/"+p,h.src=c,h.type=d,n.appendChild(h)}i=n}return(r=t.call(this,i)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=s.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==s.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==s.autoLoad&&r.load(),r}return f(e,t),e.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var i=c.Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(c.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(c.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&c.Ticker.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(c.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(c.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(x),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(x);u.push(P,E,S,T,C,g,A,v);var R={Resource:_,BaseImageResource:x,INSTALLED:u,autoDetectResource:p,AbstractMultiResource:w,ArrayResource:v,BufferResource:g,CanvasResource:S,CubeResource:A,ImageResource:P,SVGResource:C,VideoResource:T,ImageBitmapResource:E},B=function(){function t(t){this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.upload=function(t,e,i){var s=t.gl;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.ALPHA_MODES.UNPACK),i.width===e.width&&i.height===e.height?s.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,s.texImage2D(e.target,0,1===t.context.webGLVersion?s.DEPTH_COMPONENT:s.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(g),I=function(){function t(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new l.Runner("disposeFramebuffer"),this.multisample=n.MSAA_QUALITY.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new y(null,{scaleMode:n.SCALE_MODES.NEAREST,resolution:1,mipmap:n.MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new y(new D(null,{width:this.width,height:this.height}),{scaleMode:n.SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:n.MIPMAP_MODES.OFF,format:n.FORMATS.DEPTH_COMPONENT,type:n.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var s=this.colorTextures[i],r=s.resolution;s.setSize(t/r,e/r)}if(this.depthTexture){r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),M=function(t){function e(e){var i=this;if("number"==typeof e){var s=arguments[0],r=arguments[1],n=arguments[2],o=arguments[3];e={width:s,height:r,scaleMode:n,resolution:o}}i=t.call(this,null,e)||this;var a=e||{},h=a.width,l=a.height;return i.mipmap=0,i.width=Math.ceil(h)||100,i.height=Math.ceil(l)||100,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new I(i.width*i.resolution,i.height*i.resolution).addColorTexture(0,i),i.maskStack=[],i.filterStack=[{}],i}return f(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(y),O=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,i){var s=e.width,r=e.height;if(i){var n=t.width/2/s,o=t.height/2/r,a=t.x/s+n,h=t.y/r+o;i=d.groupD8.add(i,d.groupD8.NW),this.x0=a+n*d.groupD8.uX(i),this.y0=h+o*d.groupD8.uY(i),i=d.groupD8.add(i,2),this.x1=a+n*d.groupD8.uX(i),this.y1=h+o*d.groupD8.uY(i),i=d.groupD8.add(i,2),this.x2=a+n*d.groupD8.uX(i),this.y2=h+o*d.groupD8.uY(i),i=d.groupD8.add(i,2),this.x3=a+n*d.groupD8.uX(i),this.y3=h+o*d.groupD8.uY(i)}else this.x0=t.x/s,this.y0=t.y/r,this.x1=(t.x+t.width)/s,this.y1=t.y/r,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/r,this.x3=t.x/s,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t}(),L=new O,G=function(t){function e(i,s,r,n,o,a){var h=t.call(this)||this;if(h.noFrame=!1,s||(h.noFrame=!0,s=new d.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),h.baseTexture=i,h._frame=s,h.trim=n,h.valid=!1,h._uvs=L,h.uvMatrix=null,h.orig=r||s,h._rotate=Number(o||0),!0===o)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=a?new d.Point(a.x,a.y):new d.Point(0,0),h._updateID=0,h.textureCacheIds=[],i.valid?h.noFrame?i.valid&&h.onBaseTextureUpdated(i):h.frame=s:i.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&i.on("update",h.onBaseTextureUpdated,h),h}return f(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture;i&&i.url&&o.TextureCache[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===L&&(this._uvs=new O),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,s){void 0===i&&(i={}),void 0===s&&(s=r.settings.STRICT_TEXTURE_CACHE);var n="string"==typeof t,a=null;n?a=t:(t._pixiId||(t._pixiId="pixiid_"+o.uid()),a=t._pixiId);var h=o.TextureCache[a];if(n&&s&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=o.getResolutionOfUrl(t)),(h=new e(new y(t,i))).baseTexture.cacheId=a,y.addToCache(h.baseTexture,a),e.addToCache(h,a)),h},e.fromURL=function(t,i){var s=Object.assign({autoLoad:!1},null==i?void 0:i.resourceOptions),r=e.from(t,Object.assign({resourceOptions:s},i),!1),n=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):n.load().then((function(){return Promise.resolve(r)}))},e.fromBuffer=function(t,i,s,r){return new e(y.fromBuffer(t,i,s,r))},e.fromLoader=function(t,i,s){var n=new P(t);n.url=i;var a=new e(new y(n,{scaleMode:r.settings.SCALE_MODE,resolution:o.getResolutionOfUrl(i)}));return s||(s=i),y.addToCache(a.baseTexture,s),e.addToCache(a,s),s!==i&&(y.addToCache(a.baseTexture,i),e.addToCache(a,i)),a},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),o.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete o.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)o.TextureCache[t.textureCacheIds[s]]===t&&delete o.TextureCache[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,s=t.width,r=t.height,n=e+s>this.baseTexture.width,o=i+r>this.baseTexture.height;if(n||o){var a=n&&o?"and":"or",h="X: "+e+" + "+s+" = "+(e+s)+" > "+this.baseTexture.width,l="Y: "+i+" + "+r+" = "+(i+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+l)}this.valid=s&&r&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(s(h));function F(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}G.EMPTY=new G(new y),F(G.EMPTY),F(G.EMPTY.baseTexture),G.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new G(new y(new S(t)))}(),F(G.WHITE),F(G.WHITE.baseTexture);var k=function(t){function e(e,i){var s=this,r=null;if(!(e instanceof M)){var n=arguments[1],o=arguments[2],a=arguments[3],h=arguments[4];console.warn("Please use RenderTexture.create("+n+", "+o+") instead of the ctor directly."),r=arguments[0],i=null,e=new M({width:n,height:o,scaleMode:a,resolution:h})}return(s=t.call(this,e,i)||this).legacyRenderer=r,s.valid=!0,s.filterFrame=null,s.filterPoolKey=null,s.updateUvs(),s}return f(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new M(t))},e}(G),N=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e){var i=new M(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new k(i)},t.prototype.getOptimalTexture=function(e,i,s){void 0===s&&(s=1);var r=t.SCREEN_KEY;e*=s,i*=s,this.enableFullScreen&&e===this._pixelsWidth&&i===this._pixelsHeight||(r=(65535&(e=o.nextPow2(e)))<<16|65535&(i=o.nextPow2(i))),this.texturePool[r]||(this.texturePool[r]=[]);var n=this.texturePool[r].pop();return n||(n=this.createTexture(e,i)),n.filterPoolKey=r,n.setResolution(s),n},t.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){var i=t.SCREEN_KEY,s=this.texturePool[i];if(this.enableFullScreen=e.width>0&&e.height>0,s)for(var r=0;r<s.length;r++)s[r].destroy(!0);this.texturePool[i]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY="screen",t}(),V=function(){function t(t,e,i,s,r,n,o){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===s&&(s=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=s,this.stride=r,this.start=n,this.instance=o}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,i,s,r,n){return new t(e,i,s,r,n)},t}(),U=0,W=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=U++,this.disposeRunner=new l.Runner("disposeBuffer")}return t.prototype.update=function(t){this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}();function j(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var X={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Y={5126:4,5123:2,5121:1},H=0,z={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},J=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=H++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new l.Runner("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,i,s,r,n,o,a){if(void 0===i&&(i=0),void 0===s&&(s=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof W||(e instanceof Array&&(e=new Float32Array(e)),e=new W(e));var h=t.split("|");if(h.length>1){for(var l=0;l<h.length;l++)this.addAttribute(h[l],e,i,s,r);return this}var c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new V(c,i,s,r,n,o,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof W||(t instanceof Array&&(t=new Uint16Array(t)),t=new W(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],s=new W;for(t in this.attributes){var r=this.attributes[t],n=this.buffers[r.buffer];e.push(n.data),i.push(r.size*Y[r.type]/4),r.buffer=0}for(s.data=function(t,e){for(var i=0,s=0,r={},n=0;n<t.length;n++)s+=e[n],i+=t[n].length;var o=new ArrayBuffer(4*i),a=null,h=0;for(n=0;n<t.length;n++){var l=e[n],c=t[n],d=j(c);r[d]||(r[d]=new X[d](o)),a=r[d];for(var u=0;u<c.length;u++)a[(u/l|0)*s+h+u%l]=c[u];h+=l}return new Float32Array(o)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[s],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,i=0;i<this.buffers.length;i++)e.buffers[i]=new W(this.buffers[i].data.slice(0));for(var i in this.attributes){var s=this.attributes[i];e.attributes[i]=new V(s.buffer,s.size,s.normalized,s.type,s.stride,s.start,s.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},t.merge=function(e){for(var i,s=new t,r=[],n=[],o=[],a=0;a<e.length;a++){i=e[a];for(var h=0;h<i.buffers.length;h++)n[h]=n[h]||0,n[h]+=i.buffers[h].data.length,o[h]=0}for(a=0;a<i.buffers.length;a++)r[a]=new(z[j(i.buffers[a].data)])(n[a]),s.buffers[a]=new W(r[a]);for(a=0;a<e.length;a++){i=e[a];for(h=0;h<i.buffers.length;h++)r[h].set(i.buffers[h].data,o[h]),o[h]+=i.buffers[h].data.length}if(s.attributes=i.attributes,i.indexBuffer){s.indexBuffer=s.buffers[i.buffers.indexOf(i.indexBuffer)],s.indexBuffer.index=!0;var l=0,c=0,d=0,u=0;for(a=0;a<i.buffers.length;a++)if(i.buffers[a]!==i.indexBuffer){u=a;break}for(var a in i.attributes){var p=i.attributes[a];(0|p.buffer)===u&&(c+=p.size*Y[p.type]/4)}for(a=0;a<e.length;a++){var m=e[a].indexBuffer.data;for(h=0;h<m.length;h++)s.indexBuffer.data[h+d]+=l;l+=i.buffers[u].data.length/c,d+=m.length}}return s},t}(),q=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return f(e,t),e}(J),K=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new W(e.vertices),e.uvBuffer=new W(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return f(e,t),e.prototype.map=function(t,e){var i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+e.width/t.width,this.uvs[3]=s,this.uvs[4]=i+e.width/t.width,this.uvs[5]=s+e.height/t.height,this.uvs[6]=i,this.uvs[7]=s+e.height/t.height,i=e.x,s=e.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+e.width,this.vertices[3]=s,this.vertices[4]=i+e.width,this.vertices[5]=s+e.height,this.vertices[6]=i,this.vertices[7]=s+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(J),Z=0,Q=function(){function t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Z++,this.static=!!e}return t.prototype.update=function(){this.dirtyId++},t.prototype.add=function(e,i,s){this.uniforms[e]=new t(i,s)},t.from=function(e,i){return new t(e,i)},t}(),$=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new d.Rectangle,this.destinationFrame=new d.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),tt=function(t){function e(e){var i=t.call(this,e)||this;return i.defaultFilterStack=[{}],i.texturePool=new N,i.texturePool.setScreenSize(e.view),i.statePool=[],i.quad=new q,i.quadUv=new K,i.tempRect=new d.Rectangle,i.activeState={},i.globalUniforms=new Q({outputFrame:i.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),i.forceClear=!1,i.useMaxPadding=!1,i}return f(e,t),e.prototype.push=function(t,e){for(var i=this.renderer,s=this.defaultFilterStack,r=this.statePool.pop()||new $,n=e[0].resolution,o=e[0].padding,a=e[0].autoFit,h=e[0].legacy,l=1;l<e.length;l++){var c=e[l];n=Math.min(n,c.resolution),o=this.useMaxPadding?Math.max(o,c.padding):o+c.padding,a=a&&c.autoFit,h=h||c.legacy}1===s.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),s.push(r),r.resolution=n,r.legacy=h,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(o),a&&r.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),r.sourceFrame.ceil(n),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,n),r.filters=e,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height;var d=this.tempRect;d.width=r.sourceFrame.width,d.height=r.sourceFrame.height,r.renderTexture.filterFrame=r.sourceFrame,i.renderTexture.bind(r.renderTexture,r.sourceFrame,d),i.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var s=this.globalUniforms.uniforms;s.outputFrame=e.sourceFrame,s.resolution=e.resolution;var r=s.inputSize,o=s.inputPixel,a=s.inputClamp;if(r[0]=e.destinationFrame.width,r[1]=e.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],o[0]=r[0]*e.resolution,o[1]=r[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*r[2]-.5*o[2],a[3]=e.sourceFrame.height*r[3]-.5*o[3],e.legacy){var h=s.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(e.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,l.renderTexture,n.CLEAR_MODES.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var c=e.renderTexture,d=this.getOptimalFilterTexture(c.width,c.height,e.resolution);d.filterFrame=c.filterFrame;var u=0;for(u=0;u<i.length-1;++u){i[u].apply(this,c,d,n.CLEAR_MODES.CLEAR,e);var p=c;c=d,d=p}i[u].apply(this,c,l.renderTexture,n.CLEAR_MODES.BLEND,e),this.returnFilterTexture(c),this.returnFilterTexture(d)}e.clear(),this.statePool.push(e)},e.prototype.bindAndClear=function(t,e){if(void 0===e&&(e=n.CLEAR_MODES.CLEAR),t&&t.filterFrame){var i=this.tempRect;i.width=t.filterFrame.width,i.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,i)}else this.renderer.renderTexture.bind(t);"boolean"==typeof e&&(e=e?n.CLEAR_MODES.CLEAR:n.CLEAR_MODES.BLEND,o.deprecation("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(e===n.CLEAR_MODES.CLEAR||e===n.CLEAR_MODES.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},e.prototype.applyFilter=function(t,e,i,s){var r=this.renderer;this.bindAndClear(i,s),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,r.state.set(t.state),r.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(n.DRAW_MODES.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(n.DRAW_MODES.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,s=i.sourceFrame,r=i.destinationFrame,n=e._texture.orig,o=t.set(r.width,0,0,r.height,s.x,s.y),a=e.worldTransform.copyTo(d.Matrix.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/n.width,1/n.height),o.translate(e.anchor.x,e.anchor.y),o},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(t,e,i)},e.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var i=t;t=e,e=i}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return s.filterFrame=t.filterFrame,s},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(B),et=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),it=function(t){function e(e){var i=t.call(this,e)||this;return i.emptyRenderer=new et(e),i.currentRenderer=i.emptyRenderer,i}return f(e,t),e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,s=e-1;s>=0;--s)t[s]=i[s]||null,t[s]&&(t[s]._batchLocation=s)},e.prototype.boundArray=function(t,e,i,s){for(var r=t.elements,n=t.ids,o=t.count,a=0,h=0;h<o;h++){var l=r[h],c=l._batchLocation;if(c>=0&&c<s&&e[c]===l)n[h]=c;else for(;a<s;){var d=e[a];if(!d||d._batchEnabled!==i||d._batchLocation!==a){n[h]=a,l._batchLocation=a,e[a]=l;break}a++}}},e}(B),st=0,rt=function(t){function e(e){var i=t.call(this,e)||this;return i.webGLVersion=1,i.extensions={},i.supports={uint32Indices:!1},i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),e.view.addEventListener("webglcontextlost",i.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i}return f(e,t),Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=st++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=st++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var i;if(r.settings.PREFER_ENV>=n.ENV.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var s=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(B),nt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=n.MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},ot=new d.Rectangle,at=function(t){function e(e){var i=t.call(this,e)||this;return i.managedFramebuffers=[],i.unknownFramebuffer=new I(10,10),i.msaaSamples=null,i}return f(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new d.Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;r.settings.PREFER_ENV===n.ENV.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,e){var i=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var r=0;r<t.colorTextures.length;r++){var n=t.colorTextures[r];this.renderer.texture.unbind(n.parentTextureArray||n)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,i,s){var r=this.viewport;r.width===i&&r.height===s&&r.x===t&&r.y===e||(r.x=t,r.y=e,r.width=i,r.height=s,this.gl.viewport(t,e,i,s))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,e,i,s,r){void 0===r&&(r=n.BUFFER_BITS.COLOR|n.BUFFER_BITS.DEPTH);var o=this.gl;o.clearColor(t,e,i,s),o.clear(r)},e.prototype.initFramebuffer=function(t){var e=this.gl,i=new nt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},e.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var s=t.colorTextures,r=0;r<s.length;r++)this.renderer.texture.bind(s[r],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures.length;e.drawBuffers||(s=Math.min(s,1)),i.multisample>1&&(i.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,i.msaaBuffer));for(var r=[],n=0;n<s;n++)if(!(0===n&&i.multisample>1)){var o=t.colorTextures[n],a=o.parentTextureArray||o;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,o.target,a._glTextures[this.CONTEXT_UID].texture,0),r.push(e.COLOR_ATTACHMENT0+n)}if((r.length>1&&e.drawBuffers(r),t.depthTexture)&&this.writeDepthTexture){var h=t.depthTexture;this.renderer.texture.bind(h,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,0)}i.stencil||!t.stencil&&!t.depth||(i.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i.stencil))},e.prototype.detectSamples=function(t){var e=this.msaaSamples,i=n.MSAA_QUALITY.NONE;if(t<=1||null===e)return i;for(var s=0;s<e.length;s++)if(e[s]<=t){i=e[s];break}return 1===i&&(i=n.MSAA_QUALITY.NONE),i},e.prototype.blit=function(t,e,i){var s=this,r=s.current,n=s.renderer,o=s.gl,a=s.CONTEXT_UID;if(2===n.context.webGLVersion&&r){var h=r.glFramebuffers[a];if(h){if(!t){if(h.multisample<=1)return;h.blitFramebuffer||(h.blitFramebuffer=new I(r.width,r.height),h.blitFramebuffer.addColorTexture(0,r.colorTextures[0])),(t=h.blitFramebuffer).width=r.width,t.height=r.height}e||((e=ot).width=r.width,e.height=r.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var r=this.managedFramebuffers.indexOf(t);r>=0&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(s.deleteFramebuffer(i.framebuffer),i.stencil&&s.deleteRenderbuffer(i.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var i=t.width,s=t.height,r=this.gl,n=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,n),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,i,s),e.stencil=n,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new d.Rectangle},e}(B),ht=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},lt={5126:4,5123:2,5121:1},ct=function(t){function e(e){var i=t.call(this,e)||this;return i._activeGeometry=null,i._activeVao=null,i.hasVao=!0,i.hasInstance=!0,i.canUseUInt32ElementIndex=!1,i.managedGeometries={},i.managedBuffers={},i}return f(e,t),e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var i=this.renderer.context.extensions.vertexArrayObject;r.settings.PREFER_ENV===n.ENV.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,n){return s.drawElementsInstancedANGLE(t,e,i,r,n)},t.drawArraysInstanced=function(t,e,i,r){return s.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,s=t.glVertexArrayObjects[this.CONTEXT_UID],r=!1;s||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=s={},r=!0);var n=s[e.program.id]||this.initGeometryVao(t,e.program,r);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?i.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var s=t.buffers[i],r=s._glBuffers[this.CONTEXT_UID];if(s._updateID!==r.updateID){r.updateID=s._updateID;var n=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(n,r.buffer),this._boundBuffer=r,r.byteLength>=s.data.byteLength)e.bufferSubData(n,0,s.data);else{var o=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=s.data.byteLength,e.bufferData(n,s.data,o)}}}},e.prototype.checkCompatibility=function(t,e){var i=t.attributes,s=e.attributeData;for(var r in s)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},e.prototype.getSignature=function(t,e){var i=t.attributes,s=e.attributeData,r=["g",t.id];for(var n in i)s[n]&&r.push(n);return r.join("-")},e.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0),this.checkCompatibility(t,e);var s=this.gl,r=this.CONTEXT_UID,n=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[n];if(a)return o[e.id]=a,a;var h=t.buffers,l=t.attributes,c={},d={};for(var u in h)c[u]=0,d[u]=0;for(var u in l)!l[u].size&&e.attributeData[u]?l[u].size=e.attributeData[u].size:l[u].size||console.warn("PIXI Geometry attribute '"+u+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[u].buffer]+=l[u].size*lt[l[u].type];for(var u in l){var p=l[u],m=p.size;void 0===p.stride&&(c[p.buffer]===m*lt[p.type]?p.stride=0:p.stride=c[p.buffer]),void 0===p.start&&(p.start=d[p.buffer],d[p.buffer]+=m*lt[p.type])}a=s.createVertexArray(),s.bindVertexArray(a);for(var f=0;f<h.length;f++){var _=h[f];_._glBuffers[r]||(_._glBuffers[r]=new ht(s.createBuffer()),this.managedBuffers[_.id]=_,_.disposeRunner.add(this)),i&&_._glBuffers[r].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[n]=a,a},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this),i&&(e||s.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,r=t.buffers;if(t.disposeRunner.remove(this),i){for(var n=0;n<r.length;n++){var o=r[n]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(r[n],e)}if(!e)for(var a in i)if("g"===a[0]){var h=i[a];this._activeVao===h&&this.unbind(),s.deleteVertexArray(h)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);e=Object.keys(this.managedBuffers);for(i=0;i<e.length;i++)this.disposeBuffer(this.managedBuffers[e[i]],t)},e.prototype.activateVao=function(t,e){var i=this.gl,s=this.CONTEXT_UID,r=t.buffers,n=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[s].buffer);var o=null;for(var a in n){var h=n[a],l=r[h.buffer]._glBuffers[s];if(e.attributeData[a]){o!==l&&(i.bindBuffer(i.ARRAY_BUFFER,l.buffer),o=l);var c=e.attributeData[a].location;if(i.enableVertexAttribArray(c),i.vertexAttribPointer(c,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(c,1)}}}},e.prototype.draw=function(t,e,i,s){var r=this.gl,n=this._activeGeometry;if(n.indexBuffer){var o=n.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?r.UNSIGNED_SHORT:r.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?n.instanced?r.drawElementsInstanced(t,e||n.indexBuffer.data.length,a,(i||0)*o,s||1):r.drawElements(t,e||n.indexBuffer.data.length,a,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else n.instanced?r.drawArraysInstanced(t,i,e||n.getSize(),s||1):r.drawArrays(t,i,e||n.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(B),dt=function(){function t(t){void 0===t&&(t=null),this.type=n.MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=n.MASK_TYPES.NONE,this.autoDetect=!0),this._target=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ut(t,e,i){var s=t.createShader(e);return t.shaderSource(s,i),t.compileShader(s),s}function pt(t,e,i,s){var r=ut(t,t.VERTEX_SHADER,e),n=ut(t,t.FRAGMENT_SHADER,i),o=t.createProgram();if(t.attachShader(o,r),t.attachShader(o,n),s)for(var a in s)t.bindAttribLocation(o,s[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(r))),t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(i),console.error(t.getShaderInfoLog(n))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(r),t.deleteShader(n),o}function mt(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function ft(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return mt(2*e);case"bvec3":return mt(3*e);case"bvec4":return mt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var _t,gt={},bt=gt;function yt(){if(bt===gt||bt&&bt.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.settings.PREFER_ENV>=n.ENV.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),bt=e}return bt}function wt(t,e,i){if("precision"!==t.substring(0,9)){var s=e;return e===n.PRECISION.HIGH&&i!==n.PRECISION.HIGH&&(s=n.PRECISION.MEDIUM),"precision "+s+" float;\n"+t}return i!==n.PRECISION.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var vt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function xt(t){return vt[t]}var St=null,At={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Pt(t,e){if(!St){var i=Object.keys(At);St={};for(var s=0;s<i.length;++s){var r=i[s];St[t[r]]=At[r]}}return St[e]}var Ct=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Tt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Et={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Rt,Bt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Dt(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}function It(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var s=Bt.replace(/%forloop%/gi,Dt(t));if(e.shaderSource(i,s),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}var Mt=0,Ot={},Lt=function(){function t(e,i,s){void 0===s&&(s="pixi-shader"),this.id=Mt++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(s=s.replace(/\s+/g,"-"),Ot[s]?(Ot[s]++,s+="-"+Ot[s]):Ot[s]=1,this.vertexSrc="#define SHADER_NAME "+s+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+s+"\n"+this.fragmentSrc,this.vertexSrc=wt(this.vertexSrc,r.settings.PRECISION_VERTEX,n.PRECISION.HIGH),this.fragmentSrc=wt(this.fragmentSrc,r.settings.PRECISION_FRAGMENT,function(){if(!_t){_t=n.PRECISION.MEDIUM;var t=yt();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);_t=e.precision?n.PRECISION.HIGH:n.PRECISION.MEDIUM}}return _t}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return t.prototype.extractData=function(t,e){var i=yt();if(i){var s=pt(i,t,e);this.attributeData=this.getAttributeData(s,i),this.uniformData=this.getUniformData(s,i),i.deleteProgram(s)}else this.uniformData={},this.attributeData={}},t.prototype.getAttributeData=function(t,e){for(var i={},s=[],r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var o=e.getActiveAttrib(t,n),a=Pt(e,o.type),h={type:a,name:o.name,size:xt(a),location:0};i[o.name]=h,s.push(h)}s.sort((function(t,e){return t.name>e.name?1:-1}));for(n=0;n<s.length;n++)s[n].location=n;return i},t.prototype.getUniformData=function(t,e){for(var i={},s=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<s;r++){var n=e.getActiveUniform(t,r),o=n.name.replace(/\[.*?\]$/,""),a=n.name.match(/\[.*?\]$/),h=Pt(e,n.type);i[o]={type:h,size:n.size,isArray:a,value:ft(h,n.size)}}return i},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,i,s){var r=e+i,n=o.ProgramCache[r];return n||(o.ProgramCache[r]=n=new t(e,i,s)),n},t}(),Gt=function(){function t(t,e){for(var i in this.program=t,this.uniformGroup=e?e instanceof Q?e:new Q(e):new Q({}),t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var s=e.uniforms[i];if(s.group&&this.checkUniformExists(t,s))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,i,s){return new t(Lt.from(e,i),s)},t}(),Ft=function(){function t(){this.data=0,this.blendMode=n.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==n.BLEND_MODES.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),kt=function(t){function e(i,s,n){var o=this,a=Lt.from(i||e.defaultVertexSrc,s||e.defaultFragmentSrc);return(o=t.call(this,a,n)||this).padding=0,o.resolution=r.settings.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new Ft,o}return f(e,t),e.prototype.apply=function(t,e,i,s,r){t.applyFilter(this,e,i,s)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Gt),Nt=new d.Matrix,Vt=function(){function t(t,e){this._texture=t,this.mapCoord=new d.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,s=0;s<t.length;s+=2){var r=t[s],n=t[s+1];e[s]=r*i.a+n*i.c+i.tx,e[s+1]=r*i.b+n*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var s=e.orig,r=e.trim;r&&(Nt.set(s.width/r.width,0,0,s.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Nt));var n=e.baseTexture,o=this.uClampFrame,a=this.clampMargin/n.resolution,h=this.clampOffset;return o[0]=(e._frame.x+a+h)/n.width,o[1]=(e._frame.y+a+h)/n.height,o[2]=(e._frame.x+e._frame.width-a+h)/n.width,o[3]=(e._frame.y+e._frame.height-a+h)/n.height,this.uClampOffset[0]=h/n.realWidth,this.uClampOffset[1]=h/n.realHeight,this.isSimple=e._frame.width===n.width&&e._frame.height===n.height&&0===e.rotate,!0},t}(),Ut=function(t){function e(e){var i=this,s=new d.Matrix;return i=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=s,i}return f(e,t),e.prototype.apply=function(t,e,i,s){var r=this.maskSprite,n=r._texture;n.valid&&(n.uvMatrix||(n.uvMatrix=new Vt(n,0)),n.uvMatrix.update(),this.uniforms.npmAlpha=n.baseTexture.alphaMode?0:1,this.uniforms.mask=n,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(n.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=n.uvMatrix.uClampFrame,t.applyFilter(this,e,i,s))},e}(kt),Wt=function(t){function e(e){var i=t.call(this,e)||this;return i.enableScissor=!1,i.alphaMaskPool=[],i.maskDataPool=[],i.maskStack=[],i.alphaMaskIndex=0,i}return f(e,t),e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var s=this.maskDataPool.pop()||new dt;s.pooled=!0,s.maskObject=e,i=s}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case n.MASK_TYPES.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case n.MASK_TYPES.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case n.MASK_TYPES.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case n.MASK_TYPES.SCISSOR:this.renderer.scissor.pop();break;case n.MASK_TYPES.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case n.MASK_TYPES.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=n.MASK_TYPES.SPRITE;else if(t.type=n.MASK_TYPES.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,s=Math.atan2(i.b,i.a),r=Math.atan2(i.d,i.c);s=Math.round(s*(180/Math.PI)*100),r=((r=Math.round(r*(180/Math.PI)*100)-s)%18e3+18e3)%18e3,0===(s=(s%9e3+9e3)%9e3)&&9e3===r&&(t.type=n.MASK_TYPES.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,i=t._target,s=this.alphaMaskPool[this.alphaMaskIndex];s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new Ut(e)]),s[0].resolution=this.renderer.resolution,s[0].maskSprite=e;var r=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,s),i.filterArea=r,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(B),jt=function(t){function e(e){var i=t.call(this,e)||this;return i.maskStack=[],i.glConst=0,i}return f(e,t),e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var s=this.getStackLength();s!==i&&(0===s?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.maskStack=null},e}(B),Xt=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return f(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,s=e.getBounds(!0),r=this.renderer.gl;e.renderable=!1,i?s.fit(i):r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=s,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,s=i.transform,r=i.sourceFrame,n=i.destinationFrame,o=e?e.resolution:this.renderer.resolution,a=(t.x-r.x)*o+n.x,h=(t.y-r.y)*o+n.y,l=t.width*o,c=t.height*o;s&&(a+=s.tx*o,h+=s.ty*o),e||(h=this.renderer.height-c-h),this.renderer.gl.scissor(a,h,l,c)},e}(jt),Yt=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return f(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,s=t._stencilCounter;0===s&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,s,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(jt),Ht=function(t){function e(e){var i=t.call(this,e)||this;return i.destinationFrame=null,i.sourceFrame=null,i.defaultFrame=null,i.projectionMatrix=new d.Matrix,i.transform=null,i}return f(e,t),e.prototype.update=function(t,e,i,s){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);var r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,i,s){var r=this.projectionMatrix,n=s?-1:1;r.identity(),r.a=1/e.width*2,r.d=n*(1/e.height*2),r.tx=-1-e.x*r.a,r.ty=-n-e.y*r.d},e.prototype.setTransform=function(t){},e}(B),zt=new d.Rectangle,Jt=new d.Rectangle,qt=new d.Rectangle,Kt=function(t){function e(e){var i=t.call(this,e)||this;return i.clearColor=e._backgroundColorRgba,i.defaultMaskStack=[],i.current=null,i.sourceFrame=new d.Rectangle,i.destinationFrame=new d.Rectangle,i}return f(e,t),e.prototype.bind=function(t,e,i){void 0===t&&(t=null);var s,r,n,o=this.renderer;this.current=t,t?(n=(s=t.baseTexture).resolution,e||(zt.width=t.frame.width,zt.height=t.frame.height,e=zt),i||(Jt.x=t.frame.x,Jt.y=t.frame.y,Jt.width=e.width,Jt.height=e.height,i=Jt),r=s.framebuffer):(n=o.resolution,e||(zt.width=o.screen.width,zt.height=o.screen.height,e=zt),i||((i=zt).width=e.width,i.height=e.height)),qt.x=i.x*n,qt.y=i.y*n,qt.width=i.width*n,qt.height=i.height*n,this.renderer.framebuffer.bind(r,qt),this.renderer.projection.update(i,e,n,!r),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},e.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e)},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(B),Zt=function(){},Qt=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},t}(),$t=0,te={textureCount:0},ee=function(t){function e(e){var i=t.call(this,e)||this;return i.destroyed=!1,i.systemCheck(),i.gl=null,i.shader=null,i.program=null,i.cache={},i.id=$t++,i}return f(e,t),e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Rt)return Rt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Rt=!0===t({a:"b"},"a","b")}catch(t){Rt=!1}return Rt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),e||(te.textureCount=0,this.syncUniformGroup(t.uniformGroup,te)),s},e.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var i=this.getglProgram();t.static&&t.dirtyId===i.uniformGroups[t.id]||(i.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},e.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var s in t.uniforms){var r=e[s];if(r){for(var n=t.uniforms[s],o=!1,a=0;a<Ct.length;a++)if(Ct[a].test(r,n)){i.push(Ct[a].code(s,n)),o=!0;break}if(!o){var h=(1===r.size?Tt:Et)[r.type].replace("location",'ud["'+s+'"].location');i.push('\n            cv = ud["'+s+'"].value;\n            v = uv["'+s+'"];\n            '+h+";")}}else t.uniforms[s].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+s+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var i=t.uniforms,s=[];for(var r in i)s.push(r),e[r]&&s.push(e[r].type);return s.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,i=t.program,s={};for(var r in i.attributeData)s[r]=i.attributeData[r].location;var n=pt(e,i.vertexSrc,i.fragmentSrc,s),o={};for(var r in i.uniformData){var a=i.uniformData[r];o[r]={location:e.getUniformLocation(n,r),value:ft(a.type,a.size)}}var h=new Qt(n,o);return i.glPrograms[this.renderer.CONTEXT_UID]=h,h},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(B);var ie=function(t){function e(e){var i=t.call(this,e)||this;return i.gl=null,i.stateId=0,i.polygonOffset=0,i.blendMode=n.BLEND_MODES.NONE,i._blendEq=!1,i.map=[],i.map[0]=i.setBlend,i.map[1]=i.setOffset,i.map[2]=i.setCullFace,i.map[3]=i.setDepthTest,i.map[4]=i.setFrontFace,i.checks=[],i.defaultState=new Ft,i.defaultState.blend=!0,i}return f(e,t),e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[n.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD]=[t.ONE,t.ONE],e[n.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.NONE]=[0,0],e[n.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[n.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[n.BLEND_MODES.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[n.BLEND_MODES.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[n.BLEND_MODES.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[n.BLEND_MODES.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[n.BLEND_MODES.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},e}(B),se=function(t){function e(e){var i=t.call(this,e)||this;return i.count=0,i.checkCount=0,i.maxIdle=r.settings.GC_MAX_IDLE,i.checkCountMax=r.settings.GC_MAX_CHECK_COUNT,i.mode=r.settings.GC_MODE,i}return f(e,t),e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==n.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,s=0;s<e.length;s++){var r=e[s];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[s]=null,i=!0)}if(i){var n=0;for(s=0;s<e.length;s++)null!==e[s]&&(e[n++]=e[s]);e.length=n}},e.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var s=t.children.length-1;s>=0;s--)this.unload(t.children[s])},e}(B),re=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},ne=function(t){function e(e){var i=t.call(this,e)||this;return i.boundTextures=[],i.currentLocation=-1,i.managedTextures=[],i._unknownBoundTextures=!1,i.unknownTexture=new y,i}return f(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var s=new re(t.createTexture());t.bindTexture(t.TEXTURE_2D,s.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=s,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new re(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(i=0;i<this.boundTextures.length;i++)this.bind(null,i)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if(t){if((t=t.castToBaseTexture()).parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var s=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,s.texture)),s.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(s=0;s<i.length;s++)i[s]===t&&(this.currentLocation!==s&&(e.activeTexture(e.TEXTURE0+s),this.currentLocation=s),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[s]=null)},e.prototype.initTexture=function(t){var e=new re(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var i=this.renderer.gl;t.type===i.FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA32F),t.type===n.TYPES.HALF_FLOAT&&(e.type=i.HALF_FLOAT),e.type===i.HALF_FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e));else{var s=t.realWidth,r=t.realHeight,n=i.gl;(e.width!==s||e.height!==r||e.dirtyId<0)&&(e.width=s,e.height=r,n.texImage2D(t.target,0,e.internalFormat,s,r,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var s=this.managedTextures.indexOf(t);-1!==s&&o.removeItems(this.managedTextures,s,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==n.MIPMAP_MODES.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=n.WRAP_MODES.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===n.SCALE_MODES.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var s=this.renderer.context.extensions.anisotropicFiltering;if(s&&t.anisotropicLevel>0&&t.scaleMode===n.SCALE_MODES.LINEAR){var r=Math.min(t.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,s.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===n.SCALE_MODES.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===n.SCALE_MODES.LINEAR?i.LINEAR:i.NEAREST)},e}(B),oe={FilterSystem:tt,BatchSystem:it,ContextSystem:rt,FramebufferSystem:at,GeometrySystem:ct,MaskSystem:Wt,ScissorSystem:Xt,StencilSystem:Yt,ProjectionSystem:Ht,RenderTextureSystem:Kt,ShaderSystem:ee,StateSystem:ie,TextureGCSystem:se,TextureSystem:ne},ae=new d.Matrix,he=function(t){function e(e,i){void 0===e&&(e=n.RENDERER_TYPE.UNKNOWN);var s=t.call(this)||this;return(i=Object.assign({},r.settings.RENDER_OPTIONS,i)).roundPixels&&(r.settings.ROUND_PIXELS=i.roundPixels,o.deprecation("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),s.options=i,s.type=e,s.screen=new d.Rectangle(0,0,i.width,i.height),s.view=i.view||document.createElement("canvas"),s.resolution=i.resolution||r.settings.RESOLUTION,s.transparent=i.transparent,s.autoDensity=i.autoDensity||i.autoResize||!1,s.preserveDrawingBuffer=i.preserveDrawingBuffer,s.clearBeforeRender=i.clearBeforeRender,s._backgroundColor=0,s._backgroundColorRgba=[0,0,0,0],s._backgroundColorString="#000000",s.backgroundColor=i.backgroundColor||s._backgroundColor,s._lastObjectRendered=null,s.plugins={},s}return f(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},e.prototype.generateTexture=function(t,e,i,s){0===(s=s||t.getLocalBounds(null,!0)).width&&(s.width=1),0===s.height&&(s.height=1);var r=k.create({width:0|s.width,height:0|s.height,scaleMode:e,resolution:i});return ae.tx=-s.x,ae.ty=-s.y,this.render(t,r,!1,ae,!!t.parent),r},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=n.RENDERER_TYPE.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=o.hex2string(t),o.hex2rgb(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),e}(s(h)),le=function(t){function e(i){var s=t.call(this,n.RENDERER_TYPE.WEBGL,i)||this;return i=s.options,s.gl=null,s.CONTEXT_UID=0,s.runners={destroy:new l.Runner("destroy"),contextChange:new l.Runner("contextChange"),reset:new l.Runner("reset"),update:new l.Runner("update"),postrender:new l.Runner("postrender"),prerender:new l.Runner("prerender"),resize:new l.Runner("resize")},s.globalUniforms=new Q({projectionMatrix:new d.Matrix},!0),s.addSystem(Wt,"mask").addSystem(rt,"context").addSystem(ie,"state").addSystem(ee,"shader").addSystem(ne,"texture").addSystem(ct,"geometry").addSystem(at,"framebuffer").addSystem(Xt,"scissor").addSystem(Yt,"stencil").addSystem(Ht,"projection").addSystem(se,"textureGC").addSystem(tt,"filter").addSystem(Kt,"renderTexture").addSystem(it,"batch"),s.initPlugins(e.__plugins),i.context?s.context.initFromContext(i.context):s.context.initFromOptions({alpha:!!s.transparent,antialias:i.antialias,premultipliedAlpha:s.transparent&&"notMultiplied"!==s.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:s.options.powerPreference}),s.renderingToScreen=!0,o.sayHello(2===s.context.webGLVersion?"WebGL 2":"WebGL 1"),s.resize(s.options.width,s.options.height),s}return f(e,t),e.create=function(t){if(o.isWebGLSupported())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var s in this[e]=i,this.runners)this.runners[s].add(i);return this},e.prototype.render=function(t,e,i,s,r){if(this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=s,!this.context.isLost){if(e||(this._lastObjectRendered=t),!r){var n=t.enableTempParent();t.updateTransform(),t.disableTempParent(n)}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.emit(e,i)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i},e}(he);function ce(t){return le.create(t)}var de="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",ue="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",pe=function(){this.texArray=null,this.blend=0,this.type=n.DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null},me=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),fe=function(){function t(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),_e=function(t){function e(e){var i=t.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Ft.for2d(),i.size=4*r.settings.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return f(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.settings.PREFER_ENV===n.ENV.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.settings.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=It(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,s=this.size/4,r=Math.floor(s/this.MAX_TEXTURES)+1;t.length<s;)t.push(new pe);for(;i.length<r;)i.push(new me);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,s=e._textureArrayPool,r=this.renderer.batch,n=this._tempBoundTextures,o=this.renderer.textureGC.count,a=++y._globalBatch,h=0,l=s[0],c=0;r.copyBoundTextures(n,i);for(var d=0;d<this._bufferSize;++d){var u=t[d];t[d]=null,u._batchEnabled!==a&&(l.count>=i&&(r.boundArray(l,n,a,i),this.buildDrawCalls(l,c,d),c=d,l=s[++h],++a),u._batchEnabled=a,u.touched=o,l.elements[l.count++]=u)}l.count>0&&(r.boundArray(l,n,a,i),this.buildDrawCalls(l,c,this._bufferSize),++h,++a);for(d=0;d<n.length;d++)n[d]=null;y._globalBatch=a},e.prototype.buildDrawCalls=function(t,i,s){var r=this,n=r._bufferedElements,a=r._attributeBuffer,h=r._indexBuffer,l=r.vertexSize,c=e._drawCallPool,d=this._dcIndex,u=this._aIndex,p=this._iIndex,m=c[d];m.start=this._iIndex,m.texArray=t;for(var f=i;f<s;++f){var _=n[f],g=_._texture.baseTexture,b=o.premultiplyBlendMode[g.alphaMode?1:0][_.blendMode];n[f]=null,i<f&&m.blend!==b&&(m.size=p-m.start,i=f,(m=c[++d]).texArray=t,m.start=p),this.packInterleavedGeometry(_,a,h,u,p),u+=_.vertexData.length/2*l,p+=_.indices.length,m.blend=b}i<s&&(m.size=p-m.start,++d),this._dcIndex=d,this._aIndex=u,this._iIndex=p},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,i=t._attributeBuffer,s=t._indexBuffer;r.settings.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,s=i.gl,r=i.state,n=e._drawCallPool,o=null,a=0;a<t;a++){var h=n[a],l=h.texArray,c=h.type,d=h.size,u=h.start,p=h.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=p,r.set(this.state),s.drawElements(c,d,s.UNSIGNED_SHORT,2*u)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),r.settings.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=o.nextPow2(Math.ceil(t/8)),i=o.log2(e),s=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var r=this._aBuffers[s];return r||(this._aBuffers[s]=r=new fe(s*this.vertexSize*4)),r},e.prototype.getIndexBuffer=function(t){var e=o.nextPow2(Math.ceil(t/12)),i=o.log2(e),s=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var r=this._iBuffers[i];return r||(this._iBuffers[i]=r=new Uint16Array(s)),r},e.prototype.packInterleavedGeometry=function(t,e,i,s,r){for(var n=e.uint32View,a=e.float32View,h=s/this.vertexSize,l=t.uvs,c=t.indices,d=t.vertexData,u=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),m=p<1&&t._texture.baseTexture.alphaMode?o.premultiplyTint(t._tintRGB,p):t._tintRGB+(255*p<<24),f=0;f<d.length;f+=2)a[s++]=d[f],a[s++]=d[f+1],a[s++]=l[f],a[s++]=l[f+1],n[s++]=m,a[s++]=u;for(f=0;f<c.length;f++)i[r++]=h+c[f]},e._drawCallPool=[],e._textureArrayPool=[],e}(et),ge=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Q.from({uSamplers:e},!0);var s=this.fragTemplate;s=(s=s.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Lt(this.vertexSrc,s)}var r={tint:new Float32Array([1,1,1,1]),translationMatrix:new d.Matrix,default:this.defaultGroupCache[t]};return new Gt(this.programCache[t],r)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),be=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._buffer=new W(null,e,!1),i._indexBuffer=new W(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,n.TYPES.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,n.TYPES.FLOAT).addAttribute("aColor",i._buffer,4,!0,n.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,n.TYPES.FLOAT).addIndex(i._indexBuffer),i}return f(e,t),e}(J),ye="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",we="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",ve=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:ye,fragment:we,geometryClass:be,vertexSize:6},t),i=e.vertex,s=e.fragment,r=e.vertexSize,n=e.geometryClass;return function(t){function e(e){var o=t.call(this,e)||this;return o.shaderGenerator=new ge(i,s),o.geometryClass=n,o.vertexSize=r,o}return f(e,t),e}(_e)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return ye},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return we},enumerable:!1,configurable:!0}),t}(),xe=ve.create()})),a.register("eIsNh",(function(e,i){t(e.exports,"Runner",(()=>s));
/*!
 * @pixi/runner - v5.3.10
 * Compiled Mon, 07 Jun 2021 22:37:25 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var s=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,s,r,n,o,a){if(arguments.length>8)throw new Error("max arguments reached");var h=this,l=h.name,c=h.items;this._aliasCount++;for(var d=0,u=c.length;d<u;d++)c[d][l](t,e,i,s,r,n,o,a);return c===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(s.prototype,{dispatch:{value:s.prototype.emit},run:{value:s.prototype.emit}})})),a.register("cx946",(function(e,i){t(e.exports,"Extract",(()=>h));var s=a("5pLOZ"),r=a("VYQOJ"),n=a("8lrKM"),o=new r.Rectangle,h=function(){function t(t){this.renderer=t,t.extract=this}return t.prototype.image=function(t,e,i){var s=new Image;return s.src=this.base64(t,e,i),s},t.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},t.prototype.canvas=function(e){var i,r,a,h=this.renderer,l=!1,c=!1;e&&(e instanceof n.RenderTexture?a=e:(a=this.renderer.generateTexture(e),c=!0)),a?(i=a.baseTexture.resolution,r=a.frame,l=!1,h.renderTexture.bind(a)):(i=this.renderer.resolution,l=!0,(r=o).width=this.renderer.width,r.height=this.renderer.height,h.renderTexture.bind(null));var d=Math.floor(r.width*i+1e-4),u=Math.floor(r.height*i+1e-4),p=new s.CanvasRenderTarget(d,u,1),m=new Uint8Array(4*d*u),f=h.gl;f.readPixels(r.x*i,r.y*i,d,u,f.RGBA,f.UNSIGNED_BYTE,m);var _=p.context.getImageData(0,0,d,u);if(t.arrayPostDivide(m,_.data),p.context.putImageData(_,0,0),l){var g=new s.CanvasRenderTarget(p.width,p.height,1);g.context.scale(1,-1),g.context.drawImage(p.canvas,0,-u),p.destroy(),p=g}return c&&a.destroy(!0),p.canvas},t.prototype.pixels=function(e){var i,s,r,a=this.renderer,h=!1;e&&(e instanceof n.RenderTexture?r=e:(r=this.renderer.generateTexture(e),h=!0)),r?(i=r.baseTexture.resolution,s=r.frame,a.renderTexture.bind(r)):(i=a.resolution,(s=o).width=a.width,s.height=a.height,a.renderTexture.bind(null));var l=s.width*i,c=s.height*i,d=new Uint8Array(4*l*c),u=a.gl;return u.readPixels(s.x*i,s.y*i,l,c,u.RGBA,u.UNSIGNED_BYTE,d),h&&r.destroy(!0),t.arrayPostDivide(d,d),d},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var s=e[i+3]=t[i+3];0!==s?(e[i]=Math.round(Math.min(255*t[i]/s,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/s,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/s,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},t}()})),a.register("hzsgD",(function(e,i){t(e.exports,"Loader",(()=>l)),t(e.exports,"AppLoaderPlugin",(()=>c)),t(e.exports,"TextureLoader",(()=>h)),t(e.exports,"LoaderResource",(()=>n));var s=a("cJhx6"),r=a("8lrKM"),n=s.Resource,o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var h=function(){function t(){}return t.use=function(t,e){t.data&&t.type===s.Resource.TYPE.IMAGE&&(t.texture=r.Texture.fromLoader(t.data,t.url,t.name)),e()},t}(),l=function(t){function e(i,s){for(var r=t.call(this,i,s)||this,n=0;n<e._plugins.length;++n){var o=e._plugins[n],a=o.pre,h=o.use;a&&r.pre(a),h&&r.use(h)}return r._protected=!1,r}return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}(s.Loader);l.registerPlugin({use:s.middleware.parsing}),l.registerPlugin(h);var c=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?l.shared:new l},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}()})),a.register("cJhx6",(function(e,i){t(e.exports,"Resource",(()=>g)),t(e.exports,"Loader",(()=>S)),t(e.exports,"middleware",(()=>v));var r=a("d5U7d"),n=a("jhIyC");function o(){}function h(t,e,i,s){var r=0,n=t.length;!function o(a){a||r===n?i&&i(a):s?setTimeout((function(){e(t[r++],o)}),1):e(t[r++],o)}()}function l(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function c(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,s={_tasks:[],concurrency:e,saturated:o,unsaturated:o,buffer:e/4,empty:o,drain:o,error:o,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){i=0,s.drain=o,s.started=!1,s._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!s.paused&&i<s.concurrency&&s._tasks.length;){var e=s._tasks.shift();0===s._tasks.length&&s.empty(),(i+=1)===s.concurrency&&s.saturated(),t(e.data,l(n(e)))}},length:function(){return s._tasks.length},running:function(){return i},idle:function(){return s._tasks.length+i===0},pause:function(){!0!==s.paused&&(s.paused=!0)},resume:function(){if(!1!==s.paused){s.paused=!1;for(var t=1;t<=s.concurrency;t++)s.process()}}};function r(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(s.started=!0,null==t&&s.idle())setTimeout((function(){return s.drain()}),1);else{var r={data:t,callback:"function"==typeof i?i:o};e?s._tasks.unshift(r):s._tasks.push(r),setTimeout((function(){return s.process()}),1)}}function n(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&s.error(arguments[0],t.data),i<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}return s}var d={};function u(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function p(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),t}var m=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),f=null;function _(){}var g=function(){function t(e,i,r){if("string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new(s(n)),this.onProgress=new(s(n)),this.onComplete=new(s(n)),this.onAfterMiddleware=new(s(n))}t.setExtensionLoadType=function(e,i){b(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){b(t._xhrTypeMap,e,i)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:m&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var s=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(s)?s[0]:s))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var s=document.createElement("source");return s.src=e,s.type=i,s},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(y(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(y(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(y(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,i="",s=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===s&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?s=200:1223===s&&(s=204),2===(s/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var n=document.createElement("div");n.innerHTML=i,this.data=n}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,f||(f=document.createElement("a")),f.href=t;var i=!(t=s(r)(f.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var s=t.indexOf("?"),r=t.indexOf("#"),n=Math.min(s>-1?s:t.length,r>-1?r:t.length);e=(t=t.substring(0,n)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},p(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function b(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function y(t){return t.toString().replace("object ","")}g.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},g.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},g.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},g.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},g._loadTypeMap={gif:g.LOAD_TYPE.IMAGE,png:g.LOAD_TYPE.IMAGE,bmp:g.LOAD_TYPE.IMAGE,jpg:g.LOAD_TYPE.IMAGE,jpeg:g.LOAD_TYPE.IMAGE,tif:g.LOAD_TYPE.IMAGE,tiff:g.LOAD_TYPE.IMAGE,webp:g.LOAD_TYPE.IMAGE,tga:g.LOAD_TYPE.IMAGE,svg:g.LOAD_TYPE.IMAGE,"svg+xml":g.LOAD_TYPE.IMAGE,mp3:g.LOAD_TYPE.AUDIO,ogg:g.LOAD_TYPE.AUDIO,wav:g.LOAD_TYPE.AUDIO,mp4:g.LOAD_TYPE.VIDEO,webm:g.LOAD_TYPE.VIDEO},g._xhrTypeMap={xhtml:g.XHR_RESPONSE_TYPE.DOCUMENT,html:g.XHR_RESPONSE_TYPE.DOCUMENT,htm:g.XHR_RESPONSE_TYPE.DOCUMENT,xml:g.XHR_RESPONSE_TYPE.DOCUMENT,tmx:g.XHR_RESPONSE_TYPE.DOCUMENT,svg:g.XHR_RESPONSE_TYPE.DOCUMENT,tsx:g.XHR_RESPONSE_TYPE.DOCUMENT,gif:g.XHR_RESPONSE_TYPE.BLOB,png:g.XHR_RESPONSE_TYPE.BLOB,bmp:g.XHR_RESPONSE_TYPE.BLOB,jpg:g.XHR_RESPONSE_TYPE.BLOB,jpeg:g.XHR_RESPONSE_TYPE.BLOB,tif:g.XHR_RESPONSE_TYPE.BLOB,tiff:g.XHR_RESPONSE_TYPE.BLOB,webp:g.XHR_RESPONSE_TYPE.BLOB,tga:g.XHR_RESPONSE_TYPE.BLOB,json:g.XHR_RESPONSE_TYPE.JSON,text:g.XHR_RESPONSE_TYPE.TEXT,txt:g.XHR_RESPONSE_TYPE.TEXT,ttf:g.XHR_RESPONSE_TYPE.BUFFER,otf:g.XHR_RESPONSE_TYPE.BUFFER},g.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var w=window.URL||window.webkitURL;var v={caching:function(t,e){var i=this;d[t.url]?(t.data=d[t.url],t.complete()):t.onComplete.once((function(){return d[i.url]=i.data})),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===g.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=w.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=g.TYPE.IMAGE,void(t.data.onload=function(){w.revokeObjectURL(i),t.data.onload=null,e()})}}else{var s=t.xhr.getResponseHeader("content-type");if(s&&0===s.indexOf("image"))return t.data=new Image,t.data.src="data:"+s+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var s=[0,0,0],r=[0,0,0,0],n=0;n<s.length;++n)i<t.length?s[n]=255&t.charCodeAt(i++):s[n]=0;switch(r[0]=s[0]>>2,r[1]=(3&s[0])<<4|s[1]>>4,r[2]=(15&s[1])<<2|s[2]>>6,r[3]=63&s[2],i-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(var o=0;o<r.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[o])}return e}(t.xhr.responseText),t.type=g.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},x=/(#[\w-]+)?$/,S=function(){function t(e,i){var r=this;void 0===e&&(e=""),void 0===i&&(i=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=c(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new(s(n)),this.onError=new(s(n)),this.onLoad=new(s(n)),this.onStart=new(s(n)),this.onComplete=new(s(n));for(var o=0;o<t._defaultBeforeMiddleware.length;++o)this.pre(t._defaultBeforeMiddleware[o]);for(var a=0;a<t._defaultAfterMiddleware.length;++a)this.use(t._defaultAfterMiddleware[a])}var e=t.prototype;return e.add=function(t,e,i,s){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(s=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(s=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(s=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new g(t,e,i),"function"==typeof s&&this.resources[t].onAfterMiddleware.once(s),this.loading){for(var n=i.parentResource,o=[],a=0;a<n.children.length;++a)n.children[a].isComplete||o.push(n.children[a]);var h=n.progressChunk*(o.length+1)/(o.length+2);n.children.push(this.resources[t]),n.progressChunk=h;for(var l=0;l<o.length;++l)o[l].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,i=s(r)(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=x.exec(e)[0];-1!==(e=e.substr(0,e.length-n.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=n}return e},e._loadResource=function(t,e){var i=this;t._dequeue=e,h(this._beforeMiddleware,(function(e,s){e.call(i,t,(function(){s(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),h(this._afterMiddleware,(function(i,s){i.call(e,t,s)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},p(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();S._defaultBeforeMiddleware=[],S._defaultAfterMiddleware=[],S.pre=function(t){return S._defaultBeforeMiddleware.push(t),S},S.use=function(t){return S._defaultAfterMiddleware.push(t),S}})),a.register("d5U7d",(function(t,e){t.exports=function(t,e){if(t){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},s=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},n=14;n--;)r[i.key[n]]=s[n]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,(function(t,e,s){e&&(r[i.q.name][e]=s)})),r}}})),a.register("jhIyC",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0});var i=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e,i,r){void 0===i&&(i=!1),s(this,t),this._fn=e,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return i(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function n(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var o=function(){function t(){s(this,t),this._head=this._tail=void 0}return i(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof r))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return n(this,new r(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return n(this,new r(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof r))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();o.MiniSignalBinding=r,t.exports.default=o,t.exports=t.exports.default})),a.register("5gmF4",(function(e,i){t(e.exports,"ParticleRenderer",(()=>p)),t(e.exports,"ParticleContainer",(()=>d));var s=a("44Xx0"),r=a("8TYxR"),n=a("5pLOZ"),o=a("8lrKM"),h=a("VYQOJ"),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function c(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var d=function(t){function e(e,i,r,n){void 0===e&&(e=1500),void 0===r&&(r=16384),void 0===n&&(n=!1);var o=t.call(this)||this;return r>16384&&(r=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=r,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=s.BLEND_MODES.NORMAL,o.autoResize=n,o.roundPixels=!0,o.baseTexture=null,o.setProperties(i),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return c(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,n.hex2rgb(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(r.Container),u=function(){function t(t,e,i){this.geometry=new o.Geometry,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<t.length;++r){var n=t[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||s.TYPES.FLOAT,offset:n.offset},e[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new o.Buffer(n.createIndicesForQuads(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){(l=this.dynamicProperties[i]).offset=e,e+=l.size,this.dynamicStride+=l.size}var r=new ArrayBuffer(this.size*this.dynamicStride*16);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new o.Buffer(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(i=0;i<this.staticProperties.length;++i){(l=this.staticProperties[i]).offset=a,a+=l.size,this.staticStride+=l.size}var h=new ArrayBuffer(this.size*this.staticStride*16);this.staticData=new Float32Array(h),this.staticDataUint32=new Uint32Array(h),this.staticBuffer=new o.Buffer(this.staticData,!0,!1);for(i=0;i<this.dynamicProperties.length;++i){var l=this.dynamicProperties[i];t.addAttribute(l.attributeName,this.dynamicBuffer,0,l.type===s.TYPES.UNSIGNED_BYTE,l.type,4*this.dynamicStride,4*l.offset)}for(i=0;i<this.staticProperties.length;++i){l=this.staticProperties[i];t.addAttribute(l.attributeName,this.staticBuffer,0,l.type===s.TYPES.UNSIGNED_BYTE,l.type,4*this.staticStride,4*l.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var r=0;r<this.dynamicProperties.length;r++){var n=this.dynamicProperties[r];n.uploadFunction(t,e,i,n.type===s.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,i){for(var r=0;r<this.staticProperties.length;r++){var n=this.staticProperties[r];n.uploadFunction(t,e,i,n.type===s.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),p=function(t){function e(e){var i=t.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new h.Matrix,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:s.TYPES.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=o.Shader.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),i.state=o.State.for2d(),i}return c(e,t),e.prototype.render=function(t){var e=t.children,i=t._maxSize,s=t._batchSize,r=this.renderer,o=e.length;if(0!==o){o>i&&!t.autoResize&&(o=i);var a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));var h=e[0]._texture.baseTexture;this.state.blendMode=n.correctBlendMode(t.blendMode,h.alphaMode),r.state.set(this.state);var l=r.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=n.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h.alphaMode),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);for(var d=!1,u=0,p=0;u<o;u+=s,p+=1){var m=o-u;m>s&&(m=s),p>=a.length&&a.push(this._generateOneMoreBuffer(t));var f=a[p];f.uploadDynamic(e,u,m);var _=t._bufferUpdateIDs[p]||0;(d=d||f._updateID<_)&&(f._updateID=t._updateID,f.uploadStatic(e,u,m)),r.geometry.bind(f.geometry),l.drawElements(l.TRIANGLES,6*m,l.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,s=t._batchSize,r=t._properties,n=0;n<i;n+=s)e.push(new u(this.properties,r,s));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new u(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,s,r,n){for(var o=0,a=0,h=0,l=0,c=0;c<i;++c){var d=t[e+c],u=d._texture,p=d.scale.x,m=d.scale.y,f=u.trim,_=u.orig;f?(o=(a=f.x-d.anchor.x*_.width)+f.width,h=(l=f.y-d.anchor.y*_.height)+f.height):(o=_.width*(1-d.anchor.x),a=_.width*-d.anchor.x,h=_.height*(1-d.anchor.y),l=_.height*-d.anchor.y),s[n]=a*p,s[n+1]=l*m,s[n+r]=o*p,s[n+r+1]=l*m,s[n+2*r]=o*p,s[n+2*r+1]=h*m,s[n+3*r]=a*p,s[n+3*r+1]=h*m,n+=4*r}},e.prototype.uploadPosition=function(t,e,i,s,r,n){for(var o=0;o<i;o++){var a=t[e+o].position;s[n]=a.x,s[n+1]=a.y,s[n+r]=a.x,s[n+r+1]=a.y,s[n+2*r]=a.x,s[n+2*r+1]=a.y,s[n+3*r]=a.x,s[n+3*r+1]=a.y,n+=4*r}},e.prototype.uploadRotation=function(t,e,i,s,r,n){for(var o=0;o<i;o++){var a=t[e+o].rotation;s[n]=a,s[n+r]=a,s[n+2*r]=a,s[n+3*r]=a,n+=4*r}},e.prototype.uploadUvs=function(t,e,i,s,r,n){for(var o=0;o<i;++o){var a=t[e+o]._texture._uvs;a?(s[n]=a.x0,s[n+1]=a.y0,s[n+r]=a.x1,s[n+r+1]=a.y1,s[n+2*r]=a.x2,s[n+2*r+1]=a.y2,s[n+3*r]=a.x3,s[n+3*r+1]=a.y3,n+=4*r):(s[n]=0,s[n+1]=0,s[n+r]=0,s[n+r+1]=0,s[n+2*r]=0,s[n+2*r+1]=0,s[n+3*r]=0,s[n+3*r+1]=0,n+=4*r)}},e.prototype.uploadTint=function(t,e,i,s,r,o){for(var a=0;a<i;++a){var h=t[e+a],l=h._texture.baseTexture.alphaMode>0,c=h.alpha,d=c<1&&l?n.premultiplyTint(h._tintRGB,c):h._tintRGB+(255*c<<24);s[o]=d,s[o+r]=d,s[o+2*r]=d,s[o+3*r]=d,o+=4*r}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(o.ObjectRenderer)})),a.register("ccCdY",(function(e,i){t(e.exports,"TimeLimiter",(()=>A)),t(e.exports,"Prepare",(()=>S)),t(e.exports,"BasePrepare",(()=>y)),t(e.exports,"CountLimiter",(()=>d));var s=a("iZTtn"),r=a("8lrKM"),n=a("kpTES"),o=a("k3j5h"),h=a("8TYxR"),l=a("4Y6fG");s.settings.UPLOADS_PER_FRAME=4;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var d=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function u(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var s=0;s<t._textures.length;s++)if(t._textures[s]instanceof r.Texture){var n=t._textures[s].baseTexture;-1===e.indexOf(n)&&(e.push(n),i=!0)}return i}function p(t,e){if(t.baseTexture instanceof r.BaseTexture){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function m(t,e){if(t._texture&&t._texture instanceof r.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function f(t,e){return e instanceof l.Text&&(e.updateText(!0),!0)}function _(t,e){if(e instanceof l.TextStyle){var i=e.toFontString();return l.TextMetrics.measureFont(i),!0}return!1}function g(t,e){if(t instanceof l.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function b(t,e){return t instanceof l.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}var y=function(){function t(t){var e=this;this.limiter=new d(s.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(g),this.registerFindHook(b),this.registerFindHook(u),this.registerFindHook(p),this.registerFindHook(m),this.registerUploadHook(f),this.registerUploadHook(_)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,o.Ticker.system.addOnce(this.tick,this,o.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)o.Ticker.system.addOnce(this.tick,this,o.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(i=0,s=r.length;i<s;i++)r[i]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof h.Container)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&o.Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function w(t,e){return e instanceof r.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function v(t,e){if(!(e instanceof n.Graphics))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var s=i.batches,r=0;r<s.length;r++){var o=s[r].style.texture;o&&w(t,o.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function x(t,e){return t instanceof n.Graphics&&(e.push(t),!0)}var S=function(t){function e(e){var i=t.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(x),i.registerUploadHook(w),i.registerUploadHook(v),i}return function(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(y),A=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}()})),a.register("kpTES",(function(e,i){t(e.exports,"FillStyle",(()=>_)),t(e.exports,"LINE_CAP",(()=>o)),t(e.exports,"GRAPHICS_CURVES",(()=>f)),t(e.exports,"Graphics",(()=>Y)),t(e.exports,"GraphicsData",(()=>k)),t(e.exports,"graphicsUtils",(()=>F)),t(e.exports,"LineStyle",(()=>W)),t(e.exports,"GraphicsGeometry",(()=>U)),t(e.exports,"LINE_JOIN",(()=>r));var r,n,o,h,l=a("8lrKM"),c=a("VYQOJ"),d=a("5pLOZ"),u=a("4SIPH"),p=a("44Xx0"),m=a("8TYxR");(n=r||(r={})).MITER="miter",n.BEVEL="bevel",n.ROUND="round",(h=o||(o={})).BUTT="butt",h.ROUND="round",h.SQUARE="square";var f={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},_=function(){function t(){this.color=16777215,this.alpha=1,this.texture=l.Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=l.Texture.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function b(t,e){function i(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var y={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,r=t.holes,n=e.points,o=e.indices;if(i.length>=6){for(var a=[],h=0;h<r.length;h++){var l=r[h];a.push(i.length/2),i=i.concat(l.points)}var c=s(u)(i,a,2);if(!c)return;var d=n.length/2;for(h=0;h<c.length;h+=3)o.push(c[h]+d),o.push(c[h+1]+d),o.push(c[h+2]+d);for(h=0;h<i.length;h++)n.push(i[h])}}},w={build:function(t){var e,i,s=t.shape,r=t.points,n=s.x,o=s.y;if(r.length=0,t.type===c.SHAPES.CIRC)e=s.radius,i=s.radius;else{var a=t.shape;e=a.width,i=a.height}if(0!==e&&0!==i){var h=Math.floor(30*Math.sqrt(s.radius))||Math.floor(15*Math.sqrt(e+i));h/=2.3;for(var l=2*Math.PI/h,d=0;d<h-.5;d++)r.push(n+Math.sin(-l*d)*e,o+Math.cos(-l*d)*i);r.push(r[0],r[1])}},triangulate:function(t,e){var i=t.points,s=e.points,r=e.indices,n=s.length/2,o=n,a=t.shape,h=t.matrix,l=a.x,c=a.y;s.push(t.matrix?h.a*l+h.c*c+h.tx:l,t.matrix?h.b*l+h.d*c+h.ty:c);for(var d=0;d<i.length;d+=2)s.push(i[d],i[d+1]),r.push(n++,o,n)}},v={build:function(t){var e=t.shape,i=e.x,s=e.y,r=e.width,n=e.height,o=t.points;o.length=0,o.push(i,s,i+r,s,i+r,s+n,i,s+n)},triangulate:function(t,e){var i=t.points,s=e.points,r=s.length/2;s.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}};function x(t,e,i){return t+(e-t)*i}function S(t,e,i,s,r,n,o){void 0===o&&(o=[]);for(var a=o,h=0,l=0,c=0,d=0,u=0,p=0,m=0,f=0;m<=20;++m)h=x(t,i,f=m/20),l=x(e,s,f),c=x(i,r,f),d=x(s,n,f),u=x(h,c,f),p=x(l,d,f),a.push(u,p);return a}var A={build:function(t){var e=t.shape,i=t.points,s=e.x,r=e.y,n=e.width,o=e.height,a=Math.max(0,Math.min(e.radius,Math.min(n,o)/2));i.length=0,a?(S(s,r+a,s,r,s+a,r,i),S(s+n-a,r,s+n,r,s+n,r+a,i),S(s+n,r+o-a,s+n,r+o,s+n-a,r+o,i),S(s+a,r+o,s,r+o,s,r+o-a,i)):i.push(s,r,s+n,r,s+n,r+o,s,r+o)},triangulate:function(t,e){for(var i=t.points,r=e.points,n=e.indices,o=r.length/2,a=s(u)(i,null,2),h=0,l=a.length;h<l;h+=3)n.push(a[h]+o),n.push(a[h+1]+o),n.push(a[h+2]+o);for(h=0,l=i.length;h<l;h++)r.push(i[h],i[++h])}};function P(t,e,i,s,r,n,o,a){var h,l;o?(h=s,l=-i):(h=-s,l=i);var c=t-i*r+h,d=e-s*r+l,u=t+i*n+h,p=e+s*n+l;return a.push(c,d),a.push(u,p),2}function C(t,e,i,s,r,n,o,a){var h=i-t,l=s-e,c=Math.atan2(h,l),d=Math.atan2(r-t,n-e);a&&c<d?c+=2*Math.PI:!a&&c>d&&(d+=2*Math.PI);var u=c,p=d-c,m=Math.abs(p),f=Math.sqrt(h*h+l*l),_=1+(15*m*Math.sqrt(f)/Math.PI>>0),g=p/_;if(u+=g,a){o.push(t,e),o.push(i,s);for(var b=1,y=u;b<_;b++,y+=g)o.push(t,e),o.push(t+Math.sin(y)*f,e+Math.cos(y)*f);o.push(t,e),o.push(r,n)}else{o.push(i,s),o.push(t,e);for(b=1,y=u;b<_;b++,y+=g)o.push(t+Math.sin(y)*f,e+Math.cos(y)*f),o.push(t,e);o.push(r,n),o.push(t,e)}return 2*_}function T(t,e){t.lineStyle.native?function(t,e){var i=0,s=t.shape,r=t.points||s.points,n=s.type!==c.SHAPES.POLY||s.closeStroke;if(0!==r.length){var o=e.points,a=e.indices,h=r.length/2,l=o.length/2,d=l;for(o.push(r[0],r[1]),i=1;i<h;i++)o.push(r[2*i],r[2*i+1]),a.push(d,d+1),d++;n&&a.push(d,l)}}(t,e):function(t,e){var i=t.shape,s=t.points||i.points.slice(),n=e.closePointEps;if(0!==s.length){var a=t.lineStyle,h=new c.Point(s[0],s[1]),l=new c.Point(s[s.length-2],s[s.length-1]),d=i.type!==c.SHAPES.POLY||i.closeStroke,u=Math.abs(h.x-l.x)<n&&Math.abs(h.y-l.y)<n;if(d){s=s.slice(),u&&(s.pop(),s.pop(),l.set(s[s.length-2],s[s.length-1]));var p=.5*(h.x+l.x),m=.5*(l.y+h.y);s.unshift(p,m),s.push(p,m)}var _=e.points,g=s.length/2,b=s.length,y=_.length/2,w=a.width/2,v=w*w,x=a.miterLimit*a.miterLimit,S=s[0],A=s[1],T=s[2],E=s[3],R=0,B=0,D=-(A-E),I=S-T,M=0,O=0,L=Math.sqrt(D*D+I*I);D/=L,I/=L,D*=w,I*=w;var G=a.alignment,F=2*(1-G),k=2*G;d||(a.cap===o.ROUND?b+=C(S-D*(F-k)*.5,A-I*(F-k)*.5,S-D*F,A-I*F,S+D*k,A+I*k,_,!0)+2:a.cap===o.SQUARE&&(b+=P(S,A,D,I,F,k,!0,_))),_.push(S-D*F,A-I*F),_.push(S+D*k,A+I*k);for(var N=1;N<g-1;++N){S=s[2*(N-1)],A=s[2*(N-1)+1],T=s[2*N],E=s[2*N+1],R=s[2*(N+1)],B=s[2*(N+1)+1],D=-(A-E),I=S-T,D/=L=Math.sqrt(D*D+I*I),I/=L,D*=w,I*=w,M=-(E-B),O=T-R,M/=L=Math.sqrt(M*M+O*O),O/=L,M*=w,O*=w;var V=T-S,U=A-E,W=T-R,j=B-E,X=U*W-j*V,Y=X<0;if(Math.abs(X)<.1)_.push(T-D*F,E-I*F),_.push(T+D*k,E+I*k);else{var H=(-D+S)*(-I+E)-(-D+T)*(-I+A),z=(-M+R)*(-O+E)-(-M+T)*(-O+B),J=(V*z-W*H)/X,q=(j*H-U*z)/X,K=(J-T)*(J-T)+(q-E)*(q-E),Z=T+(J-T)*F,Q=E+(q-E)*F,$=T-(J-T)*k,tt=E-(q-E)*k,et=Y?F:k;K<=Math.min(V*V+U*U,W*W+j*j)+et*et*v?a.join===r.BEVEL||K/v>x?(Y?(_.push(Z,Q),_.push(T+D*k,E+I*k),_.push(Z,Q),_.push(T+M*k,E+O*k)):(_.push(T-D*F,E-I*F),_.push($,tt),_.push(T-M*F,E-O*F),_.push($,tt)),b+=2):a.join===r.ROUND?Y?(_.push(Z,Q),_.push(T+D*k,E+I*k),b+=C(T,E,T+D*k,E+I*k,T+M*k,E+O*k,_,!0)+4,_.push(Z,Q),_.push(T+M*k,E+O*k)):(_.push(T-D*F,E-I*F),_.push($,tt),b+=C(T,E,T-D*F,E-I*F,T-M*F,E-O*F,_,!1)+4,_.push(T-M*F,E-O*F),_.push($,tt)):(_.push(Z,Q),_.push($,tt)):(_.push(T-D*F,E-I*F),_.push(T+D*k,E+I*k),a.join===r.BEVEL||K/v>x||(a.join===r.ROUND?b+=Y?C(T,E,T+D*k,E+I*k,T+M*k,E+O*k,_,!0)+2:C(T,E,T-D*F,E-I*F,T-M*F,E-O*F,_,!1)+2:(Y?(_.push($,tt),_.push($,tt)):(_.push(Z,Q),_.push(Z,Q)),b+=2)),_.push(T-M*F,E-O*F),_.push(T+M*k,E+O*k),b+=2)}}S=s[2*(g-2)],A=s[2*(g-2)+1],T=s[2*(g-1)],D=-(A-(E=s[2*(g-1)+1])),I=S-T,D/=L=Math.sqrt(D*D+I*I),I/=L,D*=w,I*=w,_.push(T-D*F,E-I*F),_.push(T+D*k,E+I*k),d||(a.cap===o.ROUND?b+=C(T-D*(F-k)*.5,E-I*(F-k)*.5,T-D*F,E-I*F,T+D*k,E+I*k,_,!1)+2:a.cap===o.SQUARE&&(b+=P(T,E,D,I,F,k,!1,_)));var it=e.indices,st=f.epsilon*f.epsilon;for(N=y;N<b+y-2;++N)S=_[2*N],A=_[2*N+1],T=_[2*(N+1)],E=_[2*(N+1)+1],R=_[2*(N+2)],B=_[2*(N+2)+1],Math.abs(S*(E-B)+T*(B-A)+R*(A-E))<st||it.push(N,N+1,N+2)}}(t,e)}var E,R=function(t){function e(e,i,s,r,n,o){void 0===o&&(o=0);n=n||r/2;for(var a=-1*Math.PI/2+o,h=2*s,l=c.PI_2/h,d=[],u=0;u<h;u++){var p=u%2?n:r,m=u*l+a;d.push(e+p*Math.cos(m),i+p*Math.sin(m))}return t.call(this,d)||this}return b(e,t),e}(c.Polygon),B=function(){function t(){}return t.curveTo=function(t,e,i,s,r,n){var o=n[n.length-2],a=n[n.length-1]-e,h=o-t,l=s-e,c=i-t,d=Math.abs(a*c-h*l);if(d<1e-8||0===r)return n[n.length-2]===t&&n[n.length-1]===e||n.push(t,e),null;var u=a*a+h*h,p=l*l+c*c,m=a*l+h*c,f=r*Math.sqrt(u)/d,_=r*Math.sqrt(p)/d,g=f*m/u,b=_*m/p,y=f*c+_*h,w=f*l+_*a,v=h*(_+g),x=a*(_+g),S=c*(f+b),A=l*(f+b);return{cx:y+t,cy:w+e,radius:r,startAngle:Math.atan2(x-w,v-y),endAngle:Math.atan2(A-w,S-y),anticlockwise:h*l>c*a}},t.arc=function(t,e,i,s,r,n,o,a,h){for(var l=o-n,d=f._segmentsCount(Math.abs(l)*r,40*Math.ceil(Math.abs(l)/c.PI_2)),u=l/(2*d),p=2*u,m=Math.cos(u),_=Math.sin(u),g=d-1,b=g%1/g,y=0;y<=g;++y){var w=u+n+p*(y+b*y),v=Math.cos(w),x=-Math.sin(w);h.push((m*v+_*x)*r+i,(m*-x+_*v)*r+s)}},t}(),D=function(){function t(){}return t.curveLength=function(t,e,i,s,r,n,o,a){for(var h=0,l=0,c=0,d=0,u=0,p=0,m=0,f=0,_=0,g=0,b=0,y=t,w=e,v=1;v<=10;++v)g=y-(f=(m=(p=(u=1-(l=v/10))*u)*u)*t+3*p*l*i+3*u*(c=l*l)*r+(d=c*l)*o),b=w-(_=m*e+3*p*l*s+3*u*c*n+d*a),y=f,w=_,h+=Math.sqrt(g*g+b*b);return h},t.curveTo=function(e,i,s,r,n,o,a){var h=a[a.length-2],l=a[a.length-1];a.length-=2;var c=f._segmentsCount(t.curveLength(h,l,e,i,s,r,n,o)),d=0,u=0,p=0,m=0,_=0;a.push(h,l);for(var g=1,b=0;g<=c;++g)p=(u=(d=1-(b=g/c))*d)*d,_=(m=b*b)*b,a.push(p*h+3*u*b*e+3*d*m*s+_*n,p*l+3*u*b*i+3*d*m*r+_*o)},t}(),I=function(){function t(){}return t.curveLength=function(t,e,i,s,r,n){var o=t-2*i+r,a=e-2*s+n,h=2*i-2*t,l=2*s-2*e,c=4*(o*o+a*a),d=4*(o*h+a*l),u=h*h+l*l,p=2*Math.sqrt(c+d+u),m=Math.sqrt(c),f=2*c*m,_=2*Math.sqrt(u),g=d/m;return(f*p+m*d*(p-_)+(4*u*c-d*d)*Math.log((2*m+g+p)/(g+_)))/(4*f)},t.curveTo=function(e,i,s,r,n){for(var o=n[n.length-2],a=n[n.length-1],h=f._segmentsCount(t.curveLength(o,a,e,i,s,r)),l=0,c=0,d=1;d<=h;++d){var u=d/h;l=o+(e-o)*u,c=a+(i-a)*u,n.push(l+(e+(s-e)*u-l)*u,c+(i+(r-i)*u-c)*u)}},t}(),M=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),O=((E={})[c.SHAPES.POLY]=y,E[c.SHAPES.CIRC]=w,E[c.SHAPES.ELIP]=w,E[c.SHAPES.RECT]=v,E[c.SHAPES.RREC]=A,E),L=[],G=[],F={buildPoly:y,buildCircle:w,buildRectangle:v,buildRoundedRectangle:A,FILL_COMMANDS:O,BATCH_POOL:L,DRAW_CALL_POOL:G,buildLine:T,Star:R,ArcUtils:B,BezierUtils:D,QuadraticUtils:I,BatchPart:M},k=function(){function t(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=null),this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=s,this.type=t.type,this.points=[],this.holes=[]}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),N=new c.Point,V=new m.Bounds,U=function(t){function e(){var e=t.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new m.Bounds,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return b(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),G.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),L.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=null);var r=new k(t,e,i,s);return this.graphicsData.push(r),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var i=new k(t,null,null,e),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var s=e[i];if(s.fillStyle.visible&&(s.shape&&(s.matrix?s.matrix.applyInverse(t,N):N.copyFrom(t),s.shape.contains(N.x,N.y)))){var r=!1;if(s.holes)for(var n=0;n<s.holes.length;n++){if(s.holes[n].shape.contains(N.x,N.y)){r=!0;break}}if(!r)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,i=this.graphicsData,s=null,r=null;this.batches.length>0&&(r=(s=this.batches[this.batches.length-1]).style);for(var n=this.shapeIndex;n<i.length;n++){this.shapeIndex++;var o=i[n],a=o.fillStyle,h=o.lineStyle;O[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var l=0;l<2;l++){var c=0===l?a:h;if(c.visible){var d=c.texture.baseTexture,u=this.indices.length,m=this.points.length/2;d.wrapMode=p.WRAP_MODES.REPEAT,0===l?this.processFill(o):this.processLine(o);var f=this.points.length/2-m;0!==f&&(s&&!this._compareStyles(r,c)&&(s.end(u,m),s=null),s||((s=L.pop()||new M).begin(c,u,m),this.batches.push(s),r=c),this.addUvs(this.points,e,c.texture,m,f,c.matrix))}}}var _=this.indices.length,g=this.points.length/2;if(s&&s.end(_,g),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var b=g>65535&&t;this.indicesUint16=b?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],s=i.fillStyle,r=i.lineStyle;if(s&&!s.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var s=t[e],r=0;r<s.size;r++){var n=s.start+r;this.indicesUint16[n]=this.indicesUint16[n]-s.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++l.BaseTexture._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),G.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,s=this.textureIds,r=G.pop();r||((r=new l.BatchDrawCall).texArray=new l.BatchTextureArray),r.texArray.count=0,r.start=0,r.size=0,r.type=p.DRAW_MODES.TRIANGLES;var n=0,o=null,a=0,h=!1,c=p.DRAW_MODES.TRIANGLES,d=0;this.drawCalls.push(r);for(e=0;e<this.batches.length;e++){var u=this.batches[e],m=u.style,f=m.texture.baseTexture;h!==!!m.native&&(c=(h=!!m.native)?p.DRAW_MODES.LINES:p.DRAW_MODES.TRIANGLES,o=null,n=8,t++),o!==f&&(o=f,f._batchEnabled!==t&&(8===n&&(t++,n=0,r.size>0&&((r=G.pop())||((r=new l.BatchDrawCall).texArray=new l.BatchTextureArray),this.drawCalls.push(r)),r.start=d,r.size=0,r.texArray.count=0,r.type=c),f.touched=1,f._batchEnabled=t,f._batchLocation=n,f.wrapMode=10497,r.texArray.elements[r.texArray.count++]=f,n++)),r.size+=u.size,d+=u.size,a=f._batchLocation,this.addColors(i,m.color,m.alpha,u.attribSize,u.attribStart),this.addTextureIds(s,a,u.attribSize,u.attribStart)}l.BaseTexture._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,s=this.textureIds,r=new ArrayBuffer(12*t.length),n=new Float32Array(r),o=new Uint32Array(r),a=0,h=0;h<t.length/2;h++)n[a++]=t[2*h],n[a++]=t[2*h+1],n[a++]=e[2*h],n[a++]=e[2*h+1],o[a++]=i[h],n[a++]=s[h];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),y.triangulate(t,this)):O[t.type].triangulate(t,this)},e.prototype.processLine=function(t){T(t,this);for(var e=0;e<t.holes.length;e++)T(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];O[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=V,i=c.Matrix.IDENTITY;this._bounds.clear(),e.clear();for(var s=0;s<this.graphicsData.length;s++){var r=this.graphicsData[s],n=r.shape,o=r.type,a=r.lineStyle,h=r.matrix||c.Matrix.IDENTITY,l=0;if(a&&a.visible){var d=a.alignment;l=a.width,o===c.SHAPES.POLY?l*=.5+Math.abs(.5-d):l*=Math.max(0,d)}if(i!==h&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=h),o===c.SHAPES.RECT||o===c.SHAPES.RREC){var u=n;e.addFramePad(u.x,u.y,u.x+u.width,u.y+u.height,l,l)}else if(o===c.SHAPES.CIRC){var p=n;e.addFramePad(p.x,p.y,p.x,p.y,p.radius+l,p.radius+l)}else if(o===c.SHAPES.ELIP){var m=n;e.addFramePad(m.x,m.y,m.x,m.y,m.width+l,m.height+l)}else{var f=n;t.addVerticesMatrix(i,f.points,0,f.points.length,l,l)}}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var s=t[2*i],r=t[2*i+1];t[2*i]=e.a*s+e.c*r+e.tx,t[2*i+1]=e.b*s+e.d*r+e.ty}},e.prototype.addColors=function(t,e,i,s,r){void 0===r&&(r=0);var n=(e>>16)+(65280&e)+((255&e)<<16),o=d.premultiplyTint(n,i);t.length=Math.max(t.length,r+s);for(var a=0;a<s;a++)t[r+a]=o},e.prototype.addTextureIds=function(t,e,i,s){void 0===s&&(s=0),t.length=Math.max(t.length,s+i);for(var r=0;r<i;r++)t[s+r]=e},e.prototype.addUvs=function(t,e,i,s,r,n){void 0===n&&(n=null);for(var o=0,a=e.length,h=i.frame;o<r;){var l=t[2*(s+o)],c=t[2*(s+o)+1];if(n){var d=n.a*l+n.c*c+n.tx;c=n.b*l+n.d*c+n.ty,l=d}o++,e.push(l/h.width,c/h.height)}var u=i.baseTexture;(h.width<u.width||h.height<u.height)&&this.adjustUvs(e,i,a,r)},e.prototype.adjustUvs=function(t,e,i,s){for(var r=e.baseTexture,n=1e-6,o=i+2*s,a=e.frame,h=a.width/r.width,l=a.height/r.height,c=a.x/a.width,d=a.y/a.height,u=Math.floor(t[i]+n),p=Math.floor(t[i+1]+n),m=i+2;m<o;m+=2)u=Math.min(u,Math.floor(t[m]+n)),p=Math.min(p,Math.floor(t[m+1]+n));c-=u,d-=p;for(m=i;m<o;m+=2)t[m]=(t[m]+c)*h,t[m+1]=(t[m+1]+d)*l},e.BATCHABLE_SIZE=100,e}(l.BatchGeometry),W=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=o.BUTT,e.join=r.MITER,e.miterLimit=10,e}return b(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(_),j=new Float32Array(3),X={},Y=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i._geometry=e||new U,i._geometry.refCount++,i.shader=null,i.state=l.State.for2d(),i._fillStyle=new _,i._lineStyle=new W,i._matrix=null,i._holeMode=!1,i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i.pluginName="batch",i._transformID=-1,i.tint=16777215,i.blendMode=p.BLEND_MODES.NORMAL,i}return b(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t){if(void 0===t&&(t=null),"number"==typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){if("number"==typeof t){d.deprecation("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments,i=e[0],s=e[1],n=e[2],a=e[3],h=e[4],c=e[5],u=e[6];t={width:i,texture:s,color:n,alpha:a,matrix:h,alignment:c,native:u},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({width:0,texture:l.Texture.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:o.BUTT,join:r.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var p=t.width>0&&t.alpha>0;return p?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:p},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new c.Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new c.Polygon,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,s=i[i.length-2],r=i[i.length-1];return s===t&&r===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,s){this._initCurve();var r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),I.curveTo(t,e,i,s,r),this},e.prototype.bezierCurveTo=function(t,e,i,s,r,n){return this._initCurve(),D.curveTo(t,e,i,s,r,n,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,s,r){this._initCurve(t,e);var n=this.currentPath.points,o=B.curveTo(t,e,i,s,r,n);if(o){var a=o.cx,h=o.cy,l=o.radius,c=o.startAngle,d=o.endAngle,u=o.anticlockwise;this.arc(a,h,l,c,d,u)}return this},e.prototype.arc=function(t,e,i,s,r,n){if(void 0===n&&(n=!1),s===r)return this;if(!n&&r<=s?r+=c.PI_2:n&&s<=r&&(s+=c.PI_2),0===r-s)return this;var o=t+Math.cos(s)*i,a=e+Math.sin(s)*i,h=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var d=Math.abs(l[l.length-2]-o),u=Math.abs(l[l.length-1]-a);d<h&&u<h||l.push(o,a)}else this.moveTo(o,a),l=this.currentPath.points;return B.arc(o,a,t,e,i,s,r,n,l),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:l.Texture.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){if(t instanceof l.Texture){d.deprecation("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments,i=e[0],s=e[1],r=e[2],n=e[3];t={texture:i,color:s,alpha:r,matrix:n},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({texture:l.Texture.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var o=t.alpha>0;return o?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:o},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,s){return this.drawShape(new c.Rectangle(t,e,i,s))},e.prototype.drawRoundedRect=function(t,e,i,s,r){return this.drawShape(new c.RoundedRectangle(t,e,i,s,r))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new c.Circle(t,e,i))},e.prototype.drawEllipse=function(t,e,i,s){return this.drawShape(new c.Ellipse(t,e,i,s))},e.prototype.drawPolygon=function(){for(var t,e=arguments,i=[],s=0;s<arguments.length;s++)i[s]=e[s];var r=!0,n=i[0];n.points?(r=n.closeStroke,t=n.points):t=Array.isArray(i[0])?i[0]:i;var o=new c.Polygon(t);return o.closeStroke=r,this.drawShape(o),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,e,i,s,r,n){return void 0===n&&(n=0),this.drawPolygon(new R(t,e,i,s,r,n))},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===c.SHAPES.RECT&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,i=t.context.supports.uint32Indices;e.updateBatches(i),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var s=0;s<i;s++){var r=t.batches[s],n=r.style.color,o=new Float32Array(this.vertexData.buffer,8*r.attribStart,2*r.attribSize),a=new Float32Array(t.uvsFloat32.buffer,8*r.attribStart,2*r.attribSize),h={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:d.hex2rgb(n),_tintRGB:n,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[s]=h}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var s=this.batches[e];s.worldAlpha=this.worldAlpha*s.alpha,t.plugins[this.pluginName].render(s)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this._geometry,s=this.tint,r=this.worldAlpha,n=e.uniforms,o=i.drawCalls;n.translationMatrix=this.transform.worldTransform,n.tint[0]=(s>>16&255)/255*r,n.tint[1]=(s>>8&255)/255*r,n.tint[2]=(255&s)/255*r,n.tint[3]=r,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var a=0,h=o.length;a<h;a++)this._renderDrawCallDirect(t,i.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.texArray,s=e.type,r=e.size,n=e.start,o=i.count,a=0;a<o;a++)t.texture.bind(i.elements[a],a);t.geometry.draw(s,r,n)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!X[i]){for(var s=t.plugins.batch.MAX_TEXTURES,r=new Int32Array(s),n=0;n<s;n++)r[n]=n;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new c.Matrix,default:l.UniformGroup.from({uSamplers:r},!0)},a=t.plugins[i]._shader.program;X[i]=new l.Shader(a,o)}e=X[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,s=e.minY,r=e.maxX,n=e.maxY;this._bounds.addFrame(this.transform,i,s,r,n)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=d.hex2rgb(this.tint,j),e=0;e<this.batches.length;e++){var i=this.batches[e],s=i._batchRGB,r=(t[0]*s[0]*255<<16)+(t[1]*s[1]*255<<8)+(0|t[2]*s[2]*255);i._tintRGB=(r>>16)+(65280&r)+((255&r)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,i=e.a,s=e.b,r=e.c,n=e.d,o=e.tx,a=e.ty,h=this._geometry.points,l=this.vertexData,c=0,d=0;d<h.length;d+=2){var u=h[d],p=h[d+1];l[c++]=i*u+r*p+o,l[c++]=n*p+s*u+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e._TEMP_POINT=new c.Point,e}(m.Container)})),a.register("4Y6fG",(function(e,i){t(e.exports,"Text",(()=>v)),t(e.exports,"TextMetrics",(()=>b)),t(e.exports,"TextStyle",(()=>m)),t(e.exports,"TEXT_GRADIENT",(()=>s));var s,r,n=a("f6Kro"),o=a("8lrKM"),h=a("iZTtn"),l=a("VYQOJ"),c=a("5pLOZ"),d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};(r=s||(s={}))[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL";var u={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:s.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},p=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],m=function(){function t(t){this.styleID=0,this.reset(),g(this,t,t)}return t.prototype.clone=function(){var e={};return g(e,this,u),new t(e)},t.prototype.reset=function(){g(this,u,u)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=_(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=_(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=_(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var s=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&p.indexOf(s)<0&&(s='"'+s+'"'),e[i]=s}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function f(t){return"number"==typeof t?c.hex2string(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function _(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=f(t[e]);return t}return f(t)}function g(t,e,i){for(var s in i)Array.isArray(e[s])?t[s]=e[s].slice():t[s]=e[s]}var b=function(){function t(t,e,i,s,r,n,o,a,h){this.text=t,this.style=e,this.width=i,this.height=s,this.lines=r,this.lineWidths=n,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}return t.measureText=function(e,i,s,r){void 0===r&&(r=t._canvas),s=null==s?i.wordWrap:s;var n=i.toFontString(),o=t.measureFont(n);0===o.fontSize&&(o.fontSize=i.fontSize,o.ascent=i.fontSize);var a=r.getContext("2d");a.font=n;for(var h=(s?t.wordWrap(e,i,r):e).split(/(?:\r\n|\r|\n)/),l=new Array(h.length),c=0,d=0;d<h.length;d++){var u=a.measureText(h[d]).width+(h[d].length-1)*i.letterSpacing;l[d]=u,c=Math.max(c,u)}var p=c+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var m=i.lineHeight||o.fontSize+i.strokeThickness,f=Math.max(m,o.fontSize+i.strokeThickness)+(h.length-1)*(m+i.leading);return i.dropShadow&&(f+=i.dropShadowDistance),new t(e,i,p,f,h,l,m+i.leading,c,o)},t.wordWrap=function(e,i,s){void 0===s&&(s=t._canvas);for(var r=s.getContext("2d"),n=0,o="",a="",h=Object.create(null),l=i.letterSpacing,c=i.whiteSpace,d=t.collapseSpaces(c),u=t.collapseNewlines(c),p=!d,m=i.wordWrapWidth+l,f=t.tokenize(e),_=0;_<f.length;_++){var g=f[_];if(t.isNewline(g)){if(!u){a+=t.addLine(o),p=!d,o="",n=0;continue}g=" "}if(d){var b=t.isBreakingSpace(g),y=t.isBreakingSpace(o[o.length-1]);if(b&&y)continue}var w=t.getFromCache(g,l,h,r);if(w>m)if(""!==o&&(a+=t.addLine(o),o="",n=0),t.canBreakWords(g,i.breakWords))for(var v=t.wordWrapSplit(g),x=0;x<v.length;x++){for(var S=v[x],A=1;v[x+A];){var P=v[x+A],C=S[S.length-1];if(t.canBreakChars(C,P,g,x,i.breakWords))break;S+=P,A++}x+=S.length-1;var T=t.getFromCache(S,l,h,r);T+n>m&&(a+=t.addLine(o),p=!1,o="",n=0),o+=S,n+=T}else{o.length>0&&(a+=t.addLine(o),o="",n=0);var E=_===f.length-1;a+=t.addLine(g,!E),p=!1,o="",n=0}else w+n>m&&(p=!1,a+=t.addLine(o),o="",n=0),(o.length>0||!t.isBreakingSpace(g)||p)&&(o+=g,n+=w)}return a+=t.addLine(o,!1)},t.addLine=function(e,i){return void 0===i&&(i=!0),e=t.trimRight(e),e=i?e+"\n":e},t.getFromCache=function(t,e,i,s){var r=i[t];if("number"!=typeof r){var n=t.length*e;r=s.measureText(t).width+n,i[t]=r}return r},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var s=e[i];if(!t.isBreakingSpace(s))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],s="";if("string"!=typeof e)return i;for(var r=0;r<e.length;r++){var n=e[r];t.isBreakingSpace(n)||t.isNewline(n)?(""!==s&&(i.push(s),s=""),i.push(n)):s+=n}return""!==s&&i.push(s),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,s,r){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={ascent:0,descent:0,fontSize:0},s=t._canvas,r=t._context;r.font=e;var n=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(r.measureText(n).width),a=Math.ceil(r.measureText(t.BASELINE_SYMBOL).width),h=2*a;a=a*t.BASELINE_MULTIPLIER|0,s.width=o,s.height=h,r.fillStyle="#f00",r.fillRect(0,0,o,h),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(n,0,a);var l=r.getImageData(0,0,o,h).data,c=l.length,d=4*o,u=0,p=0,m=!1;for(u=0;u<a;++u){for(var f=0;f<d;f+=4)if(255!==l[p+f]){m=!0;break}if(m)break;p+=d}for(i.ascent=a-u,p=c-d,m=!1,u=h;u>a;--u){for(f=0;f<d;f+=4)if(255!==l[p+f]){m=!0;break}if(m)break;p-=d}return i.descent=u-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),y=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();y.width=y.height=10,b._canvas=y,b._context=y.getContext("2d"),b._fonts={},b.METRICS_STRING="|ÉqÅ",b.BASELINE_SYMBOL="M",b.BASELINE_MULTIPLIER=1.4,b._newlines=[10,13],b._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var w={texture:!0,children:!1,baseTexture:!0},v=function(t){function e(e,i,s){var r=this,n=!1;s||(s=document.createElement("canvas"),n=!0),s.width=3,s.height=3;var a=o.Texture.from(s);return a.orig=new l.Rectangle,a.trim=new l.Rectangle,(r=t.call(this,a)||this)._ownCanvas=n,r.canvas=s,r.context=r.canvas.getContext("2d"),r._resolution=h.settings.RESOLUTION,r._autoResolution=!0,r._text=null,r._style=null,r._styleListener=null,r._font="",r.text=e,r.style=i,r.localStyleID=-1,r}return function(t,e){function i(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i,s,r=this.context,n=b.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=n.width,a=n.height,h=n.lines,l=n.lineHeight,d=n.lineWidths,u=n.maxLineWidth,p=n.fontProperties;this.canvas.width=Math.ceil((Math.max(1,o)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+2*e.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;for(var m=e.dropShadow?2:1,f=0;f<m;++f){var _=e.dropShadow&&0===f,g=_?Math.ceil(Math.max(1,a)+2*e.padding):0,y=g*this._resolution;if(_){r.fillStyle="black",r.strokeStyle="black";var w=e.dropShadowColor,v=c.hex2rgb("number"==typeof w?w:c.string2hex(w));r.shadowColor="rgba("+255*v[0]+","+255*v[1]+","+255*v[2]+","+e.dropShadowAlpha+")",r.shadowBlur=e.dropShadowBlur,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+y}else r.fillStyle=this._generateFillStyle(e,h,n),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;for(var x=0;x<h.length;x++)i=e.strokeThickness/2,s=e.strokeThickness/2+x*l+p.ascent,"right"===e.align?i+=u-d[x]:"center"===e.align&&(i+=(u-d[x])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(h[x],i+e.padding,s+e.padding-g,!0),e.fill&&this.drawLetterSpacing(h[x],i+e.padding,s+e.padding-g)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i,s){void 0===s&&(s=!1);var r=this._style.letterSpacing;if(0!==r)for(var n=e,o=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,h=0,l=0;l<o.length;++l){var c=o[l];s?this.context.strokeText(c,n,i):this.context.fillText(c,n,i),n+=a-(h=this.context.measureText(t.substring(l+1)).width)+r,a=h}else s?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=c.trimCanvas(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,s=this._style,r=s.trim?0:s.padding,n=i.baseTexture;i.trim.width=i._frame.width=Math.ceil(t.width/this._resolution),i.trim.height=i._frame.height=Math.ceil(t.height/this._resolution),i.trim.x=-r,i.trim.y=-r,i.orig.width=i._frame.width-2*r,i.orig.height=i._frame.height-2*r,this._onTextureUpdate(),n.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,i){var r,n=t.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];var o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,h=Math.ceil(this.canvas.width/this._resolution)-o-2*a,l=Math.ceil(this.canvas.height/this._resolution)-o-2*a,c=n.slice(),d=t.fillGradientStops.slice();if(!d.length)for(var u=c.length+1,p=1;p<u;++p)d.push(p/u);if(c.unshift(n[0]),d.unshift(0),c.push(n[n.length-1]),d.push(1),t.fillGradientType===s.LINEAR_VERTICAL){r=this.context.createLinearGradient(h/2,a,h/2,l+a);var m=0,f=(i.fontProperties.fontSize+t.strokeThickness)/l;for(p=0;p<e.length;p++)for(var _=i.lineHeight*p,g=0;g<c.length;g++){var b=_/l+("number"==typeof d[g]?d[g]:g/c.length)*f,y=Math.max(m,b);y=Math.min(y,1),r.addColorStop(y,c[g]),m=y}}else{r=this.context.createLinearGradient(a,l/2,h+a,l/2);var w=c.length+1,v=1;for(p=0;p<c.length;p++){var x=void 0;x="number"==typeof d[p]?d[p]:v/w,r.addColorStop(x,c[p]),v++}}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},w,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=c.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=c.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof m?t:new m(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e}(n.Sprite)})),a.register("f6Kro",(function(e,i){t(e.exports,"Sprite",(()=>p));var s=a("44Xx0"),r=a("8lrKM"),n=a("8TYxR"),o=a("VYQOJ"),h=a("iZTtn"),l=a("5pLOZ"),c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var d=new o.Point,u=new Uint16Array([0,1,2,0,2,3]),p=function(t){function e(e){var i=t.call(this)||this;return i._anchor=new o.ObservablePoint(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=s.BLEND_MODES.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||r.Texture.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=u,i.pluginName="batch",i.isSprite=!0,i._roundPixels=h.settings.ROUND_PIXELS,i}return function(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=l.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=l.sign(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,s=e.b,r=e.c,n=e.d,o=e.tx,a=e.ty,l=this.vertexData,c=t.trim,d=t.orig,u=this._anchor,p=0,m=0,f=0,_=0;if(c?(p=(m=c.x-u._x*d.width)+c.width,f=(_=c.y-u._y*d.height)+c.height):(p=(m=-u._x*d.width)+d.width,f=(_=-u._y*d.height)+d.height),l[0]=i*m+r*_+o,l[1]=n*_+s*m+a,l[2]=i*p+r*_+o,l[3]=n*_+s*p+a,l[4]=i*p+r*f+o,l[5]=n*f+s*p+a,l[6]=i*m+r*f+o,l[7]=n*f+s*m+a,this._roundPixels)for(var g=h.settings.RESOLUTION,b=0;b<l.length;++b)l[b]=Math.round((l[b]*g|0)/g)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,s=this._anchor,r=this.transform.worldTransform,n=r.a,o=r.b,a=r.c,h=r.d,l=r.tx,c=r.ty,d=-s._x*i.width,u=d+i.width,p=-s._y*i.height,m=p+i.height;e[0]=n*d+a*p+l,e[1]=h*p+o*d+c,e[2]=n*u+a*p+l,e[3]=h*p+o*u+c,e[4]=n*u+a*m+l,e[5]=h*m+o*u+c,e[6]=n*d+a*m+l,e[7]=h*m+o*d+c},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,d);var e=this._texture.orig.width,i=this._texture.orig.height,s=-e*this.anchor.x,r=0;return d.x>=s&&d.x<s+e&&(r=-i*this.anchor.y,d.y>=r&&d.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,i){return new e(t instanceof r.Texture?t:r.Texture.from(t,i))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=l.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=l.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||r.Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(n.Container)})),a.register("9uIz8",(function(e,i){t(e.exports,"SpritesheetLoader",(()=>d)),t(e.exports,"Spritesheet",(()=>c));var r=a("VYQOJ"),n=a("8lrKM"),o=a("5pLOZ"),h=a("89zMi"),l=a("hzsgD"),c=function(){function t(t,e,i){void 0===i&&(i=null),this._texture=t instanceof n.Texture?t:null,this.baseTexture=t instanceof n.BaseTexture?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var s=this.baseTexture.resource;this.resolution=this._updateResolution(i||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,i=o.getResolutionOfUrl(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,s=t.BATCH_SIZE;i-e<s&&i<this._frameKeys.length;){var o=this._frameKeys[i],a=this._frames[o],h=a.frame;if(h){var l=null,c=null,d=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,u=new r.Rectangle(0,0,Math.floor(d.w)/this.resolution,Math.floor(d.h)/this.resolution);l=a.rotated?new r.Rectangle(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):new r.Rectangle(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(c=new r.Rectangle(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[o]=new n.Texture(this.baseTexture,l,u,c,a.rotated?2:0,a.anchor),n.Texture.addToCache(this.textures[o],o)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var s=t[e][i];this.animations[e].push(this.textures[s])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var i in void 0===t&&(t=!1),this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),d=function(){function t(){}return t.use=function(e,i){var s=this,r=e.name+"_image";if(e.data&&e.type===l.LoaderResource.TYPE.JSON&&e.data.frames&&!s.resources[r]){var n={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},o=t.getResourcePath(e,s.baseUrl);s.add(r,o,n,(function(t){if(t.error)i(t.error);else{var s=new c(t.texture,e.data,e.url);s.parse((function(){e.spritesheet=s,e.textures=s.textures,i()}))}}))}else i()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:s(h).resolve(t.url.replace(e,""),t.data.meta.image)},t}()})),a.register("deEcN",(function(e,i){t(e.exports,"TilingSpriteRenderer",(()=>f)),t(e.exports,"TilingSprite",(()=>u));var s=a("8lrKM"),r=a("VYQOJ"),n=a("f6Kro"),o=a("5pLOZ"),h=a("44Xx0"),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function c(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var d=new r.Point,u=function(t){function e(e,i,n){void 0===i&&(i=100),void 0===n&&(n=100);var o=t.call(this,e)||this;return o.tileTransform=new r.Transform,o._width=i,o._height=n,o.uvMatrix=o.texture.uvMatrix||new s.TextureMatrix(e),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return c(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,s)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new r.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,d);var e=this._width,i=this._height,s=-e*this.anchor._x;if(d.x>=s&&d.x<s+e){var r=-i*this.anchor._y;if(d.y>=r&&d.y<r+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i){return"number"==typeof i&&(o.deprecation("5.3.0","TilingSprite.from use options instead of width and height args"),i={width:i,height:arguments[2]}),new e(s.Texture.from(t,i),i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(n.Sprite),p="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",m=new r.Matrix,f=function(t){function e(e){var i=t.call(this,e)||this,r={globals:i.renderer.globalUniforms};return i.shader=s.Shader.from(p,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",r),i.simpleShader=s.Shader.from(p,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",r),i.quad=new s.QuadUv,i.state=s.State.for2d(),i}return c(e,t),e.prototype.render=function(t){var e=this.renderer,i=this.quad,s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((s=i.uvs)[0]=s[6]=-t.anchor.x,s[1]=s[3]=-t.anchor.y,s[2]=s[4]=1-t.anchor.x,s[5]=s[7]=1-t.anchor.y),i.invalidate();var r=t._texture,n=r.baseTexture,a=t.tileTransform.localTransform,l=t.uvMatrix,c=n.isPowerOfTwo&&r.frame.width===n.width&&r.frame.height===n.height;c&&(n._glTextures[e.CONTEXT_UID]?c=n.wrapMode!==h.WRAP_MODES.CLAMP:n.wrapMode===h.WRAP_MODES.CLAMP&&(n.wrapMode=h.WRAP_MODES.REPEAT));var d=c?this.simpleShader:this.shader,u=r.width,p=r.height,f=t._width,_=t._height;m.set(a.a*u/f,a.b*u/_,a.c*p/f,a.d*p/_,a.tx/f,a.ty/_),m.invert(),c?m.prepend(l.mapCoord):(d.uniforms.uMapCoord=l.mapCoord.toArray(!0),d.uniforms.uClampFrame=l.uClampFrame,d.uniforms.uClampOffset=l.uClampOffset),d.uniforms.uTransform=m.toArray(!0),d.uniforms.uColor=o.premultiplyTintToRgba(t.tint,t.worldAlpha,d.uniforms.uColor,n.alphaMode),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=r,e.shader.bind(d),e.geometry.bind(i),this.state.blendMode=o.correctBlendMode(t.blendMode,n.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(s.ObjectRenderer)})),a.register("cHFFH",(function(e,i){t(e.exports,"BitmapFontData",(()=>p)),t(e.exports,"BitmapFontLoader",(()=>P)),t(e.exports,"BitmapText",(()=>A)),t(e.exports,"BitmapFont",(()=>v));var s=a("VYQOJ"),r=a("iZTtn"),n=a("k5gBw"),o=a("5pLOZ"),h=a("8lrKM"),l=a("4Y6fG"),c=a("8TYxR"),d=a("hzsgD"),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var p=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},m=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var s in e){var r=e[s].match(/^[a-z]+/gm)[0],n=e[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var a in n){var h=n[a].split("="),l=h[0],c=h[1].replace(/"/gm,""),d=parseFloat(c),u=isNaN(d)?c:d;o[l]=u}i[r].push(o)}var m=new p;return i.info.forEach((function(t){return m.info.push({face:t.face,size:parseInt(t.size,10)})})),i.common.forEach((function(t){return m.common.push({lineHeight:parseInt(t.lineHeight,10)})})),i.page.forEach((function(t){return m.page.push({id:parseInt(t.id,10),file:t.file})})),i.char.forEach((function(t){return m.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),i.kerning.forEach((function(t){return m.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),m},t}(),f=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new p,i=t.getElementsByTagName("info"),s=t.getElementsByTagName("common"),r=t.getElementsByTagName("page"),n=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),a=0;a<i.length;a++)e.info.push({face:i[a].getAttribute("face"),size:parseInt(i[a].getAttribute("size"),10)});for(a=0;a<s.length;a++)e.common.push({lineHeight:parseInt(s[a].getAttribute("lineHeight"),10)});for(a=0;a<r.length;a++)e.page.push({id:parseInt(r[a].getAttribute("id"),10)||0,file:r[a].getAttribute("file")});for(a=0;a<n.length;a++){var h=n[a];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(a=0;a<o.length;a++)e.kerning.push({first:parseInt(o[a].getAttribute("first"),10),second:parseInt(o[a].getAttribute("second"),10),amount:parseInt(o[a].getAttribute("amount"),10)});return e},t}(),_=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new self.DOMParser).parseFromString(t,"text/xml");return f.test(e)}return!1},t.parse=function(t){var e=(new window.DOMParser).parseFromString(t,"text/xml");return f.parse(e)},t}(),g=[m,f,_];function b(t){for(var e=0;e<g.length;e++)if(g[e].test(t))return g[e];return null}function y(t,e,i,s,r,n){var o,a=i.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var h=i.dropShadow?i.dropShadowDistance:0,c=i.padding||0,d=Math.ceil(t.width/s)-h-2*c,u=Math.ceil(t.height/s)-h-2*c,p=a.slice(),m=i.fillGradientStops.slice();if(!m.length)for(var f=p.length+1,_=1;_<f;++_)m.push(_/f);if(p.unshift(a[0]),m.unshift(0),p.push(a[a.length-1]),m.push(1),i.fillGradientType===l.TEXT_GRADIENT.LINEAR_VERTICAL){o=e.createLinearGradient(d/2,c,d/2,u+c);var g=0,b=(n.fontProperties.fontSize+i.strokeThickness)/u;for(_=0;_<r.length;_++)for(var y=n.lineHeight*_,w=0;w<p.length;w++){var v=y/u+("number"==typeof m[w]?m[w]:w/p.length)*b,x=Math.max(g,v);x=Math.min(x,1),o.addColorStop(x,p[w]),g=x}}else{o=e.createLinearGradient(c,u/2,d+c,u/2);var S=p.length+1,A=1;for(_=0;_<p.length;_++){var P=void 0;P="number"==typeof m[_]?m[_]:A/S,o.addColorStop(P,p[_]),A++}}return o}function w(t,e,i,s,r,n,a){var h=i.text,l=i.fontProperties;e.translate(s,r),e.scale(n,n);var c=a.strokeThickness/2,d=-a.strokeThickness/2;e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=y(t,e,a,n,[h],i),e.strokeStyle=a.stroke,e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=y(t,e,a,n,[h],i),e.strokeStyle=a.stroke;var u=a.dropShadowColor,p=o.hex2rgb("number"==typeof u?u:o.string2hex(u));a.dropShadow?(e.shadowColor="rgba("+255*p[0]+","+255*p[1]+","+255*p[2]+","+a.dropShadowAlpha+")",e.shadowBlur=a.dropShadowBlur,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*a.dropShadowDistance,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*a.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),a.stroke&&a.strokeThickness&&e.strokeText(h,c,d+i.lineHeight-l.descent),a.fill&&e.fillText(h,c,d+i.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}var v=function(){function t(t,e,i){var r=t.info[0],n=t.common[0],a=t.page[0],l=o.getResolutionOfUrl(a.file),c={};this._ownsTextures=i,this.font=r.face,this.size=r.size,this.lineHeight=n.lineHeight/l,this.chars={},this.pageTextures=c;for(var d=0;d<t.page.length;d++){var u=t.page[d],p=u.id,m=u.file;c[p]=e instanceof Array?e[d]:e[m]}for(d=0;d<t.char.length;d++){var f=t.char[d],_=(p=f.id,f.page),g=t.char[d],b=g.x,y=g.y,w=g.width,v=g.height,x=g.xoffset,S=g.yoffset,A=g.xadvance;b/=l,y/=l,w/=l,v/=l,x/=l,S/=l,A/=l;var P=new s.Rectangle(b+c[_].frame.x/l,y+c[_].frame.y/l,w,v);this.chars[p]={xOffset:x,yOffset:S,xAdvance:A,kerning:{},texture:new h.Texture(c[_].baseTexture,P),page:_}}for(d=0;d<t.kerning.length;d++){var C=t.kerning[d],T=C.first,E=C.second,R=C.amount;T/=l,E/=l,R/=l,this.chars[E]&&(this.chars[E].kerning[T]=R)}}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,i,s){var r;if(e instanceof p)r=e;else{var n=b(e);if(!n)throw new Error("Unrecognized data format for font.");r=n.parse(e)}i instanceof h.Texture&&(i=[i]);var o=new t(r,i,s);return t.available[o.font]=o,o},t.uninstall=function(e){var i=t.available[e];if(!i)throw new Error("No font found named '"+e+"'");i.destroy(),delete t.available[e]},t.from=function(e,i,s){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var r=Object.assign({},t.defaultOptions,s),n=r.chars,o=r.padding,a=r.resolution,c=r.textureWidth,d=r.textureHeight,u=function(t){"string"==typeof t&&(t=[t]);for(var e=[],i=0,s=t.length;i<s;i++){var r=t[i];if(Array.isArray(r)){if(2!==r.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+r.length+".");var n=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<n)throw new Error("[BitmapFont]: Invalid character range.");for(var a=n,h=o;a<=h;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,r.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(n),m=i instanceof l.TextStyle?i:new l.TextStyle(i),f=c,_=new p;_.info[0]={face:m.fontFamily,size:m.fontSize},_.common[0]={lineHeight:m.fontSize};for(var g,b,y,v=0,x=0,S=0,A=[],P=0;P<u.length;P++){g||((g=document.createElement("canvas")).width=c,g.height=d,b=g.getContext("2d"),y=new h.BaseTexture(g,{resolution:a}),A.push(new h.Texture(y)),_.page.push({id:A.length-1,file:""}));var C=l.TextMetrics.measureText(u[P],m,!1,g),T=C.width,E=Math.ceil(C.height),R=Math.ceil(("italic"===m.fontStyle?2:1)*T);if(x>=d-E*a){if(0===x)throw new Error("[BitmapFont] textureHeight "+d+"px is too small for "+m.fontSize+"px fonts");--P,g=null,b=null,y=null,x=0,v=0,S=0}else if(S=Math.max(E+C.fontProperties.descent,S),R*a+v>=f)--P,x+=S*a,x=Math.ceil(x),v=0,S=0;else{w(g,b,C,v,x,a,m);var B=C.text.charCodeAt(0);_.char.push({id:B,page:A.length-1,x:v/a,y:x/a,width:R,height:E,xoffset:0,yoffset:0,xadvance:Math.ceil(T-(m.dropShadow?m.dropShadowDistance:0)-(m.stroke?m.strokeThickness:0))}),v+=(R+2*o)*a,v=Math.ceil(v)}}var D=new t(_,A,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=D,D},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),x=[],S=[],A=function(t){function e(i,n){void 0===n&&(n={});var a=t.call(this)||this;a._tint=16777215,n.font&&(o.deprecation("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),a._upgradeStyle(n));var h=Object.assign({},e.styleDefaults,n),l=h.align,c=h.tint,d=h.maxWidth,u=h.letterSpacing,p=h.fontName,m=h.fontSize;if(!v.available[p])throw new Error('Missing BitmapFont "'+p+'"');return a._activePagesMeshData=[],a._textWidth=0,a._textHeight=0,a._align=l,a._tint=c,a._fontName=p,a._fontSize=m||v.available[p].size,a._text=i,a._maxWidth=d,a._maxLineHeight=0,a._letterSpacing=u,a._anchor=new s.ObservablePoint((function(){a.dirty=!0}),a,0,0),a._roundPixels=r.settings.ROUND_PIXELS,a.dirty=!0,a._textureCache={},a}return function(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(){for(var t,e=v.available[this._fontName],i=this._fontSize/e.size,r=new s.Point,a=[],l=[],c=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",d=c.length,u=this._maxWidth*e.size/this._fontSize,p=null,m=0,f=0,_=0,g=-1,b=0,y=0,w=0,A=0;A<d;A++){var P=c.charCodeAt(A),C=c.charAt(A);if(/(?:\s)/.test(C)&&(g=A,b=m),"\r"!==C&&"\n"!==C){var T=e.chars[P];if(T){p&&T.kerning[p]&&(r.x+=T.kerning[p]);var E=S.pop()||{texture:h.Texture.EMPTY,line:0,charCode:0,position:new s.Point};E.texture=T.texture,E.line=_,E.charCode=P,E.position.x=r.x+T.xOffset+this._letterSpacing/2,E.position.y=r.y+T.yOffset,a.push(E),r.x+=T.xAdvance+this._letterSpacing,m=r.x,w=Math.max(w,T.yOffset+T.texture.height),p=P,-1!==g&&u>0&&r.x>u&&(++y,o.removeItems(a,1+g-y,1+A-g),A=g,g=-1,l.push(b),f=Math.max(f,b),_++,r.x=0,r.y+=e.lineHeight,p=null)}}else l.push(m),f=Math.max(f,m),++_,++y,r.x=0,r.y+=e.lineHeight,p=null}var R=c.charAt(c.length-1);"\r"!==R&&"\n"!==R&&(/(?:\s)/.test(R)&&(m=b),l.push(m),f=Math.max(f,m));var B=[];for(A=0;A<=_;A++){var D=0;"right"===this._align?D=f-l[A]:"center"===this._align&&(D=(f-l[A])/2),B.push(D)}var I=a.length,M={},O=[],L=this._activePagesMeshData;for(A=0;A<L.length;A++)x.push(L[A]);for(A=0;A<I;A++){var G=(Y=a[A].texture).baseTexture.uid;if(!M[G]){if(!(Q=x.pop())){var F=new n.MeshGeometry,k=new n.MeshMaterial(h.Texture.EMPTY);Q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new n.Mesh(F,k),vertices:null,uvs:null,indices:null}}Q.index=0,Q.indexCount=0,Q.vertexCount=0,Q.uvsCount=0,Q.total=0;var N=this._textureCache;N[G]=N[G]||new h.Texture(Y.baseTexture),Q.mesh.texture=N[G],Q.mesh.tint=this._tint,O.push(Q),M[G]=Q}M[G].total++}for(A=0;A<L.length;A++)-1===O.indexOf(L[A])&&this.removeChild(L[A].mesh);for(A=0;A<O.length;A++)O[A].mesh.parent!==this&&this.addChild(O[A].mesh);for(var A in this._activePagesMeshData=O,M){var V=(Q=M[A]).total;if(!((null===(t=Q.indices)||void 0===t?void 0:t.length)>6*V)||Q.vertices.length<2*n.Mesh.BATCHABLE_SIZE)Q.vertices=new Float32Array(8*V),Q.uvs=new Float32Array(8*V),Q.indices=new Uint16Array(6*V);else for(var U=Q.total,W=Q.vertices,j=8*U;j<W.length;j++)W[j]=0;Q.mesh.size=6*V}for(A=0;A<I;A++){var X=(C=a[A]).position.x+B[C.line];this._roundPixels&&(X=Math.round(X));var Y,H=X*i,z=C.position.y*i,J=M[(Y=C.texture).baseTexture.uid],q=Y.frame,K=Y._uvs,Z=J.index++;J.indices[6*Z+0]=0+4*Z,J.indices[6*Z+1]=1+4*Z,J.indices[6*Z+2]=2+4*Z,J.indices[6*Z+3]=0+4*Z,J.indices[6*Z+4]=2+4*Z,J.indices[6*Z+5]=3+4*Z,J.vertices[8*Z+0]=H,J.vertices[8*Z+1]=z,J.vertices[8*Z+2]=H+q.width*i,J.vertices[8*Z+3]=z,J.vertices[8*Z+4]=H+q.width*i,J.vertices[8*Z+5]=z+q.height*i,J.vertices[8*Z+6]=H,J.vertices[8*Z+7]=z+q.height*i,J.uvs[8*Z+0]=K.x0,J.uvs[8*Z+1]=K.y0,J.uvs[8*Z+2]=K.x1,J.uvs[8*Z+3]=K.y1,J.uvs[8*Z+4]=K.x2,J.uvs[8*Z+5]=K.y2,J.uvs[8*Z+6]=K.x3,J.uvs[8*Z+7]=K.y3}for(var A in this._textWidth=f*i,this._textHeight=(r.y+e.lineHeight)*i,M){var Q=M[A];if(0!==this.anchor.x||0!==this.anchor.y)for(var $=0,tt=this._textWidth*this.anchor.x,et=this._textHeight*this.anchor.y,it=0;it<Q.total;it++)Q.vertices[$++]-=tt,Q.vertices[$++]-=et,Q.vertices[$++]-=tt,Q.vertices[$++]-=et,Q.vertices[$++]-=tt,Q.vertices[$++]-=et,Q.vertices[$++]-=tt,Q.vertices[$++]-=et;this._maxLineHeight=w*i;var st=Q.mesh.geometry.getBuffer("aVertexPosition"),rt=Q.mesh.geometry.getBuffer("aTextureCoord"),nt=Q.mesh.geometry.getIndex();st.data=Q.vertices,rt.data=Q.uvs,nt.data=Q.indices,st.update(),rt.update(),nt.update()}for(A=0;A<a.length;A++)S.push(a[A])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!v.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype._upgradeStyle=function(t){if("string"==typeof t.font){var e=t.font.split(" ");t.fontName=1===e.length?e[0]:e.slice(1).join(" "),e.length>=2&&(t.fontSize=parseInt(e[0],10))}else t.fontName=t.font.name,t.fontSize="number"==typeof t.font.size?t.font.size:parseInt(t.font.size,10)},e.prototype.destroy=function(e){var i=this._textureCache;for(var s in i){i[s].destroy(),delete i[s]}this._textureCache=null,t.prototype.destroy.call(this,e)},e.registerFont=function(t,e){return o.deprecation("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),v.install(t,e)},Object.defineProperty(e,"fonts",{get:function(){return o.deprecation("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),v.available},enumerable:!1,configurable:!0}),e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(c.Container),P=function(){function t(){}return t.add=function(){d.LoaderResource.setExtensionXhrType("fnt",d.LoaderResource.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,i){var s=b(e.data);if(s)for(var r=t.getBaseUrl(this,e),n=s.parse(e.data),o={},a=function(t){o[t.metadata.pageFile]=t.texture,Object.keys(o).length===n.page.length&&(e.bitmapFont=v.install(n,o,!0),i())},h=0;h<n.page.length;++h){var l=n.page[h].file,c=r+l,u=!1;for(var p in this.resources){var m=this.resources[p];if(m.url===c){m.metadata.pageFile=l,m.texture?a(m):m.onAfterMiddleware.add(a),u=!0;break}}if(!u){var f={crossOrigin:e.crossOrigin,loadType:d.LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(c,f,a)}}else i()},t.getBaseUrl=function(e,i){var s=i.isDataUrl?"":t.dirname(i.url);return i.isDataUrl&&("."===s&&(s=""),e.baseUrl&&s&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(s+="/")),(s=s.replace(e.baseUrl,""))&&"/"!==s.charAt(s.length-1)&&(s+="/"),s},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}()})),a.register("k5gBw",(function(e,i){t(e.exports,"MeshGeometry",(()=>g)),t(e.exports,"MeshBatchUvs",(()=>u)),t(e.exports,"MeshMaterial",(()=>_)),t(e.exports,"Mesh",(()=>f));var s=a("8lrKM"),r=a("VYQOJ"),n=a("44Xx0"),o=a("8TYxR"),h=a("iZTtn"),l=a("5pLOZ"),c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function d(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var u=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),p=new r.Point,m=new r.Polygon,f=function(t){function e(e,i,r,o){void 0===o&&(o=n.DRAW_MODES.TRIANGLES);var a=t.call(this)||this;return a.geometry=e,e.refCount++,a.shader=i,a.state=r||s.State.for2d(),a.drawMode=o,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=0,a._transformID=-1,a._roundPixels=h.settings.ROUND_PIXELS,a.batchUvs=null,a}return d(e,t),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this.shader.tint},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===n.DRAW_MODES.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var i=this.transform.worldTransform,s=i.a,r=i.b,n=i.c,o=i.d,a=i.tx,l=i.ty,c=this.vertexData,d=0;d<c.length/2;d++){var u=e[2*d],p=e[2*d+1];c[2*d]=s*u+n*p+a,c[2*d+1]=r*u+o*p+l}if(this._roundPixels){var m=h.settings.RESOLUTION;for(d=0;d<c.length;++d)c[d]=Math.round((c[d]*m|0)/m)}this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new u(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,p);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=m.points,s=this.geometry.getIndex().data,r=s.length,n=4===this.drawMode?3:1,o=0;o+2<r;o+=n){var a=2*s[o],h=2*s[o+1],l=2*s[o+2];if(i[0]=e[a],i[1]=e[a+1],i[2]=e[h],i[3]=e[h+1],i[4]=e[l],i[5]=e[l+1],m.contains(p.x,p.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(o.Container),_=function(t){function e(e,i){var n=this,o={uSampler:e,alpha:1,uTextureMatrix:r.Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(o,i.uniforms),(n=t.call(this,i.program||s.Program.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),o)||this)._colorDirty=!1,n.uvMatrix=new s.TextureMatrix(e),n.batchable=void 0===i.program,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return d(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;l.premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(s.Shader),g=function(t){function e(e,i,r){var o=t.call(this)||this,a=new s.Buffer(e),h=new s.Buffer(i,!0),l=new s.Buffer(r,!0,!0);return o.addAttribute("aVertexPosition",a,2,!1,n.TYPES.FLOAT).addAttribute("aTextureCoord",h,2,!1,n.TYPES.FLOAT).addIndex(l),o._updateId=-1,o}return d(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(s.Geometry)})),a.register("NGgBA",(function(e,i){t(e.exports,"AlphaFilter",(()=>n));var s=a("8lrKM"),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var n=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this,s.defaultVertex,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return i.alpha=e,i}return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(s.Filter)})),a.register("6awPM",(function(e,i){t(e.exports,"BlurFilter",(()=>Y)),t(e.exports,"BlurFilterPass",(()=>X));var s=a("8lrKM"),r=a("iZTtn"),n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function o(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var h,l,c,d,u,p,m,f,_,g,b,y,w,v,x,S,A,P,C,T,E,R,B,D,I,M,O,L,G,F,k,N,V,U,W={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},j=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");(l=h||(h={}))[l.WEBGL_LEGACY=0]="WEBGL_LEGACY",l[l.WEBGL=1]="WEBGL",l[l.WEBGL2=2]="WEBGL2",(d=c||(c={}))[d.UNKNOWN=0]="UNKNOWN",d[d.WEBGL=1]="WEBGL",d[d.CANVAS=2]="CANVAS",(p=u||(u={}))[p.COLOR=16384]="COLOR",p[p.DEPTH=256]="DEPTH",p[p.STENCIL=1024]="STENCIL",(f=m||(m={}))[f.NORMAL=0]="NORMAL",f[f.ADD=1]="ADD",f[f.MULTIPLY=2]="MULTIPLY",f[f.SCREEN=3]="SCREEN",f[f.OVERLAY=4]="OVERLAY",f[f.DARKEN=5]="DARKEN",f[f.LIGHTEN=6]="LIGHTEN",f[f.COLOR_DODGE=7]="COLOR_DODGE",f[f.COLOR_BURN=8]="COLOR_BURN",f[f.HARD_LIGHT=9]="HARD_LIGHT",f[f.SOFT_LIGHT=10]="SOFT_LIGHT",f[f.DIFFERENCE=11]="DIFFERENCE",f[f.EXCLUSION=12]="EXCLUSION",f[f.HUE=13]="HUE",f[f.SATURATION=14]="SATURATION",f[f.COLOR=15]="COLOR",f[f.LUMINOSITY=16]="LUMINOSITY",f[f.NORMAL_NPM=17]="NORMAL_NPM",f[f.ADD_NPM=18]="ADD_NPM",f[f.SCREEN_NPM=19]="SCREEN_NPM",f[f.NONE=20]="NONE",f[f.SRC_OVER=0]="SRC_OVER",f[f.SRC_IN=21]="SRC_IN",f[f.SRC_OUT=22]="SRC_OUT",f[f.SRC_ATOP=23]="SRC_ATOP",f[f.DST_OVER=24]="DST_OVER",f[f.DST_IN=25]="DST_IN",f[f.DST_OUT=26]="DST_OUT",f[f.DST_ATOP=27]="DST_ATOP",f[f.ERASE=26]="ERASE",f[f.SUBTRACT=28]="SUBTRACT",f[f.XOR=29]="XOR",(g=_||(_={}))[g.POINTS=0]="POINTS",g[g.LINES=1]="LINES",g[g.LINE_LOOP=2]="LINE_LOOP",g[g.LINE_STRIP=3]="LINE_STRIP",g[g.TRIANGLES=4]="TRIANGLES",g[g.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",g[g.TRIANGLE_FAN=6]="TRIANGLE_FAN",(y=b||(b={}))[y.RGBA=6408]="RGBA",y[y.RGB=6407]="RGB",y[y.ALPHA=6406]="ALPHA",y[y.LUMINANCE=6409]="LUMINANCE",y[y.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",y[y.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",y[y.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(v=w||(w={}))[v.TEXTURE_2D=3553]="TEXTURE_2D",v[v.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",v[v.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",v[v.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",v[v.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",v[v.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",v[v.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",v[v.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",v[v.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(S=x||(x={}))[S.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",S[S.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",S[S.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",S[S.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",S[S.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",S[S.FLOAT=5126]="FLOAT",S[S.HALF_FLOAT=36193]="HALF_FLOAT",(P=A||(A={}))[P.NEAREST=0]="NEAREST",P[P.LINEAR=1]="LINEAR",(T=C||(C={}))[T.CLAMP=33071]="CLAMP",T[T.REPEAT=10497]="REPEAT",T[T.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(R=E||(E={}))[R.OFF=0]="OFF",R[R.POW2=1]="POW2",R[R.ON=2]="ON",(D=B||(B={}))[D.NPM=0]="NPM",D[D.UNPACK=1]="UNPACK",D[D.PMA=2]="PMA",D[D.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",D[D.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",D[D.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(M=I||(I={}))[M.NO=0]="NO",M[M.YES=1]="YES",M[M.AUTO=2]="AUTO",M[M.BLEND=0]="BLEND",M[M.CLEAR=1]="CLEAR",M[M.BLIT=2]="BLIT",(L=O||(O={}))[L.AUTO=0]="AUTO",L[L.MANUAL=1]="MANUAL",(F=G||(G={})).LOW="lowp",F.MEDIUM="mediump",F.HIGH="highp",(N=k||(k={}))[N.NONE=0]="NONE",N[N.SCISSOR=1]="SCISSOR",N[N.STENCIL=2]="STENCIL",N[N.SPRITE=3]="SPRITE",(U=V||(V={}))[U.NONE=0]="NONE",U[U.LOW=2]="LOW",U[U.MEDIUM=4]="MEDIUM",U[U.HIGH=8]="HIGH";var X=function(t){function e(e,i,s,n,o){void 0===i&&(i=8),void 0===s&&(s=4),void 0===n&&(n=r.settings.FILTER_RESOLUTION),void 0===o&&(o=5);var a=this,h=function(t,e){var i,s=Math.ceil(t/2),r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",n="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var a=i.replace("%index%",o.toString());n+=a=a.replace("%sampleIndex%",o-(s-1)+".0"),n+="\n"}return(r=r.replace("%blur%",n)).replace("%size%",t.toString())}(o,e),l=function(t){for(var e,i=W[t],s=i.length,r=j,n="",o=0;o<t;o++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString());e=o,o>=s&&(e=t-o-1),n+=a=a.replace("%value%",i[e].toString()),n+="\n"}return(r=r.replace("%blur%",n)).replace("%size%",t.toString())}(o);return(a=t.call(this,h,l)||this).horizontal=e,a.resolution=n,a._quality=0,a.quality=s,a.blur=i,a}return o(e,t),e.prototype.apply=function(t,e,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,s);else{var r=t.getFilterTexture(),n=t.renderer,o=e,a=r;this.state.blend=!1,t.applyFilter(this,o,a,I.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(o,I.BLIT),this.uniforms.uSampler=a;var l=a;a=o,o=l,n.shader.bind(this),n.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,i,s),t.returnFilterTexture(r)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(s.Filter),Y=function(t){function e(e,i,s,n){void 0===e&&(e=8),void 0===i&&(i=4),void 0===s&&(s=r.settings.FILTER_RESOLUTION),void 0===n&&(n=5);var o=t.call(this)||this;return o.blurXFilter=new X(!0,e,i,s,n),o.blurYFilter=new X(!1,e,i,s,n),o.resolution=s,o.quality=i,o.blur=e,o.repeatEdgePixels=!1,o}return o(e,t),e.prototype.apply=function(t,e,i,s){var r=Math.abs(this.blurXFilter.strength),n=Math.abs(this.blurYFilter.strength);if(r&&n){var o=t.getFilterTexture();this.blurXFilter.apply(t,e,o,I.CLEAR),this.blurYFilter.apply(t,o,i,s),t.returnFilterTexture(o)}else n?this.blurYFilter.apply(t,e,i,s):this.blurXFilter.apply(t,e,i,s)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(s.Filter)})),a.register("9CJ8p",(function(e,i){t(e.exports,"ColorMatrixFilter",(()=>n));var s=a("8lrKM"),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var n=function(t){function e(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,s.defaultFilterVertex,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",i)||this).alpha=1,e}return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),s=Math.sin(t),r=1/3,n=(0,Math.sqrt)(r),o=[i+(1-i)*r,r*(1-i)-n*s,r*(1-i)+n*s,0,0,r*(1-i)+n*s,i+r*(1-i),r*(1-i)-n*s,0,0,r*(1-i)-n*s,r*(1-i)+n*s,i+r*(1-i),0,0,0,0,0,1,0];this._loadMatrix(o,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,s=-.5*(i-1),r=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,s=-.5*(i-1),r=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,s,r){var n=((i=i||16770432)>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,h=((s=s||3375104)>>16&255)/255,l=(s>>8&255)/255,c=(255&s)/255,d=[.3,.59,.11,0,0,n,o,a,t=t||.2,0,h,l,c,e=e||.15,0,n-h,o-l,a-c,0,0];this._loadMatrix(d,r)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(s.Filter);n.prototype.grayscale=n.prototype.greyscale})),a.register("fFXRU",(function(e,i){t(e.exports,"DisplacementFilter",(()=>o));var s=a("8lrKM"),r=a("VYQOJ"),n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var o=function(t){function e(e,i){var s=this,n=new r.Matrix;return e.renderable=!1,(s=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,s.maskMatrix=n,null==i&&(i=20),s.scale=new r.Point(i,i),s}return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.apply=function(t,e,i,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var r=this.maskSprite.worldTransform,n=Math.sqrt(r.a*r.a+r.b*r.b),o=Math.sqrt(r.c*r.c+r.d*r.d);0!==n&&0!==o&&(this.uniforms.rotation[0]=r.a/n,this.uniforms.rotation[1]=r.b/n,this.uniforms.rotation[2]=r.c/o,this.uniforms.rotation[3]=r.d/o),t.applyFilter(this,e,i,s)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(s.Filter)})),a.register("9zcHJ",(function(e,i){t(e.exports,"FXAAFilter",(()=>n));var s=a("8lrKM"),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var n=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(s.Filter)})),a.register("4ND2p",(function(e,i){t(e.exports,"NoiseFilter",(()=>n));var s=a("8lrKM"),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var n=function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random());var r=t.call(this,s.defaultFilterVertex,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=i,r}return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(s.Filter)})),a.register("epj5y",(function(t,e){var i=a("8lrKM"),s=a("f6Kro"),r=a("8TYxR"),n=a("VYQOJ"),o=a("5pLOZ"),h=a("iZTtn"),l=new n.Matrix;r.DisplayObject.prototype._cacheAsBitmap=!1,r.DisplayObject.prototype._cacheData=null;var c=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(r.DisplayObject.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new c),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),r.DisplayObject.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},r.DisplayObject.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters){var n=this.filters[0].padding;r.pad(n)}r.ceil(h.settings.RESOLUTION);var a=t.renderTexture.current,c=t.renderTexture.sourceFrame.clone(),d=t.renderTexture.destinationFrame.clone(),u=t.projection.transform,p=i.RenderTexture.create({width:r.width,height:r.height}),m="cacheAsBitmap_"+o.uid();this._cacheData.textureCacheId=m,i.BaseTexture.addToCache(p.baseTexture,m),i.Texture.addToCache(p,m);var f=this.transform.localTransform.copyTo(l).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,p,!0,f,!1),t.projection.transform=u,t.renderTexture.bind(a,c,d),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var _=new s.Sprite(p);_.transform.worldTransform=this.transform.worldTransform,_.anchor.x=-r.x/r.width,_.anchor.y=-r.y/r.height,_.alpha=e,_._bounds=this._bounds,this._cacheData.sprite=_,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=_.containsPoint.bind(_)}},r.DisplayObject.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},r.DisplayObject.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var n=t.context,a=t._projTransform;e.ceil(h.settings.RESOLUTION);var c=i.RenderTexture.create({width:e.width,height:e.height}),d="cacheAsBitmap_"+o.uid();this._cacheData.textureCacheId=d,i.BaseTexture.addToCache(c.baseTexture,d),i.Texture.addToCache(c,d);var u=l;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=e.x,u.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,c,!0,u,!1),t.context=n,t._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var p=new s.Sprite(c);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-e.x/e.width,p.anchor.y=-e.y/e.height,p.alpha=r,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},r.DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},r.DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},r.DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,i.BaseTexture.removeFromCache(this._cacheData.textureCacheId),i.Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},r.DisplayObject.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}})),a.register("cap9B",(function(t,e){var i=a("8TYxR");i.DisplayObject.prototype.name=null,i.Container.prototype.getChildByName=function(t,e){for(var i=0,s=this.children.length;i<s;i++)if(this.children[i].name===t)return this.children[i];if(e)for(i=0,s=this.children.length;i<s;i++){if(this.children[i].getChildByName){var r=this.children[i].getChildByName(t,!0);if(r)return r}}return null}})),a.register("h54C1",(function(t,e){var i=a("8TYxR"),s=a("VYQOJ");i.DisplayObject.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new s.Point),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}})),a.register("6tlxD",(function(e,i){t(e.exports,"SimpleRope",(()=>d)),t(e.exports,"RopeGeometry",(()=>c)),t(e.exports,"SimpleMesh",(()=>p)),t(e.exports,"PlaneGeometry",(()=>l)),t(e.exports,"SimplePlane",(()=>u)),t(e.exports,"NineSlicePlane",(()=>m));var s=a("k5gBw"),r=a("44Xx0"),n=a("8lrKM"),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function h(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var l=function(t){function e(e,i,s,r){void 0===e&&(e=100),void 0===i&&(i=100),void 0===s&&(s=10),void 0===r&&(r=10);var n=t.call(this)||this;return n.segWidth=s,n.segHeight=r,n.width=e,n.height=i,n.build(),n}return h(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],s=[],r=this.segWidth-1,n=this.segHeight-1,o=this.width/r,a=this.height/n,h=0;h<t;h++){var l=h%this.segWidth,c=h/this.segWidth|0;e.push(l*o,c*a),i.push(l/r,c/n)}var d=r*n;for(h=0;h<d;h++){var u=h%r,p=h/r|0,m=p*this.segWidth+u,f=p*this.segWidth+u+1,_=(p+1)*this.segWidth+u,g=(p+1)*this.segWidth+u+1;s.push(m,f,_,f,g,_)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(s.MeshGeometry),c=function(t){function e(e,i,s){void 0===e&&(e=200),void 0===s&&(s=0);var r=t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))||this;return r.points=i,r._width=e,r.textureScale=s,r.build(),r}return h(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),s.data=new Uint16Array(6*(t.length-1)));var r=i.data,n=s.data;r[0]=0,r[1]=0,r[2]=0,r[3]=1;for(var o=0,a=t[0],h=this._width*this.textureScale,l=t.length,c=0;c<l;c++){var d=4*c;if(this.textureScale>0){var u=a.x-t[c].x,p=a.y-t[c].y,m=Math.sqrt(u*u+p*p);a=t[c],o+=m/h}else o=c/(l-1);r[d]=o,r[d+1]=0,r[d+2]=o,r[d+3]=1}var f=0;for(c=0;c<l-1;c++){d=2*c;n[f++]=d,n[f++]=d+1,n[f++]=d+2,n[f++]=d+2,n[f++]=d+1,n[f++]=d+3}i.update(),s.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],s=0,r=0,n=this.buffers[0].data,o=t.length,a=0;a<o;a++){var h=t[a],l=4*a;r=-((e=a<t.length-1?t[a+1]:h).x-i.x),s=e.y-i.y;var c=Math.sqrt(s*s+r*r),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=c,r/=c,s*=d,r*=d,n[l]=h.x+s,n[l+1]=h.y+r,n[l+2]=h.x-s,n[l+3]=h.y-r,i=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(s.MeshGeometry),d=function(t){function e(e,i,n){void 0===n&&(n=0);var o=this,a=new c(e.height,i,n),h=new s.MeshMaterial(e);return n>0&&(e.baseTexture.wrapMode=r.WRAP_MODES.REPEAT),(o=t.call(this,a,h)||this).autoUpdate=!0,o}return h(e,t),e.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,e)},e}(s.Mesh),u=function(t){function e(e,i,r){var o=this,a=new l(e.width,e.height,i,r),h=new s.MeshMaterial(n.Texture.WHITE);return(o=t.call(this,a,h)||this).texture=e,o}return h(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(s.Mesh),p=function(t){function e(e,i,r,o,a){void 0===e&&(e=n.Texture.EMPTY);var h=this,l=new s.MeshGeometry(i,r,o);l.getBuffer("aVertexPosition").static=!1;var c=new s.MeshMaterial(e);return(h=t.call(this,l,c,null,a)||this).autoUpdate=!0,h}return h(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(s.Mesh),m=function(t){function e(e,i,s,r,o){void 0===i&&(i=10),void 0===s&&(s=10),void 0===r&&(r=10),void 0===o&&(o=10);var a=t.call(this,n.Texture.WHITE,4,4)||this;return a._origWidth=e.orig.width,a._origHeight=e.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=i,a._rightWidth=r,a._topHeight=s,a._bottomHeight=o,a.texture=e,a}return h(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,s=this._height>i?1:this._height/i;return Math.min(e,s)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,s=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=s*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(u)})),a.register("euDAX",(function(e,i){t(e.exports,"AnimatedSprite",(()=>h));var s=a("8lrKM"),r=a("f6Kro"),n=a("k3j5h"),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var h=function(t){function e(e,i){void 0===i&&(i=!0);var r=t.call(this,e[0]instanceof s.Texture?e[0]:e[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=i,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(n.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(n.Ticker.shared.add(this.update,this,n.UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var s=this._currentTime%1*this._durations[this.currentFrame];for(s+=e/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],r=0;r<t.length;++r)i.push(s.Texture.from(t[r]));return new e(i)},e.fromImages=function(t){for(var i=[],r=0;r<t.length;++r)i.push(s.Texture.from(t[r]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof s.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(n.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(n.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(r.Sprite)})),a("7qcjp");var h=a("1ggcG");var l,c,d={},u={},p=u={};function m(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function _(t){if(l===setTimeout)return setTimeout(t,0);if((l===m||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}!function(){try{l="function"==typeof setTimeout?setTimeout:m}catch(t){l=m}try{c="function"==typeof clearTimeout?clearTimeout:f}catch(t){c=f}}();var g,b=[],y=!1,w=-1;function v(){y&&g&&(y=!1,g.length?b=g.concat(b):w=-1,b.length&&x())}function x(){if(!y){var t=_(v);y=!0;for(var e=b.length;e;){for(g=b,b=[];++w<e;)g&&g[w].run();w=-1,e=b.length}g=null,y=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===f||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function S(t,e){this.fun=t,this.array=e}function A(){}p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];b.push(new S(t,e)),1!==b.length||y||_(x)},S.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=A,p.addListener=A,p.once=A,p.off=A,p.removeListener=A,p.removeAllListeners=A,p.emit=A,p.prependListener=A,p.prependOnceListener=A,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0};var P,C,T,E,R,B,D={};t(D,"SlowBuffer",(()=>P),(t=>P=t)),t(D,"Buffer",(()=>C),(t=>C=t)),t(D,"INSPECT_MAX_BYTES",(()=>E),(t=>E=t)),t(D,"kMaxLength",(()=>T),(t=>T=t)),B=function(t){var e,i,s=V(t),r=s[0],n=s[1],o=new G(function(t,e,i){return 3*(e+i)/4-i}(0,r,n)),a=0,h=n>0?r-4:r;for(i=0;i<h;i+=4)e=L[t.charCodeAt(i)]<<18|L[t.charCodeAt(i+1)]<<12|L[t.charCodeAt(i+2)]<<6|L[t.charCodeAt(i+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;2===n&&(e=L[t.charCodeAt(i)]<<2|L[t.charCodeAt(i+1)]>>4,o[a++]=255&e);1===n&&(e=L[t.charCodeAt(i)]<<10|L[t.charCodeAt(i+1)]<<4|L[t.charCodeAt(i+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e);return o},R=function(t){for(var e,i=t.length,s=i%3,r=[],n=16383,o=0,a=i-s;o<a;o+=n)r.push(U(t,o,o+n>a?a:o+n));1===s?(e=t[i-1],r.push(O[e>>2]+O[e<<4&63]+"==")):2===s&&(e=(t[i-2]<<8)+t[i-1],r.push(O[e>>10]+O[e>>4&63]+O[e<<2&63]+"="));return r.join("")}
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */;for(var I,M,O=[],L=[],G="undefined"!=typeof Uint8Array?Uint8Array:Array,F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=0,N=F.length;k<N;++k)O[k]=F[k],L[F.charCodeAt(k)]=k;function V(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function U(t,e,i){for(var s,r,n=[],o=e;o<i;o+=3)s=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),n.push(O[(r=s)>>18&63]+O[r>>12&63]+O[r>>6&63]+O[63&r]);return n.join("")}L["-".charCodeAt(0)]=62,L["_".charCodeAt(0)]=63,M=function(t,e,i,s,r){var n,o,a=8*r-s-1,h=(1<<a)-1,l=h>>1,c=-7,d=i?r-1:0,u=i?-1:1,p=t[e+d];for(d+=u,n=p&(1<<-c)-1,p>>=-c,c+=a;c>0;n=256*n+t[e+d],d+=u,c-=8);for(o=n&(1<<-c)-1,n>>=-c,c+=s;c>0;o=256*o+t[e+d],d+=u,c-=8);if(0===n)n=1-l;else{if(n===h)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,s),n-=l}return(p?-1:1)*o*Math.pow(2,n-s)},I=function(t,e,i,s,r,n){var o,a,h,l=8*n-r-1,c=(1<<l)-1,d=c>>1,u=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=s?0:n-1,m=s?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+d>=1?u/h:u*Math.pow(2,1-d))*h>=2&&(o++,h/=2),o+d>=c?(a=0,o=c):o+d>=1?(a=(e*h-1)*Math.pow(2,r),o+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;t[i+p]=255&a,p+=m,a/=256,r-=8);for(o=o<<r|a,l+=r;l>0;t[i+p]=255&o,p+=m,o/=256,l-=8);t[i+p-m]|=128*f};var W="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;C=X,P=function(t){+t!=t&&(t=0);return X.alloc(+t)},E=50;function j(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,X.prototype),e}function X(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return z(t)}return Y(t,e,i)}function Y(t,e,i){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!X.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var i=0|Z(t,e),s=j(i),r=s.write(t,e);r!==i&&(s=s.slice(0,r));return s}(t,e);if(ArrayBuffer.isView(t))return function(t){if(xt(t,Uint8Array)){var e=new Uint8Array(t);return q(e.buffer,e.byteOffset,e.byteLength)}return J(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(xt(t,ArrayBuffer)||t&&xt(t.buffer,ArrayBuffer))return q(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(xt(t,SharedArrayBuffer)||t&&xt(t.buffer,SharedArrayBuffer)))return q(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return X.from(s,e,i);var r=function(t){if(X.isBuffer(t)){var e=0|K(t.length),i=j(e);return 0===i.length||t.copy(i,0,0,e),i}if(void 0!==t.length)return"number"!=typeof t.length||St(t.length)?j(0):J(t);if("Buffer"===t.type&&Array.isArray(t.data))return J(t.data)}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return X.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function H(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function z(t){return H(t),j(t<0?0:0|K(t))}function J(t){for(var e=t.length<0?0:0|K(t.length),i=j(e),s=0;s<e;s+=1)i[s]=255&t[s];return i}function q(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');var s;return s=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(s,X.prototype),s}function K(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function Z(t,e){if(X.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||xt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var i=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return yt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return wt(t).length;default:if(r)return s?-1:yt(t).length;e=(""+e).toLowerCase(),r=!0}}function Q(t,e,i){var s=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return dt(this,e,i);case"utf8":case"utf-8":return ht(this,e,i);case"ascii":return lt(this,e,i);case"latin1":case"binary":return ct(this,e,i);case"base64":return at(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ut(this,e,i);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function $(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function tt(t,e,i,s,r){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),St(i=+i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=X.from(e,s)),X.isBuffer(e))return 0===e.length?-1:et(t,e,i,s,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):et(t,[e],i,s,r);throw new TypeError("val must be string, number or Buffer")}function et(t,e,i,s,r){var n,o=1,a=t.length,h=e.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,i/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r){var c=-1;for(n=i;n<a;n++)if(l(t,n)===l(e,-1===c?0:n-c)){if(-1===c&&(c=n),n-c+1===h)return c*o}else-1!==c&&(n-=n-c),c=-1}else for(i+h>a&&(i=a-h),n=i;n>=0;n--){for(var d=!0,u=0;u<h;u++)if(l(t,n+u)!==l(e,u)){d=!1;break}if(d)return n}return-1}function it(t,e,i,s){i=Number(i)||0;var r=t.length-i;s?(s=Number(s))>r&&(s=r):s=r;var n=e.length;s>n/2&&(s=n/2);for(var o=0;o<s;++o){var a=parseInt(e.substr(2*o,2),16);if(St(a))return o;t[i+o]=a}return o}function st(t,e,i,s){return vt(yt(e,t.length-i),t,i,s)}function rt(t,e,i,s){return vt(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,s)}function nt(t,e,i,s){return vt(wt(e),t,i,s)}function ot(t,e,i,s){return vt(function(t,e){for(var i,s,r,n=[],o=0;o<t.length&&!((e-=2)<0);++o)s=(i=t.charCodeAt(o))>>8,r=i%256,n.push(r),n.push(s);return n}(e,t.length-i),t,i,s)}function at(t,e,i){return 0===e&&i===t.length?R(t):R(t.slice(e,i))}function ht(t,e,i){i=Math.min(t.length,i);for(var s=[],r=e;r<i;){var n,o,a,h,l=t[r],c=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d<=i)switch(d){case 1:l<128&&(c=l);break;case 2:128==(192&(n=t[r+1]))&&(h=(31&l)<<6|63&n)>127&&(c=h);break;case 3:n=t[r+1],o=t[r+2],128==(192&n)&&128==(192&o)&&(h=(15&l)<<12|(63&n)<<6|63&o)>2047&&(h<55296||h>57343)&&(c=h);break;case 4:n=t[r+1],o=t[r+2],a=t[r+3],128==(192&n)&&128==(192&o)&&128==(192&a)&&(h=(15&l)<<18|(63&n)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(c=h)}null===c?(c=65533,d=1):c>65535&&(c-=65536,s.push(c>>>10&1023|55296),c=56320|1023&c),s.push(c),r+=d}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var i="",s=0;for(;s<e;)i+=String.fromCharCode.apply(String,t.slice(s,s+=4096));return i}(s)}T=2147483647,X.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),X.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(X.prototype,"parent",{enumerable:!0,get:function(){if(X.isBuffer(this))return this.buffer}}),Object.defineProperty(X.prototype,"offset",{enumerable:!0,get:function(){if(X.isBuffer(this))return this.byteOffset}}),X.poolSize=8192,X.from=function(t,e,i){return Y(t,e,i)},Object.setPrototypeOf(X.prototype,Uint8Array.prototype),Object.setPrototypeOf(X,Uint8Array),X.alloc=function(t,e,i){return function(t,e,i){return H(t),t<=0?j(t):void 0!==e?"string"==typeof i?j(t).fill(e,i):j(t).fill(e):j(t)}(t,e,i)},X.allocUnsafe=function(t){return z(t)},X.allocUnsafeSlow=function(t){return z(t)},X.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==X.prototype},X.compare=function(t,e){if(xt(t,Uint8Array)&&(t=X.from(t,t.offset,t.byteLength)),xt(e,Uint8Array)&&(e=X.from(e,e.offset,e.byteLength)),!X.isBuffer(t)||!X.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var i=t.length,s=e.length,r=0,n=Math.min(i,s);r<n;++r)if(t[r]!==e[r]){i=t[r],s=e[r];break}return i<s?-1:s<i?1:0},X.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},X.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return X.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var s=X.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var n=t[i];if(xt(n,Uint8Array))r+n.length>s.length?X.from(n).copy(s,r):Uint8Array.prototype.set.call(s,n,r);else{if(!X.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(s,r)}r+=n.length}return s},X.byteLength=Z,X.prototype._isBuffer=!0,X.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)$(this,e,e+1);return this},X.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)$(this,e,e+3),$(this,e+1,e+2);return this},X.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)$(this,e,e+7),$(this,e+1,e+6),$(this,e+2,e+5),$(this,e+3,e+4);return this},X.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?ht(this,0,t):Q.apply(this,arguments)},X.prototype.toLocaleString=X.prototype.toString,X.prototype.equals=function(t){if(!X.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===X.compare(this,t)},X.prototype.inspect=function(){var t="",e=E;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},W&&(X.prototype[W]=X.prototype.inspect),X.prototype.compare=function(t,e,i,s,r){if(xt(t,Uint8Array)&&(t=X.from(t,t.offset,t.byteLength)),!X.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===r&&(r=this.length),e<0||i>t.length||s<0||r>this.length)throw new RangeError("out of range index");if(s>=r&&e>=i)return 0;if(s>=r)return-1;if(e>=i)return 1;if(this===t)return 0;for(var n=(r>>>=0)-(s>>>=0),o=(i>>>=0)-(e>>>=0),a=Math.min(n,o),h=this.slice(s,r),l=t.slice(e,i),c=0;c<a;++c)if(h[c]!==l[c]){n=h[c],o=l[c];break}return n<o?-1:o<n?1:0},X.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},X.prototype.indexOf=function(t,e,i){return tt(this,t,e,i,!0)},X.prototype.lastIndexOf=function(t,e,i){return tt(this,t,e,i,!1)},X.prototype.write=function(t,e,i,s){if(void 0===e)s="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)s=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var n=!1;;)switch(s){case"hex":return it(this,t,e,i);case"utf8":case"utf-8":return st(this,t,e,i);case"ascii":case"latin1":case"binary":return rt(this,t,e,i);case"base64":return nt(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ot(this,t,e,i);default:if(n)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),n=!0}},X.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function lt(t,e,i){var s="";i=Math.min(t.length,i);for(var r=e;r<i;++r)s+=String.fromCharCode(127&t[r]);return s}function ct(t,e,i){var s="";i=Math.min(t.length,i);for(var r=e;r<i;++r)s+=String.fromCharCode(t[r]);return s}function dt(t,e,i){var s=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>s)&&(i=s);for(var r="",n=e;n<i;++n)r+=At[t[n]];return r}function ut(t,e,i){for(var s=t.slice(e,i),r="",n=0;n<s.length-1;n+=2)r+=String.fromCharCode(s[n]+256*s[n+1]);return r}function pt(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function mt(t,e,i,s,r,n){if(!X.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<n)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function ft(t,e,i,s,r,n){if(i+s>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function _t(t,e,i,s,r){return e=+e,i>>>=0,r||ft(t,0,i,4),I(t,e,i,s,23,4),i+4}function gt(t,e,i,s,r){return e=+e,i>>>=0,r||ft(t,0,i,8),I(t,e,i,s,52,8),i+8}X.prototype.slice=function(t,e){var i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);var s=this.subarray(t,e);return Object.setPrototypeOf(s,X.prototype),s},X.prototype.readUintLE=X.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||pt(t,e,this.length);for(var s=this[t],r=1,n=0;++n<e&&(r*=256);)s+=this[t+n]*r;return s},X.prototype.readUintBE=X.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||pt(t,e,this.length);for(var s=this[t+--e],r=1;e>0&&(r*=256);)s+=this[t+--e]*r;return s},X.prototype.readUint8=X.prototype.readUInt8=function(t,e){return t>>>=0,e||pt(t,1,this.length),this[t]},X.prototype.readUint16LE=X.prototype.readUInt16LE=function(t,e){return t>>>=0,e||pt(t,2,this.length),this[t]|this[t+1]<<8},X.prototype.readUint16BE=X.prototype.readUInt16BE=function(t,e){return t>>>=0,e||pt(t,2,this.length),this[t]<<8|this[t+1]},X.prototype.readUint32LE=X.prototype.readUInt32LE=function(t,e){return t>>>=0,e||pt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},X.prototype.readUint32BE=X.prototype.readUInt32BE=function(t,e){return t>>>=0,e||pt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},X.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||pt(t,e,this.length);for(var s=this[t],r=1,n=0;++n<e&&(r*=256);)s+=this[t+n]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},X.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||pt(t,e,this.length);for(var s=e,r=1,n=this[t+--s];s>0&&(r*=256);)n+=this[t+--s]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},X.prototype.readInt8=function(t,e){return t>>>=0,e||pt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},X.prototype.readInt16LE=function(t,e){t>>>=0,e||pt(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},X.prototype.readInt16BE=function(t,e){t>>>=0,e||pt(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},X.prototype.readInt32LE=function(t,e){return t>>>=0,e||pt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},X.prototype.readInt32BE=function(t,e){return t>>>=0,e||pt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},X.prototype.readFloatLE=function(t,e){return t>>>=0,e||pt(t,4,this.length),M(this,t,!0,23,4)},X.prototype.readFloatBE=function(t,e){return t>>>=0,e||pt(t,4,this.length),M(this,t,!1,23,4)},X.prototype.readDoubleLE=function(t,e){return t>>>=0,e||pt(t,8,this.length),M(this,t,!0,52,8)},X.prototype.readDoubleBE=function(t,e){return t>>>=0,e||pt(t,8,this.length),M(this,t,!1,52,8)},X.prototype.writeUintLE=X.prototype.writeUIntLE=function(t,e,i,s){(t=+t,e>>>=0,i>>>=0,s)||mt(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,n=0;for(this[e]=255&t;++n<i&&(r*=256);)this[e+n]=t/r&255;return e+i},X.prototype.writeUintBE=X.prototype.writeUIntBE=function(t,e,i,s){(t=+t,e>>>=0,i>>>=0,s)||mt(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,n=1;for(this[e+r]=255&t;--r>=0&&(n*=256);)this[e+r]=t/n&255;return e+i},X.prototype.writeUint8=X.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||mt(this,t,e,1,255,0),this[e]=255&t,e+1},X.prototype.writeUint16LE=X.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||mt(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},X.prototype.writeUint16BE=X.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||mt(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},X.prototype.writeUint32LE=X.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||mt(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},X.prototype.writeUint32BE=X.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||mt(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},X.prototype.writeIntLE=function(t,e,i,s){if(t=+t,e>>>=0,!s){var r=Math.pow(2,8*i-1);mt(this,t,e,i,r-1,-r)}var n=0,o=1,a=0;for(this[e]=255&t;++n<i&&(o*=256);)t<0&&0===a&&0!==this[e+n-1]&&(a=1),this[e+n]=(t/o>>0)-a&255;return e+i},X.prototype.writeIntBE=function(t,e,i,s){if(t=+t,e>>>=0,!s){var r=Math.pow(2,8*i-1);mt(this,t,e,i,r-1,-r)}var n=i-1,o=1,a=0;for(this[e+n]=255&t;--n>=0&&(o*=256);)t<0&&0===a&&0!==this[e+n+1]&&(a=1),this[e+n]=(t/o>>0)-a&255;return e+i},X.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||mt(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},X.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||mt(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},X.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||mt(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},X.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||mt(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},X.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||mt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},X.prototype.writeFloatLE=function(t,e,i){return _t(this,t,e,!0,i)},X.prototype.writeFloatBE=function(t,e,i){return _t(this,t,e,!1,i)},X.prototype.writeDoubleLE=function(t,e,i){return gt(this,t,e,!0,i)},X.prototype.writeDoubleBE=function(t,e,i){return gt(this,t,e,!1,i)},X.prototype.copy=function(t,e,i,s){if(!X.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),s||0===s||(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);var r=s-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,s):Uint8Array.prototype.set.call(t,this.subarray(i,s),e),r},X.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!X.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===t.length){var r=t.charCodeAt(0);("utf8"===s&&r<128||"latin1"===s)&&(t=r)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{var o=X.isBuffer(t)?t:X.from(t,s),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=o[n%a]}return this};var bt=/[^+/0-9A-Za-z-_]/g;function yt(t,e){var i;e=e||1/0;for(var s=t.length,r=null,n=[],o=0;o<s;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&n.push(239,191,189);continue}if(o+1===s){(e-=3)>-1&&n.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&n.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&n.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;n.push(i)}else if(i<2048){if((e-=2)<0)break;n.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;n.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return n}function wt(t){return B(function(t){if((t=(t=t.split("=")[0]).trim().replace(bt,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function vt(t,e,i,s){for(var r=0;r<s&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}function xt(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function St(t){return t!=t}var At=function(){for(var t="0123456789abcdef",e=new Array(256),i=0;i<16;++i)for(var s=16*i,r=0;r<16;++r)e[s+r]=t[i]+t[r];return e}(),Pt=C;a.register("dahan",(function(t,e){(e=t.exports=a("dBnxH")).Stream=e,e.Readable=e,e.Writable=a("5PYgv"),e.Duplex=a("hxaYb"),e.Transform=a("j8ZaE"),e.PassThrough=a("cMr3E"),e.finished=a("iOvpf"),e.pipeline=a("g39em")})),a.register("dBnxH",(function(t,e){var i;t.exports=T,T.ReadableState=P;a("dw5rC").EventEmitter;var s=function(t,e){return t.listeners(e).length},n=a("iq7xo"),o=C,h=r.Uint8Array||function(){};var l,c=a("6Orkm");l=c&&c.debuglog?c.debuglog("stream"):function(){};var d,p,m,f=a("a6wmg"),_=a("8l6WM"),g=a("kqunw").getHighWaterMark,b=a("ap7qE").codes,y=b.ERR_INVALID_ARG_TYPE,w=b.ERR_STREAM_PUSH_AFTER_EOF,v=b.ERR_METHOD_NOT_IMPLEMENTED,x=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;a("1SmPd")(T,n);var S=_.errorOrDestroy,A=["error","close","destroy","pause","resume"];function P(t,e,s){i=i||a("hxaYb"),t=t||{},"boolean"!=typeof s&&(s=e instanceof i),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",s),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=a("9gNJH").StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function T(t){if(i=i||a("hxaYb"),!(this instanceof T))return new T(t);var e=this instanceof i;this._readableState=new P(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),n.call(this)}function E(t,e,i,s,r){l("readableAddChunk",e);var n,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(l("onEofChunk"),e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?I(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,M(t)))}(t,a);else if(r||(n=function(t,e){var i;s=e,o.isBuffer(s)||s instanceof h||"string"==typeof e||void 0===e||t.objectMode||(i=new y("chunk",["string","Buffer","Uint8Array"],e));var s;return i}(a,e)),n)S(t,n);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===o.prototype||(e=function(t){return o.from(t)}(e)),s)a.endEmitted?S(t,new x):R(t,a,e,!0);else if(a.ended)S(t,new w);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!i?(e=a.decoder.write(e),a.objectMode||0!==e.length?R(t,a,e,!1):O(t,a)):R(t,a,e,!1)}else s||(a.reading=!1,O(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function R(t,e,i,s){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,s?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&I(t)),O(t,e)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),T.prototype.destroy=_.destroy,T.prototype._undestroy=_.undestroy,T.prototype._destroy=function(t,e){e(t)},T.prototype.push=function(t,e){var i,s=this._readableState;return s.objectMode?i=!0:"string"==typeof t&&((e=e||s.defaultEncoding)!==s.encoding&&(t=o.from(t,e),e=""),i=!0),E(this,t,e,!1,i)},T.prototype.unshift=function(t){return E(this,t,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(t){d||(d=a("9gNJH").StringDecoder);var e=new d(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,s="";null!==i;)s+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this};var B=1073741824;function D(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=B?t=B:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t){var e=t._readableState;l("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(l("emitReadable",e.flowing),e.emittedReadable=!0,u.nextTick(M,t))}function M(t){var e=t._readableState;l("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function O(t,e){e.readingMore||(e.readingMore=!0,u.nextTick(L,t,e))}function L(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(l("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function G(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function F(t){l("readable nexttick read 0"),t.read(0)}function k(t,e){l("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(l("flow",e.flowing);e.flowing&&null!==t.read(););}function V(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i);var i}function U(t){var e=t._readableState;l("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,u.nextTick(W,e,t))}function W(t,e){if(l("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}function j(t,e){for(var i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1}T.prototype.read=function(t){l("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return l("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?U(this):I(this),null;if(0===(t=D(t,e))&&e.ended)return 0===e.length&&U(this),null;var s,r=e.needReadable;return l("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&l("length less than watermark",r=!0),e.ended||e.reading?l("reading or ended",r=!1):r&&(l("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=D(i,e))),null===(s=t>0?V(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&U(this)),null!==s&&this.emit("data",s),s},T.prototype._read=function(t){S(this,new v("_read()"))},T.prototype.pipe=function(t,e){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,l("pipe count=%d opts=%j",r.pipesCount,e);var n=(!e||!1!==e.end)&&t!==u.stdout&&t!==u.stderr?a:_;function o(e,s){l("onunpipe"),e===i&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,l("cleanup"),t.removeListener("close",m),t.removeListener("finish",f),t.removeListener("drain",h),t.removeListener("error",p),t.removeListener("unpipe",o),i.removeListener("end",a),i.removeListener("end",_),i.removeListener("data",d),c=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function a(){l("onend"),t.end()}r.endEmitted?u.nextTick(n):i.once("end",n),t.on("unpipe",o);var h=function(t){return function(){var e=t._readableState;l("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,N(t))}}(i);t.on("drain",h);var c=!1;function d(e){l("ondata");var s=t.write(e);l("dest.write",s),!1===s&&((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==j(r.pipes,t))&&!c&&(l("false write response, pause",r.awaitDrain),r.awaitDrain++),i.pause())}function p(e){l("onerror",e),_(),t.removeListener("error",p),0===s(t,"error")&&S(t,e)}function m(){t.removeListener("finish",f),_()}function f(){l("onfinish"),t.removeListener("close",m),_()}function _(){l("unpipe"),i.unpipe(t)}return i.on("data",d),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",p),t.once("close",m),t.once("finish",f),t.emit("pipe",i),r.flowing||(l("pipe resume"),i.resume()),t},T.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var s=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var n=0;n<r;n++)s[n].emit("unpipe",this,{hasUnpiped:!1});return this}var o=j(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},T.prototype.on=function(t,e){var i=n.prototype.on.call(this,t,e),s=this._readableState;return"data"===t?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"===t&&(s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,l("on readable",s.length,s.reading),s.length?I(this):s.reading||u.nextTick(F,this))),i},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(t,e){var i=n.prototype.removeListener.call(this,t,e);return"readable"===t&&u.nextTick(G,this),i},T.prototype.removeAllListeners=function(t){var e=n.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||u.nextTick(G,this),e},T.prototype.resume=function(){var t=this._readableState;return t.flowing||(l("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,u.nextTick(k,t,e))}(this,t)),t.paused=!1,this},T.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(t){var e=this,i=this._readableState,s=!1;for(var r in t.on("end",(function(){if(l("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(r){(l("wrapped data"),i.decoder&&(r=i.decoder.write(r)),i.objectMode&&null==r)||(i.objectMode||r&&r.length)&&(e.push(r)||(s=!0,t.pause()))})),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var n=0;n<A.length;n++)t.on(A[n],this.emit.bind(this,A[n]));return this._read=function(e){l("wrapped _read",e),s&&(s=!1,t.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=a("ePyJ5")),p(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),T._fromList=V,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(t,e){return void 0===m&&(m=a("3jcMm")),m(T,t,e)})})),a.register("dw5rC",(function(t,e){var i,s="object"==typeof Reflect?Reflect:null,r=s&&"function"==typeof s.apply?s.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};i=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(i,s){function r(i){t.removeListener(e,n),s(i)}function n(){"function"==typeof t.removeListener&&t.removeListener("error",r),i([].slice.call(arguments))}_(t,e,n,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&_(t,"error",e,i)}(t,r,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function h(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,i,s){var r,n,o,a;if(h(i),void 0===(n=t._events)?(n=t._events=Object.create(null),t._eventsCount=0):(void 0!==n.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),n=t._events),o=n[e]),void 0===o)o=n[e]=i,++t._eventsCount;else if("function"==typeof o?o=n[e]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(r=l(t))>0&&o.length>r&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=o.length,a=c,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=d.bind(s);return r.listener=i,s.wrapFn=r,r}function p(t,e,i){var s=t._events;if(void 0===s)return[];var r=s[e];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(r):f(r,r.length)}function m(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function _(t,e,i,s){if("function"==typeof t.on)s.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(n){s.once&&t.removeEventListener(e,r),i(n)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var s="error"===t,n=this._events;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)r(h,this,e);else{var l=h.length,c=f(h,l);for(i=0;i<l;++i)r(c[i],this,e)}return!0},o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return h(e),this.on(t,u(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,u(this,t,e)),this},o.prototype.removeListener=function(t,e){var i,s,r,n,o;if(h(e),void 0===(s=this._events))return this;if(void 0===(i=s[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(r=-1,n=i.length-1;n>=0;n--)if(i[n]===e||i[n].listener===e){o=i[n].listener,r=n;break}if(r<0)return this;0===r?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,r),1===i.length&&(s[t]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,i,s;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var r,n=Object.keys(i);for(s=0;s<n.length;++s)"removeListener"!==(r=n[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},o.prototype.listeners=function(t){return p(this,t,!0)},o.prototype.rawListeners=function(t){return p(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},o.prototype.listenerCount=m,o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}})),a.register("iq7xo",(function(t,e){t.exports=a("dw5rC").EventEmitter})),a.register("6Orkm",(function(t,e){})),a.register("a6wmg",(function(t,e){function i(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=C,o=a("6Orkm").inspect,h=o&&o.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,a,l;return e=t,(a=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return n.alloc(0);for(var e,i,s,r=n.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,i=r,s=a,n.prototype.copy.call(e,i,s),a+=o.data.length,o=o.next;return r}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,s=e.data;for(t-=s.length;e=e.next;){var r=e.data,n=t>r.length?r.length:t;if(n===r.length?s+=r:s+=r.slice(0,t),0==(t-=n)){n===r.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=r.slice(n));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(t){var e=n.allocUnsafe(t),i=this.head,s=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var r=i.data,o=t>r.length?r.length:t;if(r.copy(e,e.length-t,0,o),0==(t-=o)){o===r.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=r.slice(o));break}++s}return this.length-=s,e}},{key:h,value:function(t,e){return o(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&r(e.prototype,a),l&&r(e,l),t}()})),a.register("8l6WM",(function(t,e){function i(t,e){r(t,e),s(t)}function s(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,u.nextTick(r,this,t)):u.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?n._writableState?n._writableState.errorEmitted?u.nextTick(s,n):(n._writableState.errorEmitted=!0,u.nextTick(i,n,t)):u.nextTick(i,n,t):e?(u.nextTick(s,n),e(t)):u.nextTick(s,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,s=t._writableState;i&&i.autoDestroy||s&&s.autoDestroy?t.destroy(e):t.emit("error",e)}}})),a.register("kqunw",(function(t,e){var i=a("ap7qE").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,s,r){var n=function(t,e,i){return null!=t.highWaterMark?t.highWaterMark:e?t[i]:null}(e,r,s);if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new i(r?s:"highWaterMark",n);return Math.floor(n)}return t.objectMode?16:16384}}})),a.register("ap7qE",(function(e,i){var s;t(e.exports,"codes",(()=>s),(t=>s=t));var r={};function n(t,e,i){i||(i=Error);var s=function(t){var i,s;function r(i,s,r){return t.call(this,function(t,i,s){return"string"==typeof e?e:e(t,i,s)}(i,s,r))||this}return s=t,(i=r).prototype=Object.create(s.prototype),i.prototype.constructor=i,i.__proto__=s,r}(i);s.prototype.name=i.name,s.prototype.code=t,r[t]=s}function o(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map((function(t){return String(t)})),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}n("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(t,e,i){var s,r,n,a;if("string"==typeof e&&(r="not ",e.substr(!n||n<0?0:+n,r.length)===r)?(s="must not be",e=e.replace(/^not /,"")):s="must be",function(t,e,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}(t," argument"))a="The ".concat(t," ").concat(s," ").concat(o(e,"type"));else{var h=function(t,e,i){return"number"!=typeof i&&(i=0),!(i+e.length>t.length)&&-1!==t.indexOf(e,i)}(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(h," ").concat(s," ").concat(o(e,"type"))}return a+=". Received type ".concat(typeof i)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),s=r})),a.register("1SmPd",(function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}})),a.register("hxaYb",(function(t,e){var i=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=l;var s=a("dBnxH"),r=a("5PYgv");a("1SmPd")(l,s);for(var n=i(r.prototype),o=0;o<n.length;o++){var h=n[o];l.prototype[h]||(l.prototype[h]=r.prototype[h])}function l(t){if(!(this instanceof l))return new l(t);s.call(this,t),r.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||u.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})})),a.register("5PYgv",(function(t,e){function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var s=t.entry;t.entry=null;for(;s;){var r=s.callback;e.pendingcb--,r(i),s=s.next}e.corkedRequestsFree.next=t}(e,t)}}var s;t.exports=T,T.WritableState=P;var n={deprecate:a("iWORF")},o=a("iq7xo"),h=C,l=r.Uint8Array||function(){};var c,d=a("8l6WM"),p=a("kqunw").getHighWaterMark,m=a("ap7qE").codes,f=m.ERR_INVALID_ARG_TYPE,_=m.ERR_METHOD_NOT_IMPLEMENTED,g=m.ERR_MULTIPLE_CALLBACK,b=m.ERR_STREAM_CANNOT_PIPE,y=m.ERR_STREAM_DESTROYED,w=m.ERR_STREAM_NULL_VALUES,v=m.ERR_STREAM_WRITE_AFTER_END,x=m.ERR_UNKNOWN_ENCODING,S=d.errorOrDestroy;function A(){}function P(t,e,r){s=s||a("hxaYb"),t=t||{},"boolean"!=typeof r&&(r=e instanceof s),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=p(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===t.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,s=i.sync,r=i.writecb;if("function"!=typeof r)throw new g;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,s,r){--e.pendingcb,i?(u.nextTick(r,s),u.nextTick(M,t,e),t._writableState.errorEmitted=!0,S(t,s)):(r(s),t._writableState.errorEmitted=!0,S(t,s),M(t,e))}(t,i,s,e,r);else{var n=D(i)||t.destroyed;n||i.corked||i.bufferProcessing||!i.bufferedRequest||B(t,i),s?u.nextTick(R,t,i,n,r):R(t,i,n,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function T(t){var e=this instanceof(s=s||a("hxaYb"));if(!e&&!c.call(T,this))return new T(t);this._writableState=new P(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function E(t,e,i,s,r,n,o){e.writelen=s,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new y("write")):i?t._writev(r,e.onwrite):t._write(r,n,e.onwrite),e.sync=!1}function R(t,e,i,s){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,s(),M(t,e)}function B(t,e){e.bufferProcessing=!0;var s=e.bufferedRequest;if(t._writev&&s&&s.next){var r=e.bufferedRequestCount,n=new Array(r),o=e.corkedRequestsFree;o.entry=s;for(var a=0,h=!0;s;)n[a]=s,s.isBuf||(h=!1),s=s.next,a+=1;n.allBuffers=h,E(t,e,!0,e.length,n,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;s;){var l=s.chunk,c=s.encoding,d=s.callback;if(E(t,e,!1,e.objectMode?1:l.length,l,c,d),s=s.next,e.bufferedRequestCount--,e.writing)break}null===s&&(e.lastBufferedRequest=null)}e.bufferedRequest=s,e.bufferProcessing=!1}function D(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function I(t,e){t._final((function(i){e.pendingcb--,i&&S(t,i),e.prefinished=!0,t.emit("prefinish"),M(t,e)}))}function M(t,e){var i=D(e);if(i&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,u.nextTick(I,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var s=t._readableState;(!s||s.autoDestroy&&s.endEmitted)&&t.destroy()}return i}a("1SmPd")(T,o),P.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(P.prototype,"buffer",{get:n.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===T&&(t&&t._writableState instanceof P)}})):c=function(t){return t instanceof this},T.prototype.pipe=function(){S(this,new b)},T.prototype.write=function(t,e,i){var s,r=this._writableState,n=!1,o=!r.objectMode&&(s=t,h.isBuffer(s)||s instanceof l);return o&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof e&&(i=e,e=null),o?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof i&&(i=A),r.ending?function(t,e){var i=new v;S(t,i),u.nextTick(e,i)}(this,i):(o||function(t,e,i,s){var r;return null===i?r=new w:"string"==typeof i||e.objectMode||(r=new f("chunk",["string","Buffer"],i)),!r||(S(t,r),u.nextTick(s,r),!1)}(this,r,t,i))&&(r.pendingcb++,n=function(t,e,i,s,r,n){if(!i){var o=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,i));return e}(e,s,r);s!==o&&(i=!0,r="buffer",s=o)}var a=e.objectMode?1:s.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:s,encoding:r,isBuf:i,callback:n,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else E(t,e,!1,a,s,r,n);return l}(this,r,o,t,e,i)),n},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||B(this,t))},T.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new x(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(t,e,i){i(new _("_write()"))},T.prototype._writev=null,T.prototype.end=function(t,e,i){var s=this._writableState;return"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),s.corked&&(s.corked=1,this.uncork()),s.ending||function(t,e,i){e.ending=!0,M(t,e),i&&(e.finished?u.nextTick(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,s,i),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),T.prototype.destroy=d.destroy,T.prototype._undestroy=d.undestroy,T.prototype._destroy=function(t,e){e(t)}})),a.register("iWORF",(function(t,e){function i(t){try{if(!r.localStorage)return!1}catch(t){return!1}var e=r.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var s=!1;return function(){if(!s){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),s=!0}return t.apply(this,arguments)}}})),a.register("9gNJH",(function(e,i){var s;t(e.exports,"StringDecoder",(()=>s),(t=>s=t));var r=a("iqcnF").Buffer,n=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=c,this.end=d,e=4;break;case"utf8":this.fillLast=l,e=4;break;case"base64":this.text=u,this.end=p,e=3;break;default:return this.write=m,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function h(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function l(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var s=i.charCodeAt(i.length-1);if(s>=55296&&s<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function d(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function u(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function p(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function m(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}s=o,o.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var i=function(t,e,i){var s=e.length-1;if(s<i)return 0;var r=h(e[s]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--s<i||-2===r)return 0;if((r=h(e[s]))>=0)return r>0&&(t.lastNeed=r-2),r;if(--s<i||-2===r)return 0;if((r=h(e[s]))>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var s=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,s),t.toString("utf8",e,s)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}})),a.register("iqcnF",(function(t,e){var i=D.Buffer;function s(t,e){for(var i in t)e[i]=t[i]}function r(t,e,s){return i(t,e,s)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=D:(s(D,t.exports),t.exports.Buffer=r),r.prototype=Object.create(i.prototype),s(i,r),r.from=function(t,e,s){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,s)},r.alloc=function(t,e,s){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof s?r.fill(e,s):r.fill(e):r.fill(0),r},r.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return D.SlowBuffer(t)}})),a.register("ePyJ5",(function(t,e){var i;function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r=a("iOvpf"),n=Symbol("lastResolve"),o=Symbol("lastReject"),h=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),p=Symbol("stream");function m(t,e){return{value:t,done:e}}function f(t){var e=t[n];if(null!==e){var i=t[p].read();null!==i&&(t[c]=null,t[n]=null,t[o]=null,e(m(i,!1)))}}function _(t){u.nextTick(f,t)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((s(i={get stream(){return this[p]},next:function(){var t=this,e=this[h];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(m(void 0,!0));if(this[p].destroyed)return new Promise((function(e,i){u.nextTick((function(){t[h]?i(t[h]):e(m(void 0,!0))}))}));var i,s=this[c];if(s)i=new Promise(function(t,e){return function(i,s){t.then((function(){e[l]?i(m(void 0,!0)):e[d](i,s)}),s)}}(s,this));else{var r=this[p].read();if(null!==r)return Promise.resolve(m(r,!1));i=new Promise(this[d])}return this[c]=i,i}},Symbol.asyncIterator,(function(){return this})),s(i,"return",(function(){var t=this;return new Promise((function(e,i){t[p].destroy(null,(function(t){t?i(t):e(m(void 0,!0))}))}))})),i),g);t.exports=function(t){var e,i=Object.create(b,(s(e={},p,{value:t,writable:!0}),s(e,n,{value:null,writable:!0}),s(e,o,{value:null,writable:!0}),s(e,h,{value:null,writable:!0}),s(e,l,{value:t._readableState.endEmitted,writable:!0}),s(e,d,{value:function(t,e){var s=i[p].read();s?(i[c]=null,i[n]=null,i[o]=null,t(m(s,!1))):(i[n]=t,i[o]=e)},writable:!0}),e));return i[c]=null,r(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=i[o];return null!==e&&(i[c]=null,i[n]=null,i[o]=null,e(t)),void(i[h]=t)}var s=i[n];null!==s&&(i[c]=null,i[n]=null,i[o]=null,s(m(void 0,!0))),i[l]=!0})),t.on("readable",_.bind(null,i)),i}})),a.register("iOvpf",(function(t,e){var i=a("ap7qE").codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}t.exports=function t(e,r,n){if("function"==typeof r)return t(e,null,r);r||(r={}),n=function(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];t.apply(this,s)}}}(n||s);var o=r.readable||!1!==r.readable&&e.readable,a=r.writable||!1!==r.writable&&e.writable,h=function(){e.writable||c()},l=e._writableState&&e._writableState.finished,c=function(){a=!1,l=!0,o||n.call(e)},d=e._readableState&&e._readableState.endEmitted,u=function(){o=!1,d=!0,a||n.call(e)},p=function(t){n.call(e,t)},m=function(){var t;return o&&!d?(e._readableState&&e._readableState.ended||(t=new i),n.call(e,t)):a&&!l?(e._writableState&&e._writableState.ended||(t=new i),n.call(e,t)):void 0},f=function(){e.req.on("finish",c)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?a&&!e._writableState&&(e.on("end",h),e.on("close",h)):(e.on("complete",c),e.on("abort",m),e.req?f():e.on("request",f)),e.on("end",u),e.on("finish",c),!1!==r.error&&e.on("error",p),e.on("close",m),function(){e.removeListener("complete",c),e.removeListener("abort",m),e.removeListener("request",f),e.req&&e.req.removeListener("finish",c),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",c),e.removeListener("end",u),e.removeListener("error",p),e.removeListener("close",m)}}})),a.register("3jcMm",(function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}})),a.register("j8ZaE",(function(t,e){t.exports=c;var i=a("ap7qE").codes,s=i.ERR_METHOD_NOT_IMPLEMENTED,r=i.ERR_MULTIPLE_CALLBACK,n=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=i.ERR_TRANSFORM_WITH_LENGTH_0,h=a("hxaYb");function l(t,e){var i=this._transformState;i.transforming=!1;var s=i.writecb;if(null===s)return this.emit("error",new r);i.writechunk=null,i.writecb=null,null!=e&&this.push(e),s(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);h.call(this,t),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",d)}function d(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush((function(e,i){u(t,e,i)}))}function u(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new o;if(t._transformState.transforming)throw new n;return t.push(null)}a("1SmPd")(c,h),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,h.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,i){i(new s("_transform()"))},c.prototype._write=function(t,e,i){var s=this._transformState;if(s.writecb=i,s.writechunk=t,s.writeencoding=e,!s.transforming){var r=this._readableState;(s.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){h.prototype._destroy.call(this,t,(function(t){e(t)}))}})),a.register("cMr3E",(function(t,e){t.exports=s;var i=a("j8ZaE");function s(t){if(!(this instanceof s))return new s(t);i.call(this,t)}a("1SmPd")(s,i),s.prototype._transform=function(t,e,i){i(null,t)}})),a.register("g39em",(function(t,e){var i;var s=a("ap7qE").codes,r=s.ERR_MISSING_ARGS,n=s.ERR_STREAM_DESTROYED;function o(t){if(t)throw t}function h(t,e,s,r){r=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(r);var o=!1;t.on("close",(function(){o=!0})),void 0===i&&(i=a("iOvpf")),i(t,{readable:e,writable:s},(function(t){if(t)return r(t);o=!0,r()}));var h=!1;return function(e){if(!o&&!h)return h=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void r(e||new n("pipe"))}}function l(t){t()}function c(t,e){return t.pipe(e)}function d(t){return t.length?"function"!=typeof t[t.length-1]?o:t.pop():o}t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var s,n=d(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new r("streams");var o=e.map((function(t,i){var r=i<e.length-1;return h(t,r,i>0,(function(t){s||(s=t),t&&o.forEach(l),r||(o.forEach(l),n(s))}))}));return e.reduce(c)}}));var Ct=a("dahan").Transform,Tt={},Et=C;a.register("iyobg",(function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s,r,n=a("3mvNw").codes,o=n.ERR_AMBIGUOUS_ARGUMENT,h=n.ERR_INVALID_ARG_TYPE,l=n.ERR_INVALID_ARG_VALUE,c=n.ERR_INVALID_RETURN_VALUE,d=n.ERR_MISSING_ARGS,p=a("jGCTc"),m=a("1Pw0o").inspect,f=a("1Pw0o").types,_=f.isPromise,g=f.isRegExp,b=Object.assign?Object.assign:a("k4Rjz").assign,y=Object.is?Object.is:a("iuDyw");new Map;function w(){var t=a("8OkXv");s=t.isDeepEqual,r=t.isDeepStrictEqual}var v=!1,x=t.exports=C,S={};function A(t){if(t.message instanceof Error)throw t.message;throw new p(t)}function P(t,e,i,s){if(!i){var r=!1;if(0===e)r=!0,s="No value argument passed to `assert.ok()`";else if(s instanceof Error)throw s;var n=new p({actual:i,expected:!0,message:s,operator:"==",stackStartFn:t});throw n.generatedMessage=r,n}}function C(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];P.apply(void 0,[C,e.length].concat(e))}x.fail=function t(e,i,s,r,n){var o,a=arguments.length;if(0===a)o="Failed";else if(1===a)s=e,e=void 0;else{if(!1===v){v=!0;var h=u.emitWarning?u.emitWarning:console.warn.bind(console);h("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}2===a&&(r="!=")}if(s instanceof Error)throw s;var l={actual:e,expected:i,operator:void 0===r?"fail":r,stackStartFn:n||t};void 0!==s&&(l.message=s);var c=new p(l);throw o&&(c.message=o,c.generatedMessage=!0),c},x.AssertionError=p,x.ok=C,x.equal=function t(e,i,s){if(arguments.length<2)throw new d("actual","expected");e!=i&&A({actual:e,expected:i,message:s,operator:"==",stackStartFn:t})},x.notEqual=function t(e,i,s){if(arguments.length<2)throw new d("actual","expected");e==i&&A({actual:e,expected:i,message:s,operator:"!=",stackStartFn:t})},x.deepEqual=function t(e,i,r){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),s(e,i)||A({actual:e,expected:i,message:r,operator:"deepEqual",stackStartFn:t})},x.notDeepEqual=function t(e,i,r){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),s(e,i)&&A({actual:e,expected:i,message:r,operator:"notDeepEqual",stackStartFn:t})},x.deepStrictEqual=function t(e,i,n){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),r(e,i)||A({actual:e,expected:i,message:n,operator:"deepStrictEqual",stackStartFn:t})},x.notDeepStrictEqual=function t(e,i,n){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w();r(e,i)&&A({actual:e,expected:i,message:n,operator:"notDeepStrictEqual",stackStartFn:t})},x.strictEqual=function t(e,i,s){if(arguments.length<2)throw new d("actual","expected");y(e,i)||A({actual:e,expected:i,message:s,operator:"strictEqual",stackStartFn:t})},x.notStrictEqual=function t(e,i,s){if(arguments.length<2)throw new d("actual","expected");y(e,i)&&A({actual:e,expected:i,message:s,operator:"notStrictEqual",stackStartFn:t})};var T=function t(e,i,s){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i.forEach((function(t){t in e&&(void 0!==s&&"string"==typeof s[t]&&g(e[t])&&e[t].test(s[t])?r[t]=s[t]:r[t]=e[t])}))};function E(t,e,i,s,n,o){if(!(i in t)||!r(t[i],e[i])){if(!s){var a=new T(t,n),h=new T(e,n,t),l=new p({actual:a,expected:h,operator:"deepStrictEqual",stackStartFn:o});throw l.actual=t,l.expected=e,l.operator=o.name,l}A({actual:t,expected:e,message:s,operator:o.name,stackStartFn:o})}}function R(t,e,r,n){if("function"!=typeof e){if(g(e))return e.test(t);if(2===arguments.length)throw new h("expected",["Function","RegExp"],e);if("object"!==i(t)||null===t){var o=new p({actual:t,expected:e,message:r,operator:"deepStrictEqual",stackStartFn:n});throw o.operator=n.name,o}var a=Object.keys(e);if(e instanceof Error)a.push("name","message");else if(0===a.length)throw new l("error",e,"may not be an empty object");return void 0===s&&w(),a.forEach((function(i){"string"==typeof t[i]&&g(e[i])&&e[i].test(t[i])||E(t,e,i,r,a,n)})),!0}return void 0!==e.prototype&&t instanceof e||!Error.isPrototypeOf(e)&&!0===e.call({},t)}function B(t){if("function"!=typeof t)throw new h("fn","Function",t);try{t()}catch(t){return t}return S}function D(t){return _(t)||null!==t&&"object"===i(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function I(t){return Promise.resolve().then((function(){var e;if("function"==typeof t){if(!D(e=t()))throw new c("instance of Promise","promiseFn",e)}else{if(!D(t))throw new h("promiseFn",["Function","Promise"],t);e=t}return Promise.resolve().then((function(){return e})).then((function(){return S})).catch((function(t){return t}))}))}function M(t,e,s,r){if("string"==typeof s){if(4===arguments.length)throw new h("error",["Object","Error","Function","RegExp"],s);if("object"===i(e)&&null!==e){if(e.message===s)throw new o("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===s)throw new o("error/message",'The error "'.concat(e,'" is identical to the message.'));r=s,s=void 0}else if(null!=s&&"object"!==i(s)&&"function"!=typeof s)throw new h("error",["Object","Error","Function","RegExp"],s);if(e===S){var n="";s&&s.name&&(n+=" (".concat(s.name,")")),n+=r?": ".concat(r):".";var a="rejects"===t.name?"rejection":"exception";A({actual:void 0,expected:s,operator:t.name,message:"Missing expected ".concat(a).concat(n),stackStartFn:t})}if(s&&!R(e,s,r,t))throw e}function O(t,e,i,s){if(e!==S){if("string"==typeof i&&(s=i,i=void 0),!i||R(e,i)){var r=s?": ".concat(s):".",n="doesNotReject"===t.name?"rejection":"exception";A({actual:e,expected:i,operator:t.name,message:"Got unwanted ".concat(n).concat(r,"\n")+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}function L(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];P.apply(void 0,[L,e.length].concat(e))}x.throws=function t(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];M.apply(void 0,[t,B(e)].concat(s))},x.rejects=function t(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return I(e).then((function(e){return M.apply(void 0,[t,e].concat(s))}))},x.doesNotThrow=function t(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];O.apply(void 0,[t,B(e)].concat(s))},x.doesNotReject=function t(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return I(e).then((function(e){return O.apply(void 0,[t,e].concat(s))}))},x.ifError=function t(e){if(null!=e){var s="ifError got unwanted exception: ";"object"===i(e)&&"string"==typeof e.message?0===e.message.length&&e.constructor?s+=e.constructor.name:s+=e.message:s+=m(e);var r=new p({actual:e,expected:null,operator:"ifError",message:s,stackStartFn:t}),n=e.stack;if("string"==typeof n){var o=n.split("\n");o.shift();for(var a=r.stack.split("\n"),h=0;h<o.length;h++){var l=a.indexOf(o[h]);if(-1!==l){a=a.slice(0,l);break}}r.stack="".concat(a.join("\n"),"\n").concat(o.join("\n"))}throw r}},x.strict=b(L,x,{equal:x.strictEqual,deepEqual:x.deepStrictEqual,notEqual:x.notStrictEqual,notDeepEqual:x.notDeepStrictEqual}),x.strict.strict=x.strict})),a.register("3mvNw",(function(e,i){var s;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}t(e.exports,"codes",(()=>s),(t=>s=t));var l,c,d={};function u(t,e,i){i||(i=Error);var s=function(i){function s(i,r,a){var h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(h=n(this,o(s).call(this,function(t,i,s){return"string"==typeof e?e:e(t,i,s)}(i,r,a)))).code=t,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(s,i),s}(i);d[t]=s}function p(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map((function(t){return String(t)})),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}u("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),u("ERR_INVALID_ARG_TYPE",(function(t,e,i){var s,n,o,h;if(void 0===l&&(l=a("iyobg")),l("string"==typeof t,"'name' must be a string"),"string"==typeof e&&(n="not ",e.substr(!o||o<0?0:+o,n.length)===n)?(s="must not be",e=e.replace(/^not /,"")):s="must be",function(t,e,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}(t," argument"))h="The ".concat(t," ").concat(s," ").concat(p(e,"type"));else{var c=function(t,e,i){return"number"!=typeof i&&(i=0),!(i+e.length>t.length)&&-1!==t.indexOf(e,i)}(t,".")?"property":"argument";h='The "'.concat(t,'" ').concat(c," ").concat(s," ").concat(p(e,"type"))}return h+=". Received type ".concat(r(i))}),TypeError),u("ERR_INVALID_ARG_VALUE",(function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===c&&(c=a("1Pw0o"));var s=c.inspect(e);return s.length>128&&(s="".concat(s.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(i,". Received ").concat(s)}),TypeError,RangeError),u("ERR_INVALID_RETURN_VALUE",(function(t,e,i){var s;return s=i&&i.constructor&&i.constructor.name?"instance of ".concat(i.constructor.name):"type ".concat(r(i)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(s,".")}),TypeError),u("ERR_MISSING_ARGS",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];void 0===l&&(l=a("iyobg")),l(e.length>0,"At least one arg needs to be specified");var s="The ",r=e.length;switch(e=e.map((function(t){return'"'.concat(t,'"')})),r){case 1:s+="".concat(e[0]," argument");break;case 2:s+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:s+=e.slice(0,r-1).join(", "),s+=", and ".concat(e[r-1]," arguments")}return"".concat(s," must be specified")}),TypeError),s=d})),a.register("1Pw0o",(function(t,e){var i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),i={},s=0;s<e.length;s++)i[e[s]]=Object.getOwnPropertyDescriptor(t,e[s]);return i},s=/%[sdj%]/g;t.exports.format=function(t){if(!b(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(o(arguments[i]));return e.join(" ")}i=1;for(var r=arguments,n=r.length,a=String(t).replace(s,(function(t){if("%%"===t)return"%";if(i>=n)return t;switch(t){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(t){return"[Circular]"}default:return t}})),h=r[i];i<n;h=r[++i])_(h)||!v(h)?a+=" "+h:a+=" "+o(h);return a},t.exports.deprecate=function(e,i){if(void 0!==u&&!0===u.noDeprecation)return e;if(void 0===u)return function(){return t.exports.deprecate(e,i).apply(this,arguments)};var s=!1;return function(){if(!s){if(u.throwDeprecation)throw new Error(i);u.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}};var r={},n=/^$/;function o(e,i){var s={seen:[],stylize:l};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),f(i)?s.showHidden=i:i&&t.exports._extend(s,i),y(s.showHidden)&&(s.showHidden=!1),y(s.depth)&&(s.depth=2),y(s.colors)&&(s.colors=!1),y(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=h),c(s,e,s.depth)}function h(t,e){var i=o.styles[e];return i?"["+o.colors[i][0]+"m"+t+"["+o.colors[i][1]+"m":t}function l(t,e){return t}function c(e,i,s){if(e.customInspect&&i&&A(i.inspect)&&i.inspect!==t.exports.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(s,e);return b(r)||(r=c(e,r,s)),r}var n=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(b(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(g(e))return t.stylize(""+e,"number");if(f(e))return t.stylize(""+e,"boolean");if(_(e))return t.stylize("null","null")}(e,i);if(n)return n;var o=Object.keys(i),a=function(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(i)),S(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return d(i);if(0===o.length){if(A(i)){var h=i.name?": "+i.name:"";return e.stylize("[Function"+h+"]","special")}if(w(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(x(i))return e.stylize(Date.prototype.toString.call(i),"date");if(S(i))return d(i)}var l,u="",v=!1,P=["{","}"];(m(i)&&(v=!0,P=["[","]"]),A(i))&&(u=" [Function"+(i.name?": "+i.name:"")+"]");return w(i)&&(u=" "+RegExp.prototype.toString.call(i)),x(i)&&(u=" "+Date.prototype.toUTCString.call(i)),S(i)&&(u=" "+d(i)),0!==o.length||v&&0!=i.length?s<0?w(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),l=v?function(t,e,i,s,r){for(var n=[],o=0,a=e.length;o<a;++o)R(e,String(o))?n.push(p(t,e,i,s,String(o),!0)):n.push("");return r.forEach((function(r){r.match(/^\d+$/)||n.push(p(t,e,i,s,r,!0))})),n}(e,i,s,a,o):o.map((function(t){return p(e,i,s,a,t,v)})),e.seen.pop(),function(t,e,i){var s=0;return t.reduce((function(t,e){s++;if(e.indexOf("\n")>=0)s++;return t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(l,u,P)):P[0]+u+P[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,i,s,r,n){var o,a,h;if((h=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),R(s,r)||(o="["+r+"]"),a||(t.seen.indexOf(h.value)<0?(a=_(i)?c(t,h.value,null):c(t,h.value,i-1)).indexOf("\n")>-1&&(a=n?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),y(o)){if(n&&r.match(/^\d+$/))return a;(o=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function m(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function _(t){return null===t}function g(t){return"number"==typeof t}function b(t){return"string"==typeof t}function y(t){return void 0===t}function w(t){return v(t)&&"[object RegExp]"===P(t)}function v(t){return"object"==typeof t&&null!==t}function x(t){return v(t)&&"[object Date]"===P(t)}function S(t){return v(t)&&("[object Error]"===P(t)||t instanceof Error)}function A(t){return"function"==typeof t}function P(t){return Object.prototype.toString.call(t)}function C(t){return t<10?"0"+t.toString(10):t.toString(10)}t.exports.debuglog=function(e){if(e=e.toUpperCase(),!r[e])if(n.test(e)){var i=u.pid;r[e]=function(){var s=t.exports.format.apply(t.exports,arguments);console.error("%s %d: %s",e,i,s)}}else r[e]=function(){};return r[e]},t.exports.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.exports.types=a("bRMPy"),t.exports.isArray=m,t.exports.isBoolean=f,t.exports.isNull=_,t.exports.isNullOrUndefined=function(t){return null==t},t.exports.isNumber=g,t.exports.isString=b,t.exports.isSymbol=function(t){return"symbol"==typeof t},t.exports.isUndefined=y,t.exports.isRegExp=w,t.exports.types.isRegExp=w,t.exports.isObject=v,t.exports.isDate=x,t.exports.types.isDate=x,t.exports.isError=S,t.exports.types.isNativeError=S,t.exports.isFunction=A,t.exports.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},t.exports.isBuffer=a("lmVdL");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var t=new Date,e=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":");return[t.getDate(),T[t.getMonth()],e].join(" ")}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports.log=function(){console.log("%s - %s",E(),t.exports.format.apply(t.exports,arguments))},t.exports.inherits=a("1SmPd"),t.exports._extend=function(t,e){if(!e||!v(e))return t;for(var i=Object.keys(e),s=i.length;s--;)t[i[s]]=e[i[s]];return t};var B="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(t,e){if(!t){var i=new Error("Promise was rejected with a falsy value");i.reason=t,t=i}return e(t)}t.exports.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(B&&t[B]){var e;if("function"!=typeof(e=t[B]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,B,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,i,s=new Promise((function(t,s){e=t,i=s})),r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);r.push((function(t,s){t?i(t):e(s)}));try{t.apply(this,r)}catch(t){i(t)}return s}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),B&&Object.defineProperty(e,B,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},t.exports.promisify.custom=B,t.exports.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i]);var s=e.pop();if("function"!=typeof s)throw new TypeError("The last argument must be of type Function");var r=this,n=function(){return s.apply(r,arguments)};t.apply(this,e).then((function(t){u.nextTick(n.bind(null,null,t))}),(function(t){u.nextTick(D.bind(null,t,n))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,i(t)),e}})),a.register("bRMPy",(function(t,e){var i=a("eqRol"),s=a("7f5ng"),r=a("klupf"),n=a("dMQzx");function o(t){return t.call.bind(t)}var h="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,c=o(Object.prototype.toString),d=o(Number.prototype.valueOf),u=o(String.prototype.valueOf),p=o(Boolean.prototype.valueOf);if(h)var m=o(BigInt.prototype.valueOf);if(l)var f=o(Symbol.prototype.valueOf);function _(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function g(t){return"[object Map]"===c(t)}function b(t){return"[object Set]"===c(t)}function y(t){return"[object WeakMap]"===c(t)}function w(t){return"[object WeakSet]"===c(t)}function v(t){return"[object ArrayBuffer]"===c(t)}function x(t){return"undefined"!=typeof ArrayBuffer&&(v.working?v(t):t instanceof ArrayBuffer)}function S(t){return"[object DataView]"===c(t)}function A(t){return"undefined"!=typeof DataView&&(S.working?S(t):t instanceof DataView)}t.exports.isArgumentsObject=i,t.exports.isGeneratorFunction=s,t.exports.isTypedArray=n,t.exports.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},t.exports.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):n(t)||A(t)},t.exports.isUint8Array=function(t){return"Uint8Array"===r(t)},t.exports.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===r(t)},t.exports.isUint16Array=function(t){return"Uint16Array"===r(t)},t.exports.isUint32Array=function(t){return"Uint32Array"===r(t)},t.exports.isInt8Array=function(t){return"Int8Array"===r(t)},t.exports.isInt16Array=function(t){return"Int16Array"===r(t)},t.exports.isInt32Array=function(t){return"Int32Array"===r(t)},t.exports.isFloat32Array=function(t){return"Float32Array"===r(t)},t.exports.isFloat64Array=function(t){return"Float64Array"===r(t)},t.exports.isBigInt64Array=function(t){return"BigInt64Array"===r(t)},t.exports.isBigUint64Array=function(t){return"BigUint64Array"===r(t)},g.working="undefined"!=typeof Map&&g(new Map),t.exports.isMap=function(t){return"undefined"!=typeof Map&&(g.working?g(t):t instanceof Map)},b.working="undefined"!=typeof Set&&b(new Set),t.exports.isSet=function(t){return"undefined"!=typeof Set&&(b.working?b(t):t instanceof Set)},y.working="undefined"!=typeof WeakMap&&y(new WeakMap),t.exports.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(y.working?y(t):t instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),t.exports.isWeakSet=function(t){return w(t)},v.working="undefined"!=typeof ArrayBuffer&&v(new ArrayBuffer),t.exports.isArrayBuffer=x,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.exports.isDataView=A;var P="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function C(t){return"[object SharedArrayBuffer]"===c(t)}function T(t){return void 0!==P&&(void 0===C.working&&(C.working=C(new P)),C.working?C(t):t instanceof P)}function E(t){return _(t,d)}function R(t){return _(t,u)}function B(t){return _(t,p)}function D(t){return h&&_(t,m)}function I(t){return l&&_(t,f)}t.exports.isSharedArrayBuffer=T,t.exports.isAsyncFunction=function(t){return"[object AsyncFunction]"===c(t)},t.exports.isMapIterator=function(t){return"[object Map Iterator]"===c(t)},t.exports.isSetIterator=function(t){return"[object Set Iterator]"===c(t)},t.exports.isGeneratorObject=function(t){return"[object Generator]"===c(t)},t.exports.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===c(t)},t.exports.isNumberObject=E,t.exports.isStringObject=R,t.exports.isBooleanObject=B,t.exports.isBigIntObject=D,t.exports.isSymbolObject=I,t.exports.isBoxedPrimitive=function(t){return E(t)||R(t)||B(t)||D(t)||I(t)},t.exports.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(x(t)||T(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t.exports,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))})),a.register("eqRol",(function(t,e){var i=a("4GB4I")(),s=a("ayU79")("Object.prototype.toString"),r=function(t){return!(i&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===s(t)},n=function(t){return!!r(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==s(t)&&"[object Function]"===s(t.callee)},o=function(){return r(arguments)}();r.isLegacyArguments=n,t.exports=o?r:n})),a.register("4GB4I",(function(t,e){var i=a("6OhZx");t.exports=function(){return i()&&!!Symbol.toStringTag}})),a.register("6OhZx",(function(t,e){t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var s=Object.getOwnPropertySymbols(t);if(1!==s.length||s[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}})),a.register("ayU79",(function(t,e){var i=a("6SYMG"),s=a("h18xg"),r=s(i("String.prototype.indexOf"));t.exports=function(t,e){var n=i(t,!!e);return"function"==typeof n&&r(t,".prototype.")>-1?s(n):n}})),a.register("6SYMG",(function(t,e){var i,s=SyntaxError,r=Function,n=TypeError,o=function(t){try{return r('"use strict"; return ('+t+").constructor;")()}catch(t){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(t){h=null}var l=function(){throw new n},c=h?function(){try{return l}catch(t){try{return h(arguments,"callee").get}catch(t){return l}}}():l,d=a("6iIxO")(),u=Object.getPrototypeOf||function(t){return t.__proto__},p={},m="undefined"==typeof Uint8Array?i:u(Uint8Array),f={"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":d?u([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?u(u([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?u((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?u((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?u(""[Symbol.iterator]()):i,"%Symbol%":d?Symbol:i,"%SyntaxError%":s,"%ThrowTypeError%":c,"%TypedArray%":m,"%TypeError%":n,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet},_=function t(e){var i;if("%AsyncFunction%"===e)i=o("async function () {}");else if("%GeneratorFunction%"===e)i=o("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=o("async function* () {}");else if("%AsyncGenerator%"===e){var s=t("%AsyncGeneratorFunction%");s&&(i=s.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&(i=u(r.prototype))}return f[e]=i,i},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=a("9vbBO"),y=a("h5ong"),w=b.call(Function.call,Array.prototype.concat),v=b.call(Function.apply,Array.prototype.splice),x=b.call(Function.call,String.prototype.replace),S=b.call(Function.call,String.prototype.slice),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,C=function(t){var e=S(t,0,1),i=S(t,-1);if("%"===e&&"%"!==i)throw new s("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new s("invalid intrinsic syntax, expected opening `%`");var r=[];return x(t,A,(function(t,e,i,s){r[r.length]=i?x(s,P,"$1"):e||t})),r},T=function(t,e){var i,r=t;if(y(g,r)&&(r="%"+(i=g[r])[0]+"%"),y(f,r)){var o=f[r];if(o===p&&(o=_(r)),void 0===o&&!e)throw new n("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:o}}throw new s("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new n('"allowMissing" argument must be a boolean');var i=C(t),r=i.length>0?i[0]:"",o=T("%"+r+"%",e),a=o.name,l=o.value,c=!1,d=o.alias;d&&(r=d[0],v(i,w([0,1],d)));for(var u=1,p=!0;u<i.length;u+=1){var m=i[u],_=S(m,0,1),g=S(m,-1);if(('"'===_||"'"===_||"`"===_||'"'===g||"'"===g||"`"===g)&&_!==g)throw new s("property names with quotes must have matching quotes");if("constructor"!==m&&p||(c=!0),y(f,a="%"+(r+="."+m)+"%"))l=f[a];else if(null!=l){if(!(m in l)){if(!e)throw new n("base intrinsic for "+t+" exists, but the property is not available.");return}if(h&&u+1>=i.length){var b=h(l,m);l=(p=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:l[m]}else p=y(l,m),l=l[m];p&&!c&&(f[a]=l)}}return l}})),a.register("6iIxO",(function(t,e){var i="undefined"!=typeof Symbol&&Symbol,s=a("6OhZx");t.exports=function(){return"function"==typeof i&&("function"==typeof Symbol&&("symbol"==typeof i("foo")&&("symbol"==typeof Symbol("bar")&&s())))}})),a.register("9vbBO",(function(t,e){var i=a("7j9s4");t.exports=Function.prototype.bind||i})),a.register("7j9s4",(function(t,e){var i="Function.prototype.bind called on incompatible ",s=Array.prototype.slice,r=Object.prototype.toString,n="[object Function]";t.exports=function(t){var e=this;if("function"!=typeof e||r.call(e)!==n)throw new TypeError(i+e);for(var o,a=s.call(arguments,1),h=function(){if(this instanceof o){var i=e.apply(this,a.concat(s.call(arguments)));return Object(i)===i?i:this}return e.apply(t,a.concat(s.call(arguments)))},l=Math.max(0,e.length-a.length),c=[],d=0;d<l;d++)c.push("$"+d);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(h),e.prototype){var u=function(){};u.prototype=e.prototype,o.prototype=new u,u.prototype=null}return o}})),a.register("h5ong",(function(t,e){var i=a("9vbBO");t.exports=i.call(Function.call,Object.prototype.hasOwnProperty)})),a.register("h18xg",(function(t,e){var i=a("9vbBO"),s=a("6SYMG"),r=s("%Function.prototype.apply%"),n=s("%Function.prototype.call%"),o=s("%Reflect.apply%",!0)||i.call(n,r),h=s("%Object.getOwnPropertyDescriptor%",!0),l=s("%Object.defineProperty%",!0),c=s("%Math.max%");if(l)try{l({},"a",{value:1})}catch(t){l=null}t.exports=function(t){var e=o(i,n,arguments);if(h&&l){var s=h(e,"length");s.configurable&&l(e,"length",{value:1+c(0,t.length-(arguments.length-1))})}return e};var d=function(){return o(i,r,arguments)};l?l(t.exports,"apply",{value:d}):t.exports.apply=d})),a.register("7f5ng",(function(t,e){var i,s=Object.prototype.toString,r=Function.prototype.toString,n=/^\s*(?:function)?\*/,o=a("4GB4I")(),h=Object.getPrototypeOf;t.exports=function(t){if("function"!=typeof t)return!1;if(n.test(r.call(t)))return!0;if(!o)return"[object GeneratorFunction]"===s.call(t);if(!h)return!1;if(void 0===i){var e=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch(t){}}();i=!!e&&h(e)}return h(t)===i}})),a.register("klupf",(function(t,e){var i=a("kbeH4"),s=a("59QJ3"),n=a("ayU79"),o=n("Object.prototype.toString"),h=a("4GB4I")(),l="undefined"==typeof globalThis?r:globalThis,c=s(),d=n("String.prototype.slice"),u={},p=a("5NK0M"),m=Object.getPrototypeOf;h&&p&&m&&i(c,(function(t){if("function"==typeof l[t]){var e=new l[t];if(Symbol.toStringTag in e){var i=m(e),s=p(i,Symbol.toStringTag);if(!s){var r=m(i);s=p(r,Symbol.toStringTag)}u[t]=s.get}}}));var f=a("dMQzx");t.exports=function(t){return!!f(t)&&(h&&Symbol.toStringTag in t?function(t){var e=!1;return i(u,(function(i,s){if(!e)try{var r=i.call(t);r===s&&(e=r)}catch(t){}})),e}(t):d(o(t),8,-1))}})),a.register("kbeH4",(function(t,e){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString;t.exports=function(t,e,r){if("[object Function]"!==s.call(e))throw new TypeError("iterator must be a function");var n=t.length;if(n===+n)for(var o=0;o<n;o++)e.call(r,t[o],o,t);else for(var a in t)i.call(t,a)&&e.call(r,t[a],a,t)}})),a.register("59QJ3",(function(t,e){var i=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],s="undefined"==typeof globalThis?r:globalThis;t.exports=function(){for(var t=[],e=0;e<i.length;e++)"function"==typeof s[i[e]]&&(t[t.length]=i[e]);return t}})),a.register("5NK0M",(function(t,e){var i=a("6SYMG")("%Object.getOwnPropertyDescriptor%");if(i)try{i([],"length")}catch(t){i=null}t.exports=i})),a.register("dMQzx",(function(t,e){var i=a("kbeH4"),s=a("59QJ3"),n=a("ayU79"),o=n("Object.prototype.toString"),h=a("4GB4I")(),l="undefined"==typeof globalThis?r:globalThis,c=s(),d=n("Array.prototype.indexOf",!0)||function(t,e){for(var i=0;i<t.length;i+=1)if(t[i]===e)return i;return-1},u=n("String.prototype.slice"),p={},m=a("5NK0M"),f=Object.getPrototypeOf;h&&m&&f&&i(c,(function(t){var e=new l[t];if(Symbol.toStringTag in e){var i=f(e),s=m(i,Symbol.toStringTag);if(!s){var r=f(i);s=m(r,Symbol.toStringTag)}p[t]=s.get}}));t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!h||!(Symbol.toStringTag in t)){var e=u(o(t),8,-1);return d(c,e)>-1}return!!m&&function(t){var e=!1;return i(p,(function(i,s){if(!e)try{e=i.call(t)===s}catch(t){}})),e}(t)}})),a.register("lmVdL",(function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}})),a.register("jGCTc",(function(t,e){function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?n(t):e}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t){var e="function"==typeof Map?new Map:void 0;return(o=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,s)}function s(){return l(t,arguments,d(this).constructor)}return s.prototype=Object.create(t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),c(s,t)})(t)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t,e,i){return(l=h()?Reflect.construct:function(t,e,i){var s=[null];s.push.apply(s,e);var r=new(Function.bind.apply(t,s));return i&&c(r,i.prototype),r}).apply(null,arguments)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var m=a("1Pw0o").inspect,f=a("3mvNw").codes.ERR_INVALID_ARG_TYPE;function _(t,e,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}var g="",b="",y="",w="",v={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function x(t){var e=Object.keys(t),i=Object.create(Object.getPrototypeOf(t));return e.forEach((function(e){i[e]=t[e]})),Object.defineProperty(i,"message",{value:t.message}),i}function S(t){return m(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function A(t,e,i){var s="",r="",n=0,o="",a=!1,h=S(t),l=h.split("\n"),c=S(e).split("\n"),d=0,m="";if("strictEqual"===i&&"object"===p(t)&&"object"===p(e)&&null!==t&&null!==e&&(i="strictEqualObject"),1===l.length&&1===c.length&&l[0]!==c[0]){var f=l[0].length+c[0].length;if(f<=10){if(!("object"===p(t)&&null!==t||"object"===p(e)&&null!==e||0===t&&0===e))return"".concat(v[i],"\n\n")+"".concat(l[0]," !== ").concat(c[0],"\n")}else if("strictEqualObject"!==i){if(f<(u.stderr&&u.stderr.isTTY?u.stderr.columns:80)){for(;l[0][d]===c[0][d];)d++;d>2&&(m="\n  ".concat(function(t,e){if(e=Math.floor(e),0==t.length||0==e)return"";var i=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+t.substring(0,i-t.length)}(" ",d),"^"),d=0)}}}for(var x=l[l.length-1],A=c[c.length-1];x===A&&(d++<2?o="\n  ".concat(x).concat(o):s=x,l.pop(),c.pop(),0!==l.length&&0!==c.length);)x=l[l.length-1],A=c[c.length-1];var P=Math.max(l.length,c.length);if(0===P){var C=h.split("\n");if(C.length>30)for(C[26]="".concat(g,"...").concat(w);C.length>27;)C.pop();return"".concat(v.notIdentical,"\n\n").concat(C.join("\n"),"\n")}d>3&&(o="\n".concat(g,"...").concat(w).concat(o),a=!0),""!==s&&(o="\n  ".concat(s).concat(o),s="");var T=0,E=v[i]+"\n".concat(b,"+ actual").concat(w," ").concat(y,"- expected").concat(w),R=" ".concat(g,"...").concat(w," Lines skipped");for(d=0;d<P;d++){var B=d-n;if(l.length<d+1)B>1&&d>2&&(B>4?(r+="\n".concat(g,"...").concat(w),a=!0):B>3&&(r+="\n  ".concat(c[d-2]),T++),r+="\n  ".concat(c[d-1]),T++),n=d,s+="\n".concat(y,"-").concat(w," ").concat(c[d]),T++;else if(c.length<d+1)B>1&&d>2&&(B>4?(r+="\n".concat(g,"...").concat(w),a=!0):B>3&&(r+="\n  ".concat(l[d-2]),T++),r+="\n  ".concat(l[d-1]),T++),n=d,r+="\n".concat(b,"+").concat(w," ").concat(l[d]),T++;else{var D=c[d],I=l[d],M=I!==D&&(!_(I,",")||I.slice(0,-1)!==D);M&&_(D,",")&&D.slice(0,-1)===I&&(M=!1,I+=","),M?(B>1&&d>2&&(B>4?(r+="\n".concat(g,"...").concat(w),a=!0):B>3&&(r+="\n  ".concat(l[d-2]),T++),r+="\n  ".concat(l[d-1]),T++),n=d,r+="\n".concat(b,"+").concat(w," ").concat(I),s+="\n".concat(y,"-").concat(w," ").concat(D),T+=2):(r+=s,s="",1!==B&&0!==d||(r+="\n  ".concat(I),T++))}if(T>20&&d<P-2)return"".concat(E).concat(R,"\n").concat(r,"\n").concat(g,"...").concat(w).concat(s,"\n")+"".concat(g,"...").concat(w)}return"".concat(E).concat(a?R:"","\n").concat(r).concat(s).concat(o).concat(m)}var P=function(t){function e(t){var i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),"object"!==p(t)||null===t)throw new f("options","Object",t);var s=t.message,o=t.operator,a=t.stackStartFn,h=t.actual,l=t.expected,c=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=s)i=r(this,d(e).call(this,String(s)));else if(u.stderr&&u.stderr.isTTY&&(u.stderr&&u.stderr.getColorDepth&&1!==u.stderr.getColorDepth()?(g="[34m",b="[32m",w="[39m",y="[31m"):(g="",b="",w="",y="")),"object"===p(h)&&null!==h&&"object"===p(l)&&null!==l&&"stack"in h&&h instanceof Error&&"stack"in l&&l instanceof Error&&(h=x(h),l=x(l)),"deepStrictEqual"===o||"strictEqual"===o)i=r(this,d(e).call(this,A(h,l,o)));else if("notDeepStrictEqual"===o||"notStrictEqual"===o){var m=v[o],_=S(h).split("\n");if("notStrictEqual"===o&&"object"===p(h)&&null!==h&&(m=v.notStrictEqualObject),_.length>30)for(_[26]="".concat(g,"...").concat(w);_.length>27;)_.pop();i=1===_.length?r(this,d(e).call(this,"".concat(m," ").concat(_[0]))):r(this,d(e).call(this,"".concat(m,"\n\n").concat(_.join("\n"),"\n")))}else{var P=S(h),C="",T=v[o];"notDeepEqual"===o||"notEqual"===o?(P="".concat(v[o],"\n\n").concat(P)).length>1024&&(P="".concat(P.slice(0,1021),"...")):(C="".concat(S(l)),P.length>512&&(P="".concat(P.slice(0,509),"...")),C.length>512&&(C="".concat(C.slice(0,509),"...")),"deepEqual"===o||"equal"===o?P="".concat(T,"\n\n").concat(P,"\n\nshould equal\n\n"):C=" ".concat(o," ").concat(C)),i=r(this,d(e).call(this,"".concat(P).concat(C)))}return Error.stackTraceLimit=c,i.generatedMessage=!s,Object.defineProperty(n(i),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),i.code="ERR_ASSERTION",i.actual=h,i.expected=l,i.operator=o,Error.captureStackTrace&&Error.captureStackTrace(n(i),a),i.stack,i.name="AssertionError",r(i)}var o,a,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),o=e,(a=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:m.custom,value:function(t,e){return m(this,function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable})))),r.forEach((function(e){i(t,e,s[e])}))}return t}({},e,{customInspect:!1,depth:0}))}}])&&s(o.prototype,a),h&&s(o,h),e}(o(Error));t.exports=P})),a.register("k4Rjz",(function(t,e){function i(t,e){if(null==t)throw new TypeError("Cannot convert first argument to object");for(var i=Object(t),s=1;s<arguments.length;s++){var r=arguments[s];if(null!=r)for(var n=Object.keys(Object(r)),o=0,a=n.length;o<a;o++){var h=n[o],l=Object.getOwnPropertyDescriptor(r,h);void 0!==l&&l.enumerable&&(i[h]=r[h])}}return i}t.exports={assign:i,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:i})}}})),a.register("iuDyw",(function(t,e){var i=a("jTJ5M"),s=a("h18xg"),r=a("90OGC"),n=a("kjhy3"),o=a("40MjR"),h=s(n(),Object);i(h,{getPolyfill:n,implementation:r,shim:o}),t.exports=h})),a.register("jTJ5M",(function(t,e){var i=a("5N3G5"),s="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),r=Object.prototype.toString,n=Array.prototype.concat,o=Object.defineProperty,h=o&&function(){var t={};try{for(var e in o(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),l=function(t,e,i,s){var n;(!(e in t)||"function"==typeof(n=s)&&"[object Function]"===r.call(n)&&s())&&(h?o(t,e,{configurable:!0,enumerable:!1,value:i,writable:!0}):t[e]=i)},c=function(t,e){var r=arguments.length>2?arguments[2]:{},o=i(e);s&&(o=n.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)l(t,o[a],e[o[a]],r[o[a]])};c.supportsDescriptors=!!h,t.exports=c})),a.register("5N3G5",(function(t,e){var i=Array.prototype.slice,s=a("3I0iO"),r=Object.keys,n=r?function(t){return r(t)}:a("izdGL"),o=Object.keys;n.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return s(t)?o(i.call(t)):o(t)}):Object.keys=n;return Object.keys||n},t.exports=n})),a.register("3I0iO",(function(t,e){var i=Object.prototype.toString;t.exports=function(t){var e=i.call(t),s="[object Arguments]"===e;return s||(s="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),s}})),a.register("izdGL",(function(t,e){var i;if(!Object.keys){var s=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=a("3I0iO"),o=Object.prototype.propertyIsEnumerable,h=!o.call({toString:null},"toString"),l=o.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(t){var e=t.constructor;return e&&e.prototype===t},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!u["$"+t]&&s.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{d(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();i=function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===r.call(t),o=n(t),a=e&&"[object String]"===r.call(t),u=[];if(!e&&!i&&!o)throw new TypeError("Object.keys called on a non-object");var m=l&&i;if(a&&t.length>0&&!s.call(t,0))for(var f=0;f<t.length;++f)u.push(String(f));if(o&&t.length>0)for(var _=0;_<t.length;++_)u.push(String(_));else for(var g in t)m&&"prototype"===g||!s.call(t,g)||u.push(String(g));if(h)for(var b=function(t){if("undefined"==typeof window||!p)return d(t);try{return d(t)}catch(t){return!1}}(t),y=0;y<c.length;++y)b&&"constructor"===c[y]||!s.call(t,c[y])||u.push(c[y]);return u}}t.exports=i})),a.register("90OGC",(function(t,e){var i=function(t){return t!=t};t.exports=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!i(t)||!i(e))}})),a.register("kjhy3",(function(t,e){var i=a("90OGC");t.exports=function(){return"function"==typeof Object.is?Object.is:i}})),a.register("40MjR",(function(t,e){var i=a("kjhy3"),s=a("jTJ5M");t.exports=function(){var t=i();return s(Object,{is:t},{is:function(){return Object.is!==t}}),t}})),a.register("8OkXv",(function(t,e){function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],s=!0,r=!1,n=void 0;try{for(var o,a=t[Symbol.iterator]();!(s=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(t){r=!0,n=t}finally{try{s||null==a.return||a.return()}finally{if(r)throw n}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=void 0!==/a/g.flags,n=function(t){var e=[];return t.forEach((function(t){return e.push(t)})),e},o=function(t){var e=[];return t.forEach((function(t,i){return e.push([i,t])})),e},h=Object.is?Object.is:a("iuDyw"),l=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},c=Number.isNaN?Number.isNaN:a("cURUg");function d(t){return t.call.bind(t)}var u=d(Object.prototype.hasOwnProperty),p=d(Object.prototype.propertyIsEnumerable),m=d(Object.prototype.toString),f=a("1Pw0o").types,_=f.isAnyArrayBuffer,g=f.isArrayBufferView,b=f.isDate,y=f.isMap,w=f.isRegExp,v=f.isSet,x=f.isNativeError,S=f.isBoxedPrimitive,A=f.isNumberObject,P=f.isStringObject,C=f.isBooleanObject,T=f.isBigIntObject,E=f.isSymbolObject,R=f.isFloat32Array,B=f.isFloat64Array;function D(t){if(0===t.length||t.length>10)return!0;for(var e=0;e<t.length;e++){var i=t.charCodeAt(e);if(i<48||i>57)return!0}return 10===t.length&&t>=Math.pow(2,32)}function I(t){return Object.keys(t).filter(D).concat(l(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function M(t,e){if(t===e)return 0;for(var i=t.length,s=e.length,r=0,n=Math.min(i,s);r<n;++r)if(t[r]!==e[r]){i=t[r],s=e[r];break}return i<s?-1:s<i?1:0}function O(t,e,i,n){if(t===e)return 0!==t||(!i||h(t,e));if(i){if("object"!==s(t))return"number"==typeof t&&c(t)&&c(e);if("object"!==s(e)||null===t||null===e)return!1;if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(null===t||"object"!==s(t))return(null===e||"object"!==s(e))&&t==e;if(null===e||"object"!==s(e))return!1}var o,a,l,d,u=m(t);if(u!==m(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var p=I(t),f=I(e);return p.length===f.length&&G(t,e,i,n,1,p)}if("[object Object]"===u&&(!y(t)&&y(e)||!v(t)&&v(e)))return!1;if(b(t)){if(!b(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(w(t)){if(!w(e)||(l=t,d=e,!(r?l.source===d.source&&l.flags===d.flags:RegExp.prototype.toString.call(l)===RegExp.prototype.toString.call(d))))return!1}else if(x(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else{if(g(t)){if(i||!R(t)&&!B(t)){if(!function(t,e){return t.byteLength===e.byteLength&&0===M(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(t,e))return!1}else if(!function(t,e){if(t.byteLength!==e.byteLength)return!1;for(var i=0;i<t.byteLength;i++)if(t[i]!==e[i])return!1;return!0}(t,e))return!1;var D=I(t),O=I(e);return D.length===O.length&&G(t,e,i,n,0,D)}if(v(t))return!(!v(e)||t.size!==e.size)&&G(t,e,i,n,2);if(y(t))return!(!y(e)||t.size!==e.size)&&G(t,e,i,n,3);if(_(t)){if(a=e,(o=t).byteLength!==a.byteLength||0!==M(new Uint8Array(o),new Uint8Array(a)))return!1}else if(S(t)&&!function(t,e){return A(t)?A(e)&&h(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):P(t)?P(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):C(t)?C(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):T(t)?T(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):E(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}(t,e))return!1}return G(t,e,i,n,0)}function L(t,e){return e.filter((function(e){return p(t,e)}))}function G(t,e,i,s,r,n){if(5===arguments.length){n=Object.keys(t);var o=Object.keys(e);if(n.length!==o.length)return!1}for(var a=0;a<n.length;a++)if(!u(e,n[a]))return!1;if(i&&5===arguments.length){var h=l(t);if(0!==h.length){var c=0;for(a=0;a<h.length;a++){var d=h[a];if(p(t,d)){if(!p(e,d))return!1;n.push(d),c++}else if(p(e,d))return!1}var m=l(e);if(h.length!==m.length&&L(e,m).length!==c)return!1}else{var f=l(e);if(0!==f.length&&0!==L(e,f).length)return!1}}if(0===n.length&&(0===r||1===r&&0===t.length||0===t.size))return!0;if(void 0===s)s={val1:new Map,val2:new Map,position:0};else{var _=s.val1.get(t);if(void 0!==_){var g=s.val2.get(e);if(void 0!==g)return _===g}s.position++}s.val1.set(t,s.position),s.val2.set(e,s.position);var b=W(t,e,i,n,s,r);return s.val1.delete(t),s.val2.delete(e),b}function F(t,e,i,s){for(var r=n(t),o=0;o<r.length;o++){var a=r[o];if(O(e,a,i,s))return t.delete(a),!0}return!1}function k(t){switch(s(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(c(t))return!1}return!0}function N(t,e,i){var s=k(i);return null!=s?s:e.has(s)&&!t.has(s)}function V(t,e,i,s,r){var n=k(i);if(null!=n)return n;var o=e.get(n);return!(void 0===o&&!e.has(n)||!O(s,o,!1,r))&&(!t.has(n)&&O(s,o,!1,r))}function U(t,e,i,s,r,o){for(var a=n(t),h=0;h<a.length;h++){var l=a[h];if(O(i,l,r,o)&&O(s,e.get(l),r,o))return t.delete(l),!0}return!1}function W(t,e,r,a,h,l){var c=0;if(2===l){if(!function(t,e,i,r){for(var o=null,a=n(t),h=0;h<a.length;h++){var l=a[h];if("object"===s(l)&&null!==l)null===o&&(o=new Set),o.add(l);else if(!e.has(l)){if(i)return!1;if(!N(t,e,l))return!1;null===o&&(o=new Set),o.add(l)}}if(null!==o){for(var c=n(e),d=0;d<c.length;d++){var u=c[d];if("object"===s(u)&&null!==u){if(!F(o,u,i,r))return!1}else if(!i&&!t.has(u)&&!F(o,u,i,r))return!1}return 0===o.size}return!0}(t,e,r,h))return!1}else if(3===l){if(!function(t,e,r,n){for(var a=null,h=o(t),l=0;l<h.length;l++){var c=i(h[l],2),d=c[0],u=c[1];if("object"===s(d)&&null!==d)null===a&&(a=new Set),a.add(d);else{var p=e.get(d);if(void 0===p&&!e.has(d)||!O(u,p,r,n)){if(r)return!1;if(!V(t,e,d,u,n))return!1;null===a&&(a=new Set),a.add(d)}}}if(null!==a){for(var m=o(e),f=0;f<m.length;f++){var _=i(m[f],2),g=(d=_[0],_[1]);if("object"===s(d)&&null!==d){if(!U(a,t,d,g,r,n))return!1}else if(!(r||t.has(d)&&O(t.get(d),g,!1,n)||U(a,t,d,g,!1,n)))return!1}return 0===a.size}return!0}(t,e,r,h))return!1}else if(1===l)for(;c<t.length;c++){if(!u(t,c)){if(u(e,c))return!1;for(var d=Object.keys(t);c<d.length;c++){var p=d[c];if(!u(e,p)||!O(t[p],e[p],r,h))return!1}return d.length===Object.keys(e).length}if(!u(e,c)||!O(t[c],e[c],r,h))return!1}for(c=0;c<a.length;c++){var m=a[c];if(!O(t[m],e[m],r,h))return!1}return!0}t.exports={isDeepEqual:function(t,e){return O(t,e,false)},isDeepStrictEqual:function(t,e){return O(t,e,true)}}})),a.register("cURUg",(function(t,e){var i=a("h18xg"),s=a("jTJ5M"),r=a("RPrUE"),n=a("azL2s"),o=a("ihJwl"),h=i(n(),Number);s(h,{getPolyfill:n,implementation:r,shim:o}),t.exports=h})),a.register("RPrUE",(function(t,e){t.exports=function(t){return t!=t}})),a.register("azL2s",(function(t,e){var i=a("RPrUE");t.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:i}})),a.register("ihJwl",(function(t,e){var i=a("jTJ5M"),s=a("azL2s");t.exports=function(){var t=s();return i(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}}));var Rt,Bt,Dt,It,Mt,Ot=a("iyobg"),Lt={};Lt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};var Gt={},Ft="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function kt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}Gt.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var s in i)kt(i,s)&&(t[s]=i[s])}}return t},Gt.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var Nt,Vt,Ut,Wt,jt,Xt={arraySet:function(t,e,i,s,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+s),r);else for(var n=0;n<s;n++)t[r+n]=e[i+n]},flattenChunks:function(t){var e,i,s,r,n,o;for(s=0,e=0,i=t.length;e<i;e++)s+=t[e].length;for(o=new Uint8Array(s),r=0,e=0,i=t.length;e<i;e++)n=t[e],o.set(n,r),r+=n.length;return o}},Yt={arraySet:function(t,e,i,s,r){for(var n=0;n<s;n++)t[r+n]=e[i+n]},flattenChunks:function(t){return[].concat.apply([],t)}};Gt.setTyped=function(t){t?(Gt.Buf8=Uint8Array,Gt.Buf16=Uint16Array,Gt.Buf32=Int32Array,Gt.assign(Gt,Xt)):(Gt.Buf8=Array,Gt.Buf16=Array,Gt.Buf32=Array,Gt.assign(Gt,Yt))},Gt.setTyped(Ft);function Ht(t){for(var e=t.length;--e>=0;)t[e]=0}var zt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Jt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Kt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Zt=new Array(576);Ht(Zt);var Qt=new Array(60);Ht(Qt);var $t=new Array(512);Ht($t);var te=new Array(256);Ht(te);var ee=new Array(29);Ht(ee);var ie,se,re,ne=new Array(30);function oe(t,e,i,s,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=s,this.max_length=r,this.has_stree=t&&t.length}function ae(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function he(t){return t<256?$t[t]:$t[256+(t>>>7)]}function le(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function ce(t,e,i){t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,le(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function de(t,e,i){ce(t,i[2*e],i[2*e+1])}function ue(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function pe(t,e,i){var s,r,n=new Array(16),o=0;for(s=1;s<=15;s++)n[s]=o=o+i[s-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=ue(n[a]++,a))}}function me(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function fe(t){t.bi_valid>8?le(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function _e(t,e,i,s){var r=2*e,n=2*i;return t[r]<t[n]||t[r]===t[n]&&s[e]<=s[i]}function ge(t,e,i){for(var s=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&_e(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!_e(e,s,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=s}function be(t,e,i){var s,r,n,o,a=0;if(0!==t.last_lit)do{s=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],r=t.pending_buf[t.l_buf+a],a++,0===s?de(t,r,e):(de(t,(n=te[r])+256+1,e),0!==(o=zt[n])&&ce(t,r-=ee[n],o),de(t,n=he(--s),i),0!==(o=Jt[n])&&ce(t,s-=ne[n],o))}while(a<t.last_lit);de(t,256,e)}function ye(t,e){var i,s,r,n=e.dyn_tree,o=e.stat_desc.static_tree,a=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<h;i++)0!==n[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):n[2*i+1]=0;for(;t.heap_len<2;)n[2*(r=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=o[2*r+1]);for(e.max_code=l,i=t.heap_len>>1;i>=1;i--)ge(t,n,i);r=h;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],ge(t,n,1),s=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=s,n[2*r]=n[2*i]+n[2*s],t.depth[r]=(t.depth[i]>=t.depth[s]?t.depth[i]:t.depth[s])+1,n[2*i+1]=n[2*s+1]=r,t.heap[1]=r++,ge(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,s,r,n,o,a,h=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,m=e.stat_desc.max_length,f=0;for(n=0;n<=15;n++)t.bl_count[n]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(n=h[2*h[2*(s=t.heap[i])+1]+1]+1)>m&&(n=m,f++),h[2*s+1]=n,s>l||(t.bl_count[n]++,o=0,s>=p&&(o=u[s-p]),a=h[2*s],t.opt_len+=a*(n+o),d&&(t.static_len+=a*(c[2*s+1]+o)));if(0!==f){do{for(n=m-1;0===t.bl_count[n];)n--;t.bl_count[n]--,t.bl_count[n+1]+=2,t.bl_count[m]--,f-=2}while(f>0);for(n=m;0!==n;n--)for(s=t.bl_count[n];0!==s;)(r=t.heap[--i])>l||(h[2*r+1]!==n&&(t.opt_len+=(n-h[2*r+1])*h[2*r],h[2*r+1]=n),s--)}}(t,e),pe(n,l,t.bl_count)}function we(t,e,i){var s,r,n=-1,o=e[1],a=0,h=7,l=4;for(0===o&&(h=138,l=3),e[2*(i+1)+1]=65535,s=0;s<=i;s++)r=o,o=e[2*(s+1)+1],++a<h&&r===o||(a<l?t.bl_tree[2*r]+=a:0!==r?(r!==n&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,n=r,0===o?(h=138,l=3):r===o?(h=6,l=3):(h=7,l=4))}function ve(t,e,i){var s,r,n=-1,o=e[1],a=0,h=7,l=4;for(0===o&&(h=138,l=3),s=0;s<=i;s++)if(r=o,o=e[2*(s+1)+1],!(++a<h&&r===o)){if(a<l)do{de(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==n&&(de(t,r,t.bl_tree),a--),de(t,16,t.bl_tree),ce(t,a-3,2)):a<=10?(de(t,17,t.bl_tree),ce(t,a-3,3)):(de(t,18,t.bl_tree),ce(t,a-11,7));a=0,n=r,0===o?(h=138,l=3):r===o?(h=6,l=3):(h=7,l=4)}}Ht(ne);var xe=!1;function Se(t,e,i,s){ce(t,0+(s?1:0),3),function(t,e,i,s){fe(t),s&&(le(t,i),le(t,~i)),Gt.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}Wt=function(t){xe||(!function(){var t,e,i,s,r,n=new Array(16);for(i=0,s=0;s<28;s++)for(ee[s]=i,t=0;t<1<<zt[s];t++)te[i++]=s;for(te[i-1]=s,r=0,s=0;s<16;s++)for(ne[s]=r,t=0;t<1<<Jt[s];t++)$t[r++]=s;for(r>>=7;s<30;s++)for(ne[s]=r<<7,t=0;t<1<<Jt[s]-7;t++)$t[256+r++]=s;for(e=0;e<=15;e++)n[e]=0;for(t=0;t<=143;)Zt[2*t+1]=8,t++,n[8]++;for(;t<=255;)Zt[2*t+1]=9,t++,n[9]++;for(;t<=279;)Zt[2*t+1]=7,t++,n[7]++;for(;t<=287;)Zt[2*t+1]=8,t++,n[8]++;for(pe(Zt,287,n),t=0;t<30;t++)Qt[2*t+1]=5,Qt[2*t]=ue(t,5);ie=new oe(Zt,zt,257,286,15),se=new oe(Qt,Jt,0,30,15),re=new oe(new Array(0),qt,0,19,7)}(),xe=!0),t.l_desc=new ae(t.dyn_ltree,ie),t.d_desc=new ae(t.dyn_dtree,se),t.bl_desc=new ae(t.bl_tree,re),t.bi_buf=0,t.bi_valid=0,me(t)},Nt=Se,Ut=function(t,e,i,s){var r,n,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),ye(t,t.l_desc),ye(t,t.d_desc),o=function(t){var e;for(we(t,t.dyn_ltree,t.l_desc.max_code),we(t,t.dyn_dtree,t.d_desc.max_code),ye(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*Kt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(n=t.static_len+3+7>>>3)<=r&&(r=n)):r=n=i+5,i+4<=r&&-1!==e?Se(t,e,i,s):4===t.strategy||n===r?(ce(t,2+(s?1:0),3),be(t,Zt,Qt)):(ce(t,4+(s?1:0),3),function(t,e,i,s){var r;for(ce(t,e-257,5),ce(t,i-1,5),ce(t,s-4,4),r=0;r<s;r++)ce(t,t.bl_tree[2*Kt[r]+1],3);ve(t,t.dyn_ltree,e-1),ve(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),be(t,t.dyn_ltree,t.dyn_dtree)),me(t),s&&fe(t)},Vt=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(te[i]+256+1)]++,t.dyn_dtree[2*he(e)]++),t.last_lit===t.lit_bufsize-1},jt=function(t){ce(t,2,3),de(t,256,Zt),function(t){16===t.bi_valid?(le(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)};var Ae={};Ae=function(t,e,i,s){for(var r=65535&t|0,n=t>>>16&65535|0,o=0;0!==i;){i-=o=i>2e3?2e3:i;do{n=n+(r=r+e[s++]|0)|0}while(--o);r%=65521,n%=65521}return r|n<<16|0};var Pe={};var Ce=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var s=0;s<8;s++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();Pe=function(t,e,i,s){var r=Ce,n=s+i;t^=-1;for(var o=s;o<n;o++)t=t>>>8^r[255&(t^e[o])];return-1^t};var Te;Te={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var Ee,Re,Be,De,Ie,Me;function Oe(t,e){return t.msg=Te[e],e}function Le(t){return(t<<1)-(t>4?9:0)}function Ge(t){for(var e=t.length;--e>=0;)t[e]=0}function Fe(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(Gt.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function ke(t,e){Ut(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Fe(t.strm)}function Ne(t,e){t.pending_buf[t.pending++]=e}function Ve(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function Ue(t,e,i,s){var r=t.avail_in;return r>s&&(r=s),0===r?0:(t.avail_in-=r,Gt.arraySet(e,t.input,t.next_in,r,i),1===t.state.wrap?t.adler=Ae(t.adler,e,r,i):2===t.state.wrap&&(t.adler=Pe(t.adler,e,r,i)),t.next_in+=r,t.total_in+=r,r)}function We(t,e){var i,s,r=t.max_chain_length,n=t.strstart,o=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,l=t.window,c=t.w_mask,d=t.prev,u=t.strstart+258,p=l[n+o-1],m=l[n+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(l[(i=e)+o]===m&&l[i+o-1]===p&&l[i]===l[n]&&l[++i]===l[n+1]){n+=2,i++;do{}while(l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&n<u);if(s=258-(u-n),n=u-258,s>o){if(t.match_start=e,o=s,s>=a)break;p=l[n+o-1],m=l[n+o]}}}while((e=d[e&c])>h&&0!=--r);return o<=t.lookahead?o:t.lookahead}function je(t){var e,i,s,r,n,o=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-262)){Gt.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,e=i=t.hash_size;do{s=t.head[--e],t.head[e]=s>=o?s-o:0}while(--i);e=i=o;do{s=t.prev[--e],t.prev[e]=s>=o?s-o:0}while(--i);r+=o}if(0===t.strm.avail_in)break;if(i=Ue(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=i,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+3-1])&t.hash_mask,t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function Xe(t,e){for(var i,s;;){if(t.lookahead<262){if(je(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-262&&(t.match_length=We(t,i)),t.match_length>=3)if(s=Vt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else s=Vt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(s&&(ke(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(ke(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(ke(t,!1),0===t.strm.avail_out)?1:2}function Ye(t,e){for(var i,s,r;;){if(t.lookahead<262){if(je(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-262&&(t.match_length=We(t,i),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,s=Vt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,s&&(ke(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((s=Vt(t,0,t.window[t.strstart-1]))&&ke(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(s=Vt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(ke(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(ke(t,!1),0===t.strm.avail_out)?1:2}function He(t,e,i,s,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=s,this.func=r}function ze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Gt.Buf16(1146),this.dyn_dtree=new Gt.Buf16(122),this.bl_tree=new Gt.Buf16(78),Ge(this.dyn_ltree),Ge(this.dyn_dtree),Ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Gt.Buf16(16),this.heap=new Gt.Buf16(573),Ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Gt.Buf16(573),Ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Je(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,Wt(e),0):Oe(t,-2)}function qe(t){var e,i=Je(t);return 0===i&&((e=t.state).window_size=2*e.w_size,Ge(e.head),e.max_lazy_match=Ee[e.level].max_lazy,e.good_match=Ee[e.level].good_length,e.nice_match=Ee[e.level].nice_length,e.max_chain_length=Ee[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),i}function Ke(t,e,i,s,r,n){if(!t)return-2;var o=1;if(-1===e&&(e=6),s<0?(o=0,s=-s):s>15&&(o=2,s-=16),r<1||r>9||8!==i||s<8||s>15||e<0||e>9||n<0||n>4)return Oe(t,-2);8===s&&(s=9);var a=new ze;return t.state=a,a.strm=t,a.wrap=o,a.gzhead=null,a.w_bits=s,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Gt.Buf8(2*a.w_size),a.head=new Gt.Buf16(a.hash_size),a.prev=new Gt.Buf16(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Gt.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=n,a.method=i,qe(t)}Ee=[new He(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(je(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var s=t.block_start+i;if((0===t.strstart||t.strstart>=s)&&(t.lookahead=t.strstart-s,t.strstart=s,ke(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(ke(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(ke(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(ke(t,!1),t.strm.avail_out),1)})),new He(4,4,8,4,Xe),new He(4,5,16,8,Xe),new He(4,6,32,32,Xe),new He(4,4,16,16,Ye),new He(8,16,32,32,Ye),new He(8,16,128,128,Ye),new He(8,32,128,256,Ye),new He(32,128,258,1024,Ye),new He(32,258,258,4096,Ye)],Dt=Ke,Mt=qe,Bt=function(t,e){var i,s,r,n;if(!t||!t.state||e>5||e<0)return t?Oe(t,-2):-2;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||666===s.status&&4!==e)return Oe(t,0===t.avail_out?-5:-2);if(s.strm=t,i=s.last_flush,s.last_flush=e,42===s.status)if(2===s.wrap)t.adler=0,Ne(s,31),Ne(s,139),Ne(s,8),s.gzhead?(Ne(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),Ne(s,255&s.gzhead.time),Ne(s,s.gzhead.time>>8&255),Ne(s,s.gzhead.time>>16&255),Ne(s,s.gzhead.time>>24&255),Ne(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),Ne(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(Ne(s,255&s.gzhead.extra.length),Ne(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=Pe(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(Ne(s,0),Ne(s,0),Ne(s,0),Ne(s,0),Ne(s,0),Ne(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),Ne(s,3),s.status=113);else{var o=8+(s.w_bits-8<<4)<<8;o|=(s.strategy>=2||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(o|=32),o+=31-o%31,s.status=113,Ve(s,o),0!==s.strstart&&(Ve(s,t.adler>>>16),Ve(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(r=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>r&&(t.adler=Pe(t.adler,s.pending_buf,s.pending-r,r)),Fe(t),r=s.pending,s.pending!==s.pending_buf_size));)Ne(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>r&&(t.adler=Pe(t.adler,s.pending_buf,s.pending-r,r)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){r=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>r&&(t.adler=Pe(t.adler,s.pending_buf,s.pending-r,r)),Fe(t),r=s.pending,s.pending===s.pending_buf_size)){n=1;break}n=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,Ne(s,n)}while(0!==n);s.gzhead.hcrc&&s.pending>r&&(t.adler=Pe(t.adler,s.pending_buf,s.pending-r,r)),0===n&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){r=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>r&&(t.adler=Pe(t.adler,s.pending_buf,s.pending-r,r)),Fe(t),r=s.pending,s.pending===s.pending_buf_size)){n=1;break}n=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,Ne(s,n)}while(0!==n);s.gzhead.hcrc&&s.pending>r&&(t.adler=Pe(t.adler,s.pending_buf,s.pending-r,r)),0===n&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&Fe(t),s.pending+2<=s.pending_buf_size&&(Ne(s,255&t.adler),Ne(s,t.adler>>8&255),t.adler=0,s.status=113)):s.status=113),0!==s.pending){if(Fe(t),0===t.avail_out)return s.last_flush=-1,0}else if(0===t.avail_in&&Le(e)<=Le(i)&&4!==e)return Oe(t,-5);if(666===s.status&&0!==t.avail_in)return Oe(t,-5);if(0!==t.avail_in||0!==s.lookahead||0!==e&&666!==s.status){var a=2===s.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&(je(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,i=Vt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(ke(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(ke(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(ke(t,!1),0===t.strm.avail_out)?1:2}(s,e):3===s.strategy?function(t,e){for(var i,s,r,n,o=t.window;;){if(t.lookahead<=258){if(je(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(s=o[r=t.strstart-1])===o[++r]&&s===o[++r]&&s===o[++r]){n=t.strstart+258;do{}while(s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&r<n);t.match_length=258-(n-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=Vt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=Vt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(ke(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(ke(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(ke(t,!1),0===t.strm.avail_out)?1:2}(s,e):Ee[s.level].func(s,e);if(3!==a&&4!==a||(s.status=666),1===a||3===a)return 0===t.avail_out&&(s.last_flush=-1),0;if(2===a&&(1===e?jt(s):5!==e&&(Nt(s,0,0,!1),3===e&&(Ge(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),Fe(t),0===t.avail_out))return s.last_flush=-1,0}return 4!==e?0:s.wrap<=0?1:(2===s.wrap?(Ne(s,255&t.adler),Ne(s,t.adler>>8&255),Ne(s,t.adler>>16&255),Ne(s,t.adler>>24&255),Ne(s,255&t.total_in),Ne(s,t.total_in>>8&255),Ne(s,t.total_in>>16&255),Ne(s,t.total_in>>24&255)):(Ve(s,t.adler>>>16),Ve(s,65535&t.adler)),Fe(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?0:1)},Rt=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?Oe(t,-2):(t.state=null,113===e?Oe(t,-3):0):-2},It=function(t,e){var i,s,r,n,o,a,h,l,c=e.length;if(!t||!t.state)return-2;if(2===(n=(i=t.state).wrap)||1===n&&42!==i.status||i.lookahead)return-2;for(1===n&&(t.adler=Ae(t.adler,e,c,0)),i.wrap=0,c>=i.w_size&&(0===n&&(Ge(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new Gt.Buf8(i.w_size),Gt.arraySet(l,e,c-i.w_size,i.w_size,0),e=l,c=i.w_size),o=t.avail_in,a=t.next_in,h=t.input,t.avail_in=c,t.next_in=0,t.input=e,je(i);i.lookahead>=3;){s=i.strstart,r=i.lookahead-2;do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[s+3-1])&i.hash_mask,i.prev[s&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=s,s++}while(--r);i.strstart=s,i.lookahead=2,je(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=a,t.input=h,t.avail_in=o,i.wrap=n,0};var Ze;Ze=function(t,e){var i,s,r,n,o,a,h,l,c,d,u,p,m,f,_,g,b,y,w,v,x,S,A,P,C;i=t.state,s=t.next_in,P=t.input,r=s+(t.avail_in-5),n=t.next_out,C=t.output,o=n-(e-t.avail_out),a=n+(t.avail_out-257),h=i.dmax,l=i.wsize,c=i.whave,d=i.wnext,u=i.window,p=i.hold,m=i.bits,f=i.lencode,_=i.distcode,g=(1<<i.lenbits)-1,b=(1<<i.distbits)-1;t:do{m<15&&(p+=P[s++]<<m,m+=8,p+=P[s++]<<m,m+=8),y=f[p&g];e:for(;;){if(p>>>=w=y>>>24,m-=w,0===(w=y>>>16&255))C[n++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=f[(65535&y)+(p&(1<<w)-1)];continue e}if(32&w){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}v=65535&y,(w&=15)&&(m<w&&(p+=P[s++]<<m,m+=8),v+=p&(1<<w)-1,p>>>=w,m-=w),m<15&&(p+=P[s++]<<m,m+=8,p+=P[s++]<<m,m+=8),y=_[p&b];i:for(;;){if(p>>>=w=y>>>24,m-=w,!(16&(w=y>>>16&255))){if(0==(64&w)){y=_[(65535&y)+(p&(1<<w)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&y,m<(w&=15)&&(p+=P[s++]<<m,(m+=8)<w&&(p+=P[s++]<<m,m+=8)),(x+=p&(1<<w)-1)>h){t.msg="invalid distance too far back",i.mode=30;break t}if(p>>>=w,m-=w,x>(w=n-o)){if((w=x-w)>c&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(S=0,A=u,0===d){if(S+=l-w,w<v){v-=w;do{C[n++]=u[S++]}while(--w);S=n-x,A=C}}else if(d<w){if(S+=l+d-w,(w-=d)<v){v-=w;do{C[n++]=u[S++]}while(--w);if(S=0,d<v){v-=w=d;do{C[n++]=u[S++]}while(--w);S=n-x,A=C}}}else if(S+=d-w,w<v){v-=w;do{C[n++]=u[S++]}while(--w);S=n-x,A=C}for(;v>2;)C[n++]=A[S++],C[n++]=A[S++],C[n++]=A[S++],v-=3;v&&(C[n++]=A[S++],v>1&&(C[n++]=A[S++]))}else{S=n-x;do{C[n++]=C[S++],C[n++]=C[S++],C[n++]=C[S++],v-=3}while(v>2);v&&(C[n++]=C[S++],v>1&&(C[n++]=C[S++]))}break}}break}}while(s<r&&n<a);s-=v=m>>3,p&=(1<<(m-=v<<3))-1,t.next_in=s,t.next_out=n,t.avail_in=s<r?r-s+5:5-(s-r),t.avail_out=n<a?a-n+257:257-(n-a),i.hold=p,i.bits=m};var Qe,$e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ti=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ei=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ii=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Qe=function(t,e,i,s,r,n,o,a){var h,l,c,d,u,p,m,f,_,g=a.bits,b=0,y=0,w=0,v=0,x=0,S=0,A=0,P=0,C=0,T=0,E=null,R=0,B=new Gt.Buf16(16),D=new Gt.Buf16(16),I=null,M=0;for(b=0;b<=15;b++)B[b]=0;for(y=0;y<s;y++)B[e[i+y]]++;for(x=g,v=15;v>=1&&0===B[v];v--);if(x>v&&(x=v),0===v)return r[n++]=20971520,r[n++]=20971520,a.bits=1,0;for(w=1;w<v&&0===B[w];w++);for(x<w&&(x=w),P=1,b=1;b<=15;b++)if(P<<=1,(P-=B[b])<0)return-1;if(P>0&&(0===t||1!==v))return-1;for(D[1]=0,b=1;b<15;b++)D[b+1]=D[b]+B[b];for(y=0;y<s;y++)0!==e[i+y]&&(o[D[e[i+y]]++]=y);if(0===t?(E=I=o,p=19):1===t?(E=$e,R-=257,I=ti,M-=257,p=256):(E=ei,I=ii,p=-1),T=0,y=0,b=w,u=n,S=x,A=0,c=-1,d=(C=1<<x)-1,1===t&&C>852||2===t&&C>592)return 1;for(;;){m=b-A,o[y]<p?(f=0,_=o[y]):o[y]>p?(f=I[M+o[y]],_=E[R+o[y]]):(f=96,_=0),h=1<<b-A,w=l=1<<S;do{r[u+(T>>A)+(l-=h)]=m<<24|f<<16|_|0}while(0!==l);for(h=1<<b-1;T&h;)h>>=1;if(0!==h?(T&=h-1,T+=h):T=0,y++,0==--B[b]){if(b===v)break;b=e[i+o[y]]}if(b>x&&(T&d)!==c){for(0===A&&(A=x),u+=w,P=1<<(S=b-A);S+A<v&&!((P-=B[S+A])<=0);)S++,P<<=1;if(C+=1<<S,1===t&&C>852||2===t&&C>592)return 1;r[c=T&d]=x<<24|S<<16|u-n|0}}return 0!==T&&(r[u+T]=b-A<<24|4194304),a.bits=x,0};function si(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function ri(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Gt.Buf16(320),this.work=new Gt.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ni(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Gt.Buf32(852),e.distcode=e.distdyn=new Gt.Buf32(592),e.sane=1,e.back=-1,0):-2}function oi(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,ni(t)):-2}function ai(t,e){var i,s;return t&&t.state?(s=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==s.window&&s.wbits!==e&&(s.window=null),s.wrap=i,s.wbits=e,oi(t))):-2}function hi(t,e){var i,s;return t?(s=new ri,t.state=s,s.window=null,0!==(i=ai(t,e))&&(t.state=null),i):-2}var li,ci,di=!0;function ui(t){if(di){var e;for(li=new Gt.Buf32(512),ci=new Gt.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Qe(1,t.lens,0,288,li,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Qe(2,t.lens,0,32,ci,0,t.work,{bits:5}),di=!1}t.lencode=li,t.lenbits=9,t.distcode=ci,t.distbits=5}function pi(t,e,i,s){var r,n=t.state;return null===n.window&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new Gt.Buf8(n.wsize)),s>=n.wsize?(Gt.arraySet(n.window,e,i-n.wsize,n.wsize,0),n.wnext=0,n.whave=n.wsize):((r=n.wsize-n.wnext)>s&&(r=s),Gt.arraySet(n.window,e,i-s,r,n.wnext),(s-=r)?(Gt.arraySet(n.window,e,i-s,s,0),n.wnext=s,n.whave=n.wsize):(n.wnext+=r,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=r))),0}De=oi,Re=hi,Ie=function(t,e){var i,s,r,n,o,a,h,l,c,d,u,p,m,f,_,g,b,y,w,v,x,S,A,P,C=0,T=new Gt.Buf8(4),E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(i=t.state).mode&&(i.mode=13),o=t.next_out,r=t.output,h=t.avail_out,n=t.next_in,s=t.input,a=t.avail_in,l=i.hold,c=i.bits,d=a,u=h,S=0;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;c<16;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}if(2&i.wrap&&35615===l){i.check=0,T[0]=255&l,T[1]=l>>>8&255,i.check=Pe(i.check,T,2,0),l=0,c=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&l)){t.msg="unknown compression method",i.mode=30;break}if(c-=4,x=8+(15&(l>>>=4)),0===i.wbits)i.wbits=x;else if(x>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<x,t.adler=i.check=1,i.mode=512&l?10:12,l=0,c=0;break;case 2:for(;c<16;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}if(i.flags=l,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=l>>8&1),512&i.flags&&(T[0]=255&l,T[1]=l>>>8&255,i.check=Pe(i.check,T,2,0)),l=0,c=0,i.mode=3;case 3:for(;c<32;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}i.head&&(i.head.time=l),512&i.flags&&(T[0]=255&l,T[1]=l>>>8&255,T[2]=l>>>16&255,T[3]=l>>>24&255,i.check=Pe(i.check,T,4,0)),l=0,c=0,i.mode=4;case 4:for(;c<16;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}i.head&&(i.head.xflags=255&l,i.head.os=l>>8),512&i.flags&&(T[0]=255&l,T[1]=l>>>8&255,i.check=Pe(i.check,T,2,0)),l=0,c=0,i.mode=5;case 5:if(1024&i.flags){for(;c<16;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}i.length=l,i.head&&(i.head.extra_len=l),512&i.flags&&(T[0]=255&l,T[1]=l>>>8&255,i.check=Pe(i.check,T,2,0)),l=0,c=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((p=i.length)>a&&(p=a),p&&(i.head&&(x=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),Gt.arraySet(i.head.extra,s,n,p,x)),512&i.flags&&(i.check=Pe(i.check,s,p,n)),a-=p,n+=p,i.length-=p),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===a)break t;p=0;do{x=s[n+p++],i.head&&x&&i.length<65536&&(i.head.name+=String.fromCharCode(x))}while(x&&p<a);if(512&i.flags&&(i.check=Pe(i.check,s,p,n)),a-=p,n+=p,x)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===a)break t;p=0;do{x=s[n+p++],i.head&&x&&i.length<65536&&(i.head.comment+=String.fromCharCode(x))}while(x&&p<a);if(512&i.flags&&(i.check=Pe(i.check,s,p,n)),a-=p,n+=p,x)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;c<16;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}if(l!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}l=0,c=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;c<32;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}t.adler=i.check=si(l),l=0,c=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=o,t.avail_out=h,t.next_in=n,t.avail_in=a,i.hold=l,i.bits=c,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){l>>>=7&c,c-=7&c,i.mode=27;break}for(;c<3;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}switch(i.last=1&l,c-=1,3&(l>>>=1)){case 0:i.mode=14;break;case 1:if(ui(i),i.mode=20,6===e){l>>>=2,c-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}l>>>=2,c-=2;break;case 14:for(l>>>=7&c,c-=7&c;c<32;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&l,l=0,c=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(p=i.length){if(p>a&&(p=a),p>h&&(p=h),0===p)break t;Gt.arraySet(r,s,n,p,o),a-=p,n+=p,h-=p,o+=p,i.length-=p;break}i.mode=12;break;case 17:for(;c<14;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}if(i.nlen=257+(31&l),l>>>=5,c-=5,i.ndist=1+(31&l),l>>>=5,c-=5,i.ncode=4+(15&l),l>>>=4,c-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;c<3;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}i.lens[E[i.have++]]=7&l,l>>>=3,c-=3}for(;i.have<19;)i.lens[E[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,A={bits:i.lenbits},S=Qe(0,i.lens,0,19,i.lencode,0,i.work,A),i.lenbits=A.bits,S){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;g=(C=i.lencode[l&(1<<i.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=c);){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}if(b<16)l>>>=_,c-=_,i.lens[i.have++]=b;else{if(16===b){for(P=_+2;c<P;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}if(l>>>=_,c-=_,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}x=i.lens[i.have-1],p=3+(3&l),l>>>=2,c-=2}else if(17===b){for(P=_+3;c<P;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}c-=_,x=0,p=3+(7&(l>>>=_)),l>>>=3,c-=3}else{for(P=_+7;c<P;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}c-=_,x=0,p=11+(127&(l>>>=_)),l>>>=7,c-=7}if(i.have+p>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;p--;)i.lens[i.have++]=x}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,A={bits:i.lenbits},S=Qe(1,i.lens,0,i.nlen,i.lencode,0,i.work,A),i.lenbits=A.bits,S){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,A={bits:i.distbits},S=Qe(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,A),i.distbits=A.bits,S){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(a>=6&&h>=258){t.next_out=o,t.avail_out=h,t.next_in=n,t.avail_in=a,i.hold=l,i.bits=c,Ze(t,u),o=t.next_out,r=t.output,h=t.avail_out,n=t.next_in,s=t.input,a=t.avail_in,l=i.hold,c=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;g=(C=i.lencode[l&(1<<i.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=c);){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}if(g&&0==(240&g)){for(y=_,w=g,v=b;g=(C=i.lencode[v+((l&(1<<y+w)-1)>>y)])>>>16&255,b=65535&C,!(y+(_=C>>>24)<=c);){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}l>>>=y,c-=y,i.back+=y}if(l>>>=_,c-=_,i.back+=_,i.length=b,0===g){i.mode=26;break}if(32&g){i.back=-1,i.mode=12;break}if(64&g){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&g,i.mode=22;case 22:if(i.extra){for(P=i.extra;c<P;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}i.length+=l&(1<<i.extra)-1,l>>>=i.extra,c-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;g=(C=i.distcode[l&(1<<i.distbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=c);){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}if(0==(240&g)){for(y=_,w=g,v=b;g=(C=i.distcode[v+((l&(1<<y+w)-1)>>y)])>>>16&255,b=65535&C,!(y+(_=C>>>24)<=c);){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}l>>>=y,c-=y,i.back+=y}if(l>>>=_,c-=_,i.back+=_,64&g){t.msg="invalid distance code",i.mode=30;break}i.offset=b,i.extra=15&g,i.mode=24;case 24:if(i.extra){for(P=i.extra;c<P;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}i.offset+=l&(1<<i.extra)-1,l>>>=i.extra,c-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===h)break t;if(p=u-h,i.offset>p){if((p=i.offset-p)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}p>i.wnext?(p-=i.wnext,m=i.wsize-p):m=i.wnext-p,p>i.length&&(p=i.length),f=i.window}else f=r,m=o-i.offset,p=i.length;p>h&&(p=h),h-=p,i.length-=p;do{r[o++]=f[m++]}while(--p);0===i.length&&(i.mode=21);break;case 26:if(0===h)break t;r[o++]=i.length,h--,i.mode=21;break;case 27:if(i.wrap){for(;c<32;){if(0===a)break t;a--,l|=s[n++]<<c,c+=8}if(u-=h,t.total_out+=u,i.total+=u,u&&(t.adler=i.check=i.flags?Pe(i.check,r,u,o-u):Ae(i.check,r,u,o-u)),u=h,(i.flags?l:si(l))!==i.check){t.msg="incorrect data check",i.mode=30;break}l=0,c=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;c<32;){if(0===a)break t;a--,l+=s[n++]<<c,c+=8}if(l!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}l=0,c=0}i.mode=29;case 29:S=1;break t;case 30:S=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=o,t.avail_out=h,t.next_in=n,t.avail_in=a,i.hold=l,i.bits=c,(i.wsize||u!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&pi(t,t.output,t.next_out,u-t.avail_out)?(i.mode=31,-4):(d-=t.avail_in,u-=t.avail_out,t.total_in+=d,t.total_out+=u,i.total+=u,i.wrap&&u&&(t.adler=i.check=i.flags?Pe(i.check,r,u,t.next_out-u):Ae(i.check,r,u,t.next_out-u)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0===d&&0===u||4===e)&&0===S&&(S=-5),S)},Be=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},Me=function(t,e){var i,s=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?-2:11===i.mode&&Ae(1,e,s,0)!==i.check?-3:pi(t,e,s,s)?(i.mode=31,-4):(i.havedict=1,0):-2};var mi;for(var fi in mi={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8})Tt[fi]=mi[fi];Tt.NONE=0,Tt.DEFLATE=1,Tt.INFLATE=2,Tt.GZIP=3,Tt.GUNZIP=4,Tt.DEFLATERAW=5,Tt.INFLATERAW=6,Tt.UNZIP=7;function _i(t){if("number"!=typeof t||t<Tt.DEFLATE||t>Tt.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}_i.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,Ot(this.init_done,"close before init"),Ot(this.mode<=Tt.UNZIP),this.mode===Tt.DEFLATE||this.mode===Tt.GZIP||this.mode===Tt.DEFLATERAW?Rt(this.strm):this.mode!==Tt.INFLATE&&this.mode!==Tt.GUNZIP&&this.mode!==Tt.INFLATERAW&&this.mode!==Tt.UNZIP||Be(this.strm),this.mode=Tt.NONE,this.dictionary=null)},_i.prototype.write=function(t,e,i,s,r,n,o){return this._write(!0,t,e,i,s,r,n,o)},_i.prototype.writeSync=function(t,e,i,s,r,n,o){return this._write(!1,t,e,i,s,r,n,o)},_i.prototype._write=function(t,e,i,s,r,n,o,a){if(Ot.equal(arguments.length,8),Ot(this.init_done,"write before init"),Ot(this.mode!==Tt.NONE,"already finalized"),Ot.equal(!1,this.write_in_progress,"write already in progress"),Ot.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,Ot.equal(!1,void 0===e,"must provide flush value"),this.write_in_progress=!0,e!==Tt.Z_NO_FLUSH&&e!==Tt.Z_PARTIAL_FLUSH&&e!==Tt.Z_SYNC_FLUSH&&e!==Tt.Z_FULL_FLUSH&&e!==Tt.Z_FINISH&&e!==Tt.Z_BLOCK)throw new Error("Invalid flush value");if(null==i&&(i=Et.alloc(0),r=0,s=0),this.strm.avail_in=r,this.strm.input=i,this.strm.next_in=s,this.strm.avail_out=a,this.strm.output=n,this.strm.next_out=o,this.flush=e,!t)return this._process(),this._checkError()?this._afterSync():void 0;var h=this;return u.nextTick((function(){h._process(),h._after()})),this},_i.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},_i.prototype._process=function(){var t=null;switch(this.mode){case Tt.DEFLATE:case Tt.GZIP:case Tt.DEFLATERAW:this.err=Bt(this.strm,this.flush);break;case Tt.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31!==this.strm.input[t]){this.mode=Tt.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=Tt.GUNZIP):this.mode=Tt.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case Tt.INFLATE:case Tt.GUNZIP:case Tt.INFLATERAW:for(this.err=Ie(this.strm,this.flush),this.err===Tt.Z_NEED_DICT&&this.dictionary&&(this.err=Me(this.strm,this.dictionary),this.err===Tt.Z_OK?this.err=Ie(this.strm,this.flush):this.err===Tt.Z_DATA_ERROR&&(this.err=Tt.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===Tt.GUNZIP&&this.err===Tt.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=Ie(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},_i.prototype._checkError=function(){switch(this.err){case Tt.Z_OK:case Tt.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===Tt.Z_FINISH)return this._error("unexpected end of file"),!1;break;case Tt.Z_STREAM_END:break;case Tt.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},_i.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},_i.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},_i.prototype.init=function(t,e,i,s,r){Ot(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),Ot(t>=8&&t<=15,"invalid windowBits"),Ot(e>=-1&&e<=9,"invalid compression level"),Ot(i>=1&&i<=9,"invalid memlevel"),Ot(s===Tt.Z_FILTERED||s===Tt.Z_HUFFMAN_ONLY||s===Tt.Z_RLE||s===Tt.Z_FIXED||s===Tt.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(e,t,i,s,r),this._setDictionary()},_i.prototype.params=function(){throw new Error("deflateParams Not supported")},_i.prototype.reset=function(){this._reset(),this._setDictionary()},_i.prototype._init=function(t,e,i,s,r){switch(this.level=t,this.windowBits=e,this.memLevel=i,this.strategy=s,this.flush=Tt.Z_NO_FLUSH,this.err=Tt.Z_OK,this.mode!==Tt.GZIP&&this.mode!==Tt.GUNZIP||(this.windowBits+=16),this.mode===Tt.UNZIP&&(this.windowBits+=32),this.mode!==Tt.DEFLATERAW&&this.mode!==Tt.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new Lt,this.mode){case Tt.DEFLATE:case Tt.GZIP:case Tt.DEFLATERAW:this.err=Dt(this.strm,this.level,Tt.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case Tt.INFLATE:case Tt.GUNZIP:case Tt.INFLATERAW:case Tt.UNZIP:this.err=Re(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==Tt.Z_OK&&this._error("Init error"),this.dictionary=r,this.write_in_progress=!1,this.init_done=!0},_i.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=Tt.Z_OK,this.mode){case Tt.DEFLATE:case Tt.DEFLATERAW:this.err=It(this.strm,this.dictionary)}this.err!==Tt.Z_OK&&this._error("Failed to set dictionary")}},_i.prototype._reset=function(){switch(this.err=Tt.Z_OK,this.mode){case Tt.DEFLATE:case Tt.DEFLATERAW:case Tt.GZIP:this.err=Mt(this.strm);break;case Tt.INFLATE:case Tt.INFLATERAW:case Tt.GUNZIP:this.err=De(this.strm)}this.err!==Tt.Z_OK&&this._error("Failed to reset stream")},Tt.Zlib=_i;var gi=a("1Pw0o"),bi=(Ot=a("iyobg")).ok,yi=T,wi="Cannot create final Buffer. It would be larger than 0x"+yi.toString(16)+" bytes";Tt.Z_MIN_WINDOWBITS=8,Tt.Z_MAX_WINDOWBITS=15,Tt.Z_DEFAULT_WINDOWBITS=15,Tt.Z_MIN_CHUNK=64,Tt.Z_MAX_CHUNK=1/0,Tt.Z_DEFAULT_CHUNK=16384,Tt.Z_MIN_MEMLEVEL=1,Tt.Z_MAX_MEMLEVEL=9,Tt.Z_DEFAULT_MEMLEVEL=8,Tt.Z_MIN_LEVEL=-1,Tt.Z_MAX_LEVEL=9,Tt.Z_DEFAULT_LEVEL=Tt.Z_DEFAULT_COMPRESSION;for(var vi=Object.keys(Tt),xi=0;xi<vi.length;xi++){var Si=vi[xi];Si.match(/^Z/)&&Object.defineProperty(d,Si,{enumerable:!0,value:Tt[Si],writable:!1})}for(var Ai={Z_OK:Tt.Z_OK,Z_STREAM_END:Tt.Z_STREAM_END,Z_NEED_DICT:Tt.Z_NEED_DICT,Z_ERRNO:Tt.Z_ERRNO,Z_STREAM_ERROR:Tt.Z_STREAM_ERROR,Z_DATA_ERROR:Tt.Z_DATA_ERROR,Z_MEM_ERROR:Tt.Z_MEM_ERROR,Z_BUF_ERROR:Tt.Z_BUF_ERROR,Z_VERSION_ERROR:Tt.Z_VERSION_ERROR},Pi=Object.keys(Ai),Ci=0;Ci<Pi.length;Ci++){var Ti=Pi[Ci];Ai[Ai[Ti]]=Ti}function Ei(t,e,i){var s=[],r=0;function n(){for(var e;null!==(e=t.read());)s.push(e),r+=e.length;t.once("readable",n)}function o(){var e,n=null;r>=yi?n=new RangeError(wi):e=Pt.concat(s,r),s=[],t.close(),i(n,e)}t.on("error",(function(e){t.removeListener("end",o),t.removeListener("readable",n),i(e)})),t.on("end",o),t.end(e),n()}function Ri(t,e){if("string"==typeof e&&(e=Pt.from(e)),!Pt.isBuffer(e))throw new TypeError("Not a string or buffer");var i=t._finishFlushFlag;return t._processChunk(e,i)}function Bi(t){if(!(this instanceof Bi))return new Bi(t);ki.call(this,t,Tt.DEFLATE)}function Di(t){if(!(this instanceof Di))return new Di(t);ki.call(this,t,Tt.INFLATE)}function Ii(t){if(!(this instanceof Ii))return new Ii(t);ki.call(this,t,Tt.GZIP)}function Mi(t){if(!(this instanceof Mi))return new Mi(t);ki.call(this,t,Tt.GUNZIP)}function Oi(t){if(!(this instanceof Oi))return new Oi(t);ki.call(this,t,Tt.DEFLATERAW)}function Li(t){if(!(this instanceof Li))return new Li(t);ki.call(this,t,Tt.INFLATERAW)}function Gi(t){if(!(this instanceof Gi))return new Gi(t);ki.call(this,t,Tt.UNZIP)}function Fi(t){return t===Tt.Z_NO_FLUSH||t===Tt.Z_PARTIAL_FLUSH||t===Tt.Z_SYNC_FLUSH||t===Tt.Z_FULL_FLUSH||t===Tt.Z_FINISH||t===Tt.Z_BLOCK}function ki(t,e){var i=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||d.Z_DEFAULT_CHUNK,Ct.call(this,t),t.flush&&!Fi(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!Fi(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||Tt.Z_NO_FLUSH,this._finishFlushFlag=void 0!==t.finishFlush?t.finishFlush:Tt.Z_FINISH,t.chunkSize&&(t.chunkSize<d.Z_MIN_CHUNK||t.chunkSize>d.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<d.Z_MIN_WINDOWBITS||t.windowBits>d.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<d.Z_MIN_LEVEL||t.level>d.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<d.Z_MIN_MEMLEVEL||t.memLevel>d.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=d.Z_FILTERED&&t.strategy!=d.Z_HUFFMAN_ONLY&&t.strategy!=d.Z_RLE&&t.strategy!=d.Z_FIXED&&t.strategy!=d.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!Pt.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new Tt.Zlib(e);var s=this;this._hadError=!1,this._handle.onerror=function(t,e){Ni(s),s._hadError=!0;var i=new Error(t);i.errno=e,i.code=d.codes[e],s.emit("error",i)};var r=d.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(r=t.level);var n=d.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(n=t.strategy),this._handle.init(t.windowBits||d.Z_DEFAULT_WINDOWBITS,r,t.memLevel||d.Z_DEFAULT_MEMLEVEL,n,t.dictionary),this._buffer=Pt.allocUnsafe(this._chunkSize),this._offset=0,this._level=r,this._strategy=n,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!i._handle},configurable:!0,enumerable:!0})}function Ni(t,e){e&&u.nextTick(e),t._handle&&(t._handle.close(),t._handle=null)}function Vi(t){t.emit("close")}Object.defineProperty(d,"codes",{enumerable:!0,value:Object.freeze(Ai),writable:!1}),d.Deflate=Bi,d.Inflate=Di,d.Gzip=Ii,d.Gunzip=Mi,d.DeflateRaw=Oi,d.InflateRaw=Li,d.Unzip=Gi,d.createDeflate=function(t){return new Bi(t)},d.createInflate=function(t){return new Di(t)},d.createDeflateRaw=function(t){return new Oi(t)},d.createInflateRaw=function(t){return new Li(t)},d.createGzip=function(t){return new Ii(t)},d.createGunzip=function(t){return new Mi(t)},d.createUnzip=function(t){return new Gi(t)},d.deflate=function(t,e,i){return"function"==typeof e&&(i=e,e={}),Ei(new Bi(e),t,i)},d.deflateSync=function(t,e){return Ri(new Bi(e),t)},d.gzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),Ei(new Ii(e),t,i)},d.gzipSync=function(t,e){return Ri(new Ii(e),t)},d.deflateRaw=function(t,e,i){return"function"==typeof e&&(i=e,e={}),Ei(new Oi(e),t,i)},d.deflateRawSync=function(t,e){return Ri(new Oi(e),t)},d.unzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),Ei(new Gi(e),t,i)},d.unzipSync=function(t,e){return Ri(new Gi(e),t)},d.inflate=function(t,e,i){return"function"==typeof e&&(i=e,e={}),Ei(new Di(e),t,i)},d.inflateSync=function(t,e){return Ri(new Di(e),t)},d.gunzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),Ei(new Mi(e),t,i)},d.gunzipSync=function(t,e){return Ri(new Mi(e),t)},d.inflateRaw=function(t,e,i){return"function"==typeof e&&(i=e,e={}),Ei(new Li(e),t,i)},d.inflateRawSync=function(t,e){return Ri(new Li(e),t)},gi.inherits(ki,Ct),ki.prototype.params=function(t,e,i){if(t<d.Z_MIN_LEVEL||t>d.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(e!=d.Z_FILTERED&&e!=d.Z_HUFFMAN_ONLY&&e!=d.Z_RLE&&e!=d.Z_FIXED&&e!=d.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+e);if(this._level!==t||this._strategy!==e){var s=this;this.flush(Tt.Z_SYNC_FLUSH,(function(){bi(s._handle,"zlib binding closed"),s._handle.params(t,e),s._hadError||(s._level=t,s._strategy=e,i&&i())}))}else u.nextTick(i)},ki.prototype.reset=function(){return bi(this._handle,"zlib binding closed"),this._handle.reset()},ki.prototype._flush=function(t){this._transform(Pt.alloc(0),"",t)},ki.prototype.flush=function(t,e){var i=this,s=this._writableState;("function"==typeof t||void 0===t&&!e)&&(e=t,t=Tt.Z_FULL_FLUSH),s.ended?e&&u.nextTick(e):s.ending?e&&this.once("end",e):s.needDrain?e&&this.once("drain",(function(){return i.flush(t,e)})):(this._flushFlag=t,this.write(Pt.alloc(0),"",e))},ki.prototype.close=function(t){Ni(this,t),u.nextTick(Vi,this)},ki.prototype._transform=function(t,e,i){var s,r=this._writableState,n=(r.ending||r.ended)&&(!t||r.length===t.length);return null===t||Pt.isBuffer(t)?this._handle?(n?s=this._finishFlushFlag:(s=this._flushFlag,t.length>=r.length&&(this._flushFlag=this._opts.flush||Tt.Z_NO_FLUSH)),void this._processChunk(t,s,i)):i(new Error("zlib binding closed")):i(new Error("invalid input"))},ki.prototype._processChunk=function(t,e,i){var s=t&&t.length,r=this._chunkSize-this._offset,n=0,o=this,a="function"==typeof i;if(!a){var h,l=[],c=0;this.on("error",(function(t){h=t})),bi(this._handle,"zlib binding closed");do{var d=this._handle.writeSync(e,t,n,s,this._buffer,this._offset,r)}while(!this._hadError&&m(d[0],d[1]));if(this._hadError)throw h;if(c>=yi)throw Ni(this),new RangeError(wi);var u=Pt.concat(l,c);return Ni(this),u}bi(this._handle,"zlib binding closed");var p=this._handle.write(e,t,n,s,this._buffer,this._offset,r);function m(h,d){if(this&&(this.buffer=null,this.callback=null),!o._hadError){var u=r-d;if(bi(u>=0,"have should not go down"),u>0){var p=o._buffer.slice(o._offset,o._offset+u);o._offset+=u,a?o.push(p):(l.push(p),c+=p.length)}if((0===d||o._offset>=o._chunkSize)&&(r=o._chunkSize,o._offset=0,o._buffer=Pt.allocUnsafe(o._chunkSize)),0===d){if(n+=s-h,s=h,!a)return!0;var f=o._handle.write(e,t,n,s,o._buffer,o._offset,o._chunkSize);return f.callback=m,void(f.buffer=t)}if(!a)return!1;i()}}p.buffer=t,p.callback=m},gi.inherits(Bi,ki),gi.inherits(Di,ki),gi.inherits(Ii,ki),gi.inherits(Mi,ki),gi.inherits(Oi,ki),gi.inherits(Li,ki),gi.inherits(Gi,ki);var Ui=C;amf0={toString:function(t){return t.toString("utf8",0,Ui.byteLength(t))},isStrict:function(t){let e=t.length,i=0;for(let e in t)i++;return i==e},hasItem:function(t,e){let i=t.length;for(;i--;)if(this.isSame(t[i],e))return i;return-1},isSame:function(t,e){if("object"==typeof t&&"object"==typeof e){if(Object(t).constructor===Object(e).constructor){for(let i in t)if("object"==typeof t[i]){if(!this.isSame(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}return!1}return t===e}},amf0.Writer=function(){this.writeObjectCache=[]},amf0.Writer.prototype.setObjectReference=function(t){let e;if(null!==this.writeObjectCache&&-1!==(e=amf0.hasItem(this.writeObjectCache,t))){let t=Ui.alloc(3);return t.writeUInt8(7,0),t.writeUInt16BE(e,1),!1}return null===this.writeObjectCache&&(this.writeObjectCache=[]),this.writeObjectCache.push(t),!0},amf0.Writer.prototype.writeValue=function(t){let e=t.constructor.name.toLowerCase();if("stdclass"===e)return this.writeObject(t);if("object"==typeof t&&"Object"!=e)return this.writeTypedObject(t);if(t instanceof Date)return this.writeDate(t);if("string"==typeof t&&t.startsWith("<")&&t.endsWith(">"))return this.writeXMLDoc(t);if(Array.isArray(t))return amf0.isStrict(t)?this.writeStrictArray(t):this.writeECMAArray(t);if(null==t)return this.writeNull();if(null==t)return this.writeUndefined();switch(typeof t){case"number":return this.writeNumber(t);case"boolean":return this.writeBoolean(t);case"string":return t.length<65535?this.writeString(t):this.writeLongString(t);case"object":return this.writeObject(t);default:throw new Error("amf0.Writer::writeValue - Error: Unknown type")}},amf0.Writer.prototype.writeNumber=function(t){let e=Ui.alloc(9);return e.writeUInt8(0,0),e.writeDoubleBE(t,1),e},amf0.Writer.prototype.writeBoolean=function(t){let e=Ui.alloc(2);return e.writeUInt8(1,0),e.writeUInt8(t?1:0,1),e},amf0.Writer.prototype.writeString=function(t){if(t.length<65535){let e=Ui.alloc(1);e.writeUInt8(2);let i=Ui.alloc(2);return i.writeUInt16BE(Ui.byteLength(t),0),Ui.concat([e,i,Ui.from(t,"utf8")])}return this.writeLongString(t)},amf0.Writer.prototype.writeStringWithoutType=function(t){if(t.length<65535){let e=Ui.alloc(2);return e.writeUInt16BE(Ui.byteLength(t),0),Ui.concat([e,Ui.from(t,"utf8")])}return this.writeLongStringWithoutType(t)},amf0.Writer.prototype.writeObject=function(t){if(this.setObjectReference(t)){let e=Ui.alloc(1);e.writeUInt8(3,0);for(let i in t)"function"!=typeof t[i]&&(e=Ui.concat([e,this.writeStringWithoutType(i),this.writeValue(t[i])]));let i=Ui.alloc(3);return i.writeUInt16BE(0,0),i.writeUInt8(9,2),Ui.concat([e,i])}},amf0.Writer.prototype.writeNull=function(){let t=Ui.alloc(1);return t.writeUInt8(5,0),t},amf0.Writer.prototype.writeUndefined=function(){let t=Ui.alloc(1);return t.writeUInt8(6,0),t},amf0.Writer.prototype.writeReference=function(t){let e=Ui.alloc(3);return e.writeUInt8(7,0),e.writeUInt16BE(t,1),e},amf0.Writer.prototype.writeECMAArray=function(t){if(this.setObjectReference(t)){let e=t.length,i=Ui.alloc(5);i.writeUInt8(8,0),i.writeUInt32BE(e,1);for(let e in t)i=Ui.concat([i,this.writeStringWithoutType(e),this.writeValue(t[e])]);let s=Ui.alloc(3);return s.writeUInt8(0,0),s.writeUInt8(0,1),s.writeUInt8(9,2),Ui.concat([i,s])}},amf0.Writer.prototype.writeStrictArray=function(t){if(this.setObjectReference(t)){let e=Ui.alloc(5);return e.writeUInt8(10,0),e.writeUInt32BE(t.length,1),t.forEach((t=>{e=Ui.concat([e,this.writeValue(t)])})),e}},amf0.Writer.prototype.writeDate=function(t){let e=Ui.alloc(11);return e.writeUInt8(11,0),e.writeInt16BE(0,1),e.writeDoubleBE(t.getTime(),3),e},amf0.Writer.prototype.writeLongString=function(t){if(t.length>65535){let e=Ui.alloc(1);e.writeUInt8(12);let i=Ui.alloc(4);return i.writeUInt32BE(Ui.byteLength(t),0),Ui.concat([e,i,Ui.from(t,"utf8")])}return this.writeString(t)},amf0.Writer.prototype.writeLongStringWithoutType=function(t){if(t.length>65535){let e=Ui.alloc(4);return e.writeUInt32BE(Ui.byteLength(t),0),Ui.concat([e,Ui.from(t,"utf8")])}return this.writeStringWithoutType(t)},amf0.Writer.prototype.writeXMLDoc=function(t){if(this.setObjectReference(t)){let e=Ui.alloc(3);return e.writeUInt8(15,0),e.writeUInt16BE(t.length,1),Ui.concat([e,Ui.from(t,"utf8")])}},amf0.Writer.prototype.writeTypedObject=function(t){if(this.setObjectReference(t)){let e=Ui.alloc(1);e.writeUInt8(16,0);for(let i in t)i.startsWith("_")||(e=Ui.concat([e,this.writeStringWithoutType(i.constructor.name),this.writeValue(t[i])]));let i=Ui.alloc(3);return i.writeUInt16BE(0,0),i.writeUInt8(9,2),Ui.concat([e,i])}},amf0.Reader=function(){this.readObjectCache=[]},amf0.Reader.prototype.readValue=function(t){let e=t.readUInt8(0);switch(e){case 0:return this.readNumber(t);case 1:return this.readBoolean(t);case 2:return this.readString(t);case 3:return this.readObject(t);case 5:return this.readNull();case 6:return this.readUndefined();case 7:return this.readReference(t);case 8:return this.readECMAArray(t);case 10:return this.readStrictArray(t);case 11:return this.readDate(t);case 12:return this.readLongString(t);case 15:return this.readXMLDoc(t);case 16:return this.readTypedObject(t);default:throw new Error(`amf0.Reader::readData - Error: Undefined AMF0 type encountered: ${e}`)}},amf0.Reader.prototype.readNumber=function(t){return{len:9,value:t.readDoubleBE(1)}},amf0.Reader.prototype.readBoolean=function(t){return{len:2,value:0!=t.readUInt8(1)}},amf0.Reader.prototype.readString=function(t){let e=t.readUInt16BE(1);return{len:3+e,value:t.toString("utf8",3,3+e)}},amf0.Reader.prototype.readStringWithoutType=function(t){let e=t.readUInt16BE(0);return{len:2+e,value:t.toString("utf8",2,2+e)}},amf0.Reader.prototype.readObject=function(t){let e={0:this.readNumber,1:this.readBoolean,2:this.readString,3:this.readObject,5:this.readNull,6:this.readUndefined,7:this.readReference,8:this.readECMAArray,10:this.readStrictArray,11:this.readDate,12:this.readLongString,15:this.readXMLDoc,16:this.readTypedObject},i={},s=t.slice(1),r=1;for(;9!=s.readUInt8(0);){let t=this.readStringWithoutType(s);if(r+=t.len,9==s.slice(t.len).readUInt8(0)){r++;break}if(""==t.value)break;let n=s.slice(t.len);if(!e[n.readUInt8(0)])throw new Error("amf0.Reader::readObject - Error: Unknown field");let o=e[n.readUInt8(0)](n);i[t.value]=o.value,r+=o.len,s=s.slice(t.len+o.len)}return this.readObjectCache.push({len:r,value:i}),{len:r,value:i}},amf0.Reader.prototype.readNull=function(){return{len:1,value:null}},amf0.Reader.prototype.readUndefined=function(){return{len:1,value:void 0}},amf0.Reader.prototype.readReference=function(t){return{len:3,value:"ref"+t.readUInt16BE(1)}},amf0.Reader.prototype.readECMAArray=function(t){let e=this.readObject(t.slice(4));return this.readObjectCache.push({len:5+e.len,value:e.value}),{len:5+e.len,value:e.value}},amf0.Reader.prototype.readStrictArray=function(t){let e,i={0:this.readNumber,1:this.readBoolean,2:this.readString,3:this.readObject,5:this.readNull,6:this.readUndefined,7:this.readReference,8:this.readECMAArray,10:this.readStrictArray,11:this.readDate,12:this.readLongString,15:this.readXMLDoc,16:this.readTypedObject},s=[],r=5;for(let n=t.readUInt32BE(1);n;n--){let n=t.slice(r);if(!i[n.readUInt8(0)])throw new Error("amf0.Reader::readStrictArray - Error: Unknown field");e=i[n.readUInt8(0)](n),s.push(e.value),r+=e.len}return this.readObjectCache.push({len:len,value:Object.defineProperty(s,"sarray",{value:!0})}),{len:len,value:Object.defineProperty(s,"sarray",{value:!0})}},amf0.Reader.prototype.readDate=function(t){return{s16:t.readUInt16BE(1),len:11,value:t.readDoubleBE(3)}},amf0.Reader.prototype.readLongString=function(t){let e=t.readUInt32BE(1);return{len:5+e,value:t.toString("utf8",5,5+e)}},amf0.Reader.prototype.readLongStringWithoutType=function(t){let e=t.readUInt32BE(0);return{len:4+e,value:t.toString("utf8",4,4+e)}},amf0.Reader.prototype.readXMLDoc=function(t){let e=t.readUInt16BE(1);return{len:3+e,value:t.toString("utf8",3,3+e)}},amf0.Reader.prototype.readTypedObject=function(t){let e=this.readString(t),i=this.readObject(t.slice(e.value.len-1));return i.value.__className__=e.value,this.readObjectCache.push({len:e.len+i.len-1,value:i.value}),{len:e.len+i.len-1,value:i.value}};var Wi=amf0;const ji=0,Xi=1,Yi=2,Hi=3,zi=4,Ji=5,qi=6,Ki=7,Zi=8,Qi=9,$i=10,ts=12;amf3={classes:{},const:{CLASS_ALIAS:"_explicitType",EXTERNALIZED_FIELD:"_externalizedData"},registerClass:function(t,e){if(null==t||0==e)throw new Error(`amf3::registerClassAlias - Error: Invalid arguments: ${t} | ${e}`);this.classes[t]=e}},amf3.Writer=function(){this.data=[],this.objects=[],this.traits={},this.strings={},this.stringCount=0,this.traitCount=0,this.objectCount=0},amf3.Writer.prototype.reset=function(){this.objects=[],this.objectCount=0,this.traits={},this.traitCount=0,this.strings={},this.stringCount=0},amf3.Writer.prototype.objectByReference=function(t){let e=0,i=!1;for(;e<this.objects.length;e++)if(this.objects[e]===t){i=!0;break}return i?this.writeUInt29(e<<1):(this.objects.push(t),this.objectCount++),i?e:null},amf3.Writer.prototype.traitsByReference=function(t,e){let i=e+"|";for(let e=0;e<t.length;e++)i+=t[e]+"|";let s=this.traits[i];return s?this.writeUInt29(s<<2|1):this.traits[i]=this.traitCount++,s},amf3.Writer.prototype.stringByReference=function(t){let e=this.strings[t];return e?this.writeUInt29(e<<1):this.strings[t]=this.stringCount++,e},amf3.Writer.prototype.write=function(t){this.data.push(t)},amf3.Writer.prototype.writeUInt32=function(t){t<0&&(t=-(4294967295^t)-1),t&=4294967295,this.write(t>>>24&255),this.write(t>>>16&255),this.write(t>>>8&255),this.write(255&t)},amf3.Writer.prototype.writeInt32=function(t){this.write(t>>>24&255),this.write(t>>>16&255),this.write(t>>>8&255),this.write(t>>>0&255)},amf3.Writer.prototype.writeUInt29=function(t){if(t<128)this.write(t);else if(t<16384)this.write(t>>7&127|128),this.write(127&t);else if(t<2097152)this.write(t>>14&127|128),this.write(t>>7&127|128),this.write(127&t);else{if(!(t<1073741824))throw new RangeError(`amf3.Writer::writeUInt29 - Error: ${t} is out of range`);this.write(t>>22&127|128),this.write(t>>15&127|128),this.write(t>>8&127|128),this.write(255&t)}},amf3.Writer.prototype.writeUTF=function(t,e){let i=[],s=t.length,r=0;for(let n=0;n<s;n++){let s=t.charCodeAt(n);if(s<128)r++,i.push(s);else if(s>127&&s<2048)r+=2,i.push(192|s>>6),e?i.push(128|s>>0&63):i.push(128|63&s);else if(55296!=(63488&s))r+=3,i.push(224|s>>12),i.push(128|s>>6&63),e?i.push(128|s>>0&63):i.push(128|63&s);else{if(r+=4,55296!=(64512&s))throw new RangeError(`amf3.Writer::writeUTF - Error: Unmatched trail surrogate at: ${n}`);let o=t.charCodeAt(n++);if(56320!=(64512&o))throw new RangeError("amf3.Writer::writeUTF - Error: Unmatched lead surrogate at: "+(n-1));s=((1023&s)<<10)+(1023&o)+65536,i.push(240|s>>18),i.push(128|s>>12&63),i.push(s>>6&63),e?i.push(128|s>>0&63):i.push(128|63&s)}}e?this.writeUInt29(r<<1|1):(i.unshift(255&r),i.unshift(r>>>8&255));for(let t=0;t<i.length;t++)this.write(i[t]);return e?r:r+2},amf3.Writer.prototype.calculateDouble=function(t){let e,i=[0,0];if(t!=t)return i[0]=-524288,i;let s,r=t<0||0===t&&1/t<0?-2147483648:0;if((t=Math.abs(t))===Number.POSITIVE_INFINITY)return i[0]=2146435072|r,i;for(e=0;t>=2&&e<=1023;)e++,t/=2;for(;t<1&&e>=-1022;)e--,t*=2;return e+=1023,2047==e?(i[0]=2146435072|r,i):(0==e?(s=t*Math.pow(2,23)/2,t=Math.round(t*Math.pow(2,52)/2)):(s=t*Math.pow(2,20)-Math.pow(2,20),t=Math.round(t*Math.pow(2,52)-Math.pow(2,52))),i[0]=r|e<<20&2147418112|1048575&s,i[1]=t,i)},amf3.Writer.prototype.writeUndefined=function(){this.write(0)},amf3.Writer.prototype.writeNull=function(){this.write(1)},amf3.Writer.prototype.writeBoolean=function(t){if("boolean"!=typeof t)throw new TypeError(`amf3.Writer::writeBoolean - Error: ${t} is not a boolean`);t?this.write(3):this.write(2)},amf3.Writer.prototype.writeInt=function(t){t>=-268435456&&t<=268435455&&t%1==0?(t&=536870911,this.write(4),this.writeUInt29(t)):(this.write(5),this.writeDouble(t,!0))},amf3.Writer.prototype.writeDouble=function(t,e){void 0===e&&(e=!1),e&&console.log(`amf3.Writer::writeDouble - Info: ${t} originated from 'writeInt'`),t=this.calculateDouble(t),this.writeUInt32(t[0]),this.writeUInt32(t[1])},amf3.Writer.prototype.writeString=function(t){0==t.length?this.writeUInt29(1):this.stringByReference(t)||this.writeUTF(t,!0)},amf3.Writer.prototype.writeDate=function(t){this.write(8),t instanceof Date||(t=new Date(t)),this.objectByReference(t)||(this.writeUInt29(1),this.writeDouble(t.getTime()))},amf3.Writer.prototype.writeArray=function(t){if(this.write(9),!this.objectByReference(t)&&(this.writeUInt29(t.length<<1|1),this.writeUInt29(1),t.length>0))for(let e=0;e<t.length;e++)this.writeObject(t[e])},amf3.Writer.prototype.writeObject=function(t){return null==t?this.writeNull():null==t?this.writeUndefined():void(t.constructor===String?(this.write(6),this.writeString(t)):t.constructor===Number?t===+t&&t===(0|t)?this.writeInt(t):(this.write(5),this.writeDouble(t)):t.constructor===Boolean?this.writeBoolean(t):t.constructor===Date?this.writeDate(t):Object.keys(t).indexOf("weakKeys")>-1?this.writeDictionary(t):t.constructor===Array?0==t.toString().indexOf("[Vector")?this.writeVector(t):this.writeArray(t):amf3.const.CLASS_ALIAS in t?this.writeCustomObject(t):this.writeMap(t))},amf3.Writer.prototype.writeCustomObject=function(t){if(this.write(10),!this.objectByReference(t)){let e=this.writeTraits(t);for(let i=0;i<e.length;i++){let s=e[i];this.writeObject(t[s])}}},amf3.Writer.prototype.writeTraits=function(t){let e=[],i=0;for(let s in t)s!=amf3.const.CLASS_ALIAS&&(e.push(s),i++);if(!this.traitsByReference(e,t[amf3.const.CLASS_ALIAS])&&(this.writeUInt29(3|i<<4),this.writeString(t[amf3.const.CLASS_ALIAS]),i>0))for(let t in e)this.writeString(e[t]);return e},amf3.Writer.prototype.writeByteArray=function(t){if(this.write(12),!this.objectByReference(t)){this.writeUInt29(t.length<<1|1);for(let e=0;e<t.length;e++)this.write(t[e])}},amf3.Writer.prototype.writeVector=function(t){this.write(t.type);let e,i=t.length;if(this.objectByReference(t)||(this.writeUInt29(i<<1|1),this.writeBoolean(t.fixed)),16==t.type){let s="";for(i>0&&(s=t[0].constructor.name),this.writeString(s),e=0;e<i;e++)this.writeObject(t[e])}else if(13==t.type)for(e=0;e<i;e++)this.writeInt32(t[e]);else if(14==t.type)for(e=0;e<i;e++)this.writeUInt32(t[e]);else if(15==t.type)for(e=0;e<i;e++)this.writeDouble(t[e])},amf3.Writer.prototype.writeDictionary=function(t){if(this.write(17),!this.objectByReference(t)){this.writeUInt29(t.length<<1|1),this.writeBoolean(t.weakKeys);for(let e=0;e<t.length;e++)this.writeObject(t[e].value.Key),this.writeObject(t[e].value.Value)}},amf3.Writer.prototype.writeMap=function(t){if(this.write(10),!this.objectByReference(t)){this.writeUInt29(11),this.traitCount++,this.writeString("");for(let e in t)e.startsWith("m_")||(e?this.writeString(e):this.writeString(""),this.writeObject(t[e]));this.writeString("")}},amf3.Reader=function(t,e){this.objects=[],this.traits=[],this.strings=[],this.data=t,this.parent=e,this.offset=e.offset,Object.defineProperty(this,"pos",{get(){return this.parent.offset},set(t){this.parent.offset=t}})},amf3.Reader.prototype.reset=function(){this.objects=[],this.traits=[],this.strings=[]},amf3.Reader.prototype.rememberObject=function(t){this.objects.push(t)},amf3.Reader.prototype.rememberTraits=function(t){this.traits.push(t)},amf3.Reader.prototype.rememberString=function(t){this.strings.push(t)},amf3.Reader.prototype.getObject=function(t){return this.objects[t]},amf3.Reader.prototype.getTraits=function(t){return this.traits[t]},amf3.Reader.prototype.getString=function(t){return this.strings[t]},amf3.Reader.prototype.read=function(){return this.data[this.pos++]},amf3.Reader.prototype.readUnsignedShort=function(){return(this.read()<<8)+(this.read()<<0)},amf3.Reader.prototype.readUInt32=function(){return 16777216*this.read()+(this.read()<<16|this.read()<<8|this.read())},amf3.Reader.prototype.readInt32=function(){return(this.read()<<24)+(this.read()<<16)+(this.read()<<8)+(this.read()<<0)},amf3.Reader.prototype.readUInt29=function(){let t=255&this.read();if(t<128)return t;let e=(127&t)<<7;return t=255&this.read(),t<128?e|t:(e=(e|127&t)<<7,t=255&this.read(),t<128||(e=(e|127&t)<<8,t=255&this.read()),e|t)},amf3.Reader.prototype.readUTF=function(t){let e=t||this.readUnsignedShort(),i=this.pos+e,s=[],r=0,n=0;for(;this.pos<i;){r=255&this.read(),n=0,r<=191?(r&=127,n=1):r<=223?(r&=31,n=2):r<=239?(r&=15,n=3):(r&=7,n=4);for(let t=1;t<n;t++)r=r<<6|63&this.read();4===n?(r-=65536,s.push(String.fromCharCode(55296|r>>10&1023)),s.push(String.fromCharCode(56320|1023&r))):s.push(String.fromCharCode(r))}return s.join("")},amf3.Reader.prototype.readUndefined=function(){},amf3.Reader.prototype.readNull=function(){return null},amf3.Reader.prototype.readBoolean=function(t){return 3==this.read()},amf3.Reader.prototype.readInt=function(){return this.readUInt29()<<3>>3},amf3.Reader.prototype.readDouble=function(){let t=255&this.read(),e=255&this.read();if(255===t){if(248===e)return Number.NaN;if(240===e)return Number.NEGATIVE_INFINITY}else if(127===t&&240===e)return Number.POSITIVE_INFINITY;let i=255&this.read(),s=255&this.read(),r=255&this.read(),n=255&this.read(),o=255&this.read(),a=255&this.read();if(!(t||e||i||s))return 0;let h=(t<<4&2047|e>>4)-1023,l=((15&e)<<16|i<<8|s).toString(2);for(let t=l.length;t<20;t++)l="0"+l;let c=((127&r)<<24|n<<16|o<<8|a).toString(2);for(let t=c.length;t<31;t++)c="0"+c;let d=parseInt(l+(r>>7?"1":"0")+c,2);return 0==d&&-1023==h?0:(1-(t>>7<<1))*(1+Math.pow(2,-52)*d)*Math.pow(2,h)},amf3.Reader.prototype.readString=function(){let t=this.readUInt29();if(0==(1&t))return this.getString(t>>1);{let e=t>>1;if(0==e)return"";let i=this.readUTF(e);return this.rememberString(i),i}},amf3.Reader.prototype.readDate=function(){let t=this.readUInt29();if(0==(1&t))return this.getObject(t>>1);let e=this.readDouble(),i=new Date(e);return this.rememberObject(i),i},amf3.Reader.prototype.readArray=function(){let t=this.readUInt29();if(0==(1&t))return this.getObject(t>>1);let e=t>>1,i=null,s=0;for(;;){let t=this.readString();if(!t)break;i||(i={},this.rememberObject(i)),i[t]=this.readObject()}if(i){for(s=0;s<e;s++)i[s]=this.readObject();return i}{let t=new Array(e);for(this.rememberObject(t),s=0;s<e;s++)t[s]=this.readObject();return t}},amf3.Reader.prototype.readObject=function(){let t,e=this.read();switch(e){case ji:t=this.readUndefined();break;case Xi:t=this.readNull();break;case Yi:t=!1;break;case Hi:t=!0;break;case zi:t=this.readInt();break;case Ji:t=this.readDouble();break;case qi:t=this.readString();break;case Ki:t=this.readXML();break;case Zi:t=this.readDate();break;case Qi:t=this.readArray();break;case $i:try{t=this.readScriptObject()}catch(t){throw new Error(`amf3.Reader::readObject - Error: Failed to deserialize: ${t}`)}break;case ts:t=this.readByteArray();break;case 13:case 14:case 15:case 16:t=this.readVector();break;case 17:t=this.readDictionary();break;default:throw new Error(`amf3.Reader::readObject - Error: Unsupported AMF type: ${e}`)}return t},amf3.Reader.prototype.readScriptObject=function(){let t=this.readUInt29();if(0==(1&t))return this.getObject(t>>1);{let e,i=this.readTraits(t);if(amf3.const.CLASS_ALIAS in i?amf3.classes[i[amf3.const.CLASS_ALIAS]]?e=new amf3.classes[i[amf3.const.CLASS_ALIAS]]:(e={},e[amf3.const.CLASS_ALIAS]=i[amf3.const.CLASS_ALIAS]):e={},this.rememberObject(e),i.externalizable){if("flex.messaging.io.ArrayCollection"==e[amf3.const.CLASS_ALIAS]||"flex.messaging.io.ObjectProxy"==e[amf3.const.CLASS_ALIAS])return this.readObject();e[amf3.const.EXTERNALIZED_FIELD]=this.readObject()}else{for(let t in i.props)e[i.props[t]]=this.readObject();if(i.dynamic)for(;;){let t=this.readString();if(null==t||0==t.length)break;e[t]=this.readObject()}}return e}},amf3.Reader.prototype.readTraits=function(t){if(1==(3&t))return this.getTraits(t>>2);{let e={externalizable:4==(4&t),dynamic:8==(8&t),count:t>>4},i=this.readString();null!=i&&""!=i&&(e[amf3.const.CLASS_ALIAS]=i),e.props=[];for(let t=0;t<e.count;t++)e.props.push(this.readString());return this.rememberTraits(e),e}},amf3.Reader.prototype.readByteArray=function(){let t=this.readUInt29();if(0==(1&t))return this.getObject(t>>1);{let e=t>>1,i=[];for(let t=0;t<e;t++)i[t]=this.read();return this.rememberObject(i),i}},amf3.Reader.prototype.readVector=function(t){let e=this.readUInt29();if(0==(1&e))return this.getObject(e>>1);let i,s=e>>1,r=this.toVector(t,[],this.readBoolean());if(16===t)for(this.readString(),i=0;i<s;i++)r.push(this.readObject());else if(13===t)for(i=0;i<s;i++)r.push(this.readInt32());else if(14===t)for(i=0;i<s;i++)r.push(this.readUInt32());else if(15===t)for(i=0;i<s;i++)r.push(this.readDouble());return this.rememberObject(r),r},amf3.Reader.prototype.toVector=function(t,e,i){return(e=e||[]).type=t||16,e.fixed=i||!1,e.toString=function(){let t="object";switch(this.type){case 13:t="int";break;case 14:t="uint";break;case 15:t="double";break;case 16:t="object"}return"[Vector ("+t+")"+(this.fixed?" fixed":"")+"]"},e},amf3.Reader.prototype.readDictionary=function(){let t=this.readUInt29();if(0==(1&t))return this.getObject(t>>1);let e=t>>1,i=new Array(e),s=this.readBoolean();for(let t=0;t<e;t++)i[t]={key:this.readObject(),value:this.readObject()};let r={value:i,weakKeys:s};return this.rememberObject(r),r},amf3.Reader.prototype.readMap=function(){let t=this.readUInt29();if(0==(1&t))return this.getObject(t>>1);let e=null;if(t>>1>0){e={},this.rememberObject(e);let t=this.readObject();for(;null!=t;)e[t]=this.readObject(),t=this.readObject()}return e};var es=amf3,is=C;const ss=4096,rs=!0,ns=0,os=3,as="deflate",hs="lzma",ls="zlib";class cs{constructor(t,e=!1){var i;this.offset=0,this.endian=rs,this._objectEncoding=os,this.buffer=(i=t,is.isBuffer(i)?i:Array.isArray(i)?is.from(i):i instanceof ArrayBuffer?is.from(new Uint8Array(i)):i instanceof Uint8Array?is.from(i):Number.isInteger(i)?is.alloc(i):is.alloc(0))}axCoerceString(t){return"string"==typeof t?t:null==t?null:t+""}get position(){return this.offset}set position(t){this.offset=t}get length(){return this.buffer.length}set length(t){this.buffer.length=t}get bytesAvailable(){return this.length-this.offset}get objectEncoding(){return this._objectEncoding}set objectEncoding(t){if(t!=ns&&t!=os)throw new TypeError(`ByteArray.set::objectEncoding - Error: Invalid AMF version: ${t}`);this._objectEncoding=t}reset(){this.offset=0}clear(){this.buffer=is.alloc(ss)}fill(t,e){for(let i=0;i<t;i++)this.buffer[i]=e;return this.buffer}async compress(t=ls){let e="";switch((t=this.axCoerceString(t))===as&&(e=as),t===hs&&(e=hs),t===ls&&(e=ls),e){case as:this.buffer=d.deflateRawSync(this.buffer);break;case hs:this.buffer=await LZMA.compress(this.buffer,1);break;case ls:this.buffer=d.deflateSync(this.buffer)}}deflate(){return this.compress(as)}inflate(){return this.uncompress(as)}range(t){return Array.from({length:t},((t,e)=>e))}updatePosition(t){if(t>ss)throw new RangeError(`ByteArray::updatePosition - Error: Trying to access beyond buffer length with position: ${t}`);this.offset+t>=this.length&&(this.buffer=is.concat([this.buffer,is.alloc(t)]));let e=this.offset;return this.offset+=t,e}readBoolean(){return Boolean(this.buffer.readInt8(this.updatePosition(1)))}readByte(){const t=this.updatePosition(1);return this.buffer.readInt8(t)}readBytes(t,e=0,i=0){void 0===e&&(e=0),void 0!==i&&0!==i||(i=this.bytesAvailable);let s=e+i;for(let i=e;i<s;i++)return t[i]=this.readByte(),t[i]}readDouble(){return this.endian===rs?this.buffer.readDoubleBE(this.updatePosition(8)):this.buffer.readDoubleLE(this.updatePosition(8))}readFloat(){return this.endian===rs?this.buffer.readFloatBE(this.updatePosition(4)):this.buffer.readFloatLE(this.updatePosition(4))}readInt(){return this.endian===rs?this.buffer.readInt32BE(this.updatePosition(4)):this.buffer.readInt32LE(this.updatePosition(4))}readMultiByte(t,e){e=this.axCoerceString(e);let i=this.updatePosition(t);return this.buffer.toString(e||"utf8",i,i+t)}readObject(){switch(this.objectEncoding){case ns:return(new Wi.Reader).readObject(this.buffer);case os:return new es.Reader(this.buffer,this).readObject()}}readShort(){return this.endian===rs?this.buffer.readInt16BE(this.updatePosition(2)):this.buffer.readInt16LE(this.updatePosition(2))}readUnsignedByte(){return this.buffer.readUInt8(this.updatePosition(1))}readUnsignedInt(){return this.endian===rs?this.buffer.readUInt32BE(this.updatePosition(4)):this.buffer.readUInt32LE(this.updatePosition(4))}readUnsignedShort(){return this.endian===rs?this.buffer.readUInt16BE(this.updatePosition(2)):this.buffer.readUInt16LE(this.updatePosition(2))}readUTF(){let t=this.readShort();return this.buffer.toString("utf8",this.offset,this.offset+t)}readUTFBytes(t){let e=this.updatePosition(t);return this.buffer.toString("utf8",e,e+t)}toJSON(){return this.buffer.toJSON()}toString(){return this.buffer.toString("utf8",this.offset,this.length)}async uncompress(t=ls){let e="";switch((t=this.axCoerceString(t))===as&&(e=as),t===hs&&(e=hs),t===ls&&(e=ls),e){case as:this.buffer=d.inflateRawSync(this.buffer);break;case hs:this.buffer=await LZMA.decompress(this.buffer);break;case ls:this.buffer=d.inflateSync(this.buffer)}}readChar(){return String.fromCharCode(this.buffer[this.offset++])}readByteArray(t){return new Int8Array(this.range(t).map((()=>this.readByte())))}readShortArray(t){return new Int16Array(this.range(t).map((()=>this.readShort())))}readIntArray(t){return new Int32Array(this.range(t).map((()=>this.readInt())))}readLong(){return this.endian===rs?this.buffer.readInt32BE(this.updatePosition(4))|this.buffer.readInt32BE(this.updatePosition(4)):this.buffer.readInt32LE(this.updatePosition(4))|this.buffer.readInt32LE(this.updatePosition(4))}readUnsignedLong(){return this.endian===rs?this.buffer.readUInt32BE(this.updatePosition(4))|this.buffer.readUInt32BE(this.updatePosition(4)):this.buffer.readUInt32LE(this.updatePosition(4))|this.buffer.readUInt32LE(this.updatePosition(4))}readIntegerWithLength(t){let e=0;for(let i=t-1;i>=0;i--)e=(e<<8|this.buffer[this.offset+i])>>>0;return this.offset+=t,e}readVarInt(){let t=0,e=0;do{t+=e<28?(127&this.buffer[this.offset++])<<e:(127&this.buffer[this.offset++])*Math.pow(2,e),e+=7}while(this.buffer[this.offset++]>=128);return t}readVarUInt(){return this.readVarInt()>>>1^-(1&this.readVarInt())}writeBoolean(t){const e=this.updatePosition(1);return this.buffer.writeInt8(Number(t),e)}writeByte(t){const e=this.updatePosition(1);return this.buffer.writeInt8(t,e)}writeBytes(t,e=0,i=0){let s;if((void 0===e||e<0||e>=t.length)&&(e=0),void 0===i||0===i?s=t.length:(s=e+i,(s<0||s>t.length)&&(s=t.length)),Array.isArray(t))for(let e=0;e<t.length;e++)this.writeByte(t[e]);else for(let i=e;i<s;i++)this.writeByte(t[i])}writeDouble(t){const e=this.updatePosition(8);return this.endian===rs?this.buffer.writeDoubleBE(t,e):this.buffer.writeDoubleLE(t,e)}writeFloat(t){const e=this.updatePosition(4);return this.endian===rs?this.buffer.writeFloatBE(t,e):this.buffer.writeFloatLE(t,e)}writeInt(t){const e=this.updatePosition(4);return this.endian===rs?this.buffer.writeInt32BE(t,e):this.buffer.writeInt32LE(t,e)}writeMultiByte(t,e){t=this.axCoerceString(t),e=this.axCoerceString(e);let i=is.byteLength(t);return this.buffer.write(t,this.updatePosition(i),i,e||"utf8")}writeObject(t){switch(this.objectEncoding){case ns:let e=new Wi.Writer;this.buffer=is.concat([e.writeObject(t),this.buffer]);break;case os:let i=new es.Writer;i.writeObject(t),this.buffer=is.concat([is.from(i.data),this.buffer])}}writeShort(t){const e=this.updatePosition(2);return this.endian===rs?this.buffer.writeInt16BE(t,e):this.buffer.writeInt16LE(t,e)}writeUnsignedByte(t){return this.buffer.writeUInt8(t,this.updatePosition(1))}writeUnsignedInt(t){return this.endian===rs?this.buffer.writeUInt32BE(t,this.updatePosition(4)):this.buffer.writeUInt32LE(t,this.updatePosition(4))}writeUnsignedShort(t){return this.endian===rs?this.buffer.writeUInt16BE(t,this.updatePosition(2)):this.buffer.writeUInt16LE(t,this.updatePosition(2))}writeUTF(t){t=this.axCoerceString(t);let e=is.byteLength(t);return this.writeShort(e),this.buffer=is.concat([this.buffer,is.from(t)]),e}writeUTFBytes(t){t=this.axCoerceString(t);let e=is.byteLength(t);return this.buffer.write(t,this.offset,this.offset+=e,"utf8")}writeChar(t){return this.writeUnsignedByte(t.charCodeAt(0))}writeByteArray(t){if(!Array.isArray(t))throw new TypeError(`ByteArray::writeByteArray - Error: ${t} is not an array`);t.forEach((t=>{this.writeByte(t)}))}writeShortArray(t){if(!Array.isArray(t))throw new TypeError(`ByteArray::writeShortArray - Error: ${t} is not an array`);t.forEach((t=>{this.writeShort(t)}))}writeIntArray(t){if(!Array.isArray(t))throw new TypeError(`ByteArray::writeIntArray - Error: ${t} is not an array`);t.forEach((t=>{this.writeInt(t)}))}writeLong(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new RangeError(`ByteArray::writeLong - Error: ${t} is out of bounds`);if(this.offset+8>this.length)throw new RangeError(`ByteArray::writeLong - Error: ${this.offset+8} is greater than ${this.length}`);let e=Math.floor(t/4294967296),i=t-4294967296*e;return this.endian===rs?this.buffer.writeInt32BE(e,this.updatePosition(4))|this.buffer.writeInt32BE(i,this.updatePosition(4)):this.buffer.writeInt32LE(t%4294967296,this.updatePosition(4))|this.buffer.writeInt32LE(Math.floor(t/4294967296),this.updatePosition(4))}writeUnsignedLong(t){if(t>0x10000000000000000||t<0)throw new RangeError(`ByteArray::writeUnsignedLong - Error: ${t} is out of bounds`);if(this.offset+8>this.length)throw new RangeError(`ByteArray::writeUnsignedLong - Error: ${this.offset+8} is greater than ${this.length}`);let e=Math.floor(t/4294967296),i=t-4294967296*e;return this.endian===rs?this.buffer.writeUInt32BE(e,this.updatePosition(4))|this.buffer.writeUInt32BE(i,this.updatePosition(4)):this.buffer.writeUInt32LE(t%4294967296,this.updatePosition(4))|this.buffer.writeUInt32LE(Math.floor(t/4294967296),this.updatePosition(4))}writeIntegerWithLength(t,e){if(t>ss||e>ss)throw new RangeError(`ByteArray::writeIntegerWithLength - Error: ${t} | ${e} are out of bounds`);for(let i=0;i<t;i++)this.buffer[0+i]=e>>8*i&255;this.offset+=t}writeVarInt(t){for(;t>=Math.pow(2,31);)this.buffer[this.offset++]=255&t|128,t/=128;for(;-128&t;)this.buffer[this.offset++]=255&t|128,t>>>=7;this.buffer[this.offset]=0|t}writeVarUInt(t){this.writeVarInt(t<<1^t>>31)}}class ds{constructor(){this.insertNewLines=!0,this._buffers=[],this._count=0,this._line=0,this._work=[0,0,0],this.reset()}drain(){for(var t="",e=0;e<this._buffers.length;e++){var i=this._buffers[e];t+=String.fromCharCode.apply(null,i)}return this._buffers=[],this._buffers.push([]),t}encode(t,e=0,i=0){0==i&&(i=t.length);var s=e,r=e+i;for(r>t.length&&(r=t.length);s<r;)this._work[this._count]=t.charCodeAt(s),this._count++,this._count!=this._work.length&&r-s!=1||(this.encodeBlock(),this._count=0,this._work[0]=0,this._work[1]=0,this._work[2]=0),s++}encodeUTFBytes(t){var e=new cs;e.writeUTFBytes(t),e.position=0,this.encodeBytes(e)}encodeBytes(t,e=0,i=0){0==i&&(i=t.length);var s=t.position;t.position=e;var r=e,n=e+i;for(n>t.length&&(n=t.length);r<n;)this._work[this._count]=t.buffer[r],this._count++,this._count!=this._work.length&&n-r!=1||(this.encodeBlock(),this._count=0,this._work[0]=0,this._work[1]=0,this._work[2]=0),r++;t.position=s}flush(){this._count>0&&this.encodeBlock();var t=this.drain();return this.reset(),t}reset(){this._buffers=[],this._buffers.push([]),this._count=0,this._line=0,this._work[0]=0,this._work[1]=0,this._work[2]=0}toString(){return this.flush()}encodeBlock(){var t=this._buffers[this._buffers.length-1];t.length>=ds.MAX_BUFFER_SIZE&&(t=[],this._buffers.push(t)),t.push(ds.ALPHABET_CHAR_CODES[(255&this._work[0])>>2]),t.push(ds.ALPHABET_CHAR_CODES[(3&this._work[0])<<4|(240&this._work[1])>>4]),this._count>1?t.push(ds.ALPHABET_CHAR_CODES[(15&this._work[1])<<2|(192&this._work[2])>>6]):t.push(ds.ESCAPE_CHAR_CODE),this._count>2?t.push(ds.ALPHABET_CHAR_CODES[63&this._work[2]]):t.push(ds.ESCAPE_CHAR_CODE),this.insertNewLines&&76==(this._line+=4)&&(t.push(ds.newLine),this._line=0)}}ds.CHARSET_UTF_8="UTF-8",ds.newLine=10,ds.MAX_BUFFER_SIZE=32767,ds.ESCAPE_CHAR_CODE=61,ds.ALPHABET_CHAR_CODES=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47];class us{constructor(){this.count=0,this.filled=0,this.work=[0,0,0,0],this.data=new cs}decode(t){for(var e=0;e<t.length;++e){var i=t.charCodeAt(e);if(i==us.ESCAPE_CHAR_CODE)this.work[this.count++]=-1;else{if(64==us.inverse[i])continue;this.work[this.count++]=us.inverse[i]}if(4==this.count){if(this.count=0,this.data.writeByte(this.work[0]<<2|(255&this.work[1])>>4),this.filled++,-1==this.work[2])break;if(this.data.writeByte(this.work[1]<<4|(255&this.work[2])>>2),this.filled++,-1==this.work[3])break;this.data.writeByte(this.work[2]<<6|this.work[3]),this.filled++}}}drain(){var t=new cs;return us.copyByteArray(this.data,t,this.filled),this.filled=0,t}flush(){if(this.count>0)throw new Error("Base64 decoder: Partial block dropped");return this.drain()}reset(){this.data=new cs,this.count=0,this.filled=0}toByteArray(){var t=this.flush();return this.reset(),t}static copyByteArray(t,e,i=0){var s=t.position;t.position=0,e.position=0;for(var r=0;t.bytesAvailable>0&&r<i;)e.writeByte(t.readByte()),r++;t.position=s,e.position=0}}us.ESCAPE_CHAR_CODE=61,us.inverse=[64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,62,64,64,64,63,52,53,54,55,56,57,58,59,60,61,64,64,64,64,64,64,64,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,64,64,64,64,64,64,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64];var ps={},ms=ps&&ps.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),fs=ps&&ps.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||ms(e,t,i)};Object.defineProperty(ps,"__esModule",{value:!0}),ps.b2GetBlockSolve=ps.b2SetBlockSolve=ps.b2World=ps.b2BodyType=ps.b2Body=void 0,a.register("1Zs4L",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2MakeArray=t.exports.b2MakeBooleanArray=t.exports.b2MakeNumberArray=t.exports.b2_version=t.exports.b2_angularSleepTolerance=t.exports.b2_linearSleepTolerance=t.exports.b2_timeToSleep=t.exports.b2_toiBaumgarte=t.exports.b2_baumgarte=t.exports.b2_maxRotationSquared=t.exports.b2_maxRotation=t.exports.b2_maxTranslationSquared=t.exports.b2_maxTranslation=t.exports.b2_maxAngularCorrection=t.exports.b2_maxLinearCorrection=t.exports.b2_maxTOIContacts=t.exports.b2_maxSubSteps=t.exports.b2_polygonRadius=t.exports.b2_angularSlop=t.exports.b2_linearSlop=t.exports.b2_aabbMultiplier=t.exports.b2_aabbExtension=t.exports.b2_maxManifoldPoints=t.exports.b2_epsilon_sq=t.exports.b2_epsilon=t.exports.b2_maxFloat=t.exports.b2Verify=t.exports.b2Assert=void 0;var i=a("btCRw");t.exports.b2Assert=function(t,e){if(!t)throw new Error(e)},t.exports.b2Verify=function(t){if(null===t)throw new Error;return t},t.exports.b2_maxFloat=1e37,t.exports.b2_epsilon=1e-5,t.exports.b2_epsilon_sq=t.exports.b2_epsilon*t.exports.b2_epsilon,t.exports.b2_maxManifoldPoints=2,t.exports.b2_aabbExtension=.1*i.b2_lengthUnitsPerMeter,t.exports.b2_aabbMultiplier=4,t.exports.b2_linearSlop=.005*i.b2_lengthUnitsPerMeter,t.exports.b2_angularSlop=2/180*Math.PI,t.exports.b2_polygonRadius=2*t.exports.b2_linearSlop,t.exports.b2_maxSubSteps=8,t.exports.b2_maxTOIContacts=32,t.exports.b2_maxLinearCorrection=.2*i.b2_lengthUnitsPerMeter,t.exports.b2_maxAngularCorrection=8/180*Math.PI,t.exports.b2_maxTranslation=2*i.b2_lengthUnitsPerMeter,t.exports.b2_maxTranslationSquared=t.exports.b2_maxTranslation*t.exports.b2_maxTranslation,t.exports.b2_maxRotation=.5*Math.PI,t.exports.b2_maxRotationSquared=t.exports.b2_maxRotation*t.exports.b2_maxRotation,t.exports.b2_baumgarte=.2,t.exports.b2_toiBaumgarte=.75,t.exports.b2_timeToSleep=.5,t.exports.b2_linearSleepTolerance=.01*i.b2_lengthUnitsPerMeter,t.exports.b2_angularSleepTolerance=2/180*Math.PI,t.exports.b2_version={major:2,minor:4,patch:0},t.exports.b2MakeNumberArray=function(t,e=0){const i=new Array(t);for(let s=0;s<t;s++)i[s]=e;return i},t.exports.b2MakeBooleanArray=function(t,e=!1){const i=new Array(t);for(let s=0;s<t;s++)i[s]=e;return i},t.exports.b2MakeArray=function(t,e){const i=new Array(t);for(let s=0;s<t;s++)i[s]=new e;return i}})),a.register("btCRw",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2_maxPolygonVertices=t.exports.b2_lengthUnitsPerMeter=void 0,t.exports.b2_lengthUnitsPerMeter=1,t.exports.b2_maxPolygonVertices=8})),fs(a("1Zs4L"),ps),fs(a("btCRw"),ps),a.register("4L5iv",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2Sweep=t.exports.b2Transform=t.exports.b2Rot=t.exports.b2Mat33=t.exports.b2Mat22=t.exports.b2Vec3=t.exports.b2Vec2=t.exports.b2RandomInt=t.exports.b2RandomFloat=t.exports.b2Random=t.exports.b2IsPowerOfTwo=t.exports.b2NextPowerOfTwo=t.exports.b2RadToDeg=t.exports.b2DegToRad=t.exports.b2Clamp=t.exports.b2_two_pi=t.exports.b2_180_over_pi=t.exports.b2_pi_over_180=void 0;var i=a("1Zs4L");function s(t,e,i){return t<e?e:t>i?i:t}t.exports.b2_pi_over_180=Math.PI/180,t.exports.b2_180_over_pi=180/Math.PI,t.exports.b2_two_pi=2*Math.PI,t.exports.b2Clamp=s,t.exports.b2DegToRad=function(e){return e*t.exports.b2_pi_over_180},t.exports.b2RadToDeg=function(e){return e*t.exports.b2_180_over_pi},t.exports.b2NextPowerOfTwo=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},t.exports.b2IsPowerOfTwo=function(t){return t>0&&0==(t&t-1)},t.exports.b2Random=function(){return 2*Math.random()-1},t.exports.b2RandomFloat=function(t,e){return(e-t)*Math.random()+t},t.exports.b2RandomInt=function(t,e){return Math.round((e-t)*Math.random()+t)};class r{constructor(t=0,e=0){this.x=t,this.y=e}Clone(){return new r(this.x,this.y)}SetZero(){return this.x=0,this.y=0,this}Set(t,e){return this.x=t,this.y=e,this}Copy(t){return this.x=t.x,this.y=t.y,this}Add(t){return this.x+=t.x,this.y+=t.y,this}AddXY(t,e){return this.x+=t,this.y+=e,this}Subtract(t){return this.x-=t.x,this.y-=t.y,this}SubtractXY(t,e){return this.x-=t,this.y-=e,this}Scale(t){return this.x*=t,this.y*=t,this}AddScaled(t,e){return this.x+=t*e.x,this.y+=t*e.y,this}SubtractScaled(t,e){return this.x-=t*e.x,this.y-=t*e.y,this}Dot(t){return this.x*t.x+this.y*t.y}Cross(t){return this.x*t.y-this.y*t.x}Length(){const{x:t,y:e}=this;return Math.sqrt(t*t+e*e)}LengthSquared(){const{x:t,y:e}=this;return t*t+e*e}Normalize(){const t=this.Length();if(t<i.b2_epsilon)return 0;const e=1/t;return this.x*=e,this.y*=e,t}Rotate(t){const e=Math.cos(t),i=Math.sin(t),{x:s}=this;return this.x=e*s-i*this.y,this.y=i*s+e*this.y,this}RotateCosSin(t,e){const{x:i}=this;return this.x=t*i-e*this.y,this.y=e*i+t*this.y,this}IsValid(){return Number.isFinite(this.x)&&Number.isFinite(this.y)}Abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}GetAbs(t){return t.x=Math.abs(this.x),t.y=Math.abs(this.y),t}Negate(){return this.x=-this.x,this.y=-this.y,this}Skew(){const{x:t}=this;return this.x=-this.y,this.y=t,this}static Min(t,e,i){return i.x=Math.min(t.x,e.x),i.y=Math.min(t.y,e.y),i}static Max(t,e,i){return i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i}static Clamp(t,e,i,r){return r.x=s(t.x,e.x,i.x),r.y=s(t.y,e.y,i.y),r}static Rotate(t,e,i){const s=t.x,r=t.y,n=Math.cos(e),o=Math.sin(e);return i.x=n*s-o*r,i.y=o*s+n*r,i}static Dot(t,e){return t.x*e.x+t.y*e.y}static Cross(t,e){return t.x*e.y-t.y*e.x}static CrossVec2Scalar(t,e,i){const s=t.x;return i.x=e*t.y,i.y=-e*s,i}static CrossVec2One(t,e){const i=t.x;return e.x=t.y,e.y=-i,e}static CrossScalarVec2(t,e,i){const s=e.x;return i.x=-t*e.y,i.y=t*s,i}static CrossOneVec2(t,e){const i=t.x;return e.x=-t.y,e.y=i,e}static Add(t,e,i){return i.x=t.x+e.x,i.y=t.y+e.y,i}static Subtract(t,e,i){return i.x=t.x-e.x,i.y=t.y-e.y,i}static Scale(t,e,i){return i.x=e.x*t,i.y=e.y*t,i}static AddScaled(t,e,i,s){return s.x=t.x+e*i.x,s.y=t.y+e*i.y,s}static SubtractScaled(t,e,i,s){return s.x=t.x-e*i.x,s.y=t.y-e*i.y,s}static AddCrossScalarVec2(t,e,i,s){const r=i.x;return s.x=t.x-e*i.y,s.y=t.y+e*r,s}static Mid(t,e,i){return i.x=.5*(t.x+e.x),i.y=.5*(t.y+e.y),i}static Extents(t,e,i){return i.x=.5*(e.x-t.x),i.y=.5*(e.y-t.y),i}static Equals(t,e){return t.x===e.x&&t.y===e.y}static Distance(t,e){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}static DistanceSquared(t,e){return(t.x-e.x)**2+(t.y-e.y)**2}static Negate(t,e){return e.x=-t.x,e.y=-t.y,e}static Normalize(t,e){const s=t.x**2+t.y**2;if(s>=i.b2_epsilon_sq){const i=1/Math.sqrt(s);e.x=i*t.x,e.y=i*t.y}else e.x=0,e.y=0;return e}static Skew(t,e){const{x:i}=t;return e.x=-t.y,e.y=i,e}}t.exports.b2Vec2=r,r.ZERO=new r,r.UNITX=new r(1,0),r.UNITY=new r(0,1),r.s_t0=new r,r.s_t1=new r,r.s_t2=new r,r.s_t3=new r;class n{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}Clone(){return new n(this.x,this.y,this.z)}SetZero(){return this.x=0,this.y=0,this.z=0,this}Set(t,e,i){return this.x=t,this.y=e,this.z=i,this}Copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}Negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}Add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}AddXYZ(t,e,i){return this.x+=t,this.y+=e,this.z+=i,this}Subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}SubtractXYZ(t,e,i){return this.x-=t,this.y-=e,this.z-=i,this}Scale(t){return this.x*=t,this.y*=t,this.z*=t,this}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static Cross(t,e,i){const s=t.x,r=t.y,n=t.z,o=e.x,a=e.y,h=e.z;return i.x=r*h-n*a,i.y=n*o-s*h,i.z=s*a-r*o,i}}t.exports.b2Vec3=n,n.ZERO=new n(0,0,0),n.s_t0=new n;class o{constructor(){this.ex=new r(1,0),this.ey=new r(0,1)}Clone(){return(new o).Copy(this)}static FromColumns(t,e){return(new o).SetColumns(t,e)}static FromScalars(t,e,i,s){return(new o).SetScalars(t,e,i,s)}static FromAngle(t){return(new o).SetAngle(t)}SetScalars(t,e,i,s){return this.ex.Set(t,i),this.ey.Set(e,s),this}SetColumns(t,e){return this.ex.Copy(t),this.ey.Copy(e),this}SetAngle(t){const e=Math.cos(t),i=Math.sin(t);return this.ex.Set(e,i),this.ey.Set(-i,e),this}Copy(t){return this.ex.Copy(t.ex),this.ey.Copy(t.ey),this}SetIdentity(){return this.ex.Set(1,0),this.ey.Set(0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this}GetAngle(){return Math.atan2(this.ex.y,this.ex.x)}Solve(t,e,i){const s=this.ex.x,r=this.ey.x,n=this.ex.y,o=this.ey.y;let a=s*o-r*n;return 0!==a&&(a=1/a),i.x=a*(o*t-r*e),i.y=a*(s*e-n*t),i}Abs(){return this.ex.Abs(),this.ey.Abs(),this}Inverse(){return this.GetInverse(this),this}Add(t){return this.ex.Add(t.ex),this.ey.Add(t.ey),this}Subtract(t){return this.ex.Subtract(t.ex),this.ey.Subtract(t.ey),this}GetInverse(t){const e=this.ex.x,i=this.ey.x,s=this.ex.y,r=this.ey.y;let n=e*r-i*s;return 0!==n&&(n=1/n),t.ex.x=n*r,t.ey.x=-n*i,t.ex.y=-n*s,t.ey.y=n*e,t}GetAbs(t){return t.ex.x=Math.abs(this.ex.x),t.ex.y=Math.abs(this.ex.y),t.ey.x=Math.abs(this.ey.x),t.ey.y=Math.abs(this.ey.y),t}static MultiplyVec2(t,e,i){const s=e.x,r=e.y;return i.x=t.ex.x*s+t.ey.x*r,i.y=t.ex.y*s+t.ey.y*r,i}static TransposeMultiplyVec2(t,e,i){const s=e.x,r=e.y;return i.x=t.ex.x*s+t.ex.y*r,i.y=t.ey.x*s+t.ey.y*r,i}static Add(t,e,i){return i.ex.x=t.ex.x+e.ex.x,i.ex.y=t.ex.y+e.ex.y,i.ey.x=t.ey.x+e.ey.x,i.ey.y=t.ey.y+e.ey.y,i}static Multiply(t,e,i){const s=t.ex.x,r=t.ex.y,n=t.ey.x,o=t.ey.y,a=e.ex.x,h=e.ex.y,l=e.ey.x,c=e.ey.y;return i.ex.x=s*a+n*h,i.ex.y=r*a+o*h,i.ey.x=s*l+n*c,i.ey.y=r*l+o*c,i}static TransposeMultiply(t,e,i){const s=t.ex.x,r=t.ex.y,n=t.ey.x,o=t.ey.y,a=e.ex.x,h=e.ex.y,l=e.ey.x,c=e.ey.y;return i.ex.x=s*a+r*h,i.ex.y=n*a+o*h,i.ey.x=s*l+r*c,i.ey.y=n*l+o*c,i}}t.exports.b2Mat22=o,o.IDENTITY=new o;class h{constructor(){this.ex=new n(1,0,0),this.ey=new n(0,1,0),this.ez=new n(0,0,1)}Clone(){return(new h).Copy(this)}SetColumns(t,e,i){return this.ex.Copy(t),this.ey.Copy(e),this.ez.Copy(i),this}Copy(t){return this.ex.Copy(t.ex),this.ey.Copy(t.ey),this.ez.Copy(t.ez),this}SetIdentity(){return this.ex.Set(1,0,0),this.ey.Set(0,1,0),this.ez.Set(0,0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this}Add(t){return this.ex.Add(t.ex),this.ey.Add(t.ey),this.ez.Add(t.ez),this}Solve33(t,e,i,s){const r=this.ex.x,n=this.ex.y,o=this.ex.z,a=this.ey.x,h=this.ey.y,l=this.ey.z,c=this.ez.x,d=this.ez.y,u=this.ez.z;let p=r*(h*u-l*d)+n*(l*c-a*u)+o*(a*d-h*c);return 0!==p&&(p=1/p),s.x=p*(t*(h*u-l*d)+e*(l*c-a*u)+i*(a*d-h*c)),s.y=p*(r*(e*u-i*d)+n*(i*c-t*u)+o*(t*d-e*c)),s.z=p*(r*(h*i-l*e)+n*(l*t-a*i)+o*(a*e-h*t)),s}Solve22(t,e,i){const s=this.ex.x,r=this.ey.x,n=this.ex.y,o=this.ey.y;let a=s*o-r*n;return 0!==a&&(a=1/a),i.x=a*(o*t-r*e),i.y=a*(s*e-n*t),i}GetInverse22(t){const e=this.ex.x,i=this.ey.x,s=this.ex.y,r=this.ey.y;let n=e*r-i*s;0!==n&&(n=1/n),t.ex.x=n*r,t.ey.x=-n*i,t.ex.z=0,t.ex.y=-n*s,t.ey.y=n*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0}GetSymInverse33(t){let e=n.Dot(this.ex,n.Cross(this.ey,this.ez,n.s_t0));0!==e&&(e=1/e);const i=this.ex.x,s=this.ey.x,r=this.ez.x,o=this.ey.y,a=this.ez.y,h=this.ez.z;t.ex.x=e*(o*h-a*a),t.ex.y=e*(r*a-s*h),t.ex.z=e*(s*a-r*o),t.ey.x=t.ex.y,t.ey.y=e*(i*h-r*r),t.ey.z=e*(r*s-i*a),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(i*o-s*s)}static MultiplyVec3(t,e,i){const{x:s,y:r,z:n}=e;return i.x=t.ex.x*s+t.ey.x*r+t.ez.x*n,i.y=t.ex.y*s+t.ey.y*r+t.ez.y*n,i.z=t.ex.z*s+t.ey.z*r+t.ez.z*n,i}static MultiplyVec2(t,e,i){const{x:s,y:r}=e;return i.x=t.ex.x*s+t.ey.x*r,i.y=t.ex.y*s+t.ey.y*r,i}}t.exports.b2Mat33=h,h.IDENTITY=new h;class l{constructor(t=0){this.s=0,this.c=1,t&&(this.s=Math.sin(t),this.c=Math.cos(t))}Clone(){return(new l).Copy(this)}Copy(t){return this.s=t.s,this.c=t.c,this}Set(t){return this.s=Math.sin(t),this.c=Math.cos(t),this}SetIdentity(){return this.s=0,this.c=1,this}GetAngle(){return Math.atan2(this.s,this.c)}GetXAxis(t){return t.x=this.c,t.y=this.s,t}GetYAxis(t){return t.x=-this.s,t.y=this.c,t}static Multiply(t,e,i){const s=t.s*e.c+t.c*e.s,r=t.c*e.c-t.s*e.s;return i.s=s,i.c=r,i}static TransposeMultiply(t,e,i){const s=t.c*e.s-t.s*e.c,r=t.c*e.c+t.s*e.s;return i.s=s,i.c=r,i}static MultiplyVec2(t,e,i){const s=e.x,r=e.y;return i.x=t.c*s-t.s*r,i.y=t.s*s+t.c*r,i}static TransposeMultiplyVec2(t,e,i){const s=e.x,r=e.y;return i.x=t.c*s+t.s*r,i.y=-t.s*s+t.c*r,i}}t.exports.b2Rot=l,l.IDENTITY=new l;class c{constructor(){this.p=new r,this.q=new l}Clone(){return(new c).Copy(this)}Copy(t){return this.p.Copy(t.p),this.q.Copy(t.q),this}SetIdentity(){return this.p.SetZero(),this.q.SetIdentity(),this}SetPositionRotation(t,e){return this.p.Copy(t),this.q.Copy(e),this}SetPositionAngle(t,e){return this.p.Copy(t),this.q.Set(e),this}SetPosition(t){return this.p.Copy(t),this}SetPositionXY(t,e){return this.p.Set(t,e),this}SetRotation(t){return this.q.Copy(t),this}SetRotationAngle(t){return this.q.Set(t),this}GetPosition(){return this.p}GetRotation(){return this.q}GetAngle(){return this.q.GetAngle()}static MultiplyVec2(t,e,i){const s=e.x,r=e.y;return i.x=t.q.c*s-t.q.s*r+t.p.x,i.y=t.q.s*s+t.q.c*r+t.p.y,i}static TransposeMultiplyVec2(t,e,i){const s=e.x-t.p.x,r=e.y-t.p.y;return i.x=t.q.c*s+t.q.s*r,i.y=-t.q.s*s+t.q.c*r,i}static Multiply(t,e,i){return l.Multiply(t.q,e.q,i.q),l.MultiplyVec2(t.q,e.p,i.p).Add(t.p),i}static TransposeMultiply(t,e,i){return l.TransposeMultiply(t.q,e.q,i.q),l.TransposeMultiplyVec2(t.q,r.Subtract(e.p,t.p,i.p),i.p),i}}t.exports.b2Transform=c,c.IDENTITY=new c;class d{constructor(){this.localCenter=new r,this.c0=new r,this.c=new r,this.a0=0,this.a=0,this.alpha0=0}Clone(){return(new d).Copy(this)}Copy(t){return this.localCenter.Copy(t.localCenter),this.c0.Copy(t.c0),this.c.Copy(t.c),this.a0=t.a0,this.a=t.a,this.alpha0=t.alpha0,this}GetTransform(t,e){const i=1-e;t.p.x=i*this.c0.x+e*this.c.x,t.p.y=i*this.c0.y+e*this.c.y;const s=i*this.a0+e*this.a;return t.q.Set(s),t.p.Subtract(l.MultiplyVec2(t.q,this.localCenter,r.s_t0)),t}Advance(t){const e=(t-this.alpha0)/(1-this.alpha0);this.c0.x+=e*(this.c.x-this.c0.x),this.c0.y+=e*(this.c.y-this.c0.y),this.a0+=e*(this.a-this.a0),this.alpha0=t}Normalize(){const e=t.exports.b2_two_pi*Math.floor(this.a0/t.exports.b2_two_pi);this.a0-=e,this.a-=e}}t.exports.b2Sweep=d})),fs(a("4L5iv"),ps),a.register("cCzda",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.debugColors=t.exports.b2Color=void 0;class i{constructor(t=.5,e=.5,i=.5,s=1){this.r=t,this.g=e,this.b=i,this.a=s}Clone(){return new i(this.r,this.g,this.b,this.a)}Copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}IsEqual(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}IsZero(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a}SetByteRGB(t,e,i){return this.r=t/255,this.g=e/255,this.b=i/255,this}SetByteRGBA(t,e,i,s){return this.r=t/255,this.g=e/255,this.b=i/255,this.a=s/255,this}SetRGB(t,e,i){return this.r=t,this.g=e,this.b=i,this}SetRGBA(t,e,i,s){return this.r=t,this.g=e,this.b=i,this.a=s,this}Add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}Subtract(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this.a-=t.a,this}Scale(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}Mix(t,e){i.MixColors(this,t,e)}static Add(t,e,i){return i.r=t.r+e.r,i.g=t.g+e.g,i.b=t.b+e.b,i.a=t.a+e.a,i}static Subtract(t,e,i){return i.r=t.r-e.r,i.g=t.g-e.g,i.b=t.b-e.b,i.a=t.a-e.a,i}static Scale(t,e,i){return i.r=t.r*e,i.g=t.g*e,i.b=t.b*e,i.a=t.a*e,i}static MixColors(t,e,i){const s=i*(e.r-t.r),r=i*(e.g-t.g),n=i*(e.b-t.b),o=i*(e.a-t.a);t.r+=s,t.g+=r,t.b+=n,t.a+=o,e.r-=s,e.g-=r,e.b-=n,e.a-=o}}t.exports.b2Color=i,i.ZERO=new i(0,0,0,0),i.RED=new i(1,0,0),i.GREEN=new i(0,1,0),i.BLUE=new i(0,0,1),i.WHITE=new i(1,1,1),i.BLACK=new i(0,0,0),t.exports.debugColors={badBody:new i(1,0,0),disabledBody:new i(.5,.5,.3),staticBody:new i(.5,.9,.5),kinematicBody:new i(.5,.5,.9),sleepingBody:new i(.6,.6,.6),body:new i(.9,.7,.7),pair:new i(.3,.9,.9),aabb:new i(.9,.3,.9),joint1:new i(.7,.7,.7),joint2:new i(.3,.9,.3),joint3:new i(.9,.3,.3),joint4:new i(.3,.3,.9),joint5:new i(.4,.4,.4),joint6:new i(.5,.8,.8),joint7:new i(0,1,0),joint8:new i(.8,.8,.8),rope:new i(.4,.5,.7),ropePointG:new i(.1,.8,.1),ropePointD:new i(.7,.2,.4)}})),fs(a("cCzda"),ps),a.register("1MhDO",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawCenterOfMasses=t.exports.DrawAABBs=t.exports.DrawPairs=t.exports.DrawJoints=t.exports.DrawShapes=t.exports.GetShapeColor=void 0;var i=a("4L5iv"),s=a("cCzda"),r=a("2eI7i"),n=a("1Zs4L");const o={cA:new i.b2Vec2,cB:new i.b2Vec2,vs:n.b2MakeArray(4,i.b2Vec2),xf:new i.b2Transform};function h(t){return t.GetType()===r.b2BodyType.b2_dynamicBody&&0===t.m_mass?s.debugColors.badBody:t.IsEnabled()?t.GetType()===r.b2BodyType.b2_staticBody?s.debugColors.staticBody:t.GetType()===r.b2BodyType.b2_kinematicBody?s.debugColors.kinematicBody:t.IsAwake()?s.debugColors.body:s.debugColors.sleepingBody:s.debugColors.disabledBody}t.exports.GetShapeColor=h,t.exports.DrawShapes=function(t,e){for(let i=e.GetBodyList();i;i=i.m_next){const e=i.m_xf;t.PushTransform(e);for(let e=i.GetFixtureList();e;e=e.m_next)e.GetShape().Draw(t,h(i));t.PopTransform(e)}},t.exports.DrawJoints=function(t,e){for(let i=e.GetJointList();i;i=i.m_next)i.Draw(t)},t.exports.DrawPairs=function(t,e){for(let i=e.GetContactList();i;i=i.m_next){const e=i.GetFixtureA(),r=i.GetFixtureB(),n=i.GetChildIndexA(),a=i.GetChildIndexB(),h=e.GetAABB(n).GetCenter(o.cA),l=r.GetAABB(a).GetCenter(o.cB);t.DrawSegment(h,l,s.debugColors.pair)}},t.exports.DrawAABBs=function(t,e){const{vs:i}=o;for(let r=e.GetBodyList();r;r=r.m_next)if(r.IsEnabled())for(let e=r.GetFixtureList();e;e=e.m_next)for(let r=0;r<e.m_proxyCount;++r){const n=e.m_proxies[r],{aabb:o}=n.treeNode;i[0].Set(o.lowerBound.x,o.lowerBound.y),i[1].Set(o.upperBound.x,o.lowerBound.y),i[2].Set(o.upperBound.x,o.upperBound.y),i[3].Set(o.lowerBound.x,o.upperBound.y),t.DrawPolygon(i,4,s.debugColors.aabb)}},t.exports.DrawCenterOfMasses=function(t,e){const{xf:i}=o;for(let s=e.GetBodyList();s;s=s.m_next)i.q.Copy(s.m_xf.q),i.p.Copy(s.GetWorldCenter()),t.DrawTransform(i)}})),a.register("2eI7i",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2Body=t.exports.b2BodyType=void 0;var i,s,r=a("4L5iv"),n=a("cOy3h"),o=a("bmDAE"),h=a("1Zs4L");(s=i=t.exports.b2BodyType||(t.exports.b2BodyType={}))[s.b2_staticBody=0]="b2_staticBody",s[s.b2_kinematicBody=1]="b2_kinematicBody",s[s.b2_dynamicBody=2]="b2_dynamicBody";class l{constructor(t,e){var s,n,o,a,h,l,c,d,u,p,m,f,_,g;this.m_type=i.b2_staticBody,this.m_islandFlag=!1,this.m_awakeFlag=!1,this.m_autoSleepFlag=!1,this.m_bulletFlag=!1,this.m_fixedRotationFlag=!1,this.m_enabledFlag=!1,this.m_toiFlag=!1,this.m_islandIndex=0,this.m_xf=new r.b2Transform,this.m_sweep=new r.b2Sweep,this.m_linearVelocity=new r.b2Vec2,this.m_angularVelocity=0,this.m_force=new r.b2Vec2,this.m_torque=0,this.m_prev=null,this.m_next=null,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_jointList=null,this.m_contactList=null,this.m_mass=1,this.m_invMass=1,this.m_I=0,this.m_invI=0,this.m_linearDamping=0,this.m_angularDamping=0,this.m_gravityScale=1,this.m_sleepTime=0,this.m_userData=null,this.m_bulletFlag=null!==(s=t.bullet)&&void 0!==s&&s,this.m_fixedRotationFlag=null!==(n=t.fixedRotation)&&void 0!==n&&n,this.m_autoSleepFlag=null===(o=t.allowSleep)||void 0===o||o,null!==(a=t.awake)&&void 0!==a&&!a||(null!==(h=t.type)&&void 0!==h?h:i.b2_staticBody)===i.b2_staticBody||(this.m_awakeFlag=!0),this.m_enabledFlag=null===(l=t.enabled)||void 0===l||l,this.m_world=e,this.m_xf.p.Copy(null!==(c=t.position)&&void 0!==c?c:r.b2Vec2.ZERO),this.m_xf.q.Set(null!==(d=t.angle)&&void 0!==d?d:0),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a=this.m_xf.q.GetAngle(),this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(null!==(u=t.linearVelocity)&&void 0!==u?u:r.b2Vec2.ZERO),this.m_angularVelocity=null!==(p=t.angularVelocity)&&void 0!==p?p:0,this.m_linearDamping=null!==(m=t.linearDamping)&&void 0!==m?m:0,this.m_angularDamping=null!==(f=t.angularDamping)&&void 0!==f?f:0,this.m_gravityScale=null!==(_=t.gravityScale)&&void 0!==_?_:1,this.m_force.SetZero(),this.m_torque=0,this.m_sleepTime=0,this.m_type=null!==(g=t.type)&&void 0!==g?g:i.b2_staticBody,this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0}CreateFixture(t){h.b2Assert(!this.m_world.IsLocked());const e=new o.b2Fixture(this,t);if(this.m_enabledFlag){const t=this.m_world.m_contactManager.m_broadPhase;e.CreateProxies(t,this.m_xf)}return e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_density>0&&this.ResetMassData(),this.m_world.m_newContacts=!0,e}DestroyFixture(t){h.b2Assert(!this.m_world.IsLocked());let e=this.m_fixtureList,i=null;for(;null!==e;){if(e===t){i?i.m_next=t.m_next:this.m_fixtureList=t.m_next;break}i=e,e=e.m_next}let s=this.m_contactList;for(;s;){const e=s.contact;s=s.next;const i=e.GetFixtureA(),r=e.GetFixtureB();t!==i&&t!==r||this.m_world.m_contactManager.Destroy(e)}if(this.m_enabledFlag){const e=this.m_world.m_contactManager.m_broadPhase;t.DestroyProxies(e)}t.m_next=null,--this.m_fixtureCount,this.ResetMassData()}SetTransformVec(t,e){this.SetTransformXY(t.x,t.y,e)}SetTransformXY(t,e,i){h.b2Assert(!this.m_world.IsLocked()),this.m_xf.q.Set(i),this.m_xf.p.Set(t,e),r.b2Transform.MultiplyVec2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=i,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=i;const s=this.m_world.m_contactManager.m_broadPhase;for(let t=this.m_fixtureList;t;t=t.m_next)t.Synchronize(s,this.m_xf,this.m_xf);this.m_world.m_newContacts=!0}SetTransform(t){this.SetTransformVec(t.p,t.GetAngle())}GetTransform(){return this.m_xf}GetPosition(){return this.m_xf.p}GetAngle(){return this.m_sweep.a}SetAngle(t){this.SetTransformVec(this.GetPosition(),t)}GetWorldCenter(){return this.m_sweep.c}GetLocalCenter(){return this.m_sweep.localCenter}SetLinearVelocity(t){this.m_type!==i.b2_staticBody&&(r.b2Vec2.Dot(t,t)>0&&this.SetAwake(!0),this.m_linearVelocity.Copy(t))}GetLinearVelocity(){return this.m_linearVelocity}SetAngularVelocity(t){this.m_type!==i.b2_staticBody&&(t*t>0&&this.SetAwake(!0),this.m_angularVelocity=t)}GetAngularVelocity(){return this.m_angularVelocity}ApplyForce(t,e,s=!0){this.m_type===i.b2_dynamicBody&&(s&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))}ApplyForceToCenter(t,e=!0){this.m_type===i.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=t.x,this.m_force.y+=t.y))}ApplyTorque(t,e=!0){this.m_type===i.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))}ApplyLinearImpulse(t,e,s=!0){this.m_type===i.b2_dynamicBody&&(s&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)))}ApplyLinearImpulseToCenter(t,e=!0){this.m_type===i.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y))}ApplyAngularImpulse(t,e=!0){this.m_type===i.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))}GetMass(){return this.m_mass}GetInertia(){return this.m_I+this.m_mass*r.b2Vec2.Dot(this.m_sweep.localCenter,this.m_sweep.localCenter)}GetMassData(t){return t.mass=this.m_mass,t.I=this.m_I+this.m_mass*r.b2Vec2.Dot(this.m_sweep.localCenter,this.m_sweep.localCenter),t.center.Copy(this.m_sweep.localCenter),t}SetMassData(t){if(h.b2Assert(!this.m_world.IsLocked()),this.m_type!==i.b2_dynamicBody)return;this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&!this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*r.b2Vec2.Dot(t.center,t.center),this.m_invI=1/this.m_I);const e=l.SetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(t.center),r.b2Transform.MultiplyVec2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),r.b2Vec2.AddCrossScalarVec2(this.m_linearVelocity,this.m_angularVelocity,r.b2Vec2.Subtract(this.m_sweep.c,e,r.b2Vec2.s_t0),this.m_linearVelocity)}ResetMassData(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type===i.b2_staticBody||this.m_type===i.b2_kinematicBody)return this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);const t=l.ResetMassData_s_localCenter.SetZero();for(let e=this.m_fixtureList;e;e=e.m_next){if(0===e.m_density)continue;const i=e.GetMassData(l.ResetMassData_s_massData);this.m_mass+=i.mass,t.AddScaled(i.mass,i.center),this.m_I+=i.I}this.m_mass>0&&(this.m_invMass=1/this.m_mass,t.Scale(this.m_invMass)),this.m_I>0&&!this.m_fixedRotationFlag?(this.m_I-=this.m_mass*r.b2Vec2.Dot(t,t),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);const e=l.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(t),r.b2Transform.MultiplyVec2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),r.b2Vec2.AddCrossScalarVec2(this.m_linearVelocity,this.m_angularVelocity,r.b2Vec2.Subtract(this.m_sweep.c,e,r.b2Vec2.s_t0),this.m_linearVelocity)}GetWorldPoint(t,e){return r.b2Transform.MultiplyVec2(this.m_xf,t,e)}GetWorldVector(t,e){return r.b2Rot.MultiplyVec2(this.m_xf.q,t,e)}GetLocalPoint(t,e){return r.b2Transform.TransposeMultiplyVec2(this.m_xf,t,e)}GetLocalVector(t,e){return r.b2Rot.TransposeMultiplyVec2(this.m_xf.q,t,e)}GetLinearVelocityFromWorldPoint(t,e){return r.b2Vec2.AddCrossScalarVec2(this.m_linearVelocity,this.m_angularVelocity,r.b2Vec2.Subtract(t,this.m_sweep.c,r.b2Vec2.s_t0),e)}GetLinearVelocityFromLocalPoint(t,e){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(t,e),e)}GetLinearDamping(){return this.m_linearDamping}SetLinearDamping(t){this.m_linearDamping=t}GetAngularDamping(){return this.m_angularDamping}SetAngularDamping(t){this.m_angularDamping=t}GetGravityScale(){return this.m_gravityScale}SetGravityScale(t){this.m_gravityScale=t}SetType(t){if(h.b2Assert(!this.m_world.IsLocked()),this.m_type===t)return;this.m_type=t,this.ResetMassData(),this.m_type===i.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_awakeFlag=!1,this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;let e=this.m_contactList;for(;e;){const t=e;e=e.next,this.m_world.m_contactManager.Destroy(t.contact)}this.m_contactList=null;const s=this.m_world.m_contactManager.m_broadPhase;for(let t=this.m_fixtureList;t;t=t.m_next)for(const e of t.m_proxies)s.TouchProxy(e.treeNode)}GetType(){return this.m_type}SetBullet(t){this.m_bulletFlag=t}IsBullet(){return this.m_bulletFlag}SetSleepingAllowed(t){this.m_autoSleepFlag=t,t||this.SetAwake(!0)}IsSleepingAllowed(){return this.m_autoSleepFlag}SetAwake(t){this.m_type!==i.b2_staticBody&&(t?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0))}IsAwake(){return this.m_awakeFlag}SetEnabled(t){if(h.b2Assert(!this.m_world.IsLocked()),t===this.IsEnabled())return;this.m_enabledFlag=t;const e=this.m_world.m_contactManager.m_broadPhase;if(t){for(let t=this.m_fixtureList;t;t=t.m_next)t.CreateProxies(e,this.m_xf);this.m_world.m_newContacts=!0}else{for(let t=this.m_fixtureList;t;t=t.m_next)t.DestroyProxies(e);let t=this.m_contactList;for(;t;){const e=t;t=t.next,this.m_world.m_contactManager.Destroy(e.contact)}this.m_contactList=null}}IsEnabled(){return this.m_enabledFlag}SetFixedRotation(t){this.m_fixedRotationFlag!==t&&(this.m_fixedRotationFlag=t,this.m_angularVelocity=0,this.ResetMassData())}IsFixedRotation(){return this.m_fixedRotationFlag}GetFixtureList(){return this.m_fixtureList}GetJointList(){return this.m_jointList}GetContactList(){return this.m_contactList}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}GetWorld(){return this.m_world}SynchronizeFixtures(){const t=this.m_world.m_contactManager.m_broadPhase;if(this.m_awakeFlag){const e=l.SynchronizeFixtures_s_xf1;e.q.Set(this.m_sweep.a0),r.b2Rot.MultiplyVec2(e.q,this.m_sweep.localCenter,e.p),r.b2Vec2.Subtract(this.m_sweep.c0,e.p,e.p);for(let i=this.m_fixtureList;i;i=i.m_next)i.Synchronize(t,e,this.m_xf)}else for(let e=this.m_fixtureList;e;e=e.m_next)e.Synchronize(t,this.m_xf,this.m_xf)}SynchronizeTransform(){this.m_xf.q.Set(this.m_sweep.a),r.b2Rot.MultiplyVec2(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),r.b2Vec2.Subtract(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}ShouldCollide(t){return(this.m_type===i.b2_dynamicBody||t.m_type===i.b2_dynamicBody)&&this.ShouldCollideConnected(t)}ShouldCollideConnected(t){for(let e=this.m_jointList;e;e=e.next)if(e.other===t&&!e.joint.m_collideConnected)return!1;return!0}Advance(t){this.m_sweep.Advance(t),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.Set(this.m_sweep.a),r.b2Rot.MultiplyVec2(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),r.b2Vec2.Subtract(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}}t.exports.b2Body=l,l.SetMassData_s_oldCenter=new r.b2Vec2,l.ResetMassData_s_localCenter=new r.b2Vec2,l.ResetMassData_s_oldCenter=new r.b2Vec2,l.ResetMassData_s_massData=new n.b2MassData,l.SynchronizeFixtures_s_xf1=new r.b2Transform})),a.register("cOy3h",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2Shape=t.exports.b2ShapeType=t.exports.b2MassData=void 0;var i,s=a("4L5iv");t.exports.b2MassData=class{constructor(){this.mass=0,this.center=new s.b2Vec2,this.I=0}},(i=t.exports.b2ShapeType||(t.exports.b2ShapeType={}))[i.e_unknown=-1]="e_unknown",i[i.e_circle=0]="e_circle",i[i.e_edge=1]="e_edge",i[i.e_polygon=2]="e_polygon",i[i.e_chain=3]="e_chain",i[i.e_typeCount=4]="e_typeCount";t.exports.b2Shape=class{constructor(t,e){this.m_radius=0,this.m_type=t,this.m_radius=e}Copy(t){return this.m_radius=t.m_radius,this}GetType(){return this.m_type}}})),a.register("bmDAE",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2Fixture=t.exports.b2FixtureProxy=t.exports.b2DefaultFilter=void 0;var i=a("4L5iv"),s=a("5IUIQ"),r=a("cOy3h"),n=a("1Zs4L"),o=a("btCRw");const h={c1:new i.b2Vec2,c2:new i.b2Vec2};t.exports.b2DefaultFilter={categoryBits:1,maskBits:65535,groupIndex:0};class l{constructor(t,e,i,r){this.aabb=new s.b2AABB,this.fixture=t,this.childIndex=r,t.m_shape.ComputeAABB(this.aabb,i,r),this.treeNode=e.CreateProxy(this.aabb,this)}}t.exports.b2FixtureProxy=l;const c=new s.b2AABB,d=new s.b2AABB,u=new i.b2Vec2;t.exports.b2Fixture=class{constructor(e,i){var s,r,n,a,h;this.m_density=0,this.m_next=null,this.m_friction=0,this.m_restitution=0,this.m_restitutionThreshold=0,this.m_proxies=[],this.m_isSensor=!1,this.m_userData=null,this.m_body=e,this.m_shape=i.shape.Clone(),this.m_userData=i.userData,this.m_friction=null!==(s=i.friction)&&void 0!==s?s:.2,this.m_restitution=null!==(r=i.restitution)&&void 0!==r?r:0,this.m_restitutionThreshold=null!==(n=i.restitutionThreshold)&&void 0!==n?n:o.b2_lengthUnitsPerMeter,this.m_filter={...t.exports.b2DefaultFilter,...i.filter},this.m_isSensor=null!==(a=i.isSensor)&&void 0!==a&&a,this.m_density=null!==(h=i.density)&&void 0!==h?h:0}get m_proxyCount(){return this.m_proxies.length}GetType(){return this.m_shape.GetType()}GetShape(){return this.m_shape}SetSensor(t){t!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=t)}IsSensor(){return this.m_isSensor}SetFilterData(e){var i,s,r;this.m_filter.categoryBits=null!==(i=e.categoryBits)&&void 0!==i?i:t.exports.b2DefaultFilter.categoryBits,this.m_filter.groupIndex=null!==(s=e.groupIndex)&&void 0!==s?s:t.exports.b2DefaultFilter.groupIndex,this.m_filter.maskBits=null!==(r=e.maskBits)&&void 0!==r?r:t.exports.b2DefaultFilter.maskBits,this.Refilter()}GetFilterData(){return this.m_filter}Refilter(){let t=this.m_body.GetContactList();for(;t;){const{contact:e}=t,i=e.GetFixtureA(),s=e.GetFixtureB();i!==this&&s!==this||e.FlagForFiltering(),t=t.next}const e=this.m_body.GetWorld().m_contactManager.m_broadPhase;for(const t of this.m_proxies)e.TouchProxy(t.treeNode)}GetBody(){return this.m_body}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}TestPoint(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)}RayCast(t,e,i){return this.m_shape.RayCast(t,e,this.m_body.GetTransform(),i)}GetMassData(t=new r.b2MassData){return this.m_shape.ComputeMass(t,this.m_density),t}SetDensity(t){this.m_density=t}GetDensity(){return this.m_density}GetFriction(){return this.m_friction}SetFriction(t){this.m_friction=t}GetRestitution(){return this.m_restitution}SetRestitution(t){this.m_restitution=t}SetRestitutionThreshold(t){this.m_restitutionThreshold=t}GetAABB(t){return this.m_proxies[t].aabb}CreateProxies(t,e){n.b2Assert(0===this.m_proxies.length),this.m_proxies.length=this.m_shape.GetChildCount();for(let i=0;i<this.m_proxies.length;++i)this.m_proxies[i]=new l(this,t,e,i)}DestroyProxies(t){for(const e of this.m_proxies)t.DestroyProxy(e.treeNode);this.m_proxies.length=0}Synchronize(t,e,s){const{c1:r,c2:n}=h,o=u;for(const a of this.m_proxies){const h=c,l=d;this.m_shape.ComputeAABB(h,e,a.childIndex),this.m_shape.ComputeAABB(l,s,a.childIndex),a.aabb.Combine2(h,l),i.b2Vec2.Subtract(l.GetCenter(n),h.GetCenter(r),o),t.MoveProxy(a.treeNode,a.aabb,o)}}}})),a.register("5IUIQ",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2TestOverlap=t.exports.b2ClipSegmentToLine=t.exports.b2AABB=t.exports.b2RayCastOutput=t.exports.b2RayCastInput=t.exports.b2ClipVertex=t.exports.b2GetPointStates=t.exports.b2PointState=t.exports.b2WorldManifold=t.exports.b2Manifold=t.exports.b2ManifoldType=t.exports.b2ManifoldPoint=t.exports.b2ContactID=t.exports.b2ContactFeature=t.exports.b2ContactFeatureType=void 0;var i,s,r,n,o,h,l=a("1Zs4L"),c=a("4L5iv"),d=a("dKzQd");(s=i=t.exports.b2ContactFeatureType||(t.exports.b2ContactFeatureType={}))[s.e_vertex=0]="e_vertex",s[s.e_face=1]="e_face";class u{constructor(){this.m_key=0,this.m_key_invalid=!1,this.m_indexA=0,this.m_indexB=0,this.m_typeA=i.e_vertex,this.m_typeB=i.e_vertex}get key(){return this.m_key_invalid&&(this.m_key_invalid=!1,this.m_key=this.m_indexA|this.m_indexB<<8|this.m_typeA<<16|this.m_typeB<<24),this.m_key}set key(t){this.m_key=t,this.m_key_invalid=!1,this.m_indexA=255&this.m_key,this.m_indexB=this.m_key>>8&255,this.m_typeA=this.m_key>>16&255,this.m_typeB=this.m_key>>24&255}get indexA(){return this.m_indexA}set indexA(t){this.m_indexA=t,this.m_key_invalid=!0}get indexB(){return this.m_indexB}set indexB(t){this.m_indexB=t,this.m_key_invalid=!0}get typeA(){return this.m_typeA}set typeA(t){this.m_typeA=t,this.m_key_invalid=!0}get typeB(){return this.m_typeB}set typeB(t){this.m_typeB=t,this.m_key_invalid=!0}}t.exports.b2ContactFeature=u;class p{constructor(){this.cf=new u}Copy(t){return this.key=t.key,this}Clone(){return(new p).Copy(this)}get key(){return this.cf.key}set key(t){this.cf.key=t}}t.exports.b2ContactID=p;class m{constructor(){this.localPoint=new c.b2Vec2,this.normalImpulse=0,this.tangentImpulse=0,this.id=new p}Reset(){this.localPoint.SetZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.key=0}Copy(t){return this.localPoint.Copy(t.localPoint),this.normalImpulse=t.normalImpulse,this.tangentImpulse=t.tangentImpulse,this.id.Copy(t.id),this}}t.exports.b2ManifoldPoint=m,(n=r=t.exports.b2ManifoldType||(t.exports.b2ManifoldType={}))[n.e_circles=0]="e_circles",n[n.e_faceA=1]="e_faceA",n[n.e_faceB=2]="e_faceB";class f{constructor(){this.points=l.b2MakeArray(l.b2_maxManifoldPoints,m),this.localNormal=new c.b2Vec2,this.localPoint=new c.b2Vec2,this.type=r.e_circles,this.pointCount=0}Reset(){for(let t=0;t<l.b2_maxManifoldPoints;++t)this.points[t].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=r.e_circles,this.pointCount=0}Copy(t){this.pointCount=t.pointCount;for(let e=0;e<l.b2_maxManifoldPoints;++e)this.points[e].Copy(t.points[e]);return this.localNormal.Copy(t.localNormal),this.localPoint.Copy(t.localPoint),this.type=t.type,this}Clone(){return(new f).Copy(this)}}t.exports.b2Manifold=f;class _{constructor(){this.normal=new c.b2Vec2,this.points=l.b2MakeArray(l.b2_maxManifoldPoints,c.b2Vec2),this.separations=l.b2MakeNumberArray(l.b2_maxManifoldPoints)}Initialize(t,e,i,s,n){if(0!==t.pointCount)switch(t.type){case r.e_circles:{this.normal.Set(1,0);const r=c.b2Transform.MultiplyVec2(e,t.localPoint,_.Initialize_s_pointA),o=c.b2Transform.MultiplyVec2(s,t.points[0].localPoint,_.Initialize_s_pointB);c.b2Vec2.DistanceSquared(r,o)>l.b2_epsilon_sq&&c.b2Vec2.Subtract(o,r,this.normal).Normalize();const a=c.b2Vec2.AddScaled(r,i,this.normal,_.Initialize_s_cA),h=c.b2Vec2.SubtractScaled(o,n,this.normal,_.Initialize_s_cB);c.b2Vec2.Mid(a,h,this.points[0]),this.separations[0]=c.b2Vec2.Dot(c.b2Vec2.Subtract(h,a,c.b2Vec2.s_t0),this.normal);break}case r.e_faceA:{c.b2Rot.MultiplyVec2(e.q,t.localNormal,this.normal);const r=c.b2Transform.MultiplyVec2(e,t.localPoint,_.Initialize_s_planePoint);for(let e=0;e<t.pointCount;++e){const o=c.b2Transform.MultiplyVec2(s,t.points[e].localPoint,_.Initialize_s_clipPoint),a=i-c.b2Vec2.Dot(c.b2Vec2.Subtract(o,r,c.b2Vec2.s_t0),this.normal),h=c.b2Vec2.AddScaled(o,a,this.normal,_.Initialize_s_cA),l=c.b2Vec2.SubtractScaled(o,n,this.normal,_.Initialize_s_cB);c.b2Vec2.Mid(h,l,this.points[e]),this.separations[e]=c.b2Vec2.Dot(c.b2Vec2.Subtract(l,h,c.b2Vec2.s_t0),this.normal)}break}case r.e_faceB:{c.b2Rot.MultiplyVec2(s.q,t.localNormal,this.normal);const r=c.b2Transform.MultiplyVec2(s,t.localPoint,_.Initialize_s_planePoint);for(let s=0;s<t.pointCount;++s){const o=c.b2Transform.MultiplyVec2(e,t.points[s].localPoint,_.Initialize_s_clipPoint),a=n-c.b2Vec2.Dot(c.b2Vec2.Subtract(o,r,c.b2Vec2.s_t0),this.normal),h=c.b2Vec2.AddScaled(o,a,this.normal,_.Initialize_s_cB),l=c.b2Vec2.SubtractScaled(o,i,this.normal,_.Initialize_s_cA);c.b2Vec2.Mid(l,h,this.points[s]),this.separations[s]=c.b2Vec2.Dot(c.b2Vec2.Subtract(l,h,c.b2Vec2.s_t0),this.normal)}this.normal.Negate();break}}}}t.exports.b2WorldManifold=_,_.Initialize_s_pointA=new c.b2Vec2,_.Initialize_s_pointB=new c.b2Vec2,_.Initialize_s_cA=new c.b2Vec2,_.Initialize_s_cB=new c.b2Vec2,_.Initialize_s_planePoint=new c.b2Vec2,_.Initialize_s_clipPoint=new c.b2Vec2,(h=o=t.exports.b2PointState||(t.exports.b2PointState={}))[h.b2_nullState=0]="b2_nullState",h[h.b2_addState=1]="b2_addState",h[h.b2_persistState=2]="b2_persistState",h[h.b2_removeState=3]="b2_removeState",t.exports.b2GetPointStates=function(t,e,i,s){let r;for(r=0;r<i.pointCount;++r){const{key:e}=i.points[r].id;t[r]=o.b2_removeState;for(let i=0;i<s.pointCount;++i)if(s.points[i].id.key===e){t[r]=o.b2_persistState;break}}for(;r<l.b2_maxManifoldPoints;++r)t[r]=o.b2_nullState;for(r=0;r<s.pointCount;++r){const{key:t}=s.points[r].id;e[r]=o.b2_addState;for(let s=0;s<i.pointCount;++s)if(i.points[s].id.key===t){e[r]=o.b2_persistState;break}}for(;r<l.b2_maxManifoldPoints;++r)e[r]=o.b2_nullState};t.exports.b2ClipVertex=class{constructor(){this.v=new c.b2Vec2,this.id=new p}Copy(t){return this.v.Copy(t.v),this.id.Copy(t.id),this}};t.exports.b2RayCastInput=class{constructor(){this.p1=new c.b2Vec2,this.p2=new c.b2Vec2,this.maxFraction=1}Copy(t){return this.p1.Copy(t.p1),this.p2.Copy(t.p2),this.maxFraction=t.maxFraction,this}};t.exports.b2RayCastOutput=class{constructor(){this.normal=new c.b2Vec2,this.fraction=0}Copy(t){return this.normal.Copy(t.normal),this.fraction=t.fraction,this}};t.exports.b2AABB=class{constructor(){this.lowerBound=new c.b2Vec2,this.upperBound=new c.b2Vec2}Copy(t){return this.lowerBound.Copy(t.lowerBound),this.upperBound.Copy(t.upperBound),this}IsValid(){return this.lowerBound.IsValid()&&this.upperBound.IsValid()&&this.upperBound.x>=this.lowerBound.x&&this.upperBound.y>=this.lowerBound.y}GetCenter(t){return c.b2Vec2.Mid(this.lowerBound,this.upperBound,t)}GetExtents(t){return c.b2Vec2.Extents(this.lowerBound,this.upperBound,t)}GetPerimeter(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))}Combine1(t){return this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this}Combine2(t,e){return this.lowerBound.x=Math.min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,e.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,e.upperBound.y),this}static Combine(t,e,i){return i.Combine2(t,e),i}Contains(t){return this.lowerBound.x<=t.lowerBound.x&&this.lowerBound.y<=t.lowerBound.y&&t.upperBound.x<=this.upperBound.x&&t.upperBound.y<=this.upperBound.y}RayCast(t,e){let i=-l.b2_maxFloat,s=l.b2_maxFloat;const r=e.p1.x,n=e.p1.y,o=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,h=Math.abs(o),c=Math.abs(a),{normal:d}=t;if(h<l.b2_epsilon){if(r<this.lowerBound.x||this.upperBound.x<r)return!1}else{const t=1/o;let e=(this.lowerBound.x-r)*t,n=(this.upperBound.x-r)*t,a=-1;if(e>n){const t=e;e=n,n=t,a=1}if(e>i&&(d.x=a,d.y=0,i=e),s=Math.min(s,n),i>s)return!1}if(c<l.b2_epsilon){if(n<this.lowerBound.y||this.upperBound.y<n)return!1}else{const t=1/a;let e=(this.lowerBound.y-n)*t,r=(this.upperBound.y-n)*t,o=-1;if(e>r){const t=e;e=r,r=t,o=1}if(e>i&&(d.x=0,d.y=o,i=e),s=Math.min(s,r),i>s)return!1}return!(i<0||e.maxFraction<i)&&(t.fraction=i,!0)}TestContain(t){return!(t.x<this.lowerBound.x||this.upperBound.x<t.x)&&!(t.y<this.lowerBound.y||this.upperBound.y<t.y)}TestOverlap(t){return!(this.upperBound.x<t.lowerBound.x)&&(!(this.upperBound.y<t.lowerBound.y)&&(!(t.upperBound.x<this.lowerBound.x)&&!(t.upperBound.y<this.lowerBound.y)))}},t.exports.b2ClipSegmentToLine=function(t,[e,s],r,n,o){let a=0;const h=c.b2Vec2.Dot(r,e.v)-n,l=c.b2Vec2.Dot(r,s.v)-n;if(h<=0&&t[a++].Copy(e),l<=0&&t[a++].Copy(s),h*l<0){const r=h/(h-l),{v:n,id:c}=t[a];n.x=e.v.x+r*(s.v.x-e.v.x),n.y=e.v.y+r*(s.v.y-e.v.y),c.cf.indexA=o,c.cf.indexB=e.id.cf.indexB,c.cf.typeA=i.e_vertex,c.cf.typeB=i.e_face,++a}return a};const g=new d.b2DistanceInput,b=new d.b2SimplexCache,y=new d.b2DistanceOutput;t.exports.b2TestOverlap=function(t,e,i,s,r,n){const o=g.Reset();o.proxyA.SetShape(t,e),o.proxyB.SetShape(i,s),o.transformA.Copy(r),o.transformB.Copy(n),o.useRadii=!0;const a=b.Reset();a.count=0;const h=y.Reset();return d.b2Distance(h,a,o),h.distance<10*l.b2_epsilon}})),a.register("dKzQd",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2ShapeCast=t.exports.b2Distance=t.exports.b2Gjk=t.exports.b2ShapeCastOutput=t.exports.b2ShapeCastInput=t.exports.b2DistanceOutput=t.exports.b2DistanceInput=t.exports.b2SimplexCache=t.exports.b2DistanceProxy=void 0;var i=a("1Zs4L"),s=a("4L5iv");class r{constructor(){this.m_buffer=i.b2MakeArray(2,s.b2Vec2),this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0}Copy(t){return t.m_vertices===t.m_buffer?(this.m_vertices=this.m_buffer,this.m_buffer[0].Copy(t.m_buffer[0]),this.m_buffer[1].Copy(t.m_buffer[1])):this.m_vertices=t.m_vertices,this.m_count=t.m_count,this.m_radius=t.m_radius,this}Reset(){return this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0,this}SetShape(t,e){t.SetupDistanceProxy(this,e)}SetVerticesRadius(t,e,i){this.m_vertices=t,this.m_count=e,this.m_radius=i}GetSupport(t){let e=0,i=s.b2Vec2.Dot(this.m_vertices[0],t);for(let r=1;r<this.m_count;++r){const n=s.b2Vec2.Dot(this.m_vertices[r],t);n>i&&(e=r,i=n)}return e}GetSupportVertex(t){let e=0,i=s.b2Vec2.Dot(this.m_vertices[0],t);for(let r=1;r<this.m_count;++r){const n=s.b2Vec2.Dot(this.m_vertices[r],t);n>i&&(e=r,i=n)}return this.m_vertices[e]}GetVertexCount(){return this.m_count}GetVertex(t){return this.m_vertices[t]}}t.exports.b2DistanceProxy=r;t.exports.b2SimplexCache=class{constructor(){this.metric=0,this.count=0,this.indexA=[0,0,0],this.indexB=[0,0,0]}Reset(){return this.metric=0,this.count=0,this}};t.exports.b2DistanceInput=class{constructor(){this.proxyA=new r,this.proxyB=new r,this.transformA=new s.b2Transform,this.transformB=new s.b2Transform,this.useRadii=!1}Reset(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this}};t.exports.b2DistanceOutput=class{constructor(){this.pointA=new s.b2Vec2,this.pointB=new s.b2Vec2,this.distance=0,this.iterations=0}Reset(){return this.pointA.SetZero(),this.pointB.SetZero(),this.distance=0,this.iterations=0,this}};t.exports.b2ShapeCastInput=class{constructor(){this.proxyA=new r,this.proxyB=new r,this.transformA=new s.b2Transform,this.transformB=new s.b2Transform,this.translationB=new s.b2Vec2}};t.exports.b2ShapeCastOutput=class{constructor(){this.point=new s.b2Vec2,this.normal=new s.b2Vec2,this.lambda=0,this.iterations=0}},t.exports.b2Gjk={calls:0,iters:0,maxIters:0,reset(){this.calls=0,this.iters=0,this.maxIters=0}};class n{constructor(){this.wA=new s.b2Vec2,this.wB=new s.b2Vec2,this.w=new s.b2Vec2,this.a=0,this.indexA=0,this.indexB=0}Copy(t){return this.wA.Copy(t.wA),this.wB.Copy(t.wB),this.w.Copy(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB,this}}class o{constructor(){this.m_v1=new n,this.m_v2=new n,this.m_v3=new n,this.m_count=0,this.m_vertices=[this.m_v1,this.m_v2,this.m_v3]}ReadCache(t,e,r,n,o){this.m_count=t.count;const a=this.m_vertices;for(let i=0;i<this.m_count;++i){const h=a[i];h.indexA=t.indexA[i],h.indexB=t.indexB[i];const l=e.GetVertex(h.indexA),c=n.GetVertex(h.indexB);s.b2Transform.MultiplyVec2(r,l,h.wA),s.b2Transform.MultiplyVec2(o,c,h.wB),s.b2Vec2.Subtract(h.wB,h.wA,h.w),h.a=0}if(this.m_count>1){const e=t.metric,s=this.GetMetric();(s<.5*e||2*e<s||s<i.b2_epsilon)&&(this.m_count=0)}if(0===this.m_count){const t=a[0];t.indexA=0,t.indexB=0;const i=e.GetVertex(0),h=n.GetVertex(0);s.b2Transform.MultiplyVec2(r,i,t.wA),s.b2Transform.MultiplyVec2(o,h,t.wB),s.b2Vec2.Subtract(t.wB,t.wA,t.w),t.a=1,this.m_count=1}}WriteCache(t){t.metric=this.GetMetric(),t.count=this.m_count;const e=this.m_vertices;for(let i=0;i<this.m_count;++i)t.indexA[i]=e[i].indexA,t.indexB[i]=e[i].indexB}GetSearchDirection(t){switch(this.m_count){case 1:return s.b2Vec2.Negate(this.m_v1.w,t);case 2:{const e=s.b2Vec2.Subtract(this.m_v2.w,this.m_v1.w,t);return s.b2Vec2.Cross(e,s.b2Vec2.Negate(this.m_v1.w,s.b2Vec2.s_t0))>0?s.b2Vec2.CrossOneVec2(e,t):s.b2Vec2.CrossVec2One(e,t)}default:return t.SetZero()}}GetClosestPoint(t){switch(this.m_count){case 0:return t.SetZero();case 1:return t.Copy(this.m_v1.w);case 2:return t.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:default:return t.SetZero()}}GetWitnessPoints(t,e){switch(this.m_count){case 0:break;case 1:t.Copy(this.m_v1.wA),e.Copy(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y}}GetMetric(){switch(this.m_count){case 0:case 1:return 0;case 2:return s.b2Vec2.Distance(this.m_v1.w,this.m_v2.w);case 3:return s.b2Vec2.Cross(s.b2Vec2.Subtract(this.m_v2.w,this.m_v1.w,s.b2Vec2.s_t0),s.b2Vec2.Subtract(this.m_v3.w,this.m_v1.w,s.b2Vec2.s_t1));default:return 0}}Solve2(){const t=this.m_v1.w,e=this.m_v2.w,i=s.b2Vec2.Subtract(e,t,o.s_e12),r=-s.b2Vec2.Dot(t,i);if(r<=0)return this.m_v1.a=1,void(this.m_count=1);const n=s.b2Vec2.Dot(e,i);if(n<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);const a=1/(n+r);this.m_v1.a=n*a,this.m_v2.a=r*a,this.m_count=2}Solve3(){const t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,r=s.b2Vec2.Subtract(e,t,o.s_e12),n=s.b2Vec2.Dot(t,r),a=s.b2Vec2.Dot(e,r),h=-n,l=s.b2Vec2.Subtract(i,t,o.s_e13),c=s.b2Vec2.Dot(t,l),d=s.b2Vec2.Dot(i,l),u=-c,p=s.b2Vec2.Subtract(i,e,o.s_e23),m=s.b2Vec2.Dot(e,p),f=s.b2Vec2.Dot(i,p),_=-m,g=s.b2Vec2.Cross(r,l),b=g*s.b2Vec2.Cross(e,i),y=g*s.b2Vec2.Cross(i,t),w=g*s.b2Vec2.Cross(t,e);if(h<=0&&u<=0)return this.m_v1.a=1,void(this.m_count=1);if(a>0&&h>0&&w<=0){const t=1/(a+h);return this.m_v1.a=a*t,this.m_v2.a=h*t,void(this.m_count=2)}if(d>0&&u>0&&y<=0){const t=1/(d+u);return this.m_v1.a=d*t,this.m_v3.a=u*t,this.m_count=2,void this.m_v2.Copy(this.m_v3)}if(a<=0&&_<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);if(d<=0&&f<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v3);if(f>0&&_>0&&b<=0){const t=1/(f+_);return this.m_v2.a=f*t,this.m_v3.a=_*t,this.m_count=2,void this.m_v1.Copy(this.m_v3)}const v=1/(b+y+w);this.m_v1.a=b*v,this.m_v2.a=y*v,this.m_v3.a=w*v,this.m_count=3}}o.s_e12=new s.b2Vec2,o.s_e13=new s.b2Vec2,o.s_e23=new s.b2Vec2;const h=new o,l=[0,0,0],c=[0,0,0],d=new s.b2Vec2,u=new s.b2Vec2,p=new s.b2Vec2,m=new s.b2Vec2,f=new s.b2Vec2;t.exports.b2Distance=function(e,r,n){++t.exports.b2Gjk.calls;const{proxyA:o,proxyB:a,transformA:_,transformB:g}=n,b=h;b.ReadCache(r,o,_,a,g);const y=b.m_vertices,w=l,v=c;let x=0,S=0;for(;S<20;){x=b.m_count;for(let t=0;t<x;++t)w[t]=y[t].indexA,v[t]=y[t].indexB;switch(b.m_count){case 1:break;case 2:b.Solve2();break;case 3:b.Solve3()}if(3===b.m_count)break;const e=b.GetSearchDirection(u);if(e.LengthSquared()<i.b2_epsilon_sq)break;const r=y[b.m_count];r.indexA=o.GetSupport(s.b2Rot.TransposeMultiplyVec2(_.q,s.b2Vec2.Negate(e,s.b2Vec2.s_t0),m)),s.b2Transform.MultiplyVec2(_,o.GetVertex(r.indexA),r.wA),r.indexB=a.GetSupport(s.b2Rot.TransposeMultiplyVec2(g.q,e,f)),s.b2Transform.MultiplyVec2(g,a.GetVertex(r.indexB),r.wB),s.b2Vec2.Subtract(r.wB,r.wA,r.w),++S,++t.exports.b2Gjk.iters;let n=!1;for(let t=0;t<x;++t)if(r.indexA===w[t]&&r.indexB===v[t]){n=!0;break}if(n)break;++b.m_count}if(t.exports.b2Gjk.maxIters=Math.max(t.exports.b2Gjk.maxIters,S),b.GetWitnessPoints(e.pointA,e.pointB),e.distance=s.b2Vec2.Distance(e.pointA,e.pointB),e.iterations=S,b.WriteCache(r),n.useRadii){const t=o.m_radius,r=a.m_radius;if(e.distance>t+r&&e.distance>i.b2_epsilon){e.distance-=t+r;const i=s.b2Vec2.Subtract(e.pointB,e.pointA,p);i.Normalize(),e.pointA.AddScaled(t,i),e.pointB.SubtractScaled(r,i)}else{const t=s.b2Vec2.Mid(e.pointA,e.pointB,d);e.pointA.Copy(t),e.pointB.Copy(t),e.distance=0}}};const _=new s.b2Vec2,g=new o,b=new s.b2Vec2,y=new s.b2Vec2,w=new s.b2Vec2,v=new s.b2Vec2,x=new s.b2Vec2,S=new s.b2Vec2;t.exports.b2ShapeCast=function(t,e){t.iterations=0,t.lambda=1,t.normal.SetZero(),t.point.SetZero();const{proxyA:r,proxyB:n}=e,o=Math.max(r.m_radius,i.b2_polygonRadius),a=o+Math.max(n.m_radius,i.b2_polygonRadius),h=e.transformA,l=e.transformB,c=e.translationB,d=_.SetZero();let u=0;const p=g;p.m_count=0;const m=p.m_vertices;let f=r.GetSupport(s.b2Rot.TransposeMultiplyVec2(h.q,s.b2Vec2.Negate(c,s.b2Vec2.s_t1),s.b2Vec2.s_t0)),A=s.b2Transform.MultiplyVec2(h,r.GetVertex(f),b),P=n.GetSupport(s.b2Rot.TransposeMultiplyVec2(l.q,c,s.b2Vec2.s_t0)),C=s.b2Transform.MultiplyVec2(l,n.GetVertex(P),y);const T=s.b2Vec2.Subtract(A,C,w),E=Math.max(i.b2_polygonRadius,a-i.b2_polygonRadius),R=.5*i.b2_linearSlop;let B=0;for(;B<20&&T.Length()-E>R;){t.iterations+=1,f=r.GetSupport(s.b2Rot.TransposeMultiplyVec2(h.q,s.b2Vec2.Negate(T,s.b2Vec2.s_t1),s.b2Vec2.s_t0)),A=s.b2Transform.MultiplyVec2(h,r.GetVertex(f),b),P=n.GetSupport(s.b2Rot.TransposeMultiplyVec2(l.q,T,s.b2Vec2.s_t0)),C=s.b2Transform.MultiplyVec2(l,n.GetVertex(P),y);const e=s.b2Vec2.Subtract(A,C,v);T.Normalize();const i=s.b2Vec2.Dot(T,e),o=s.b2Vec2.Dot(T,c);if(i-E>u*o){if(o<=0)return!1;if(u=(i-E)/o,u>1)return!1;s.b2Vec2.Negate(T,d),p.m_count=0}const a=m[p.m_count];switch(a.indexA=P,s.b2Vec2.AddScaled(C,u,c,a.wA),a.indexB=f,a.wB.Copy(A),s.b2Vec2.Subtract(a.wB,a.wA,a.w),a.a=1,p.m_count+=1,p.m_count){case 1:break;case 2:p.Solve2();break;case 3:p.Solve3()}if(3===p.m_count)return!1;p.GetClosestPoint(T),++B}if(0===B)return!1;const D=x,I=S;return p.GetWitnessPoints(D,I),T.LengthSquared()>0&&(s.b2Vec2.Negate(T,d),d.Normalize()),s.b2Vec2.AddScaled(D,o,d,t.point),t.normal.Copy(d),t.lambda=u,t.iterations=B,!0}})),fs(a("1MhDO"),ps),a.register("9oZZB",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2Timer=void 0;t.exports.b2Timer=class{constructor(){this.m_start=performance.now()}Reset(){return this.m_start=performance.now(),this}GetMilliseconds(){return performance.now()-this.m_start}}})),fs(a("9oZZB"),ps),a.register("dK9Ki",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2_augment=void 0,t.exports.b2_augment=function(t,e){for(const i of Object.keys(e)){const s=e[i],r=t[i],n=function(...t){return s.call(this,r.bind(this),...t)};Object.defineProperty(n,"name",{value:i}),t[i]=n}}})),fs(a("dK9Ki"),ps),fs(a("5IUIQ"),ps),fs(a("dKzQd"),ps),a.register("cz6ik",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2BroadPhase=void 0;var i=a("1Zs4L"),s=a("i6G4P");t.exports.b2BroadPhase=class{constructor(){this.m_tree=new s.b2DynamicTree,this.m_proxyCount=0,this.m_moveCount=0,this.m_moveBuffer=[],this.m_pairCount=0,this.m_pairBuffer=[],this.m_queryProxy=new s.b2TreeNode,this.QueryCallback=t=>(t.id===this.m_queryProxy.id||t.moved&&t.id>this.m_queryProxy.id||(this.m_pairBuffer[this.m_pairCount]=t.id<this.m_queryProxy.id?[t,this.m_queryProxy]:[this.m_queryProxy,t],++this.m_pairCount),!0)}CreateProxy(t,e){const i=this.m_tree.CreateProxy(t,e);return++this.m_proxyCount,this.BufferMove(i),i}DestroyProxy(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)}MoveProxy(t,e,i){this.m_tree.MoveProxy(t,e,i)&&this.BufferMove(t)}TouchProxy(t){this.BufferMove(t)}GetProxyCount(){return this.m_proxyCount}UpdatePairs(t){this.m_pairCount=0;for(let t=0;t<this.m_moveCount;++t){const e=this.m_moveBuffer[t];if(null===e)continue;this.m_queryProxy=e;const i=e.aabb;this.m_tree.Query(i,this.QueryCallback)}for(let e=0;e<this.m_pairCount;++e){const s=this.m_pairBuffer[e];t(i.b2Verify(s[0].userData),i.b2Verify(s[1].userData))}for(let t=0;t<this.m_moveCount;++t){const e=this.m_moveBuffer[t];e&&(e.moved=!1)}this.m_moveCount=0}Query(t,e){this.m_tree.Query(t,e)}QueryPoint(t,e){this.m_tree.QueryPoint(t,e)}RayCast(t,e){this.m_tree.RayCast(t,e)}GetTreeHeight(){return this.m_tree.GetHeight()}GetTreeBalance(){return this.m_tree.GetMaxBalance()}GetTreeQuality(){return this.m_tree.GetAreaRatio()}ShiftOrigin(t){this.m_tree.ShiftOrigin(t)}BufferMove(t){this.m_moveBuffer[this.m_moveCount]=t,++this.m_moveCount}UnBufferMove(t){const e=this.m_moveBuffer.indexOf(t);this.m_moveBuffer[e]=null}}})),a.register("i6G4P",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2DynamicTree=t.exports.b2TreeNode=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("5IUIQ");const n={stack:[],t:new s.b2Vec2,r:new s.b2Vec2,v:new s.b2Vec2,abs_v:new s.b2Vec2,segmentAABB:new r.b2AABB,subInput:new r.b2RayCastInput,combinedAABB:new r.b2AABB,aabb:new r.b2AABB,fatAABB:new r.b2AABB,hugeAABB:new r.b2AABB,c:new s.b2Vec2,h:new s.b2Vec2};let o=0;class h{constructor(){this.aabb=new r.b2AABB,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=0,this.moved=!1,this.id=o++}Reset(){this.child1=null,this.child2=null,this.height=-1,this.userData=null}IsLeaf(){return null===this.child1}GetArea(){if(this.IsLeaf())return 0;let t=this.aabb.GetPerimeter();return this.child1&&(t+=this.child1.GetArea()),this.child2&&(t+=this.child2.GetArea()),t}ComputeHeight(){if(this.IsLeaf())return 0;i.b2Assert(null!==this.child1&&null!==this.child2);const t=i.b2Verify(this.child1).ComputeHeight(),e=i.b2Verify(this.child2).ComputeHeight();return 1+Math.max(t,e)}GetMaxBalance(){if(this.height<=1)return 0;const t=i.b2Verify(this.child1),e=i.b2Verify(this.child2);return Math.max(t.GetMaxBalance(),e.GetMaxBalance(),Math.abs(e.height-t.height))}ShiftOrigin(t){this.height<=1||(i.b2Verify(this.child1).ShiftOrigin(t),i.b2Verify(this.child2).ShiftOrigin(t),this.aabb.lowerBound.Subtract(t),this.aabb.upperBound.Subtract(t))}}t.exports.b2TreeNode=h;t.exports.b2DynamicTree=class{constructor(){this.m_root=null,this.m_freeList=null}Query(t,e){const i=n.stack;i.length=0;let s=this.m_root;for(;s;){if(s.aabb.TestOverlap(t))if(s.IsLeaf()){if(!e(s))return}else i.push(s.child1),i.push(s.child2);s=i.pop()}}QueryPoint(t,e){const i=n.stack;i.length=0;let s=this.m_root;for(;s;){if(s.aabb.TestContain(t))if(s.IsLeaf()){if(!e(s))return}else i.push(s.child1),i.push(s.child2);s=i.pop()}}RayCast(t,e){const{p1:i,p2:r}=t,o=s.b2Vec2.Subtract(r,i,n.r);o.Normalize();const a=s.b2Vec2.CrossOneVec2(o,n.v),h=a.GetAbs(n.abs_v);let{maxFraction:l}=t;const{segmentAABB:c,subInput:d,c:u,h:p,t:m}=n;s.b2Vec2.AddScaled(i,l,s.b2Vec2.Subtract(r,i,m),m),s.b2Vec2.Min(i,m,c.lowerBound),s.b2Vec2.Max(i,m,c.upperBound);const f=n.stack;f.length=0;let _=this.m_root;for(;_;){if(!_.aabb.TestOverlap(c)){_=f.pop();continue}_.aabb.GetCenter(u),_.aabb.GetExtents(p);if(Math.abs(s.b2Vec2.Dot(a,s.b2Vec2.Subtract(i,u,s.b2Vec2.s_t0)))-s.b2Vec2.Dot(h,p)>0)_=f.pop();else{if(_.IsLeaf()){d.p1.Copy(t.p1),d.p2.Copy(t.p2),d.maxFraction=l;const n=e(d,_);if(0===n)return;n>0&&(l=n,s.b2Vec2.AddScaled(i,l,s.b2Vec2.Subtract(r,i,m),m),s.b2Vec2.Min(i,m,c.lowerBound),s.b2Vec2.Max(i,m,c.upperBound))}else f.push(_.child1),f.push(_.child2);_=f.pop()}}}AllocateNode(){if(null===this.m_freeList)return new h;const t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t.height=0,t.moved=!1,t}FreeNode(t){t.parent=this.m_freeList,t.Reset(),this.m_freeList=t}CreateProxy(t,e){const s=this.AllocateNode(),r=i.b2_aabbExtension;return s.aabb.lowerBound.Set(t.lowerBound.x-r,t.lowerBound.y-r),s.aabb.upperBound.Set(t.upperBound.x+r,t.upperBound.y+r),s.userData=e,s.height=0,s.moved=!0,this.InsertLeaf(s),s}DestroyProxy(t){this.RemoveLeaf(t),this.FreeNode(t)}MoveProxy(t,e,s){const{fatAABB:r,hugeAABB:o}=n,a=i.b2_aabbExtension;r.lowerBound.Set(e.lowerBound.x-a,e.lowerBound.y-a),r.upperBound.Set(e.upperBound.x+a,e.upperBound.y+a);const h=i.b2_aabbMultiplier*s.x,l=i.b2_aabbMultiplier*s.y;h<0?r.lowerBound.x+=h:r.upperBound.x+=h,l<0?r.lowerBound.y+=l:r.upperBound.y+=l;const c=t.aabb;if(c.Contains(e)){const t=4*i.b2_aabbExtension;if(o.lowerBound.Set(r.lowerBound.x-t,e.lowerBound.y-t),o.upperBound.Set(r.upperBound.x+t,e.upperBound.y+t),o.Contains(c))return!1}return this.RemoveLeaf(t),t.aabb.Copy(r),this.InsertLeaf(t),t.moved=!0,!0}InsertLeaf(t){if(null===this.m_root)return this.m_root=t,void(this.m_root.parent=null);const{combinedAABB:e,aabb:s}=n,r=t.aabb;let o=this.m_root;for(;!o.IsLeaf();){const t=i.b2Verify(o.child1),n=i.b2Verify(o.child2),a=o.aabb.GetPerimeter();e.Combine2(o.aabb,r);const h=e.GetPerimeter(),l=2*h,c=2*(h-a);let d,u,p,m;if(t.IsLeaf()?(s.Combine2(r,t.aabb),d=s.GetPerimeter()+c):(s.Combine2(r,t.aabb),u=t.aabb.GetPerimeter(),p=s.GetPerimeter(),d=p-u+c),n.IsLeaf()?(s.Combine2(r,n.aabb),m=s.GetPerimeter()+c):(s.Combine2(r,n.aabb),u=n.aabb.GetPerimeter(),p=s.GetPerimeter(),m=p-u+c),l<d&&l<m)break;o=d<m?t:n}const a=o.parent,h=this.AllocateNode();h.parent=a,h.userData=null,h.aabb.Combine2(r,o.aabb),h.height=o.height+1,null!==a?(a.child1===o?a.child1=h:a.child2=h,h.child1=o,h.child2=t,o.parent=h,t.parent=h):(h.child1=o,h.child2=t,o.parent=h,t.parent=h,this.m_root=h);let l=t.parent;for(;null!==l;){l=this.Balance(l);const t=i.b2Verify(l.child1),e=i.b2Verify(l.child2);l.height=1+Math.max(t.height,e.height),l.aabb.Combine2(t.aabb,e.aabb),l=l.parent}}RemoveLeaf(t){if(t===this.m_root)return void(this.m_root=null);const e=i.b2Verify(t.parent),s=e.parent,r=i.b2Verify(e.child1===t?e.child2:e.child1);if(null!==s){s.child1===e?s.child1=r:s.child2=r,r.parent=s,this.FreeNode(e);let t=s;for(;null!==t;){t=this.Balance(t);const e=i.b2Verify(t.child1),s=i.b2Verify(t.child2);t.aabb.Combine2(e.aabb,s.aabb),t.height=1+Math.max(e.height,s.height),t=t.parent}}else this.m_root=r,r.parent=null,this.FreeNode(e)}Balance(t){if(t.IsLeaf()||t.height<2)return t;const e=i.b2Verify(t.child1),s=i.b2Verify(t.child2),r=s.height-e.height;if(r>1){const r=i.b2Verify(s.child1),n=i.b2Verify(s.child2);return s.child1=t,s.parent=t.parent,t.parent=s,null!==s.parent?s.parent.child1===t?s.parent.child1=s:s.parent.child2=s:this.m_root=s,r.height>n.height?(s.child2=r,t.child2=n,n.parent=t,t.aabb.Combine2(e.aabb,n.aabb),s.aabb.Combine2(t.aabb,r.aabb),t.height=1+Math.max(e.height,n.height),s.height=1+Math.max(t.height,r.height)):(s.child2=n,t.child2=r,r.parent=t,t.aabb.Combine2(e.aabb,r.aabb),s.aabb.Combine2(t.aabb,n.aabb),t.height=1+Math.max(e.height,r.height),s.height=1+Math.max(t.height,n.height)),s}if(r<-1){const r=i.b2Verify(e.child1),n=i.b2Verify(e.child2);return e.child1=t,e.parent=t.parent,t.parent=e,null!==e.parent?e.parent.child1===t?e.parent.child1=e:e.parent.child2=e:this.m_root=e,r.height>n.height?(e.child2=r,t.child1=n,n.parent=t,t.aabb.Combine2(s.aabb,n.aabb),e.aabb.Combine2(t.aabb,r.aabb),t.height=1+Math.max(s.height,n.height),e.height=1+Math.max(t.height,r.height)):(e.child2=n,t.child1=r,r.parent=t,t.aabb.Combine2(s.aabb,r.aabb),e.aabb.Combine2(t.aabb,n.aabb),t.height=1+Math.max(s.height,r.height),e.height=1+Math.max(t.height,n.height)),e}return t}GetHeight(){return null===this.m_root?0:this.m_root.height}GetAreaRatio(){if(null===this.m_root)return 0;const t=this.m_root,e=t.aabb.GetPerimeter();return t.GetArea()/e}GetMaxBalance(){return null===this.m_root?0:this.m_root.GetMaxBalance()}ShiftOrigin(t){var e;null===(e=this.m_root)||void 0===e||e.ShiftOrigin(t)}}})),fs(a("cz6ik"),ps),fs(a("i6G4P"),ps),a.register("cmKb4",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2TimeOfImpact=t.exports.b2TOIOutput=t.exports.b2TOIOutputState=t.exports.b2TOIInput=t.exports.b2Toi=void 0;var i=a("1Zs4L"),s=a("btCRw"),r=a("4L5iv"),n=a("9oZZB"),o=a("dKzQd");t.exports.b2Toi={time:0,maxTime:0,calls:0,iters:0,maxIters:0,rootIters:0,maxRootIters:0,reset(){this.time=0,this.maxTime=0,this.calls=0,this.iters=0,this.maxIters=0,this.rootIters=0,this.maxRootIters=0}};const h=new r.b2Transform,l=new r.b2Transform,c=new r.b2Vec2,d=new r.b2Vec2,u=new r.b2Vec2,p=new r.b2Vec2,m=new r.b2Vec2;var f,_,g,b;t.exports.b2TOIInput=class{constructor(){this.proxyA=new o.b2DistanceProxy,this.proxyB=new o.b2DistanceProxy,this.sweepA=new r.b2Sweep,this.sweepB=new r.b2Sweep,this.tMax=0}},(_=f=t.exports.b2TOIOutputState||(t.exports.b2TOIOutputState={}))[_.e_unknown=0]="e_unknown",_[_.e_failed=1]="e_failed",_[_.e_overlapped=2]="e_overlapped",_[_.e_touching=3]="e_touching",_[_.e_separated=4]="e_separated";t.exports.b2TOIOutput=class{constructor(){this.state=f.e_unknown,this.t=0}},(b=g||(g={}))[b.e_points=0]="e_points",b[b.e_faceA=1]="e_faceA",b[b.e_faceB=2]="e_faceB";const y=new n.b2Timer,w=new o.b2SimplexCache,v=new o.b2DistanceInput,x=new o.b2DistanceOutput,S=new class{constructor(){this.m_sweepA=new r.b2Sweep,this.m_sweepB=new r.b2Sweep,this.m_type=g.e_points,this.m_localPoint=new r.b2Vec2,this.m_axis=new r.b2Vec2}Initialize(t,e,i,s,n,o){this.m_proxyA=e,this.m_proxyB=s;const{count:a}=t;this.m_sweepA.Copy(i),this.m_sweepB.Copy(n);const p=this.m_sweepA.GetTransform(h,o),m=this.m_sweepB.GetTransform(l,o);if(1===a){this.m_type=g.e_points;const e=this.m_proxyA.GetVertex(t.indexA[0]),i=this.m_proxyB.GetVertex(t.indexB[0]),s=r.b2Transform.MultiplyVec2(p,e,c),n=r.b2Transform.MultiplyVec2(m,i,d);r.b2Vec2.Subtract(n,s,this.m_axis);return this.m_axis.Normalize()}if(t.indexA[0]===t.indexA[1]){this.m_type=g.e_faceB;const e=this.m_proxyB.GetVertex(t.indexB[0]),i=this.m_proxyB.GetVertex(t.indexB[1]);r.b2Vec2.CrossVec2One(r.b2Vec2.Subtract(i,e,r.b2Vec2.s_t0),this.m_axis).Normalize();const s=r.b2Rot.MultiplyVec2(m.q,this.m_axis,u);r.b2Vec2.Mid(e,i,this.m_localPoint);const n=r.b2Transform.MultiplyVec2(m,this.m_localPoint,d),o=this.m_proxyA.GetVertex(t.indexA[0]),a=r.b2Transform.MultiplyVec2(p,o,c);let h=r.b2Vec2.Dot(r.b2Vec2.Subtract(a,n,r.b2Vec2.s_t0),s);return h<0&&(this.m_axis.Negate(),h=-h),h}this.m_type=g.e_faceA;const f=this.m_proxyA.GetVertex(t.indexA[0]),_=this.m_proxyA.GetVertex(t.indexA[1]);r.b2Vec2.CrossVec2One(r.b2Vec2.Subtract(_,f,r.b2Vec2.s_t0),this.m_axis).Normalize();const b=r.b2Rot.MultiplyVec2(p.q,this.m_axis,u);r.b2Vec2.Mid(f,_,this.m_localPoint);const y=r.b2Transform.MultiplyVec2(p,this.m_localPoint,c),w=this.m_proxyB.GetVertex(t.indexB[0]),v=r.b2Transform.MultiplyVec2(m,w,d);let x=r.b2Vec2.Dot(r.b2Vec2.Subtract(v,y,r.b2Vec2.s_t0),b);return x<0&&(this.m_axis.Negate(),x=-x),x}FindMinSeparation(t,e,i){const s=this.m_sweepA.GetTransform(h,i),n=this.m_sweepB.GetTransform(l,i);switch(this.m_type){case g.e_points:{const i=r.b2Rot.TransposeMultiplyVec2(s.q,this.m_axis,p),o=r.b2Rot.TransposeMultiplyVec2(n.q,r.b2Vec2.Negate(this.m_axis,r.b2Vec2.s_t0),m);t[0]=this.m_proxyA.GetSupport(i),e[0]=this.m_proxyB.GetSupport(o);const a=this.m_proxyA.GetVertex(t[0]),h=this.m_proxyB.GetVertex(e[0]),l=r.b2Transform.MultiplyVec2(s,a,c),u=r.b2Transform.MultiplyVec2(n,h,d);return r.b2Vec2.Dot(r.b2Vec2.Subtract(u,l,r.b2Vec2.s_t0),this.m_axis)}case g.e_faceA:{const i=r.b2Rot.MultiplyVec2(s.q,this.m_axis,u),o=r.b2Transform.MultiplyVec2(s,this.m_localPoint,c),a=r.b2Rot.TransposeMultiplyVec2(n.q,r.b2Vec2.Negate(i,r.b2Vec2.s_t0),m);t[0]=-1,e[0]=this.m_proxyB.GetSupport(a);const h=this.m_proxyB.GetVertex(e[0]),l=r.b2Transform.MultiplyVec2(n,h,d);return r.b2Vec2.Dot(r.b2Vec2.Subtract(l,o,r.b2Vec2.s_t0),i)}case g.e_faceB:{const i=r.b2Rot.MultiplyVec2(n.q,this.m_axis,u),o=r.b2Transform.MultiplyVec2(n,this.m_localPoint,d),a=r.b2Rot.TransposeMultiplyVec2(s.q,r.b2Vec2.Negate(i,r.b2Vec2.s_t0),p);e[0]=-1,t[0]=this.m_proxyA.GetSupport(a);const h=this.m_proxyA.GetVertex(t[0]),l=r.b2Transform.MultiplyVec2(s,h,c);return r.b2Vec2.Dot(r.b2Vec2.Subtract(l,o,r.b2Vec2.s_t0),i)}default:return t[0]=-1,e[0]=-1,0}}Evaluate(t,e,s){const n=this.m_sweepA.GetTransform(h,s),o=this.m_sweepB.GetTransform(l,s);switch(this.m_type){case g.e_points:{const i=this.m_proxyA.GetVertex(t),s=this.m_proxyB.GetVertex(e),a=r.b2Transform.MultiplyVec2(n,i,c),h=r.b2Transform.MultiplyVec2(o,s,d);return r.b2Vec2.Dot(r.b2Vec2.Subtract(h,a,r.b2Vec2.s_t0),this.m_axis)}case g.e_faceA:{const t=r.b2Rot.MultiplyVec2(n.q,this.m_axis,u),i=r.b2Transform.MultiplyVec2(n,this.m_localPoint,c),s=this.m_proxyB.GetVertex(e),a=r.b2Transform.MultiplyVec2(o,s,d);return r.b2Vec2.Dot(r.b2Vec2.Subtract(a,i,r.b2Vec2.s_t0),t)}case g.e_faceB:{const e=r.b2Rot.MultiplyVec2(o.q,this.m_axis,u),i=r.b2Transform.MultiplyVec2(o,this.m_localPoint,d),s=this.m_proxyA.GetVertex(t),a=r.b2Transform.MultiplyVec2(n,s,c);return r.b2Vec2.Dot(r.b2Vec2.Subtract(a,i,r.b2Vec2.s_t0),e)}default:return i.b2Assert(!1),0}}},A=[0],P=[0],C=new r.b2Sweep,T=new r.b2Sweep;t.exports.b2TimeOfImpact=function(e,r){const n=y.Reset();++t.exports.b2Toi.calls,e.state=f.e_unknown,e.t=r.tMax;const{proxyA:a,proxyB:c,tMax:d}=r,u=Math.max(s.b2_maxPolygonVertices,a.m_count,c.m_count),p=C.Copy(r.sweepA),m=T.Copy(r.sweepB);p.Normalize(),m.Normalize();const _=a.m_radius+c.m_radius,g=Math.max(i.b2_linearSlop,_-3*i.b2_linearSlop),b=.25*i.b2_linearSlop;let E=0,R=0;const B=w;B.count=0;const D=v;for(D.proxyA.Copy(r.proxyA),D.proxyB.Copy(r.proxyB),D.useRadii=!1;;){const i=p.GetTransform(h,E),s=m.GetTransform(l,E);D.transformA.Copy(i),D.transformB.Copy(s);const r=x;if(o.b2Distance(r,B,D),r.distance<=0){e.state=f.e_overlapped,e.t=0;break}if(r.distance<g+b){e.state=f.e_touching,e.t=E;break}const n=S;n.Initialize(B,a,p,c,m,E);let _=!1,y=d,w=0;for(;;){const i=A,s=P;let r=n.FindMinSeparation(i,s,y);if(r>g+b){e.state=f.e_separated,e.t=d,_=!0;break}if(r>g-b){E=y;break}let o=n.Evaluate(i[0],s[0],E);if(o<g-b){e.state=f.e_failed,e.t=E,_=!0;break}if(o<=g+b){e.state=f.e_touching,e.t=E,_=!0;break}let a=0,h=E,l=y;for(;;){let e;e=1&a?h+(g-o)*(l-h)/(r-o):.5*(h+l),++a,++t.exports.b2Toi.rootIters;const c=n.Evaluate(i[0],s[0],e);if(Math.abs(c-g)<b){y=e;break}if(c>g?(h=e,o=c):(l=e,r=c),50===a)break}if(t.exports.b2Toi.maxRootIters=Math.max(t.exports.b2Toi.maxRootIters,a),++w,w===u)break}if(++R,++t.exports.b2Toi.iters,_)break;if(20===R){e.state=f.e_failed,e.t=E;break}}t.exports.b2Toi.maxIters=Math.max(t.exports.b2Toi.maxIters,R);const I=n.GetMilliseconds();t.exports.b2Toi.maxTime=Math.max(t.exports.b2Toi.maxTime,I),t.exports.b2Toi.time+=I}})),fs(a("cmKb4"),ps),a.register("6ryQ2",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2CollidePolygonAndCircle=t.exports.b2CollideCircles=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("5IUIQ");const n=new s.b2Vec2,o=new s.b2Vec2;t.exports.b2CollideCircles=function(t,e,i,a,h){t.pointCount=0;const l=s.b2Transform.MultiplyVec2(i,e.m_p,n),c=s.b2Transform.MultiplyVec2(h,a.m_p,o),d=s.b2Vec2.DistanceSquared(l,c),u=e.m_radius+a.m_radius;d>u*u||(t.type=r.b2ManifoldType.e_circles,t.localPoint.Copy(e.m_p),t.localNormal.SetZero(),t.pointCount=1,t.points[0].localPoint.Copy(a.m_p),t.points[0].id.key=0)};const h=new s.b2Vec2,l=new s.b2Vec2,c=new s.b2Vec2;t.exports.b2CollidePolygonAndCircle=function(t,e,n,o,a){t.pointCount=0;const d=s.b2Transform.MultiplyVec2(a,o.m_p,h),u=s.b2Transform.TransposeMultiplyVec2(n,d,l);let p=0,m=-i.b2_maxFloat;const f=e.m_radius+o.m_radius,_=e.m_count,g=e.m_vertices,b=e.m_normals;for(let t=0;t<_;++t){const e=s.b2Vec2.Dot(b[t],s.b2Vec2.Subtract(u,g[t],s.b2Vec2.s_t0));if(e>f)return;e>m&&(m=e,p=t)}const y=p,w=y+1<_?y+1:0,v=g[y],x=g[w];if(m<i.b2_epsilon)return t.pointCount=1,t.type=r.b2ManifoldType.e_faceA,t.localNormal.Copy(b[p]),s.b2Vec2.Mid(v,x,t.localPoint),t.points[0].localPoint.Copy(o.m_p),void(t.points[0].id.key=0);const S=s.b2Vec2.Dot(s.b2Vec2.Subtract(u,v,s.b2Vec2.s_t0),s.b2Vec2.Subtract(x,v,s.b2Vec2.s_t1)),A=s.b2Vec2.Dot(s.b2Vec2.Subtract(u,x,s.b2Vec2.s_t0),s.b2Vec2.Subtract(v,x,s.b2Vec2.s_t1));if(S<=0){if(s.b2Vec2.DistanceSquared(u,v)>f*f)return;t.pointCount=1,t.type=r.b2ManifoldType.e_faceA,s.b2Vec2.Subtract(u,v,t.localNormal).Normalize(),t.localPoint.Copy(v),t.points[0].localPoint.Copy(o.m_p),t.points[0].id.key=0}else if(A<=0){if(s.b2Vec2.DistanceSquared(u,x)>f*f)return;t.pointCount=1,t.type=r.b2ManifoldType.e_faceA,s.b2Vec2.Subtract(u,x,t.localNormal).Normalize(),t.localPoint.Copy(x),t.points[0].localPoint.Copy(o.m_p),t.points[0].id.key=0}else{const e=s.b2Vec2.Mid(v,x,c);if(s.b2Vec2.Dot(s.b2Vec2.Subtract(u,e,s.b2Vec2.s_t1),b[y])>f)return;t.pointCount=1,t.type=r.b2ManifoldType.e_faceA,t.localNormal.Copy(b[y]),t.localPoint.Copy(e),t.points[0].localPoint.Copy(o.m_p),t.points[0].id.key=0}}})),fs(a("6ryQ2"),ps),a.register("eC9Ai",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2CollidePolygons=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("5IUIQ");const n=new s.b2Transform,o=new s.b2Vec2,h=new s.b2Vec2;function l(t,e,r,a,l){const c=e.m_count,d=a.m_count,u=e.m_normals,p=e.m_vertices,m=a.m_vertices,f=s.b2Transform.TransposeMultiply(l,r,n);let _=0,g=-i.b2_maxFloat;for(let t=0;t<c;++t){const e=s.b2Rot.MultiplyVec2(f.q,u[t],o),r=s.b2Transform.MultiplyVec2(f,p[t],h);let n=i.b2_maxFloat;for(let t=0;t<d;++t){const i=s.b2Vec2.Dot(e,s.b2Vec2.Subtract(m[t],r,s.b2Vec2.s_t0));i<n&&(n=i)}n>g&&(g=n,_=t)}return t[0]=_,g}const c=new s.b2Vec2;const d=[new r.b2ClipVertex,new r.b2ClipVertex],u=[new r.b2ClipVertex,new r.b2ClipVertex],p=[new r.b2ClipVertex,new r.b2ClipVertex],m=[0],f=[0],_=new s.b2Vec2,g=new s.b2Vec2,b=new s.b2Vec2,y=new s.b2Vec2,w=new s.b2Vec2,v=new s.b2Vec2,x=new s.b2Vec2,S=new s.b2Vec2;t.exports.b2CollidePolygons=function(t,e,n,o,a){t.pointCount=0;const h=e.m_radius+o.m_radius,A=m,P=l(A,e,n,o,a);if(P>h)return;const C=f,T=l(C,o,a,e,n);if(T>h)return;let E,R,B,D,I,M;T>P+.1*i.b2_linearSlop?(E=o,R=e,B=a,D=n,I=C[0],t.type=r.b2ManifoldType.e_faceB,M=1):(E=e,R=o,B=n,D=a,I=A[0],t.type=r.b2ManifoldType.e_faceA,M=0);const O=d;!function(t,e,n,o,a,h){const l=e.m_normals,d=a.m_count,u=a.m_vertices,p=a.m_normals,m=s.b2Rot.TransposeMultiplyVec2(h.q,s.b2Rot.MultiplyVec2(n.q,l[o],s.b2Vec2.s_t0),c);let f=0,_=i.b2_maxFloat;for(let t=0;t<d;++t){const e=s.b2Vec2.Dot(m,p[t]);e<_&&(_=e,f=t)}const g=f,b=g+1<d?g+1:0,y=t[0];s.b2Transform.MultiplyVec2(h,u[g],y.v);const w=y.id.cf;w.indexA=o,w.indexB=g,w.typeA=r.b2ContactFeatureType.e_face,w.typeB=r.b2ContactFeatureType.e_vertex;const v=t[1];s.b2Transform.MultiplyVec2(h,u[b],v.v);const x=v.id.cf;x.indexA=o,x.indexB=b,x.typeA=r.b2ContactFeatureType.e_face,x.typeB=r.b2ContactFeatureType.e_vertex}(O,E,B,I,R,D);const L=E.m_count,G=E.m_vertices,F=I,k=I+1<L?I+1:0;let N=G[F],V=G[k];const U=s.b2Vec2.Subtract(V,N,_);U.Normalize();const W=s.b2Vec2.CrossVec2One(U,g),j=s.b2Vec2.Mid(N,V,b),X=s.b2Rot.MultiplyVec2(B.q,U,w),Y=s.b2Vec2.CrossVec2One(X,y);N=s.b2Transform.MultiplyVec2(B,N,x),V=s.b2Transform.MultiplyVec2(B,V,S);const H=s.b2Vec2.Dot(Y,N),z=-s.b2Vec2.Dot(X,N)+h,J=s.b2Vec2.Dot(X,V)+h,q=u,K=p,Z=s.b2Vec2.Negate(X,v);let Q=r.b2ClipSegmentToLine(q,O,Z,z,F);if(Q<2)return;if(Q=r.b2ClipSegmentToLine(K,q,X,J,k),Q<2)return;t.localNormal.Copy(W),t.localPoint.Copy(j);let $=0;for(let e=0;e<i.b2_maxManifoldPoints;++e){const i=K[e];if(s.b2Vec2.Dot(Y,i.v)-H<=h){const e=t.points[$];if(s.b2Transform.TransposeMultiplyVec2(D,i.v,e.localPoint),e.id.Copy(i.id),M){const{cf:t}=e.id;t.indexA=t.indexB,t.indexB=t.indexA,t.typeA=t.typeB,t.typeB=t.typeA}++$}}t.pointCount=$}})),fs(a("eC9Ai"),ps),a.register("eTDvN",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2CollideEdgeAndPolygon=t.exports.b2CollideEdgeAndCircle=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("5IUIQ"),n=a("btCRw");const o=new s.b2Vec2,h=new s.b2Vec2,l=new s.b2Vec2,c=new s.b2Vec2,d=new s.b2Vec2,u=new s.b2Vec2,p=new s.b2Vec2,m=new r.b2ContactID;var f,_;t.exports.b2CollideEdgeAndCircle=function(t,e,i,n,a){t.pointCount=0;const f=s.b2Transform.TransposeMultiplyVec2(i,s.b2Transform.MultiplyVec2(a,n.m_p,s.b2Vec2.s_t0),o),_=e.m_vertex1,g=e.m_vertex2,b=s.b2Vec2.Subtract(g,_,h),y=p.Set(b.y,-b.x),w=s.b2Vec2.Dot(y,s.b2Vec2.Subtract(f,_,s.b2Vec2.s_t0));if(e.m_oneSided&&w<0)return;const v=s.b2Vec2.Dot(b,s.b2Vec2.Subtract(g,f,s.b2Vec2.s_t0)),x=s.b2Vec2.Dot(b,s.b2Vec2.Subtract(f,_,s.b2Vec2.s_t0)),S=e.m_radius+n.m_radius,A=m;if(A.cf.indexB=0,A.cf.typeB=r.b2ContactFeatureType.e_vertex,x<=0){const i=_,o=s.b2Vec2.Subtract(f,i,l);if(s.b2Vec2.Dot(o,o)>S*S)return;if(e.m_oneSided){const t=e.m_vertex0,i=_,r=s.b2Vec2.Subtract(i,t,c);if(s.b2Vec2.Dot(r,s.b2Vec2.Subtract(i,f,s.b2Vec2.s_t0))>0)return}return A.cf.indexA=0,A.cf.typeA=r.b2ContactFeatureType.e_vertex,t.pointCount=1,t.type=r.b2ManifoldType.e_circles,t.localNormal.SetZero(),t.localPoint.Copy(i),t.points[0].id.Copy(A),void t.points[0].localPoint.Copy(n.m_p)}if(v<=0){const i=g,o=s.b2Vec2.Subtract(f,i,l);if(s.b2Vec2.Dot(o,o)>S*S)return;if(e.m_oneSided){const t=e.m_vertex3,i=g,r=s.b2Vec2.Subtract(t,i,d);if(s.b2Vec2.Dot(r,s.b2Vec2.Subtract(f,i,s.b2Vec2.s_t0))>0)return}return A.cf.indexA=1,A.cf.typeA=r.b2ContactFeatureType.e_vertex,t.pointCount=1,t.type=r.b2ManifoldType.e_circles,t.localNormal.SetZero(),t.localPoint.Copy(i),t.points[0].id.Copy(A),void t.points[0].localPoint.Copy(n.m_p)}const P=s.b2Vec2.Dot(b,b),C=u;C.x=1/P*(v*_.x+x*g.x),C.y=1/P*(v*_.y+x*g.y);const T=s.b2Vec2.Subtract(f,C,l);s.b2Vec2.Dot(T,T)>S*S||(w<0&&y.Set(-y.x,-y.y),y.Normalize(),A.cf.indexA=0,A.cf.typeA=r.b2ContactFeatureType.e_face,t.pointCount=1,t.type=r.b2ManifoldType.e_faceA,t.localNormal.Copy(y),t.localPoint.Copy(_),t.points[0].id.Copy(A),t.points[0].localPoint.Copy(n.m_p))},(_=f||(f={}))[_.e_unknown=0]="e_unknown",_[_.e_edgeA=1]="e_edgeA",_[_.e_edgeB=2]="e_edgeB";class g{constructor(){this.normal=new s.b2Vec2,this.type=f.e_unknown,this.index=0,this.separation=0}}const b=new g,y=[new s.b2Vec2,new s.b2Vec2];const w=new g,v=new s.b2Vec2;const x=new s.b2Transform,S=new s.b2Vec2,A=new s.b2Vec2,P=new s.b2Vec2,C=new s.b2Vec2,T=new s.b2Vec2,E=new s.b2Vec2,R=new s.b2Vec2,B=new class{constructor(){this.vertices=i.b2MakeArray(n.b2_maxPolygonVertices,s.b2Vec2),this.normals=i.b2MakeArray(n.b2_maxPolygonVertices,s.b2Vec2),this.count=0}},D=new class{constructor(){this.i1=0,this.i2=0,this.v1=new s.b2Vec2,this.v2=new s.b2Vec2,this.normal=new s.b2Vec2,this.sideNormal1=new s.b2Vec2,this.sideOffset1=0,this.sideNormal2=new s.b2Vec2,this.sideOffset2=0}},I=[new r.b2ClipVertex,new r.b2ClipVertex],M=[new r.b2ClipVertex,new r.b2ClipVertex],O=[new r.b2ClipVertex,new r.b2ClipVertex];t.exports.b2CollideEdgeAndPolygon=function(t,e,n,o,a){t.pointCount=0;const h=s.b2Transform.TransposeMultiply(n,a,x),l=s.b2Transform.MultiplyVec2(h,o.m_centroid,S),c=e.m_vertex1,d=e.m_vertex2,u=s.b2Vec2.Subtract(d,c,A);u.Normalize();const p=P.Set(u.y,-u.x),m=s.b2Vec2.Dot(p,s.b2Vec2.Subtract(l,c,s.b2Vec2.s_t0)),_=e.m_oneSided;if(_&&m<0)return;const g=B;g.count=o.m_count;for(let t=0;t<o.m_count;++t)s.b2Transform.MultiplyVec2(h,o.m_vertices[t],g.vertices[t]),s.b2Rot.MultiplyVec2(h.q,o.m_normals[t],g.normals[t]);const L=o.m_radius+e.m_radius,G=function(t,e,r){const n=b;n.type=f.e_edgeA,n.index=-1,n.separation=-i.b2_maxFloat,n.normal.SetZero();const o=y;o[0].Copy(r),s.b2Vec2.Negate(r,o[1]);for(let r=0;r<2;++r){let a=i.b2_maxFloat;for(let i=0;i<t.count;++i){const n=s.b2Vec2.Dot(o[r],s.b2Vec2.Subtract(t.vertices[i],e,s.b2Vec2.s_t0));n<a&&(a=n)}a>n.separation&&(n.index=r,n.separation=a,n.normal.Copy(o[r]))}return n}(g,c,p);if(G.separation>L)return;const F=function(t,e,r){const n=w;n.type=f.e_unknown,n.index=-1,n.separation=-i.b2_maxFloat,n.normal.SetZero();for(let i=0;i<t.count;++i){const o=s.b2Vec2.Negate(t.normals[i],v),a=s.b2Vec2.Dot(o,s.b2Vec2.Subtract(t.vertices[i],e,s.b2Vec2.s_t0)),h=s.b2Vec2.Dot(o,s.b2Vec2.Subtract(t.vertices[i],r,s.b2Vec2.s_t0)),l=Math.min(a,h);l>n.separation&&(n.type=f.e_edgeB,n.index=i,n.separation=l,n.normal.Copy(o))}return n}(g,c,d);if(F.separation>L)return;let k;if(k=F.separation-L>.98*(G.separation-L)+.001?F:G,_){const t=s.b2Vec2.Subtract(c,e.m_vertex0,C);t.Normalize();const i=T.Set(t.y,-t.x),r=s.b2Vec2.Cross(t,u)>=0,n=s.b2Vec2.Subtract(e.m_vertex3,d,E);n.Normalize();const o=R.Set(n.y,-n.x),a=s.b2Vec2.Cross(u,n)>=0,h=.1;if(s.b2Vec2.Dot(k.normal,u)<=0)if(r){if(s.b2Vec2.Cross(k.normal,i)>h)return}else k=G;else if(a){if(s.b2Vec2.Cross(o,k.normal)>h)return}else k=G}const N=I,V=D;if(k.type===f.e_edgeA){t.type=r.b2ManifoldType.e_faceA;let e=0,i=s.b2Vec2.Dot(k.normal,g.normals[0]);for(let t=1;t<g.count;++t){const r=s.b2Vec2.Dot(k.normal,g.normals[t]);r<i&&(i=r,e=t)}const n=e,o=n+1<g.count?n+1:0;N[0].v.Copy(g.vertices[n]),N[0].id.cf.indexA=0,N[0].id.cf.indexB=n,N[0].id.cf.typeA=r.b2ContactFeatureType.e_face,N[0].id.cf.typeB=r.b2ContactFeatureType.e_vertex,N[1].v.Copy(g.vertices[o]),N[1].id.cf.indexA=0,N[1].id.cf.indexB=o,N[1].id.cf.typeA=r.b2ContactFeatureType.e_face,N[1].id.cf.typeB=r.b2ContactFeatureType.e_vertex,V.i1=0,V.i2=1,V.v1.Copy(c),V.v2.Copy(d),V.normal.Copy(k.normal),s.b2Vec2.Negate(u,V.sideNormal1),V.sideNormal2.Copy(u)}else t.type=r.b2ManifoldType.e_faceB,N[0].v.Copy(d),N[0].id.cf.indexA=1,N[0].id.cf.indexB=k.index,N[0].id.cf.typeA=r.b2ContactFeatureType.e_vertex,N[0].id.cf.typeB=r.b2ContactFeatureType.e_face,N[1].v.Copy(c),N[1].id.cf.indexA=0,N[1].id.cf.indexB=k.index,N[1].id.cf.typeA=r.b2ContactFeatureType.e_vertex,N[1].id.cf.typeB=r.b2ContactFeatureType.e_face,V.i1=k.index,V.i2=V.i1+1<g.count?V.i1+1:0,V.v1.Copy(g.vertices[V.i1]),V.v2.Copy(g.vertices[V.i2]),V.normal.Copy(g.normals[V.i1]),V.sideNormal1.Set(V.normal.y,-V.normal.x),s.b2Vec2.Negate(V.sideNormal1,V.sideNormal2);V.sideOffset1=s.b2Vec2.Dot(V.sideNormal1,V.v1),V.sideOffset2=s.b2Vec2.Dot(V.sideNormal2,V.v2);const U=M,W=O;let j;if(j=r.b2ClipSegmentToLine(U,N,V.sideNormal1,V.sideOffset1,V.i1),j<i.b2_maxManifoldPoints)return;if(j=r.b2ClipSegmentToLine(W,U,V.sideNormal2,V.sideOffset2,V.i2),j<i.b2_maxManifoldPoints)return;k.type===f.e_edgeA?(t.localNormal.Copy(V.normal),t.localPoint.Copy(V.v1)):(t.localNormal.Copy(o.m_normals[V.i1]),t.localPoint.Copy(o.m_vertices[V.i1]));let X=0;for(let e=0;e<i.b2_maxManifoldPoints;++e){if(s.b2Vec2.Dot(V.normal,s.b2Vec2.Subtract(W[e].v,V.v1,s.b2Vec2.s_t0))<=L){const i=t.points[X];k.type===f.e_edgeA?(s.b2Transform.TransposeMultiplyVec2(h,W[e].v,i.localPoint),i.id.Copy(W[e].id)):(i.localPoint.Copy(W[e].v),i.id.cf.typeA=W[e].id.cf.typeB,i.id.cf.typeB=W[e].id.cf.typeA,i.id.cf.indexA=W[e].id.cf.indexB,i.id.cf.indexB=W[e].id.cf.indexA),++X}}t.pointCount=X}})),fs(a("eTDvN"),ps),fs(a("cOy3h"),ps),a.register("43B2o",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2CircleShape=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("cOy3h");class n extends r.b2Shape{constructor(t=0){super(r.b2ShapeType.e_circle,t),this.m_p=new s.b2Vec2}Set(t,e=this.m_radius){return this.m_p.Copy(t),this.m_radius=e,this}Clone(){return(new n).Copy(this)}Copy(t){return super.Copy(t),this.m_p.Copy(t.m_p),this}GetChildCount(){return 1}TestPoint(t,e){const i=s.b2Transform.MultiplyVec2(t,this.m_p,n.TestPoint_s_center),r=s.b2Vec2.Subtract(e,i,n.TestPoint_s_d);return s.b2Vec2.Dot(r,r)<=this.m_radius**2}RayCast(t,e,r,o){const a=s.b2Transform.MultiplyVec2(r,this.m_p,n.RayCast_s_position),h=s.b2Vec2.Subtract(e.p1,a,n.RayCast_s_s),l=s.b2Vec2.Dot(h,h)-this.m_radius**2,c=s.b2Vec2.Subtract(e.p2,e.p1,n.RayCast_s_r),d=s.b2Vec2.Dot(h,c),u=s.b2Vec2.Dot(c,c),p=d*d-u*l;if(p<0||u<i.b2_epsilon)return!1;let m=-(d+Math.sqrt(p));return m>=0&&m<=e.maxFraction*u&&(m/=u,t.fraction=m,s.b2Vec2.AddScaled(h,m,c,t.normal).Normalize(),!0)}ComputeAABB(t,e,i){const r=s.b2Transform.MultiplyVec2(e,this.m_p,n.ComputeAABB_s_p);t.lowerBound.Set(r.x-this.m_radius,r.y-this.m_radius),t.upperBound.Set(r.x+this.m_radius,r.y+this.m_radius)}ComputeMass(t,e){const i=this.m_radius**2;t.mass=e*Math.PI*i,t.center.Copy(this.m_p),t.I=t.mass*(.5*i+s.b2Vec2.Dot(this.m_p,this.m_p))}SetupDistanceProxy(t,e){t.m_vertices=t.m_buffer,t.m_vertices[0].Copy(this.m_p),t.m_count=1,t.m_radius=this.m_radius}Draw(t,e){const i=this.m_p,r=this.m_radius,n=s.b2Vec2.UNITX;t.DrawSolidCircle(i,r,n,e)}}t.exports.b2CircleShape=n,n.TestPoint_s_center=new s.b2Vec2,n.TestPoint_s_d=new s.b2Vec2,n.RayCast_s_position=new s.b2Vec2,n.RayCast_s_s=new s.b2Vec2,n.RayCast_s_r=new s.b2Vec2,n.ComputeAABB_s_p=new s.b2Vec2})),fs(a("43B2o"),ps),a.register("gQqLX",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2PolygonShape=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("btCRw"),n=a("cOy3h");const o={ComputeCentroid:{s:new s.b2Vec2,p1:new s.b2Vec2,p2:new s.b2Vec2,p3:new s.b2Vec2,e1:new s.b2Vec2,e2:new s.b2Vec2},TestPoint:{pLocal:new s.b2Vec2},ComputeAABB:{v:new s.b2Vec2},ComputeMass:{center:new s.b2Vec2,s:new s.b2Vec2,e1:new s.b2Vec2,e2:new s.b2Vec2},Validate:{e:new s.b2Vec2,v:new s.b2Vec2},Set:{r:new s.b2Vec2,v:new s.b2Vec2},RayCast:{p1:new s.b2Vec2,p2:new s.b2Vec2,d:new s.b2Vec2},SetAsBox:{xf:new s.b2Transform}},h=(.5*i.b2_linearSlop)**2;class l extends n.b2Shape{constructor(){super(n.b2ShapeType.e_polygon,i.b2_polygonRadius),this.m_centroid=new s.b2Vec2,this.m_vertices=[],this.m_normals=[],this.m_count=0}Clone(){return(new l).Copy(this)}Copy(t){super.Copy(t),this.m_centroid.Copy(t.m_centroid),this.m_count=t.m_count,this.m_vertices=i.b2MakeArray(this.m_count,s.b2Vec2),this.m_normals=i.b2MakeArray(this.m_count,s.b2Vec2);for(let e=0;e<this.m_count;++e)this.m_vertices[e].Copy(t.m_vertices[e]),this.m_normals[e].Copy(t.m_normals[e]);return this}GetChildCount(){return 1}Set(t,e=t.length){if(e<3)return this.SetAsBox(1,1);let n=Math.min(e,r.b2_maxPolygonVertices);const a=[];for(let e=0;e<n;++e){const i=t[e];a.every((t=>s.b2Vec2.DistanceSquared(i,t)>=h))&&a.push(i)}if(n=a.length,n<3)return this.SetAsBox(1,1);let l=0,c=a[0].x;for(let t=1;t<n;++t){const{x:e}=a[t];(e>c||e===c&&a[t].y<a[l].y)&&(l=t,c=e)}const d=[];let u=0,p=l;for(;;){d[u]=p;let t=0;for(let e=1;e<n;++e){if(t===p){t=e;continue}const i=s.b2Vec2.Subtract(a[t],a[d[u]],o.Set.r),r=s.b2Vec2.Subtract(a[e],a[d[u]],o.Set.v),n=s.b2Vec2.Cross(i,r);n<0&&(t=e),0===n&&r.LengthSquared()>i.LengthSquared()&&(t=e)}if(++u,p=t,t===l)break}i.b2Assert(u>=3,"Polygon is degenerate"),this.m_count=u,this.m_vertices=i.b2MakeArray(this.m_count,s.b2Vec2),this.m_normals=i.b2MakeArray(this.m_count,s.b2Vec2);for(let t=0;t<u;++t)this.m_vertices[t].Copy(a[d[t]]);for(let t=0;t<u;++t){const e=t,i=t+1<u?t+1:0,r=s.b2Vec2.Subtract(this.m_vertices[i],this.m_vertices[e],s.b2Vec2.s_t0);s.b2Vec2.CrossVec2One(r,this.m_normals[t]).Normalize()}return function(t,e,i){const r=i;r.SetZero();let n=0;const{s:a,p1:h,p2:l,p3:c,e1:d,e2:u}=o.ComputeCentroid;a.Copy(t[0]);const p=1/3;for(let i=0;i<e;++i){s.b2Vec2.Subtract(t[0],a,h),s.b2Vec2.Subtract(t[i],a,l),s.b2Vec2.Subtract(t[i+1<e?i+1:0],a,c),s.b2Vec2.Subtract(l,h,d),s.b2Vec2.Subtract(c,h,u);const o=.5*s.b2Vec2.Cross(d,u);n+=o,r.x+=o*p*(h.x+l.x+c.x),r.y+=o*p*(h.y+l.y+c.y)}const m=1/n;r.x=m*r.x+a.x,r.y=m*r.y+a.y}(this.m_vertices,u,this.m_centroid),this}SetAsBox(t,e,r,n=0){if(this.m_count=4,this.m_vertices=i.b2MakeArray(this.m_count,s.b2Vec2),this.m_normals=i.b2MakeArray(this.m_count,s.b2Vec2),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),r){this.m_centroid.Copy(r);const{xf:t}=o.SetAsBox;t.SetPosition(r),t.SetRotationAngle(n);for(let e=0;e<this.m_count;++e)s.b2Transform.MultiplyVec2(t,this.m_vertices[e],this.m_vertices[e]),s.b2Rot.MultiplyVec2(t.q,this.m_normals[e],this.m_normals[e])}else this.m_centroid.SetZero();return this}TestPoint(t,e){const i=s.b2Transform.TransposeMultiplyVec2(t,e,o.TestPoint.pLocal);for(let t=0;t<this.m_count;++t){if(s.b2Vec2.Dot(this.m_normals[t],s.b2Vec2.Subtract(i,this.m_vertices[t],s.b2Vec2.s_t0))>0)return!1}return!0}RayCast(t,e,i,r){const n=s.b2Transform.TransposeMultiplyVec2(i,e.p1,o.RayCast.p1),a=s.b2Transform.TransposeMultiplyVec2(i,e.p2,o.RayCast.p2),h=s.b2Vec2.Subtract(a,n,o.RayCast.d);let l=0,c=e.maxFraction,d=-1;for(let t=0;t<this.m_count;++t){const e=s.b2Vec2.Dot(this.m_normals[t],s.b2Vec2.Subtract(this.m_vertices[t],n,s.b2Vec2.s_t0)),i=s.b2Vec2.Dot(this.m_normals[t],h);if(0===i){if(e<0)return!1}else i<0&&e<l*i?(l=e/i,d=t):i>0&&e<c*i&&(c=e/i);if(c<l)return!1}return d>=0&&(t.fraction=l,s.b2Rot.MultiplyVec2(i.q,this.m_normals[d],t.normal),!0)}ComputeAABB(t,e,i){const r=s.b2Transform.MultiplyVec2(e,this.m_vertices[0],t.lowerBound),n=t.upperBound.Copy(r);for(let t=1;t<this.m_count;++t){const i=s.b2Transform.MultiplyVec2(e,this.m_vertices[t],o.ComputeAABB.v);s.b2Vec2.Min(r,i,r),s.b2Vec2.Max(n,i,n)}const a=this.m_radius;r.SubtractXY(a,a),n.AddXY(a,a)}ComputeMass(t,e){const i=o.ComputeMass.center.SetZero();let r=0,n=0;const a=o.ComputeMass.s.Copy(this.m_vertices[0]),h=1/3;for(let t=0;t<this.m_count;++t){const e=s.b2Vec2.Subtract(this.m_vertices[t],a,o.ComputeMass.e1),l=s.b2Vec2.Subtract(this.m_vertices[t+1<this.m_count?t+1:0],a,o.ComputeMass.e2),c=s.b2Vec2.Cross(e,l),d=.5*c;r+=d,i.AddScaled(d*h,s.b2Vec2.Add(e,l,s.b2Vec2.s_t0));const u=e.x,p=e.y,m=l.x,f=l.y;n+=.25*h*c*(u*u+m*u+m*m+(p*p+f*p+f*f))}t.mass=e*r,i.Scale(1/r),s.b2Vec2.Add(i,a,t.center),t.I=e*n,t.I+=t.mass*(s.b2Vec2.Dot(t.center,t.center)-s.b2Vec2.Dot(i,i))}Validate(){const{e:t,v:e}=o.Validate;for(let i=0;i<this.m_count;++i){const r=i,n=i<this.m_count-1?r+1:0,o=this.m_vertices[r];s.b2Vec2.Subtract(this.m_vertices[n],o,t);for(let i=0;i<this.m_count;++i){if(i===r||i===n)continue;s.b2Vec2.Subtract(this.m_vertices[i],o,e);if(s.b2Vec2.Cross(t,e)<0)return!1}}return!0}SetupDistanceProxy(t,e){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius}Draw(t,e){const i=this.m_count,s=this.m_vertices;t.DrawSolidPolygon(s,i,e)}}t.exports.b2PolygonShape=l})),fs(a("gQqLX"),ps),a.register("3H5xV",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2EdgeShape=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("cOy3h");class n extends r.b2Shape{constructor(){super(r.b2ShapeType.e_edge,i.b2_polygonRadius),this.m_vertex1=new s.b2Vec2,this.m_vertex2=new s.b2Vec2,this.m_vertex0=new s.b2Vec2,this.m_vertex3=new s.b2Vec2,this.m_oneSided=!1}SetOneSided(t,e,i,s){return this.m_vertex0.Copy(t),this.m_vertex1.Copy(e),this.m_vertex2.Copy(i),this.m_vertex3.Copy(s),this.m_oneSided=!0,this}SetTwoSided(t,e){return this.m_vertex1.Copy(t),this.m_vertex2.Copy(e),this.m_oneSided=!1,this}Clone(){return(new n).Copy(this)}Copy(t){return super.Copy(t),this.m_vertex1.Copy(t.m_vertex1),this.m_vertex2.Copy(t.m_vertex2),this.m_vertex0.Copy(t.m_vertex0),this.m_vertex3.Copy(t.m_vertex3),this.m_oneSided=t.m_oneSided,this}GetChildCount(){return 1}TestPoint(t,e){return!1}RayCast(t,e,i,r){const o=s.b2Transform.TransposeMultiplyVec2(i,e.p1,n.RayCast_s_p1),a=s.b2Transform.TransposeMultiplyVec2(i,e.p2,n.RayCast_s_p2),h=s.b2Vec2.Subtract(a,o,n.RayCast_s_d),l=this.m_vertex1,c=this.m_vertex2,d=s.b2Vec2.Subtract(c,l,n.RayCast_s_e),{normal:u}=t;u.Set(d.y,-d.x).Normalize();const p=s.b2Vec2.Dot(u,s.b2Vec2.Subtract(l,o,s.b2Vec2.s_t0));if(this.m_oneSided&&p>0)return!1;const m=s.b2Vec2.Dot(u,h);if(0===m)return!1;const f=p/m;if(f<0||e.maxFraction<f)return!1;const _=s.b2Vec2.AddScaled(o,f,h,n.RayCast_s_q),g=s.b2Vec2.Subtract(c,l,n.RayCast_s_r),b=s.b2Vec2.Dot(g,g);if(0===b)return!1;const y=s.b2Vec2.Dot(s.b2Vec2.Subtract(_,l,s.b2Vec2.s_t0),g)/b;return!(y<0||y>1)&&(t.fraction=f,s.b2Rot.MultiplyVec2(i.q,t.normal,t.normal),p>0&&t.normal.Negate(),!0)}ComputeAABB(t,e,i){const r=s.b2Transform.MultiplyVec2(e,this.m_vertex1,n.ComputeAABB_s_v1),o=s.b2Transform.MultiplyVec2(e,this.m_vertex2,n.ComputeAABB_s_v2);s.b2Vec2.Min(r,o,t.lowerBound),s.b2Vec2.Max(r,o,t.upperBound);const a=this.m_radius;t.lowerBound.SubtractXY(a,a),t.upperBound.AddXY(a,a)}ComputeMass(t,e){t.mass=0,s.b2Vec2.Mid(this.m_vertex1,this.m_vertex2,t.center),t.I=0}SetupDistanceProxy(t,e){t.m_vertices=t.m_buffer,t.m_vertices[0].Copy(this.m_vertex1),t.m_vertices[1].Copy(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius}Draw(t,e){const i=this.m_vertex1,s=this.m_vertex2;t.DrawSegment(i,s,e),!1===this.m_oneSided&&(t.DrawPoint(i,4,e),t.DrawPoint(s,4,e))}}t.exports.b2EdgeShape=n,n.RayCast_s_p1=new s.b2Vec2,n.RayCast_s_p2=new s.b2Vec2,n.RayCast_s_d=new s.b2Vec2,n.RayCast_s_e=new s.b2Vec2,n.RayCast_s_q=new s.b2Vec2,n.RayCast_s_r=new s.b2Vec2,n.ComputeAABB_s_v1=new s.b2Vec2,n.ComputeAABB_s_v2=new s.b2Vec2})),fs(a("3H5xV"),ps),a.register("3OOM0",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2ChainShape=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("cOy3h"),n=a("3H5xV");class o extends r.b2Shape{constructor(){super(r.b2ShapeType.e_chain,i.b2_polygonRadius),this.m_vertices=[],this.m_prevVertex=new s.b2Vec2,this.m_nextVertex=new s.b2Vec2}CreateLoop(t,e=t.length){if(e<3)return this;this.m_vertices.length=e+1;for(let i=0;i<e;++i){const{x:e,y:r}=t[i];this.m_vertices[i]=new s.b2Vec2(e,r)}return this.m_vertices[e]=this.m_vertices[0].Clone(),this.m_prevVertex.Copy(this.m_vertices[this.m_vertices.length-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this}CreateChain(t,e,i,r){this.m_vertices.length=e;for(let i=0;i<e;++i){const{x:e,y:r}=t[i];this.m_vertices[i]=new s.b2Vec2(e,r)}return this.m_prevVertex.Copy(i),this.m_nextVertex.Copy(r),this}Clone(){return(new o).Copy(this)}Copy(t){return super.Copy(t),this.CreateChain(t.m_vertices,t.m_vertices.length,t.m_prevVertex,t.m_nextVertex)}GetChildCount(){return this.m_vertices.length-1}GetChildEdge(t,e){t.m_radius=this.m_radius,t.m_vertex1.Copy(this.m_vertices[e]),t.m_vertex2.Copy(this.m_vertices[e+1]),t.m_oneSided=!0,e>0?t.m_vertex0.Copy(this.m_vertices[e-1]):t.m_vertex0.Copy(this.m_prevVertex),e<this.m_vertices.length-2?t.m_vertex3.Copy(this.m_vertices[e+2]):t.m_vertex3.Copy(this.m_nextVertex)}TestPoint(t,e){return!1}RayCast(t,e,i,s){const r=o.RayCast_s_edgeShape,n=s;let a=s+1;return a===this.m_vertices.length&&(a=0),r.m_vertex1.Copy(this.m_vertices[n]),r.m_vertex2.Copy(this.m_vertices[a]),r.RayCast(t,e,i,0)}ComputeAABB(t,e,i){const r=i;let n=i+1;n===this.m_vertices.length&&(n=0);const a=s.b2Transform.MultiplyVec2(e,this.m_vertices[r],o.ComputeAABB_s_v1),h=s.b2Transform.MultiplyVec2(e,this.m_vertices[n],o.ComputeAABB_s_v2),l=s.b2Vec2.Min(a,h,o.ComputeAABB_s_lower),c=s.b2Vec2.Max(a,h,o.ComputeAABB_s_upper);t.lowerBound.x=l.x-this.m_radius,t.lowerBound.y=l.y-this.m_radius,t.upperBound.x=c.x+this.m_radius,t.upperBound.y=c.y+this.m_radius}ComputeMass(t,e){t.mass=0,t.center.SetZero(),t.I=0}SetupDistanceProxy(t,e){t.m_vertices=t.m_buffer,t.m_vertices[0].Copy(this.m_vertices[e]),e+1<this.m_vertices.length?t.m_vertices[1].Copy(this.m_vertices[e+1]):t.m_vertices[1].Copy(this.m_vertices[0]),t.m_count=2,t.m_radius=this.m_radius}Draw(t,e){const i=this.m_vertices;let s=i[0];for(let r=1;r<i.length;++r){const n=i[r];t.DrawSegment(s,n,e),s=n}}}t.exports.b2ChainShape=o,o.RayCast_s_edgeShape=new n.b2EdgeShape,o.ComputeAABB_s_v1=new s.b2Vec2,o.ComputeAABB_s_v2=new s.b2Vec2,o.ComputeAABB_s_lower=new s.b2Vec2,o.ComputeAABB_s_upper=new s.b2Vec2})),fs(a("3OOM0"),ps),fs(a("bmDAE"),ps);var _s=a("2eI7i");Object.defineProperty(ps,"b2Body",{enumerable:!0,get:function(){return _s.b2Body}}),Object.defineProperty(ps,"b2BodyType",{enumerable:!0,get:function(){return _s.b2BodyType}});var gs={};Object.defineProperty(gs,"__esModule",{value:!0}),gs.b2World=void 0;var bs=a("1Zs4L"),ys=a("4L5iv"),ws=a("9oZZB"),vs=a("5IUIQ"),xs=a("cmKb4");a.register("7oGb5",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2Joint=t.exports.b2AngularStiffness=t.exports.b2LinearStiffness=t.exports.b2JointDef=t.exports.b2JointEdge=t.exports.b2JointType=void 0;var i=a("cCzda"),s=a("4L5iv");const r={pA:new s.b2Vec2,pB:new s.b2Vec2};var n,o;(o=n=t.exports.b2JointType||(t.exports.b2JointType={}))[o.e_unknownJoint=0]="e_unknownJoint",o[o.e_revoluteJoint=1]="e_revoluteJoint",o[o.e_prismaticJoint=2]="e_prismaticJoint",o[o.e_distanceJoint=3]="e_distanceJoint",o[o.e_pulleyJoint=4]="e_pulleyJoint",o[o.e_mouseJoint=5]="e_mouseJoint",o[o.e_gearJoint=6]="e_gearJoint",o[o.e_wheelJoint=7]="e_wheelJoint",o[o.e_weldJoint=8]="e_weldJoint",o[o.e_frictionJoint=9]="e_frictionJoint",o[o.e_motorJoint=10]="e_motorJoint",o[o.e_areaJoint=11]="e_areaJoint";class h{constructor(t,e){this.prev=null,this.next=null,this.joint=t,this.other=e}}t.exports.b2JointEdge=h;t.exports.b2JointDef=class{constructor(t){this.userData=null,this.collideConnected=!1,this.type=t}},t.exports.b2LinearStiffness=function(t,e,i,s,r){const n=s.GetMass(),o=r.GetMass();let a;a=n>0&&o>0?n*o/(n+o):n>0?n:o;const h=2*Math.PI*e;t.stiffness=a*h*h,t.damping=2*a*i*h},t.exports.b2AngularStiffness=function(t,e,i,s,r){const n=s.GetInertia(),o=r.GetInertia();let a;a=n>0&&o>0?n*o/(n+o):n>0?n:o;const h=2*Math.PI*e;t.stiffness=a*h*h,t.damping=2*a*i*h};t.exports.b2Joint=class{constructor(t){var e;this.m_type=n.e_unknownJoint,this.m_prev=null,this.m_next=null,this.m_islandFlag=!1,this.m_collideConnected=!1,this.m_userData=null,this.m_type=t.type,this.m_edgeA=new h(this,t.bodyB),this.m_edgeB=new h(this,t.bodyA),this.m_bodyA=t.bodyA,this.m_bodyB=t.bodyB,this.m_collideConnected=null!==(e=t.collideConnected)&&void 0!==e&&e,this.m_userData=t.userData}GetType(){return this.m_type}GetBodyA(){return this.m_bodyA}GetBodyB(){return this.m_bodyB}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}IsEnabled(){return this.m_bodyA.IsEnabled()&&this.m_bodyB.IsEnabled()}GetCollideConnected(){return this.m_collideConnected}ShiftOrigin(t){}Draw(t){const e=this.m_bodyA.GetTransform().p,s=this.m_bodyB.GetTransform().p,n=this.GetAnchorA(r.pA),o=this.GetAnchorB(r.pB);t.DrawSegment(e,n,i.debugColors.joint6),t.DrawSegment(n,o,i.debugColors.joint6),t.DrawSegment(s,o,i.debugColors.joint6)}}}));var Ss=a("7oGb5");a.register("gNfK4",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2AreaJoint=t.exports.b2AreaJointDef=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("7oGb5"),n=a("acQC1");class o extends r.b2JointDef{constructor(){super(r.b2JointType.e_areaJoint),this.bodies=[],this.stiffness=0,this.damping=0}AddBody(t){this.bodies.push(t),1===this.bodies.length?this.bodyA=t:2===this.bodies.length&&(this.bodyB=t)}}t.exports.b2AreaJointDef=o;class h extends r.b2Joint{constructor(t){var e,r;super(t),this.m_stiffness=0,this.m_damping=0,this.m_impulse=0,this.m_targetArea=0,this.m_joints=[],this.m_delta=new s.b2Vec2,this.m_bodies=t.bodies,this.m_stiffness=null!==(e=t.stiffness)&&void 0!==e?e:0,this.m_damping=null!==(r=t.damping)&&void 0!==r?r:0,this.m_targetLengths=i.b2MakeNumberArray(t.bodies.length),this.m_normals=i.b2MakeArray(t.bodies.length,s.b2Vec2),this.m_deltas=i.b2MakeArray(t.bodies.length,s.b2Vec2);const o=new n.b2DistanceJointDef;o.stiffness=this.m_stiffness,o.damping=this.m_damping,this.m_targetArea=0;for(let t=0;t<this.m_bodies.length;++t){const e=this.m_bodies[t],i=this.m_bodies[(t+1)%this.m_bodies.length],r=e.GetWorldCenter(),n=i.GetWorldCenter();this.m_targetLengths[t]=s.b2Vec2.Distance(r,n),this.m_targetArea+=s.b2Vec2.Cross(r,n),o.Initialize(e,i,r,n),this.m_joints[t]=e.GetWorld().CreateJoint(o)}this.m_targetArea*=.5}GetAnchorA(t){return t}GetAnchorB(t){return t}GetReactionForce(t,e){return e}GetReactionTorque(t){return 0}SetStiffness(t){this.m_stiffness=t;for(const e of this.m_joints)e.SetStiffness(t)}GetStiffness(){return this.m_stiffness}SetDamping(t){this.m_damping=t;for(const e of this.m_joints)e.SetDamping(t)}GetDamping(){return this.m_damping}InitVelocityConstraints(t){for(let e=0;e<this.m_bodies.length;++e){const i=this.m_bodies[(e+this.m_bodies.length-1)%this.m_bodies.length],r=this.m_bodies[(e+1)%this.m_bodies.length],n=t.positions[i.m_islandIndex].c,o=t.positions[r.m_islandIndex].c,a=this.m_deltas[e];s.b2Vec2.Subtract(o,n,a)}if(t.step.warmStarting){this.m_impulse*=t.step.dtRatio;for(let e=0;e<this.m_bodies.length;++e){const i=this.m_bodies[e],s=t.velocities[i.m_islandIndex].v,r=this.m_deltas[e];s.x+=i.m_invMass*r.y*.5*this.m_impulse,s.y+=i.m_invMass*-r.x*.5*this.m_impulse}}else this.m_impulse=0}SolveVelocityConstraints(t){let e=0,i=0;for(let r=0;r<this.m_bodies.length;++r){const n=this.m_bodies[r],o=t.velocities[n.m_islandIndex].v,a=this.m_deltas[r];e+=a.LengthSquared()/n.GetMass(),i+=s.b2Vec2.Cross(o,a)}const r=-2*i/e;this.m_impulse+=r;for(let e=0;e<this.m_bodies.length;++e){const i=this.m_bodies[e],s=t.velocities[i.m_islandIndex].v,n=this.m_deltas[e];s.x+=i.m_invMass*n.y*.5*r,s.y+=i.m_invMass*-n.x*.5*r}}SolvePositionConstraints(t){let e=0,r=0;for(let n=0;n<this.m_bodies.length;++n){const o=this.m_bodies[n],a=this.m_bodies[(n+1)%this.m_bodies.length],h=t.positions[o.m_islandIndex].c,l=t.positions[a.m_islandIndex].c,c=s.b2Vec2.Subtract(l,h,this.m_delta);let d=c.Length();d<i.b2_epsilon&&(d=1),this.m_normals[n].x=c.y/d,this.m_normals[n].y=-c.x/d,e+=d,r+=s.b2Vec2.Cross(h,l)}r*=.5;const n=.5*(this.m_targetArea-r)/e;let o=!0;for(let e=0;e<this.m_bodies.length;++e){const r=this.m_bodies[e],a=t.positions[r.m_islandIndex].c,h=(e+1)%this.m_bodies.length,l=s.b2Vec2.Add(this.m_normals[e],this.m_normals[h],this.m_delta);l.Scale(n);const c=l.LengthSquared();c>i.b2_maxLinearCorrection**2&&l.Scale(i.b2_maxLinearCorrection/Math.sqrt(c)),c>i.b2_linearSlop**2&&(o=!1),a.Add(l)}return o}}t.exports.b2AreaJoint=h})),a.register("acQC1",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2DistanceJoint=t.exports.b2DistanceJointDef=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("7oGb5"),n=a("cCzda");const o={worldPointA:new s.b2Vec2,worldPointB:new s.b2Vec2,vpA:new s.b2Vec2,vpB:new s.b2Vec2,vpBA:new s.b2Vec2,P:new s.b2Vec2,qA:new s.b2Rot,qB:new s.b2Rot,lalcA:new s.b2Vec2,lalcB:new s.b2Vec2,Draw:{pA:new s.b2Vec2,pB:new s.b2Vec2,axis:new s.b2Vec2,pRest:new s.b2Vec2,p1:new s.b2Vec2,p2:new s.b2Vec2}};class h extends r.b2JointDef{constructor(){super(r.b2JointType.e_distanceJoint),this.localAnchorA=new s.b2Vec2,this.localAnchorB=new s.b2Vec2,this.length=1,this.minLength=0,this.maxLength=i.b2_maxFloat,this.stiffness=0,this.damping=0}Initialize(t,e,r,n){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(r,this.localAnchorA),this.bodyB.GetLocalPoint(n,this.localAnchorB),this.length=Math.max(s.b2Vec2.Distance(r,n),i.b2_linearSlop),this.minLength=this.length,this.maxLength=this.length}}t.exports.b2DistanceJointDef=h;class l extends r.b2Joint{constructor(t){var e,r;super(t),this.m_bias=0,this.m_localAnchorA=new s.b2Vec2,this.m_localAnchorB=new s.b2Vec2,this.m_gamma=0,this.m_impulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new s.b2Vec2,this.m_rA=new s.b2Vec2,this.m_rB=new s.b2Vec2,this.m_localCenterA=new s.b2Vec2,this.m_localCenterB=new s.b2Vec2,this.m_currentLength=0,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_softMass=0,this.m_mass=0,this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_length=Math.max(t.length,i.b2_linearSlop),this.m_minLength=Math.max(t.minLength,i.b2_linearSlop),this.m_maxLength=Math.max(t.maxLength,this.m_minLength),this.m_stiffness=null!==(e=t.stiffness)&&void 0!==e?e:0,this.m_damping=null!==(r=t.damping)&&void 0!==r?r:0}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){const i=t*(this.m_impulse+this.m_lowerImpulse-this.m_upperImpulse);return e.x=i*this.m_u.x,e.y=i*this.m_u.y,e}GetReactionTorque(t){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetLength(t){return this.m_impulse=0,this.m_length=Math.max(i.b2_linearSlop,t),this.m_length}GetLength(){return this.m_length}SetMinLength(t){return this.m_lowerImpulse=0,this.m_minLength=s.b2Clamp(t,i.b2_linearSlop,this.m_maxLength),this.m_minLength}GetMinLength(){return this.m_minLength}SetMaxLength(t){return this.m_upperImpulse=0,this.m_maxLength=Math.max(t,this.m_minLength),this.m_maxLength}GetMaxLength(){return this.m_maxLength}GetCurrentLength(){const t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o.worldPointA),e=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o.worldPointB);return s.b2Vec2.Distance(e,t)}SetStiffness(t){this.m_stiffness=t}GetStiffness(){return this.m_stiffness}SetDamping(t){this.m_damping=t}GetDamping(){return this.m_damping}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,r=t.positions[this.m_indexA].a,n=t.velocities[this.m_indexA].v;let a=t.velocities[this.m_indexA].w;const h=t.positions[this.m_indexB].c,l=t.positions[this.m_indexB].a,c=t.velocities[this.m_indexB].v;let d=t.velocities[this.m_indexB].w;const{qA:u,qB:p,lalcA:m,lalcB:f}=o;u.Set(r),p.Set(l),s.b2Rot.MultiplyVec2(u,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,m),this.m_rA),s.b2Rot.MultiplyVec2(p,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,f),this.m_rB),this.m_u.x=h.x+this.m_rB.x-e.x-this.m_rA.x,this.m_u.y=h.y+this.m_rB.y-e.y-this.m_rA.y,this.m_currentLength=this.m_u.Length(),this.m_currentLength>i.b2_linearSlop?this.m_u.Scale(1/this.m_currentLength):(this.m_u.SetZero(),this.m_mass=0,this.m_impulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0);const _=s.b2Vec2.Cross(this.m_rA,this.m_u),g=s.b2Vec2.Cross(this.m_rB,this.m_u);let b=this.m_invMassA+this.m_invIA*_*_+this.m_invMassB+this.m_invIB*g*g;if(this.m_mass=0!==b?1/b:0,this.m_stiffness>0&&this.m_minLength<this.m_maxLength){const e=this.m_currentLength-this.m_length,i=this.m_damping,s=this.m_stiffness,r=t.step.dt;this.m_gamma=r*(i+r*s),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=e*r*s*this.m_gamma,b+=this.m_gamma,this.m_softMass=0!==b?1/b:0}else this.m_gamma=0,this.m_bias=0,this.m_softMass=this.m_mass;if(t.step.warmStarting){this.m_impulse*=t.step.dtRatio,this.m_lowerImpulse*=t.step.dtRatio,this.m_upperImpulse*=t.step.dtRatio;const{P:e}=o;s.b2Vec2.Scale(this.m_impulse+this.m_lowerImpulse-this.m_upperImpulse,this.m_u,e),n.SubtractScaled(this.m_invMassA,e),a-=this.m_invIA*s.b2Vec2.Cross(this.m_rA,e),c.AddScaled(this.m_invMassB,e),d+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,e)}else this.m_impulse=0;t.velocities[this.m_indexA].w=a,t.velocities[this.m_indexB].w=d}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const r=t.velocities[this.m_indexB].v;let n=t.velocities[this.m_indexB].w;if(this.m_minLength<this.m_maxLength){if(this.m_stiffness>0){const t=s.b2Vec2.AddCrossScalarVec2(e,i,this.m_rA,o.vpA),a=s.b2Vec2.AddCrossScalarVec2(r,n,this.m_rB,o.vpB),h=s.b2Vec2.Dot(this.m_u,s.b2Vec2.Subtract(a,t,o.vpBA)),l=-this.m_softMass*(h+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=l;const c=s.b2Vec2.Scale(l,this.m_u,o.P);e.SubtractScaled(this.m_invMassA,c),i-=this.m_invIA*s.b2Vec2.Cross(this.m_rA,c),r.AddScaled(this.m_invMassB,c),n+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,c)}{const a=this.m_currentLength-this.m_minLength,h=Math.max(0,a)*t.step.inv_dt,l=s.b2Vec2.AddCrossScalarVec2(e,i,this.m_rA,o.vpA),c=s.b2Vec2.AddCrossScalarVec2(r,n,this.m_rB,o.vpB),d=s.b2Vec2.Dot(this.m_u,s.b2Vec2.Subtract(c,l,o.vpBA));let u=-this.m_mass*(d+h);const p=this.m_lowerImpulse;this.m_lowerImpulse=Math.max(0,this.m_lowerImpulse+u),u=this.m_lowerImpulse-p;const m=s.b2Vec2.Scale(u,this.m_u,o.P);e.SubtractScaled(this.m_invMassA,m),i-=this.m_invIA*s.b2Vec2.Cross(this.m_rA,m),r.AddScaled(this.m_invMassB,m),n+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,m)}{const a=this.m_maxLength-this.m_currentLength,h=Math.max(0,a)*t.step.inv_dt,l=s.b2Vec2.AddCrossScalarVec2(e,i,this.m_rA,o.vpA),c=s.b2Vec2.AddCrossScalarVec2(r,n,this.m_rB,o.vpB),d=s.b2Vec2.Dot(this.m_u,s.b2Vec2.Subtract(l,c,o.vpBA));let u=-this.m_mass*(d+h);const p=this.m_upperImpulse;this.m_upperImpulse=Math.max(0,this.m_upperImpulse+u),u=this.m_upperImpulse-p;const m=s.b2Vec2.Scale(-u,this.m_u,o.P);e.SubtractScaled(this.m_invMassA,m),i-=this.m_invIA*s.b2Vec2.Cross(this.m_rA,m),r.AddScaled(this.m_invMassB,m),n+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,m)}}else{const t=s.b2Vec2.AddCrossScalarVec2(e,i,this.m_rA,o.vpA),a=s.b2Vec2.AddCrossScalarVec2(r,n,this.m_rB,o.vpB),h=s.b2Vec2.Dot(this.m_u,s.b2Vec2.Subtract(a,t,o.vpBA)),l=-this.m_mass*h;this.m_impulse+=l;const c=s.b2Vec2.Scale(l,this.m_u,o.P);e.SubtractScaled(this.m_invMassA,c),i-=this.m_invIA*s.b2Vec2.Cross(this.m_rA,c),r.AddScaled(this.m_invMassB,c),n+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,c)}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=n}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let r=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let a=t.positions[this.m_indexB].a;const{qA:h,qB:l,lalcA:c,lalcB:d,P:u}=o;h.Set(r),l.Set(a);const p=s.b2Rot.MultiplyVec2(h,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,c),this.m_rA),m=s.b2Rot.MultiplyVec2(l,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,d),this.m_rB);this.m_u.x=n.x+m.x-e.x-p.x,this.m_u.y=n.y+m.y-e.y-p.y;const f=this.m_u.Normalize();let _;if(this.m_minLength===this.m_maxLength)_=f-this.m_minLength;else if(f<this.m_minLength)_=f-this.m_minLength;else{if(!(this.m_maxLength<f))return!0;_=f-this.m_maxLength}const g=-this.m_mass*_;return s.b2Vec2.Scale(g,this.m_u,u),e.SubtractScaled(this.m_invMassA,u),r-=this.m_invIA*s.b2Vec2.Cross(p,u),n.AddScaled(this.m_invMassB,u),a+=this.m_invIB*s.b2Vec2.Cross(m,u),t.positions[this.m_indexA].a=r,t.positions[this.m_indexB].a=a,Math.abs(_)<i.b2_linearSlop}Draw(t){const{pA:e,pB:r,axis:a,pRest:h}=o.Draw,l=this.m_bodyA.GetTransform(),c=this.m_bodyB.GetTransform();if(s.b2Transform.MultiplyVec2(l,this.m_localAnchorA,e),s.b2Transform.MultiplyVec2(c,this.m_localAnchorB,r),s.b2Vec2.Subtract(r,e,a),a.Normalize(),t.DrawSegment(e,r,n.debugColors.joint5),s.b2Vec2.AddScaled(e,this.m_length,a,h),t.DrawPoint(h,8,n.debugColors.joint1),this.m_minLength!==this.m_maxLength){if(this.m_minLength>i.b2_linearSlop){const i=s.b2Vec2.AddScaled(e,this.m_minLength,a,o.Draw.p1);t.DrawPoint(i,4,n.debugColors.joint2)}if(this.m_maxLength<i.b2_maxFloat){const i=s.b2Vec2.AddScaled(e,this.m_maxLength,a,o.Draw.p1);t.DrawPoint(i,4,n.debugColors.joint3)}}}}t.exports.b2DistanceJoint=l}));var As=a("gNfK4"),Ps=a("acQC1");a.register("g1B28",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2FrictionJoint=t.exports.b2FrictionJointDef=void 0;var i=a("4L5iv"),s=a("7oGb5");const r={qA:new i.b2Rot,qB:new i.b2Rot,lalcA:new i.b2Vec2,lalcB:new i.b2Vec2,Cdot:new i.b2Vec2,impulse:new i.b2Vec2,oldImpulse:new i.b2Vec2};class n extends s.b2JointDef{constructor(){super(s.b2JointType.e_frictionJoint),this.localAnchorA=new i.b2Vec2,this.localAnchorB=new i.b2Vec2,this.maxForce=0,this.maxTorque=0}Initialize(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB)}}t.exports.b2FrictionJointDef=n;class o extends s.b2Joint{constructor(t){var e,s;super(t),this.m_localAnchorA=new i.b2Vec2,this.m_localAnchorB=new i.b2Vec2,this.m_linearImpulse=new i.b2Vec2,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new i.b2Vec2,this.m_rB=new i.b2Vec2,this.m_localCenterA=new i.b2Vec2,this.m_localCenterB=new i.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new i.b2Mat22,this.m_angularMass=0,this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_linearImpulse.SetZero(),this.m_maxForce=null!==(e=t.maxForce)&&void 0!==e?e:0,this.m_maxTorque=null!==(s=t.maxTorque)&&void 0!==s?s:0}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].a,s=t.velocities[this.m_indexA].v;let n=t.velocities[this.m_indexA].w;const o=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v;let h=t.velocities[this.m_indexB].w;const{qA:l,qB:c,lalcA:d,lalcB:u}=r;l.Set(e),c.Set(o),i.b2Rot.MultiplyVec2(l,i.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,d),this.m_rA),i.b2Rot.MultiplyVec2(c,i.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,u),this.m_rB);const p=this.m_invMassA,m=this.m_invMassB,f=this.m_invIA,_=this.m_invIB,g=this.m_linearMass;if(g.ex.x=p+m+f*this.m_rA.y*this.m_rA.y+_*this.m_rB.y*this.m_rB.y,g.ex.y=-f*this.m_rA.x*this.m_rA.y-_*this.m_rB.x*this.m_rB.y,g.ey.x=g.ex.y,g.ey.y=p+m+f*this.m_rA.x*this.m_rA.x+_*this.m_rB.x*this.m_rB.x,g.Inverse(),this.m_angularMass=f+_,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.step.warmStarting){this.m_linearImpulse.Scale(t.step.dtRatio),this.m_angularImpulse*=t.step.dtRatio;const e=this.m_linearImpulse;s.SubtractScaled(p,e),n-=f*(i.b2Vec2.Cross(this.m_rA,e)+this.m_angularImpulse),a.AddScaled(m,e),h+=_*(i.b2Vec2.Cross(this.m_rB,e)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;t.velocities[this.m_indexA].w=n,t.velocities[this.m_indexB].w=h}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let s=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const a=this.m_invMassA,h=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,d=t.step.dt;{const t=o-s;let e=-this.m_angularMass*t;const r=this.m_angularImpulse,n=d*this.m_maxTorque;this.m_angularImpulse=i.b2Clamp(this.m_angularImpulse+e,-n,n),e=this.m_angularImpulse-r,s-=l*e,o+=c*e}{const{Cdot:t,impulse:u,oldImpulse:p}=r;i.b2Vec2.Subtract(i.b2Vec2.AddCrossScalarVec2(n,o,this.m_rB,i.b2Vec2.s_t0),i.b2Vec2.AddCrossScalarVec2(e,s,this.m_rA,i.b2Vec2.s_t1),t),i.b2Mat22.MultiplyVec2(this.m_linearMass,t,u).Negate(),p.Copy(this.m_linearImpulse),this.m_linearImpulse.Add(u);const m=d*this.m_maxForce;this.m_linearImpulse.LengthSquared()>m*m&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Scale(m)),i.b2Vec2.Subtract(this.m_linearImpulse,p,u),e.SubtractScaled(a,u),s-=l*i.b2Vec2.Cross(this.m_rA,u),n.AddScaled(h,u),o+=c*i.b2Vec2.Cross(this.m_rB,u)}t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=o}SolvePositionConstraints(t){return!0}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*this.m_linearImpulse.x,e.y=t*this.m_linearImpulse.y,e}GetReactionTorque(t){return t*this.m_angularImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetMaxTorque(t){this.m_maxTorque=t}GetMaxTorque(){return this.m_maxTorque}}t.exports.b2FrictionJoint=o}));var Cs=a("g1B28");a.register("dicKF",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2GearJoint=t.exports.b2GearJointDef=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("7oGb5");const n={qA:new s.b2Rot,qB:new s.b2Rot,qC:new s.b2Rot,qD:new s.b2Rot,lalcA:new s.b2Vec2,lalcB:new s.b2Vec2,lalcC:new s.b2Vec2,lalcD:new s.b2Vec2,u:new s.b2Vec2,rA:new s.b2Vec2,rB:new s.b2Vec2,rC:new s.b2Vec2,rD:new s.b2Vec2,JvAC:new s.b2Vec2,JvBD:new s.b2Vec2};class o extends r.b2JointDef{constructor(){super(r.b2JointType.e_gearJoint),this.ratio=1}}t.exports.b2GearJointDef=o;class h extends r.b2Joint{constructor(t){var e;let i,n;super(t),this.m_typeA=r.b2JointType.e_unknownJoint,this.m_typeB=r.b2JointType.e_unknownJoint,this.m_localAnchorA=new s.b2Vec2,this.m_localAnchorB=new s.b2Vec2,this.m_localAnchorC=new s.b2Vec2,this.m_localAnchorD=new s.b2Vec2,this.m_localAxisC=new s.b2Vec2,this.m_localAxisD=new s.b2Vec2,this.m_referenceAngleA=0,this.m_referenceAngleB=0,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_indexC=0,this.m_indexD=0,this.m_lcA=new s.b2Vec2,this.m_lcB=new s.b2Vec2,this.m_lcC=new s.b2Vec2,this.m_lcD=new s.b2Vec2,this.m_mA=0,this.m_mB=0,this.m_mC=0,this.m_mD=0,this.m_iA=0,this.m_iB=0,this.m_iC=0,this.m_iD=0,this.m_JvAC=new s.b2Vec2,this.m_JvBD=new s.b2Vec2,this.m_JwA=0,this.m_JwB=0,this.m_JwC=0,this.m_JwD=0,this.m_mass=0,this.m_joint1=t.joint1,this.m_joint2=t.joint2,this.m_typeA=this.m_joint1.GetType(),this.m_typeB=this.m_joint2.GetType(),this.m_bodyC=this.m_joint1.GetBodyA(),this.m_bodyA=this.m_joint1.GetBodyB();const o=this.m_bodyA.m_xf,a=this.m_bodyA.m_sweep.a,h=this.m_bodyC.m_xf,l=this.m_bodyC.m_sweep.a;if(this.m_typeA===r.b2JointType.e_revoluteJoint){const e=t.joint1;this.m_localAnchorC.Copy(e.m_localAnchorA),this.m_localAnchorA.Copy(e.m_localAnchorB),this.m_referenceAngleA=e.m_referenceAngle,this.m_localAxisC.SetZero(),i=a-l-this.m_referenceAngleA}else{const e=t.joint1;this.m_localAnchorC.Copy(e.m_localAnchorA),this.m_localAnchorA.Copy(e.m_localAnchorB),this.m_referenceAngleA=e.m_referenceAngle,this.m_localAxisC.Copy(e.m_localXAxisA);const r=this.m_localAnchorC,n=s.b2Rot.TransposeMultiplyVec2(h.q,s.b2Rot.MultiplyVec2(o.q,this.m_localAnchorA,s.b2Vec2.s_t0).Add(o.p).Subtract(h.p),s.b2Vec2.s_t0);i=s.b2Vec2.Dot(n.Subtract(r),this.m_localAxisC)}this.m_bodyD=this.m_joint2.GetBodyA(),this.m_bodyB=this.m_joint2.GetBodyB();const c=this.m_bodyB.m_xf,d=this.m_bodyB.m_sweep.a,u=this.m_bodyD.m_xf,p=this.m_bodyD.m_sweep.a;if(this.m_typeB===r.b2JointType.e_revoluteJoint){const e=t.joint2;this.m_localAnchorD.Copy(e.m_localAnchorA),this.m_localAnchorB.Copy(e.m_localAnchorB),this.m_referenceAngleB=e.m_referenceAngle,this.m_localAxisD.SetZero(),n=d-p-this.m_referenceAngleB}else{const e=t.joint2;this.m_localAnchorD.Copy(e.m_localAnchorA),this.m_localAnchorB.Copy(e.m_localAnchorB),this.m_referenceAngleB=e.m_referenceAngle,this.m_localAxisD.Copy(e.m_localXAxisA);const i=this.m_localAnchorD,r=s.b2Rot.TransposeMultiplyVec2(u.q,s.b2Rot.MultiplyVec2(c.q,this.m_localAnchorB,s.b2Vec2.s_t0).Add(c.p).Subtract(u.p),s.b2Vec2.s_t0);n=s.b2Vec2.Dot(r.Subtract(i),this.m_localAxisD)}this.m_ratio=null!==(e=t.ratio)&&void 0!==e?e:1,this.m_constant=i+this.m_ratio*n,this.m_impulse=0}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;const e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v;let o=t.velocities[this.m_indexA].w;const a=t.positions[this.m_indexB].a,h=t.velocities[this.m_indexB].v;let l=t.velocities[this.m_indexB].w;const c=t.positions[this.m_indexC].a,d=t.velocities[this.m_indexC].v;let u=t.velocities[this.m_indexC].w;const p=t.positions[this.m_indexD].a,m=t.velocities[this.m_indexD].v;let f=t.velocities[this.m_indexD].w;const{qA:_,qB:g,qC:b,qD:y}=n;if(_.Set(e),g.Set(a),b.Set(c),y.Set(p),this.m_mass=0,this.m_typeA===r.b2JointType.e_revoluteJoint)this.m_JvAC.SetZero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{const{u:t,rC:e,rA:i,lalcA:r,lalcC:o}=n;s.b2Rot.MultiplyVec2(b,this.m_localAxisC,t),s.b2Rot.MultiplyVec2(b,s.b2Vec2.Subtract(this.m_localAnchorC,this.m_lcC,o),e),s.b2Rot.MultiplyVec2(_,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_lcA,r),i),this.m_JvAC.Copy(t),this.m_JwC=s.b2Vec2.Cross(e,t),this.m_JwA=s.b2Vec2.Cross(i,t),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_typeB===r.b2JointType.e_revoluteJoint)this.m_JvBD.SetZero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{const{u:t,rB:e,rD:i,lalcB:r,lalcD:o}=n;s.b2Rot.MultiplyVec2(y,this.m_localAxisD,t),s.b2Rot.MultiplyVec2(y,s.b2Vec2.Subtract(this.m_localAnchorD,this.m_lcD,o),i),s.b2Rot.MultiplyVec2(g,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_lcB,r),e),s.b2Vec2.Scale(this.m_ratio,t,this.m_JvBD),this.m_JwD=this.m_ratio*s.b2Vec2.Cross(i,t),this.m_JwB=this.m_ratio*s.b2Vec2.Cross(e,t),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.step.warmStarting?(i.AddScaled(this.m_mA*this.m_impulse,this.m_JvAC),o+=this.m_iA*this.m_impulse*this.m_JwA,h.AddScaled(this.m_mB*this.m_impulse,this.m_JvBD),l+=this.m_iB*this.m_impulse*this.m_JwB,d.SubtractScaled(this.m_mC*this.m_impulse,this.m_JvAC),u-=this.m_iC*this.m_impulse*this.m_JwC,m.SubtractScaled(this.m_mD*this.m_impulse,this.m_JvBD),f-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=l,t.velocities[this.m_indexC].w=u,t.velocities[this.m_indexD].w=f}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const r=t.velocities[this.m_indexB].v;let n=t.velocities[this.m_indexB].w;const o=t.velocities[this.m_indexC].v;let a=t.velocities[this.m_indexC].w;const h=t.velocities[this.m_indexD].v;let l=t.velocities[this.m_indexD].w,c=s.b2Vec2.Dot(this.m_JvAC,s.b2Vec2.Subtract(e,o,s.b2Vec2.s_t0))+s.b2Vec2.Dot(this.m_JvBD,s.b2Vec2.Subtract(r,h,s.b2Vec2.s_t0));c+=this.m_JwA*i-this.m_JwC*a+(this.m_JwB*n-this.m_JwD*l);const d=-this.m_mass*c;this.m_impulse+=d,e.AddScaled(this.m_mA*d,this.m_JvAC),i+=this.m_iA*d*this.m_JwA,r.AddScaled(this.m_mB*d,this.m_JvBD),n+=this.m_iB*d*this.m_JwB,o.SubtractScaled(this.m_mC*d,this.m_JvAC),a-=this.m_iC*d*this.m_JwC,h.SubtractScaled(this.m_mD*d,this.m_JvBD),l-=this.m_iD*d*this.m_JwD,t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=n,t.velocities[this.m_indexC].w=a,t.velocities[this.m_indexD].w=l}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let o=t.positions[this.m_indexA].a;const a=t.positions[this.m_indexB].c;let h=t.positions[this.m_indexB].a;const l=t.positions[this.m_indexC].c;let c=t.positions[this.m_indexC].a;const d=t.positions[this.m_indexD].c;let u=t.positions[this.m_indexD].a;const{qA:p,qB:m,qC:f,qD:_,JvAC:g,JvBD:b}=n;p.Set(o),m.Set(h),f.Set(c),_.Set(u);let y,w,v,x,S,A,P=0;if(this.m_typeA===r.b2JointType.e_revoluteJoint)g.SetZero(),v=1,S=1,P+=this.m_iA+this.m_iC,y=o-c-this.m_referenceAngleA;else{const{u:t,rC:i,rA:r,lalcC:o,lalcA:a}=n;s.b2Rot.MultiplyVec2(f,this.m_localAxisC,t),s.b2Rot.MultiplyVec2(f,s.b2Vec2.Subtract(this.m_localAnchorC,this.m_lcC,o),i),s.b2Rot.MultiplyVec2(p,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_lcA,a),r),g.Copy(t),S=s.b2Vec2.Cross(i,t),v=s.b2Vec2.Cross(r,t),P+=this.m_mC+this.m_mA+this.m_iC*S*S+this.m_iA*v*v;const h=o,c=s.b2Rot.TransposeMultiplyVec2(f,s.b2Vec2.Add(r,e,s.b2Vec2.s_t0).Subtract(l),s.b2Vec2.s_t0);y=s.b2Vec2.Dot(s.b2Vec2.Subtract(c,h,s.b2Vec2.s_t0),this.m_localAxisC)}if(this.m_typeB===r.b2JointType.e_revoluteJoint)b.SetZero(),x=this.m_ratio,A=this.m_ratio,P+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),w=h-u-this.m_referenceAngleB;else{const{u:t,rD:e,rB:i,lalcD:r,lalcB:o}=n;s.b2Rot.MultiplyVec2(_,this.m_localAxisD,t),s.b2Rot.MultiplyVec2(_,s.b2Vec2.Subtract(this.m_localAnchorD,this.m_lcD,r),e),s.b2Rot.MultiplyVec2(m,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_lcB,o),i),s.b2Vec2.Scale(this.m_ratio,t,b),A=this.m_ratio*s.b2Vec2.Cross(e,t),x=this.m_ratio*s.b2Vec2.Cross(i,t),P+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*A*A+this.m_iB*x*x;const h=r,l=s.b2Rot.TransposeMultiplyVec2(_,s.b2Vec2.Add(i,a,s.b2Vec2.s_t0).Subtract(d),s.b2Vec2.s_t0);w=s.b2Vec2.Dot(l.Subtract(h),this.m_localAxisD)}const C=y+this.m_ratio*w-this.m_constant;let T=0;return P>0&&(T=-C/P),e.AddScaled(this.m_mA*T,g),o+=this.m_iA*T*v,a.AddScaled(this.m_mB*T,b),h+=this.m_iB*T*x,l.SubtractScaled(this.m_mC*T,g),c-=this.m_iC*T*S,d.SubtractScaled(this.m_mD*T,b),u-=this.m_iD*T*A,t.positions[this.m_indexA].a=o,t.positions[this.m_indexB].a=h,t.positions[this.m_indexC].a=c,t.positions[this.m_indexD].a=u,0<i.b2_linearSlop}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return s.b2Vec2.Scale(t*this.m_impulse,this.m_JvAC,e)}GetReactionTorque(t){return t*this.m_impulse*this.m_JwA}GetJoint1(){return this.m_joint1}GetJoint2(){return this.m_joint2}GetRatio(){return this.m_ratio}SetRatio(t){this.m_ratio=t}}t.exports.b2GearJoint=h}));var Ts=a("dicKF");a.register("kNql8",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2MotorJoint=t.exports.b2MotorJointDef=void 0;var i=a("4L5iv"),s=a("7oGb5");const r={qA:new i.b2Rot,qB:new i.b2Rot,K:new i.b2Mat22,Cdot:new i.b2Vec2,impulse:new i.b2Vec2,oldImpulse:new i.b2Vec2};class n extends s.b2JointDef{constructor(){super(s.b2JointType.e_motorJoint),this.linearOffset=new i.b2Vec2,this.angularOffset=0,this.maxForce=1,this.maxTorque=1,this.correctionFactor=.3}Initialize(t,e){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(e.GetPosition(),this.linearOffset);const i=t.GetAngle(),s=e.GetAngle();this.angularOffset=s-i}}t.exports.b2MotorJointDef=n;class o extends s.b2Joint{constructor(t){var e,s,r,n,o;super(t),this.m_linearOffset=new i.b2Vec2,this.m_linearImpulse=new i.b2Vec2,this.m_angularImpulse=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new i.b2Vec2,this.m_rB=new i.b2Vec2,this.m_localCenterA=new i.b2Vec2,this.m_localCenterB=new i.b2Vec2,this.m_linearError=new i.b2Vec2,this.m_angularError=0,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new i.b2Mat22,this.m_angularMass=0,this.m_linearOffset.Copy(null!==(e=t.linearOffset)&&void 0!==e?e:i.b2Vec2.ZERO),this.m_angularOffset=null!==(s=t.angularOffset)&&void 0!==s?s:0,this.m_linearImpulse.SetZero(),this.m_maxForce=null!==(r=t.maxForce)&&void 0!==r?r:1,this.m_maxTorque=null!==(n=t.maxTorque)&&void 0!==n?n:1,this.m_correctionFactor=null!==(o=t.correctionFactor)&&void 0!==o?o:.3}GetAnchorA(t){const e=this.m_bodyA.GetPosition();return t.x=e.x,t.y=e.y,t}GetAnchorB(t){const e=this.m_bodyB.GetPosition();return t.x=e.x,t.y=e.y,t}GetReactionForce(t,e){return i.b2Vec2.Scale(t,this.m_linearImpulse,e)}GetReactionTorque(t){return t*this.m_angularImpulse}SetLinearOffset(t){i.b2Vec2.Equals(t,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(t))}GetLinearOffset(){return this.m_linearOffset}SetAngularOffset(t){t!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=t)}GetAngularOffset(){return this.m_angularOffset}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetMaxTorque(t){this.m_maxTorque=t}GetMaxTorque(){return this.m_maxTorque}GetCorrectionFactor(){return this.m_correctionFactor}SetCorrectionFactor(t){this.m_correctionFactor=t}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,s=t.positions[this.m_indexA].a,n=t.velocities[this.m_indexA].v;let o=t.velocities[this.m_indexA].w;const a=t.positions[this.m_indexB].c,h=t.positions[this.m_indexB].a,l=t.velocities[this.m_indexB].v;let c=t.velocities[this.m_indexB].w;const{qA:d,qB:u}=r;d.Set(s),u.Set(h);const p=i.b2Rot.MultiplyVec2(d,i.b2Vec2.Subtract(this.m_linearOffset,this.m_localCenterA,i.b2Vec2.s_t0),this.m_rA),m=i.b2Rot.MultiplyVec2(u,i.b2Vec2.Negate(this.m_localCenterB,i.b2Vec2.s_t0),this.m_rB),f=this.m_invMassA,_=this.m_invMassB,g=this.m_invIA,b=this.m_invIB,y=this.m_linearMass;if(y.ex.x=f+_+g*p.y*p.y+b*m.y*m.y,y.ex.y=-g*p.x*p.y-b*m.x*m.y,y.ey.x=y.ex.y,y.ey.y=f+_+g*p.x*p.x+b*m.x*m.x,y.Inverse(),this.m_angularMass=g+b,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),i.b2Vec2.Subtract(i.b2Vec2.Add(a,m,i.b2Vec2.s_t0),i.b2Vec2.Add(e,p,i.b2Vec2.s_t1),this.m_linearError),this.m_angularError=h-s-this.m_angularOffset,t.step.warmStarting){this.m_linearImpulse.Scale(t.step.dtRatio),this.m_angularImpulse*=t.step.dtRatio;const e=this.m_linearImpulse;n.SubtractScaled(f,e),o-=g*(i.b2Vec2.Cross(p,e)+this.m_angularImpulse),l.AddScaled(_,e),c+=b*(i.b2Vec2.Cross(m,e)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=c}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let s=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const a=this.m_invMassA,h=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,d=t.step.dt,u=t.step.inv_dt;{const t=o-s+u*this.m_correctionFactor*this.m_angularError;let e=-this.m_angularMass*t;const r=this.m_angularImpulse,n=d*this.m_maxTorque;this.m_angularImpulse=i.b2Clamp(this.m_angularImpulse+e,-n,n),e=this.m_angularImpulse-r,s-=l*e,o+=c*e}{const{impulse:t,oldImpulse:p,Cdot:m}=r;i.b2Vec2.AddScaled(i.b2Vec2.Subtract(i.b2Vec2.AddCrossScalarVec2(n,o,this.m_rB,i.b2Vec2.s_t0),i.b2Vec2.AddCrossScalarVec2(e,s,this.m_rA,i.b2Vec2.s_t1),i.b2Vec2.s_t2),u*this.m_correctionFactor,this.m_linearError,m),i.b2Mat22.MultiplyVec2(this.m_linearMass,m,t).Negate(),p.Copy(this.m_linearImpulse),this.m_linearImpulse.Add(t);const f=d*this.m_maxForce;this.m_linearImpulse.LengthSquared()>f*f&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Scale(f)),i.b2Vec2.Subtract(this.m_linearImpulse,p,t),e.SubtractScaled(a,t),s-=l*i.b2Vec2.Cross(this.m_rA,t),n.AddScaled(h,t),o+=c*i.b2Vec2.Cross(this.m_rB,t)}t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=o}SolvePositionConstraints(t){return!0}}t.exports.b2MotorJoint=o}));var Es=a("kNql8");a.register("hYVEs",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2MouseJoint=t.exports.b2MouseJointDef=void 0;var i=a("cCzda"),s=a("4L5iv"),r=a("7oGb5");const n={qB:new s.b2Rot,lalcB:new s.b2Vec2,Cdot:new s.b2Vec2,impulse:new s.b2Vec2,oldImpulse:new s.b2Vec2,pA:new s.b2Vec2,pB:new s.b2Vec2};class o extends r.b2JointDef{constructor(){super(r.b2JointType.e_mouseJoint),this.target=new s.b2Vec2,this.maxForce=0,this.stiffness=0,this.damping=0}}t.exports.b2MouseJointDef=o;class h extends r.b2Joint{constructor(t){var e,i,r,n;super(t),this.m_localAnchorB=new s.b2Vec2,this.m_targetA=new s.b2Vec2,this.m_stiffness=0,this.m_damping=0,this.m_beta=0,this.m_impulse=new s.b2Vec2,this.m_maxForce=0,this.m_gamma=0,this.m_indexB=0,this.m_rB=new s.b2Vec2,this.m_localCenterB=new s.b2Vec2,this.m_invMassB=0,this.m_invIB=0,this.m_mass=new s.b2Mat22,this.m_C=new s.b2Vec2,this.m_targetA.Copy(null!==(e=t.target)&&void 0!==e?e:s.b2Vec2.ZERO),s.b2Transform.TransposeMultiplyVec2(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB),this.m_maxForce=null!==(i=t.maxForce)&&void 0!==i?i:0,this.m_stiffness=null!==(r=t.stiffness)&&void 0!==r?r:0,this.m_damping=null!==(n=t.damping)&&void 0!==n?n:0,this.m_beta=0,this.m_gamma=0}SetTarget(t){s.b2Vec2.Equals(t,this.m_targetA)||(this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(t))}GetTarget(){return this.m_targetA}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetStiffness(t){this.m_stiffness=t}GetStiffness(){return this.m_stiffness}SetDamping(t){this.m_damping=t}GetDamping(){return this.m_damping}InitVelocityConstraints(t){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexB].c,i=t.positions[this.m_indexB].a,r=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const{qB:a,lalcB:h}=n;a.Set(i);const l=this.m_damping,c=this.m_stiffness,d=t.step.dt;this.m_gamma=d*(l+d*c),0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=d*c*this.m_gamma,s.b2Rot.MultiplyVec2(a,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,h),this.m_rB);const u=this.m_mass;u.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,u.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,u.ey.x=u.ex.y,u.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,u.Inverse(),s.b2Vec2.Add(e,this.m_rB,this.m_C).Subtract(this.m_targetA),this.m_C.Scale(this.m_beta),o*=.98,t.step.warmStarting?(this.m_impulse.Scale(t.step.dtRatio),r.AddScaled(this.m_invMassB,this.m_impulse),o+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),t.velocities[this.m_indexB].w=o}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexB].v;let i=t.velocities[this.m_indexB].w;const{Cdot:r,impulse:o,oldImpulse:a}=n;s.b2Vec2.AddCrossScalarVec2(e,i,this.m_rB,r),s.b2Mat22.MultiplyVec2(this.m_mass,s.b2Vec2.Add(r,this.m_C,o).AddScaled(this.m_gamma,this.m_impulse).Negate(),o),a.Copy(this.m_impulse),this.m_impulse.Add(o);const h=t.step.dt*this.m_maxForce;this.m_impulse.LengthSquared()>h*h&&this.m_impulse.Scale(h/this.m_impulse.Length()),s.b2Vec2.Subtract(this.m_impulse,a,o),e.AddScaled(this.m_invMassB,o),i+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,o),t.velocities[this.m_indexB].w=i}SolvePositionConstraints(t){return!0}GetAnchorA(t){return t.x=this.m_targetA.x,t.y=this.m_targetA.y,t}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return s.b2Vec2.Scale(t,this.m_impulse,e)}GetReactionTorque(t){return 0}ShiftOrigin(t){this.m_targetA.Subtract(t)}Draw(t){const e=this.GetAnchorA(n.pA),s=this.GetAnchorB(n.pB);t.DrawPoint(e,4,i.debugColors.joint7),t.DrawPoint(s,4,i.debugColors.joint7),t.DrawSegment(e,s,i.debugColors.joint8)}}t.exports.b2MouseJoint=h}));var Rs=a("hYVEs");a.register("kueJb",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2PrismaticJoint=t.exports.b2PrismaticJointDef=void 0;var i=a("1Zs4L"),s=a("cCzda"),r=a("4L5iv"),n=a("7oGb5");const o={K3:new r.b2Mat33,K2:new r.b2Mat22,qA:new r.b2Rot,qB:new r.b2Rot,lalcA:new r.b2Vec2,lalcB:new r.b2Vec2,rA:new r.b2Vec2,rB:new r.b2Vec2,GetJointTranslation:{pA:new r.b2Vec2,pB:new r.b2Vec2,d:new r.b2Vec2,axis:new r.b2Vec2},InitVelocityConstraints:{d:new r.b2Vec2,P:new r.b2Vec2},SolveVelocityConstraints:{P:new r.b2Vec2,df:new r.b2Vec2},SolvePositionConstraints:{d:new r.b2Vec2,impulse:new r.b2Vec3,impulse1:new r.b2Vec2,P:new r.b2Vec2},Draw:{p1:new r.b2Vec2,p2:new r.b2Vec2,pA:new r.b2Vec2,pB:new r.b2Vec2,axis:new r.b2Vec2,lower:new r.b2Vec2,upper:new r.b2Vec2,perp:new r.b2Vec2}};class h extends n.b2JointDef{constructor(){super(n.b2JointType.e_prismaticJoint),this.localAnchorA=new r.b2Vec2,this.localAnchorB=new r.b2Vec2,this.localAxisA=new r.b2Vec2(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0}Initialize(t,e,i,s){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.bodyA.GetLocalVector(s,this.localAxisA),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}t.exports.b2PrismaticJointDef=h;class l extends n.b2Joint{constructor(t){var e,i,s,n,o,a,h,l,c,d;super(t),this.m_localAnchorA=new r.b2Vec2,this.m_localAnchorB=new r.b2Vec2,this.m_localXAxisA=new r.b2Vec2,this.m_localYAxisA=new r.b2Vec2,this.m_referenceAngle=0,this.m_impulse=new r.b2Vec2,this.m_motorImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0,this.m_lowerTranslation=0,this.m_upperTranslation=0,this.m_maxMotorForce=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_enableMotor=!1,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new r.b2Vec2,this.m_localCenterB=new r.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_axis=new r.b2Vec2,this.m_perp=new r.b2Vec2,this.m_s1=0,this.m_s2=0,this.m_a1=0,this.m_a2=0,this.m_K=new r.b2Mat22,this.m_translation=0,this.m_axialMass=0,this.m_localAnchorA.Copy(null!==(e=t.localAnchorA)&&void 0!==e?e:r.b2Vec2.ZERO),this.m_localAnchorB.Copy(null!==(i=t.localAnchorB)&&void 0!==i?i:r.b2Vec2.ZERO),r.b2Vec2.Normalize(null!==(s=t.localAxisA)&&void 0!==s?s:r.b2Vec2.UNITX,this.m_localXAxisA),r.b2Vec2.CrossOneVec2(this.m_localXAxisA,this.m_localYAxisA),this.m_referenceAngle=null!==(n=t.referenceAngle)&&void 0!==n?n:0,this.m_lowerTranslation=null!==(o=t.lowerTranslation)&&void 0!==o?o:0,this.m_upperTranslation=null!==(a=t.upperTranslation)&&void 0!==a?a:0,this.m_maxMotorForce=null!==(h=t.maxMotorForce)&&void 0!==h?h:0,this.m_motorSpeed=null!==(l=t.motorSpeed)&&void 0!==l?l:0,this.m_enableLimit=null!==(c=t.enableLimit)&&void 0!==c&&c,this.m_enableMotor=null!==(d=t.enableMotor)&&void 0!==d&&d}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,s=t.velocities[this.m_indexA].v;let n=t.velocities[this.m_indexA].w;const a=t.positions[this.m_indexB].c,h=t.positions[this.m_indexB].a,l=t.velocities[this.m_indexB].v;let c=t.velocities[this.m_indexB].w;const{qA:d,qB:u,lalcA:p,lalcB:m,rA:f,rB:_}=o;d.Set(i),u.Set(h),r.b2Rot.MultiplyVec2(d,r.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,p),f),r.b2Rot.MultiplyVec2(u,r.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,m),_);const g=r.b2Vec2.Subtract(a,e,o.InitVelocityConstraints.d).Add(_).Subtract(f),b=this.m_invMassA,y=this.m_invMassB,w=this.m_invIA,v=this.m_invIB;r.b2Rot.MultiplyVec2(d,this.m_localXAxisA,this.m_axis),this.m_a1=r.b2Vec2.Cross(r.b2Vec2.Add(g,f,r.b2Vec2.s_t0),this.m_axis),this.m_a2=r.b2Vec2.Cross(_,this.m_axis),this.m_axialMass=b+y+w*this.m_a1*this.m_a1+v*this.m_a2*this.m_a2,this.m_axialMass>0&&(this.m_axialMass=1/this.m_axialMass),r.b2Rot.MultiplyVec2(d,this.m_localYAxisA,this.m_perp),this.m_s1=r.b2Vec2.Cross(r.b2Vec2.Add(g,f,r.b2Vec2.s_t0),this.m_perp),this.m_s2=r.b2Vec2.Cross(_,this.m_perp);const x=b+y+w*this.m_s1*this.m_s1+v*this.m_s2*this.m_s2,S=w*this.m_s1+v*this.m_s2;let A=w+v;if(0===A&&(A=1),this.m_K.ex.Set(x,S),this.m_K.ey.Set(S,A),this.m_enableLimit?this.m_translation=r.b2Vec2.Dot(this.m_axis,g):(this.m_lowerImpulse=0,this.m_upperImpulse=0),this.m_enableMotor||(this.m_motorImpulse=0),t.step.warmStarting){this.m_impulse.Scale(t.step.dtRatio),this.m_motorImpulse*=t.step.dtRatio,this.m_lowerImpulse*=t.step.dtRatio,this.m_upperImpulse*=t.step.dtRatio;const e=this.m_motorImpulse+this.m_lowerImpulse-this.m_upperImpulse,{P:i}=o.InitVelocityConstraints;r.b2Vec2.Scale(this.m_impulse.x,this.m_perp,i).AddScaled(e,this.m_axis);const a=this.m_impulse.x*this.m_s1+this.m_impulse.y+e*this.m_a1,h=this.m_impulse.x*this.m_s2+this.m_impulse.y+e*this.m_a2;s.SubtractScaled(b,i),n-=w*a,l.AddScaled(y,i),c+=v*h}else this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0;t.velocities[this.m_indexA].w=n,t.velocities[this.m_indexB].w=c}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let n=t.velocities[this.m_indexB].w;const a=this.m_invMassA,h=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,{P:d,df:u}=o.SolveVelocityConstraints;if(this.m_enableMotor){const o=r.b2Vec2.Dot(this.m_axis,r.b2Vec2.Subtract(s,e,r.b2Vec2.s_t0))+this.m_a2*n-this.m_a1*i;let u=this.m_axialMass*(this.m_motorSpeed-o);const p=this.m_motorImpulse,m=t.step.dt*this.m_maxMotorForce;this.m_motorImpulse=r.b2Clamp(this.m_motorImpulse+u,-m,m),u=this.m_motorImpulse-p,r.b2Vec2.Scale(u,this.m_axis,d);const f=u*this.m_a1,_=u*this.m_a2;e.SubtractScaled(a,d),i-=l*f,s.AddScaled(h,d),n+=c*_}if(this.m_enableLimit){{const o=this.m_translation-this.m_lowerTranslation,u=r.b2Vec2.Dot(this.m_axis,r.b2Vec2.Subtract(s,e,r.b2Vec2.s_t0))+this.m_a2*n-this.m_a1*i;let p=-this.m_axialMass*(u+Math.max(o,0)*t.step.inv_dt);const m=this.m_lowerImpulse;this.m_lowerImpulse=Math.max(this.m_lowerImpulse+p,0),p=this.m_lowerImpulse-m,r.b2Vec2.Scale(p,this.m_axis,d);const f=p*this.m_a1,_=p*this.m_a2;e.SubtractScaled(a,d),i-=l*f,s.AddScaled(h,d),n+=c*_}{const o=this.m_upperTranslation-this.m_translation,u=r.b2Vec2.Dot(this.m_axis,r.b2Vec2.Subtract(e,s,r.b2Vec2.s_t0))+this.m_a1*i-this.m_a2*n;let p=-this.m_axialMass*(u+Math.max(o,0)*t.step.inv_dt);const m=this.m_upperImpulse;this.m_upperImpulse=Math.max(this.m_upperImpulse+p,0),p=this.m_upperImpulse-m,r.b2Vec2.Scale(p,this.m_axis,d);const f=p*this.m_a1,_=p*this.m_a2;e.AddScaled(a,d),i+=l*f,s.SubtractScaled(h,d),n-=c*_}}{const t=r.b2Vec2.Dot(this.m_perp,r.b2Vec2.Subtract(s,e,r.b2Vec2.s_t0))+this.m_s2*n-this.m_s1*i,o=n-i;this.m_K.Solve(-t,-o,u),this.m_impulse.Add(u),r.b2Vec2.Scale(u.x,this.m_perp,d);const p=u.x*this.m_s1+u.y,m=u.x*this.m_s2+u.y;e.SubtractScaled(a,d),i-=l*p,s.AddScaled(h,d),n+=c*m}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=n}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let s=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let a=t.positions[this.m_indexB].a;const{qA:h,qB:l,lalcA:c,lalcB:d,rA:u,rB:p}=o;h.Set(s),l.Set(a);const m=this.m_invMassA,f=this.m_invMassB,_=this.m_invIA,g=this.m_invIB,{d:b,impulse:y,P:w}=o.SolvePositionConstraints;r.b2Rot.MultiplyVec2(h,r.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,c),u),r.b2Rot.MultiplyVec2(l,r.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,d),p),r.b2Vec2.Add(n,p,b).Subtract(e).Subtract(u);const v=r.b2Rot.MultiplyVec2(h,this.m_localXAxisA,this.m_axis),x=r.b2Vec2.Cross(r.b2Vec2.Add(b,u,r.b2Vec2.s_t0),v),S=r.b2Vec2.Cross(p,v),A=r.b2Rot.MultiplyVec2(h,this.m_localYAxisA,this.m_perp),P=r.b2Vec2.Cross(r.b2Vec2.Add(b,u,r.b2Vec2.s_t0),A),C=r.b2Vec2.Cross(p,A),T=r.b2Vec2.Dot(A,b),E=a-s-this.m_referenceAngle;let R=Math.abs(T);const B=Math.abs(E);let D=!1,I=0;if(this.m_enableLimit){const t=r.b2Vec2.Dot(v,b);Math.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?(I=t,R=Math.max(R,Math.abs(t)),D=!0):t<=this.m_lowerTranslation?(I=Math.min(t-this.m_lowerTranslation,0),R=Math.max(R,this.m_lowerTranslation-t),D=!0):t>=this.m_upperTranslation&&(I=Math.max(t-this.m_upperTranslation,0),R=Math.max(R,t-this.m_upperTranslation),D=!0)}if(D){const t=m+f+_*P*P+g*C*C,e=_*P+g*C,i=_*P*x+g*C*S;let s=_+g;0===s&&(s=1);const r=_*x+g*S,n=m+f+_*x*x+g*S*S,a=o.K3;a.ex.Set(t,e,i),a.ey.Set(e,s,r),a.ez.Set(i,r,n),a.Solve33(-T,-E,-I,y)}else{const t=m+f+_*P*P+g*C*C,e=_*P+g*C;let i=_+g;0===i&&(i=1);const s=o.K2;s.ex.Set(t,e),s.ey.Set(e,i);const r=s.Solve(-T,-E,o.SolvePositionConstraints.impulse1);y.x=r.x,y.y=r.y,y.z=0}r.b2Vec2.Scale(y.x,A,w).AddScaled(y.z,v);const M=y.x*P+y.y+y.z*x,O=y.x*C+y.y+y.z*S;return e.SubtractScaled(m,w),s-=_*M,n.AddScaled(f,w),a+=g*O,t.positions[this.m_indexA].a=s,t.positions[this.m_indexB].a=a,R<=i.b2_linearSlop&&B<=i.b2_angularSlop}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){const i=this.m_motorImpulse+this.m_lowerImpulse-this.m_upperImpulse;return e.x=t*(this.m_impulse.x*this.m_perp.x+i*this.m_axis.x),e.y=t*(this.m_impulse.x*this.m_perp.y+i*this.m_axis.y),e}GetReactionTorque(t){return t*this.m_impulse.y}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetReferenceAngle(){return this.m_referenceAngle}GetJointTranslation(){const{pA:t,pB:e,axis:i,d:s}=o.GetJointTranslation;this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t),this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e),r.b2Vec2.Subtract(e,t,s),this.m_bodyA.GetWorldVector(this.m_localXAxisA,i);return r.b2Vec2.Dot(s,i)}GetJointSpeed(){const t=this.m_bodyA,e=this.m_bodyB,{lalcA:i,lalcB:s,rA:n,rB:a}=o;r.b2Rot.MultiplyVec2(t.m_xf.q,r.b2Vec2.Subtract(this.m_localAnchorA,t.m_sweep.localCenter,i),n),r.b2Rot.MultiplyVec2(e.m_xf.q,r.b2Vec2.Subtract(this.m_localAnchorB,e.m_sweep.localCenter,s),a);const h=r.b2Vec2.Add(t.m_sweep.c,n,r.b2Vec2.s_t0),l=r.b2Vec2.Add(e.m_sweep.c,a,r.b2Vec2.s_t1),c=r.b2Vec2.Subtract(l,h,r.b2Vec2.s_t2),d=r.b2Rot.MultiplyVec2(t.m_xf.q,this.m_localXAxisA,this.m_axis),u=t.m_linearVelocity,p=e.m_linearVelocity,m=t.m_angularVelocity,f=e.m_angularVelocity;return r.b2Vec2.Dot(c,r.b2Vec2.CrossScalarVec2(m,d,r.b2Vec2.s_t0))+r.b2Vec2.Dot(d,r.b2Vec2.Subtract(r.b2Vec2.AddCrossScalarVec2(p,f,a,r.b2Vec2.s_t0),r.b2Vec2.AddCrossScalarVec2(u,m,n,r.b2Vec2.s_t1),r.b2Vec2.s_t0))}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(t){return t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t,this.m_lowerImpulse=0,this.m_upperImpulse=0),t}GetLowerLimit(){return this.m_lowerTranslation}GetUpperLimit(){return this.m_upperTranslation}SetLimits(t,e){t===this.m_lowerTranslation&&e===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_lowerImpulse=0,this.m_upperImpulse=0)}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(t){return t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t),t}SetMotorSpeed(t){return t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t),t}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorForce(t){t!==this.m_maxMotorForce&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t)}GetMaxMotorForce(){return this.m_maxMotorForce}GetMotorForce(t){return t*this.m_motorImpulse}Draw(t){const{p1:e,p2:i,pA:n,pB:a,axis:h}=o.Draw,l=this.m_bodyA.GetTransform(),c=this.m_bodyB.GetTransform();if(r.b2Transform.MultiplyVec2(l,this.m_localAnchorA,n),r.b2Transform.MultiplyVec2(c,this.m_localAnchorB,a),r.b2Rot.MultiplyVec2(l.q,this.m_localXAxisA,h),t.DrawSegment(n,a,s.debugColors.joint5),this.m_enableLimit){const{lower:a,upper:c,perp:d}=o.Draw;r.b2Vec2.AddScaled(n,this.m_lowerTranslation,h,a),r.b2Vec2.AddScaled(n,this.m_upperTranslation,h,c),r.b2Rot.MultiplyVec2(l.q,this.m_localYAxisA,d),t.DrawSegment(a,c,s.debugColors.joint1),t.DrawSegment(r.b2Vec2.SubtractScaled(a,.5,d,e),r.b2Vec2.AddScaled(a,.5,d,i),s.debugColors.joint2),t.DrawSegment(r.b2Vec2.SubtractScaled(c,.5,d,e),r.b2Vec2.AddScaled(c,.5,d,i),s.debugColors.joint3)}else t.DrawSegment(r.b2Vec2.Subtract(n,h,e),r.b2Vec2.Add(n,h,i),s.debugColors.joint1);t.DrawPoint(n,5,s.debugColors.joint1),t.DrawPoint(a,5,s.debugColors.joint4)}}t.exports.b2PrismaticJoint=l}));var Bs=a("kueJb");a.register("kd0sK",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2PulleyJoint=t.exports.b2PulleyJointDef=t.exports.b2_minPulleyLength=void 0;var i=a("1Zs4L"),s=a("cCzda"),r=a("4L5iv"),n=a("7oGb5");t.exports.b2_minPulleyLength=2;const o={qA:new r.b2Rot,qB:new r.b2Rot,lalcA:new r.b2Vec2,lalcB:new r.b2Vec2,p:new r.b2Vec2,PA:new r.b2Vec2,PB:new r.b2Vec2,vpA:new r.b2Vec2,vpB:new r.b2Vec2,pA:new r.b2Vec2,pB:new r.b2Vec2};class h extends n.b2JointDef{constructor(){super(n.b2JointType.e_pulleyJoint),this.groundAnchorA=new r.b2Vec2(-1,1),this.groundAnchorB=new r.b2Vec2(1,1),this.localAnchorA=new r.b2Vec2(-1,0),this.localAnchorB=new r.b2Vec2(1,0),this.lengthA=0,this.lengthB=0,this.ratio=1,this.collideConnected=!0}Initialize(t,e,i,s,n,o,a){this.bodyA=t,this.bodyB=e,this.groundAnchorA.Copy(i),this.groundAnchorB.Copy(s),this.bodyA.GetLocalPoint(n,this.localAnchorA),this.bodyB.GetLocalPoint(o,this.localAnchorB),this.lengthA=r.b2Vec2.Distance(n,i),this.lengthB=r.b2Vec2.Distance(o,s),this.ratio=a}}t.exports.b2PulleyJointDef=h;const l=new r.b2Vec2(-1,1),c=r.b2Vec2.UNITX,d=new r.b2Vec2(-1,0),u=r.b2Vec2.UNITX;class p extends n.b2Joint{constructor(t){var e,i,s,n,o,a,h;super(t),this.m_groundAnchorA=new r.b2Vec2,this.m_groundAnchorB=new r.b2Vec2,this.m_lengthA=0,this.m_lengthB=0,this.m_localAnchorA=new r.b2Vec2,this.m_localAnchorB=new r.b2Vec2,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_uA=new r.b2Vec2,this.m_uB=new r.b2Vec2,this.m_rA=new r.b2Vec2,this.m_rB=new r.b2Vec2,this.m_localCenterA=new r.b2Vec2,this.m_localCenterB=new r.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_groundAnchorA.Copy(null!==(e=t.groundAnchorA)&&void 0!==e?e:l),this.m_groundAnchorB.Copy(null!==(i=t.groundAnchorB)&&void 0!==i?i:c),this.m_localAnchorA.Copy(null!==(s=t.localAnchorA)&&void 0!==s?s:d),this.m_localAnchorB.Copy(null!==(n=t.localAnchorB)&&void 0!==n?n:u),this.m_lengthA=null!==(o=t.lengthA)&&void 0!==o?o:0,this.m_lengthB=null!==(a=t.lengthB)&&void 0!==a?a:0,this.m_ratio=null!==(h=t.ratio)&&void 0!==h?h:1,this.m_constant=this.m_lengthA+this.m_ratio*this.m_lengthB,this.m_impulse=0}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,s=t.positions[this.m_indexA].a,n=t.velocities[this.m_indexA].v;let a=t.velocities[this.m_indexA].w;const h=t.positions[this.m_indexB].c,l=t.positions[this.m_indexB].a,c=t.velocities[this.m_indexB].v;let d=t.velocities[this.m_indexB].w;const{qA:u,qB:p,lalcA:m,lalcB:f}=o;u.Set(s),p.Set(l),r.b2Rot.MultiplyVec2(u,r.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,m),this.m_rA),r.b2Rot.MultiplyVec2(p,r.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,f),this.m_rB),r.b2Vec2.Add(e,this.m_rA,this.m_uA).Subtract(this.m_groundAnchorA),r.b2Vec2.Add(h,this.m_rB,this.m_uB).Subtract(this.m_groundAnchorB);const _=this.m_uA.Length(),g=this.m_uB.Length();_>10*i.b2_linearSlop?this.m_uA.Scale(1/_):this.m_uA.SetZero(),g>10*i.b2_linearSlop?this.m_uB.Scale(1/g):this.m_uB.SetZero();const b=r.b2Vec2.Cross(this.m_rA,this.m_uA),y=r.b2Vec2.Cross(this.m_rB,this.m_uB),w=this.m_invMassA+this.m_invIA*b*b,v=this.m_invMassB+this.m_invIB*y*y;if(this.m_mass=w+this.m_ratio*this.m_ratio*v,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.step.warmStarting){this.m_impulse*=t.step.dtRatio;const{PA:e,PB:i}=o;r.b2Vec2.Scale(-this.m_impulse,this.m_uA,e),r.b2Vec2.Scale(-this.m_ratio*this.m_impulse,this.m_uB,i),n.AddScaled(this.m_invMassA,e),a+=this.m_invIA*r.b2Vec2.Cross(this.m_rA,e),c.AddScaled(this.m_invMassB,i),d+=this.m_invIB*r.b2Vec2.Cross(this.m_rB,i)}else this.m_impulse=0;t.velocities[this.m_indexA].w=a,t.velocities[this.m_indexB].w=d}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let n=t.velocities[this.m_indexB].w;const{PA:a,PB:h,vpA:l,vpB:c}=o;r.b2Vec2.AddCrossScalarVec2(e,i,this.m_rA,l),r.b2Vec2.AddCrossScalarVec2(s,n,this.m_rB,c);const d=-r.b2Vec2.Dot(this.m_uA,l)-this.m_ratio*r.b2Vec2.Dot(this.m_uB,c),u=-this.m_mass*d;this.m_impulse+=u,r.b2Vec2.Scale(-u,this.m_uA,a),r.b2Vec2.Scale(-this.m_ratio*u,this.m_uB,h),e.AddScaled(this.m_invMassA,a),i+=this.m_invIA*r.b2Vec2.Cross(this.m_rA,a),s.AddScaled(this.m_invMassB,h),n+=this.m_invIB*r.b2Vec2.Cross(this.m_rB,h),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=n}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let s=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let a=t.positions[this.m_indexB].a;const{qA:h,qB:l,lalcA:c,lalcB:d,PA:u,PB:p}=o;h.Set(s),l.Set(a);const m=r.b2Rot.MultiplyVec2(h,r.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,c),this.m_rA),f=r.b2Rot.MultiplyVec2(l,r.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,d),this.m_rB),_=r.b2Vec2.Add(e,m,this.m_uA).Subtract(this.m_groundAnchorA),g=r.b2Vec2.Add(n,f,this.m_uB).Subtract(this.m_groundAnchorB),b=_.Length(),y=g.Length();b>10*i.b2_linearSlop?_.Scale(1/b):_.SetZero(),y>10*i.b2_linearSlop?g.Scale(1/y):g.SetZero();const w=r.b2Vec2.Cross(m,_),v=r.b2Vec2.Cross(f,g),x=this.m_invMassA+this.m_invIA*w*w,S=this.m_invMassB+this.m_invIB*v*v;let A=x+this.m_ratio*this.m_ratio*S;A>0&&(A=1/A);const P=this.m_constant-b-this.m_ratio*y,C=Math.abs(P),T=-A*P;return r.b2Vec2.Scale(-T,_,u),r.b2Vec2.Scale(-this.m_ratio*T,g,p),e.AddScaled(this.m_invMassA,u),s+=this.m_invIA*r.b2Vec2.Cross(m,u),n.AddScaled(this.m_invMassB,p),a+=this.m_invIB*r.b2Vec2.Cross(f,p),t.positions[this.m_indexA].a=s,t.positions[this.m_indexB].a=a,C<i.b2_linearSlop}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*this.m_impulse*this.m_uB.x,e.y=t*this.m_impulse*this.m_uB.y,e}GetReactionTorque(t){return 0}GetGroundAnchorA(){return this.m_groundAnchorA}GetGroundAnchorB(){return this.m_groundAnchorB}GetLengthA(){return this.m_lengthA}GetLengthB(){return this.m_lengthB}GetRatio(){return this.m_ratio}GetCurrentLengthA(){const t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o.p),e=this.m_groundAnchorA;return r.b2Vec2.Distance(t,e)}GetCurrentLengthB(){const t=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o.p),e=this.m_groundAnchorB;return r.b2Vec2.Distance(t,e)}ShiftOrigin(t){this.m_groundAnchorA.Subtract(t),this.m_groundAnchorB.Subtract(t)}Draw(t){const e=this.GetAnchorA(o.pA),i=this.GetAnchorB(o.pB),r=this.GetGroundAnchorA(),n=this.GetGroundAnchorB();t.DrawSegment(r,e,s.debugColors.joint6),t.DrawSegment(n,i,s.debugColors.joint6),t.DrawSegment(r,n,s.debugColors.joint6)}}t.exports.b2PulleyJoint=p}));var Ds=a("kd0sK");a.register("jrvQ3",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2RevoluteJoint=t.exports.b2RevoluteJointDef=void 0;var i=a("1Zs4L"),s=a("cCzda"),r=a("4L5iv"),n=a("7oGb5");const o={qA:new r.b2Rot,qB:new r.b2Rot,lalcA:new r.b2Vec2,lalcB:new r.b2Vec2,P:new r.b2Vec2,Cdot:new r.b2Vec2,C:new r.b2Vec2,impulse:new r.b2Vec2,p2:new r.b2Vec2,r:new r.b2Vec2,pA:new r.b2Vec2,pB:new r.b2Vec2,rlo:new r.b2Vec2,rhi:new r.b2Vec2};class h extends n.b2JointDef{constructor(){super(n.b2JointType.e_revoluteJoint),this.localAnchorA=new r.b2Vec2,this.localAnchorB=new r.b2Vec2,this.referenceAngle=0,this.enableLimit=!1,this.lowerAngle=0,this.upperAngle=0,this.enableMotor=!1,this.motorSpeed=0,this.maxMotorTorque=0}Initialize(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}t.exports.b2RevoluteJointDef=h;class l extends n.b2Joint{constructor(t){var e,i,s,n,o,a,h,l,c;super(t),this.m_localAnchorA=new r.b2Vec2,this.m_localAnchorB=new r.b2Vec2,this.m_impulse=new r.b2Vec2,this.m_motorImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0,this.m_enableMotor=!1,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_referenceAngle=0,this.m_lowerAngle=0,this.m_upperAngle=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new r.b2Vec2,this.m_rB=new r.b2Vec2,this.m_localCenterA=new r.b2Vec2,this.m_localCenterB=new r.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_K=new r.b2Mat22,this.m_angle=0,this.m_axialMass=0,this.m_localAnchorA.Copy(null!==(e=t.localAnchorA)&&void 0!==e?e:r.b2Vec2.ZERO),this.m_localAnchorB.Copy(null!==(i=t.localAnchorB)&&void 0!==i?i:r.b2Vec2.ZERO),this.m_referenceAngle=null!==(s=t.referenceAngle)&&void 0!==s?s:0,this.m_impulse.SetZero(),this.m_lowerAngle=null!==(n=t.lowerAngle)&&void 0!==n?n:0,this.m_upperAngle=null!==(o=t.upperAngle)&&void 0!==o?o:0,this.m_maxMotorTorque=null!==(a=t.maxMotorTorque)&&void 0!==a?a:0,this.m_motorSpeed=null!==(h=t.motorSpeed)&&void 0!==h?h:0,this.m_enableLimit=null!==(l=t.enableLimit)&&void 0!==l&&l,this.m_enableMotor=null!==(c=t.enableMotor)&&void 0!==c&&c}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v;let s=t.velocities[this.m_indexA].w;const n=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v;let h=t.velocities[this.m_indexB].w;const{qA:l,qB:c,lalcA:d,lalcB:u}=o;l.Set(e),c.Set(n),r.b2Rot.MultiplyVec2(l,r.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,d),this.m_rA),r.b2Rot.MultiplyVec2(c,r.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,u),this.m_rB);const p=this.m_invMassA,m=this.m_invMassB,f=this.m_invIA,_=this.m_invIB;let g;if(this.m_K.ex.x=p+m+this.m_rA.y*this.m_rA.y*f+this.m_rB.y*this.m_rB.y*_,this.m_K.ey.x=-this.m_rA.y*this.m_rA.x*f-this.m_rB.y*this.m_rB.x*_,this.m_K.ex.y=this.m_K.ey.x,this.m_K.ey.y=p+m+this.m_rA.x*this.m_rA.x*f+this.m_rB.x*this.m_rB.x*_,this.m_axialMass=f+_,this.m_axialMass>0?(this.m_axialMass=1/this.m_axialMass,g=!1):g=!0,this.m_angle=n-e-this.m_referenceAngle,(!1===this.m_enableLimit||g)&&(this.m_lowerImpulse=0,this.m_upperImpulse=0),(!1===this.m_enableMotor||g)&&(this.m_motorImpulse=0),t.step.warmStarting){this.m_impulse.Scale(t.step.dtRatio),this.m_motorImpulse*=t.step.dtRatio,this.m_lowerImpulse*=t.step.dtRatio,this.m_upperImpulse*=t.step.dtRatio;const e=this.m_motorImpulse+this.m_lowerImpulse-this.m_upperImpulse,n=o.P.Set(this.m_impulse.x,this.m_impulse.y);i.SubtractScaled(p,n),s-=f*(r.b2Vec2.Cross(this.m_rA,n)+e),a.AddScaled(m,n),h+=_*(r.b2Vec2.Cross(this.m_rB,n)+e)}else this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0;t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=h}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let n=t.velocities[this.m_indexB].w;const a=this.m_invMassA,h=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,d=l+c===0;if(this.m_enableMotor&&!d){const e=n-i-this.m_motorSpeed;let s=-this.m_axialMass*e;const o=this.m_motorImpulse,a=t.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=r.b2Clamp(this.m_motorImpulse+s,-a,a),s=this.m_motorImpulse-o,i-=l*s,n+=c*s}if(this.m_enableLimit&&!d){{const e=this.m_angle-this.m_lowerAngle,s=n-i;let r=-this.m_axialMass*(s+Math.max(e,0)*t.step.inv_dt);const o=this.m_lowerImpulse;this.m_lowerImpulse=Math.max(this.m_lowerImpulse+r,0),r=this.m_lowerImpulse-o,i-=l*r,n+=c*r}{const e=this.m_upperAngle-this.m_angle,s=i-n;let r=-this.m_axialMass*(s+Math.max(e,0)*t.step.inv_dt);const o=this.m_upperImpulse;this.m_upperImpulse=Math.max(this.m_upperImpulse+r,0),r=this.m_upperImpulse-o,i+=l*r,n-=c*r}}{const{Cdot:t,impulse:d}=o;r.b2Vec2.Subtract(r.b2Vec2.AddCrossScalarVec2(s,n,this.m_rB,r.b2Vec2.s_t0),r.b2Vec2.AddCrossScalarVec2(e,i,this.m_rA,r.b2Vec2.s_t1),t),this.m_K.Solve(-t.x,-t.y,d),this.m_impulse.x+=d.x,this.m_impulse.y+=d.y,e.SubtractScaled(a,d),i-=l*r.b2Vec2.Cross(this.m_rA,d),s.AddScaled(h,d),n+=c*r.b2Vec2.Cross(this.m_rB,d)}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=n}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let s=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let a=t.positions[this.m_indexB].a;const{qA:h,qB:l,lalcA:c,lalcB:d,impulse:u}=o;h.Set(s),l.Set(a);let p=0,m=0;const f=this.m_invIA+this.m_invIB===0;if(this.m_enableLimit&&!f){const t=a-s-this.m_referenceAngle;let e=0;Math.abs(this.m_upperAngle-this.m_lowerAngle)<2*i.b2_angularSlop?e=r.b2Clamp(t-this.m_lowerAngle,-i.b2_maxAngularCorrection,i.b2_maxAngularCorrection):t<=this.m_lowerAngle?e=r.b2Clamp(t-this.m_lowerAngle+i.b2_angularSlop,-i.b2_maxAngularCorrection,0):t>=this.m_upperAngle&&(e=r.b2Clamp(t-this.m_upperAngle-i.b2_angularSlop,0,i.b2_maxAngularCorrection));const n=-this.m_axialMass*e;s-=this.m_invIA*n,a+=this.m_invIB*n,p=Math.abs(e)}{h.Set(s),l.Set(a);const t=r.b2Rot.MultiplyVec2(h,r.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,c),this.m_rA),i=r.b2Rot.MultiplyVec2(l,r.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,d),this.m_rB),p=r.b2Vec2.Add(n,i,o.C).Subtract(e).Subtract(t);m=p.Length();const f=this.m_invMassA,_=this.m_invMassB,g=this.m_invIA,b=this.m_invIB,y=this.m_K;y.ex.x=f+_+g*t.y*t.y+b*i.y*i.y,y.ex.y=-g*t.x*t.y-b*i.x*i.y,y.ey.x=y.ex.y,y.ey.y=f+_+g*t.x*t.x+b*i.x*i.x,y.Solve(p.x,p.y,u).Negate(),e.SubtractScaled(f,u),s-=g*r.b2Vec2.Cross(t,u),n.AddScaled(_,u),a+=b*r.b2Vec2.Cross(i,u)}return t.positions[this.m_indexA].a=s,t.positions[this.m_indexB].a=a,m<=i.b2_linearSlop&&p<=i.b2_angularSlop}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*this.m_impulse.x,e.y=t*this.m_impulse.y,e}GetReactionTorque(t){return t*(this.m_motorImpulse+this.m_lowerImpulse-this.m_upperImpulse)}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}GetJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle}GetJointSpeed(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(t){return t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t),t}GetMotorTorque(t){return t*this.m_motorImpulse}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorTorque(t){t!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=t)}GetMaxMotorTorque(){return this.m_maxMotorTorque}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(t){return t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t,this.m_lowerImpulse=0,this.m_upperImpulse=0),t}GetLowerLimit(){return this.m_lowerAngle}GetUpperLimit(){return this.m_upperAngle}SetLimits(t,e){t===this.m_lowerAngle&&e===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerImpulse=0,this.m_upperImpulse=0,this.m_lowerAngle=t,this.m_upperAngle=e)}SetMotorSpeed(t){return t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t),t}Draw(t){const{p2:e,r:i,pA:n,pB:a}=o,h=this.m_bodyA.GetTransform(),l=this.m_bodyB.GetTransform();r.b2Transform.MultiplyVec2(h,this.m_localAnchorA,n),r.b2Transform.MultiplyVec2(l,this.m_localAnchorB,a),t.DrawPoint(n,5,s.debugColors.joint4),t.DrawPoint(a,5,s.debugColors.joint5);const c=this.m_bodyA.GetAngle(),d=this.m_bodyB.GetAngle()-c-this.m_referenceAngle,u=.5;if(i.Set(Math.cos(d),Math.sin(d)).Scale(u),t.DrawSegment(a,r.b2Vec2.Add(a,i,e),s.debugColors.joint1),t.DrawCircle(a,u,s.debugColors.joint1),this.m_enableLimit){const{rlo:i,rhi:n}=o;i.Set(Math.cos(this.m_lowerAngle),Math.sin(this.m_lowerAngle)).Scale(u),n.Set(Math.cos(this.m_upperAngle),Math.sin(this.m_upperAngle)).Scale(u),t.DrawSegment(a,r.b2Vec2.Add(a,i,e),s.debugColors.joint2),t.DrawSegment(a,r.b2Vec2.Add(a,n,e),s.debugColors.joint3)}t.DrawSegment(h.p,n,s.debugColors.joint6),t.DrawSegment(n,a,s.debugColors.joint6),t.DrawSegment(l.p,a,s.debugColors.joint6)}}t.exports.b2RevoluteJoint=l}));var Is=a("jrvQ3");a.register("bvnb7",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2WeldJoint=t.exports.b2WeldJointDef=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("7oGb5");const n={qA:new s.b2Rot,qB:new s.b2Rot,rA:new s.b2Vec2,rB:new s.b2Vec2,lalcA:new s.b2Vec2,lalcB:new s.b2Vec2,K:new s.b2Mat33,P:new s.b2Vec2,Cdot1:new s.b2Vec3,impulse1:new s.b2Vec2,impulse:new s.b2Vec3,C1:new s.b2Vec2,C:new s.b2Vec3};class o extends r.b2JointDef{constructor(){super(r.b2JointType.e_weldJoint),this.localAnchorA=new s.b2Vec2,this.localAnchorB=new s.b2Vec2,this.referenceAngle=0,this.stiffness=0,this.damping=0}Initialize(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}t.exports.b2WeldJointDef=o;class h extends r.b2Joint{constructor(t){var e,i,r,n,o;super(t),this.m_stiffness=0,this.m_damping=0,this.m_bias=0,this.m_localAnchorA=new s.b2Vec2,this.m_localAnchorB=new s.b2Vec2,this.m_referenceAngle=0,this.m_gamma=0,this.m_impulse=new s.b2Vec3,this.m_indexA=0,this.m_indexB=0,this.m_rA=new s.b2Vec2,this.m_rB=new s.b2Vec2,this.m_localCenterA=new s.b2Vec2,this.m_localCenterB=new s.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new s.b2Mat33,this.m_localAnchorA.Copy(null!==(e=t.localAnchorA)&&void 0!==e?e:s.b2Vec2.ZERO),this.m_localAnchorB.Copy(null!==(i=t.localAnchorB)&&void 0!==i?i:s.b2Vec2.ZERO),this.m_referenceAngle=null!==(r=t.referenceAngle)&&void 0!==r?r:0,this.m_stiffness=null!==(n=t.stiffness)&&void 0!==n?n:0,this.m_damping=null!==(o=t.damping)&&void 0!==o?o:0}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v;let r=t.velocities[this.m_indexA].w;const o=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v;let h=t.velocities[this.m_indexB].w;const{qA:l,qB:c,lalcA:d,lalcB:u,K:p}=n;l.Set(e),c.Set(o),s.b2Rot.MultiplyVec2(l,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,d),this.m_rA),s.b2Rot.MultiplyVec2(c,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,u),this.m_rB);const m=this.m_invMassA,f=this.m_invMassB,_=this.m_invIA,g=this.m_invIB;if(p.ex.x=m+f+this.m_rA.y*this.m_rA.y*_+this.m_rB.y*this.m_rB.y*g,p.ey.x=-this.m_rA.y*this.m_rA.x*_-this.m_rB.y*this.m_rB.x*g,p.ez.x=-this.m_rA.y*_-this.m_rB.y*g,p.ex.y=p.ey.x,p.ey.y=m+f+this.m_rA.x*this.m_rA.x*_+this.m_rB.x*this.m_rB.x*g,p.ez.y=this.m_rA.x*_+this.m_rB.x*g,p.ex.z=p.ez.x,p.ey.z=p.ez.y,p.ez.z=_+g,this.m_stiffness>0){p.GetInverse22(this.m_mass);let i=_+g;const s=o-e-this.m_referenceAngle,r=this.m_damping,n=this.m_stiffness,a=t.step.dt;this.m_gamma=a*(r+a*n),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=s*a*n*this.m_gamma,i+=this.m_gamma,this.m_mass.ez.z=0!==i?1/i:0}else 0===p.ez.z?(p.GetInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(p.GetSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(t.step.warmStarting){this.m_impulse.Scale(t.step.dtRatio);const{P:e}=n;e.Copy(this.m_impulse),i.SubtractScaled(m,e),r-=_*(s.b2Vec2.Cross(this.m_rA,e)+this.m_impulse.z),a.AddScaled(f,e),h+=g*(s.b2Vec2.Cross(this.m_rB,e)+this.m_impulse.z)}else this.m_impulse.SetZero();t.velocities[this.m_indexA].w=r,t.velocities[this.m_indexB].w=h}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const r=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const a=this.m_invMassA,h=this.m_invMassB,l=this.m_invIA,c=this.m_invIB;if(this.m_stiffness>0){const t=o-i,d=-this.m_mass.ez.z*(t+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=d,i-=l*d,o+=c*d;const{Cdot1:u,impulse1:p}=n;s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(r,o,this.m_rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(e,i,this.m_rA,s.b2Vec2.s_t1),u),s.b2Mat33.MultiplyVec2(this.m_mass,u,p).Negate(),this.m_impulse.x+=p.x,this.m_impulse.y+=p.y;const m=p;e.SubtractScaled(a,m),i-=l*s.b2Vec2.Cross(this.m_rA,m),r.AddScaled(h,m),o+=c*s.b2Vec2.Cross(this.m_rB,m)}else{const{Cdot1:t,impulse:d,P:u}=n;s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(r,o,this.m_rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(e,i,this.m_rA,s.b2Vec2.s_t1),t),t.z=o-i,s.b2Mat33.MultiplyVec3(this.m_mass,t,d).Negate(),this.m_impulse.Add(d),u.Set(d.x,d.y),e.SubtractScaled(a,u),i-=l*(s.b2Vec2.Cross(this.m_rA,u)+d.z),r.AddScaled(h,u),o+=c*(s.b2Vec2.Cross(this.m_rB,u)+d.z)}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=o}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let r=t.positions[this.m_indexA].a;const o=t.positions[this.m_indexB].c;let a=t.positions[this.m_indexB].a;const{qA:h,qB:l,lalcA:c,lalcB:d,K:u,C1:p,P:m,rA:f,rB:_}=n;h.Set(r),l.Set(a);const g=this.m_invMassA,b=this.m_invMassB,y=this.m_invIA,w=this.m_invIB;let v,x;if(s.b2Rot.MultiplyVec2(h,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,c),f),s.b2Rot.MultiplyVec2(l,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,d),_),u.ex.x=g+b+f.y*f.y*y+_.y*_.y*w,u.ey.x=-f.y*f.x*y-_.y*_.x*w,u.ez.x=-f.y*y-_.y*w,u.ex.y=u.ey.x,u.ey.y=g+b+f.x*f.x*y+_.x*_.x*w,u.ez.y=f.x*y+_.x*w,u.ex.z=u.ez.x,u.ey.z=u.ez.y,u.ez.z=y+w,this.m_stiffness>0)s.b2Vec2.Add(o,_,p).Subtract(e).Subtract(f),v=p.Length(),x=0,u.Solve22(p.x,p.y,m).Negate(),e.SubtractScaled(g,m),r-=y*s.b2Vec2.Cross(f,m),o.AddScaled(b,m),a+=w*s.b2Vec2.Cross(_,m);else{s.b2Vec2.Add(o,_,p).Subtract(e).Subtract(f),s.b2Vec2.Subtract(s.b2Vec2.Add(o,_,s.b2Vec2.s_t0),s.b2Vec2.Add(e,f,s.b2Vec2.s_t1),p);const t=a-r-this.m_referenceAngle;v=p.Length(),x=Math.abs(t);const{impulse:i,C:h}=n;h.Set(p.x,p.y,t),u.ez.z>0?u.Solve33(h.x,h.y,h.z,i).Negate():(u.Solve22(p.x,p.y,i).Negate(),i.z=0),m.Copy(i),e.SubtractScaled(g,m),r-=y*(s.b2Vec2.Cross(f,m)+i.z),o.AddScaled(b,m),a+=w*(s.b2Vec2.Cross(_,m)+i.z)}return t.positions[this.m_indexA].a=r,t.positions[this.m_indexB].a=a,v<=i.b2_linearSlop&&x<=i.b2_angularSlop}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*this.m_impulse.x,e.y=t*this.m_impulse.y,e}GetReactionTorque(t){return t*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}SetStiffness(t){this.m_stiffness=t}GetStiffness(){return this.m_stiffness}SetDamping(t){this.m_damping=t}GetDamping(){return this.m_damping}}t.exports.b2WeldJoint=h}));var Ms=a("bvnb7");a.register("fAtfp",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2WheelJoint=t.exports.b2WheelJointDef=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("7oGb5"),n=a("cCzda");const o={qA:new s.b2Rot,qB:new s.b2Rot,lalcA:new s.b2Vec2,lalcB:new s.b2Vec2,rA:new s.b2Vec2,rB:new s.b2Vec2,d:new s.b2Vec2,P:new s.b2Vec2,ay:new s.b2Vec2,pA:new s.b2Vec2,pB:new s.b2Vec2,axis:new s.b2Vec2,Draw:{p1:new s.b2Vec2,p2:new s.b2Vec2,pA:new s.b2Vec2,pB:new s.b2Vec2,axis:new s.b2Vec2,lower:new s.b2Vec2,upper:new s.b2Vec2,perp:new s.b2Vec2}};class h extends r.b2JointDef{constructor(){super(r.b2JointType.e_wheelJoint),this.localAnchorA=new s.b2Vec2,this.localAnchorB=new s.b2Vec2,this.localAxisA=new s.b2Vec2(1,0),this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorTorque=0,this.motorSpeed=0,this.stiffness=0,this.damping=0}Initialize(t,e,i,s){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.bodyA.GetLocalVector(s,this.localAxisA)}}t.exports.b2WheelJointDef=h;class l extends r.b2Joint{constructor(t){var e,i,r,n,o,a,h,l,c,d,u;super(t),this.m_localAnchorA=new s.b2Vec2,this.m_localAnchorB=new s.b2Vec2,this.m_localXAxisA=new s.b2Vec2,this.m_localYAxisA=new s.b2Vec2,this.m_impulse=0,this.m_motorImpulse=0,this.m_springImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0,this.m_translation=0,this.m_lowerTranslation=0,this.m_upperTranslation=0,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_enableMotor=!1,this.m_stiffness=0,this.m_damping=0,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new s.b2Vec2,this.m_localCenterB=new s.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_ax=new s.b2Vec2,this.m_ay=new s.b2Vec2,this.m_sAx=0,this.m_sBx=0,this.m_sAy=0,this.m_sBy=0,this.m_mass=0,this.m_motorMass=0,this.m_axialMass=0,this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_localAnchorA.Copy(null!==(e=t.localAnchorA)&&void 0!==e?e:s.b2Vec2.ZERO),this.m_localAnchorB.Copy(null!==(i=t.localAnchorB)&&void 0!==i?i:s.b2Vec2.ZERO),this.m_localXAxisA.Copy(null!==(r=t.localAxisA)&&void 0!==r?r:s.b2Vec2.UNITX),s.b2Vec2.CrossOneVec2(this.m_localXAxisA,this.m_localYAxisA),this.m_lowerTranslation=null!==(n=t.lowerTranslation)&&void 0!==n?n:0,this.m_upperTranslation=null!==(o=t.upperTranslation)&&void 0!==o?o:0,this.m_enableLimit=null!==(a=t.enableLimit)&&void 0!==a&&a,this.m_maxMotorTorque=null!==(h=t.maxMotorTorque)&&void 0!==h?h:0,this.m_motorSpeed=null!==(l=t.motorSpeed)&&void 0!==l?l:0,this.m_enableMotor=null!==(c=t.enableMotor)&&void 0!==c&&c,this.m_ax.SetZero(),this.m_ay.SetZero(),this.m_stiffness=null!==(d=t.stiffness)&&void 0!==d?d:0,this.m_damping=null!==(u=t.damping)&&void 0!==u?u:0}GetMotorSpeed(){return this.m_motorSpeed}GetMaxMotorTorque(){return this.m_maxMotorTorque}SetStiffness(t){this.m_stiffness=t}GetStiffness(){return this.m_stiffness}SetDamping(t){this.m_damping=t}GetDamping(){return this.m_damping}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=this.m_invMassA,i=this.m_invMassB,r=this.m_invIA,n=this.m_invIB,a=t.positions[this.m_indexA].c,h=t.positions[this.m_indexA].a,l=t.velocities[this.m_indexA].v;let c=t.velocities[this.m_indexA].w;const d=t.positions[this.m_indexB].c,u=t.positions[this.m_indexB].a,p=t.velocities[this.m_indexB].v;let m=t.velocities[this.m_indexB].w;const{qA:f,qB:_,lalcA:g,lalcB:b,rA:y,rB:w,d:v}=o;f.Set(h),_.Set(u),s.b2Rot.MultiplyVec2(f,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,g),y),s.b2Rot.MultiplyVec2(_,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,b),w),s.b2Vec2.Add(d,w,v).Subtract(a).Subtract(y),s.b2Rot.MultiplyVec2(f,this.m_localYAxisA,this.m_ay),this.m_sAy=s.b2Vec2.Cross(s.b2Vec2.Add(v,y,s.b2Vec2.s_t0),this.m_ay),this.m_sBy=s.b2Vec2.Cross(w,this.m_ay),this.m_mass=e+i+r*this.m_sAy*this.m_sAy+n*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),s.b2Rot.MultiplyVec2(f,this.m_localXAxisA,this.m_ax),this.m_sAx=s.b2Vec2.Cross(s.b2Vec2.Add(v,y,s.b2Vec2.s_t0),this.m_ax),this.m_sBx=s.b2Vec2.Cross(w,this.m_ax);const x=e+i+r*this.m_sAx*this.m_sAx+n*this.m_sBx*this.m_sBx;if(this.m_axialMass=x>0?1/x:0,this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_stiffness>0&&x>0){this.m_springMass=1/x;const e=s.b2Vec2.Dot(v,this.m_ax),i=t.step.dt;this.m_gamma=i*(this.m_damping+i*this.m_stiffness),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=e*i*this.m_stiffness*this.m_gamma,this.m_springMass=x+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}else this.m_springImpulse=0;if(this.m_enableLimit?this.m_translation=s.b2Vec2.Dot(this.m_ax,v):(this.m_lowerImpulse=0,this.m_upperImpulse=0),this.m_enableMotor?(this.m_motorMass=r+n,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.step.warmStarting){this.m_impulse*=t.step.dtRatio,this.m_springImpulse*=t.step.dtRatio,this.m_motorImpulse*=t.step.dtRatio;const e=this.m_springImpulse+this.m_lowerImpulse-this.m_upperImpulse,{P:i}=o;s.b2Vec2.Scale(this.m_impulse,this.m_ay,i).AddScaled(e,this.m_ax);const r=this.m_impulse*this.m_sAy+e*this.m_sAx+this.m_motorImpulse,n=this.m_impulse*this.m_sBy+e*this.m_sBx+this.m_motorImpulse;l.SubtractScaled(this.m_invMassA,i),c-=this.m_invIA*r,p.AddScaled(this.m_invMassB,i),m+=this.m_invIB*n}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0;t.velocities[this.m_indexA].w=c,t.velocities[this.m_indexB].w=m}SolveVelocityConstraints(t){const e=this.m_invMassA,i=this.m_invMassB,r=this.m_invIA,n=this.m_invIB,a=t.velocities[this.m_indexA].v;let h=t.velocities[this.m_indexA].w;const l=t.velocities[this.m_indexB].v;let c=t.velocities[this.m_indexB].w;const{P:d}=o;{const t=s.b2Vec2.Dot(this.m_ax,s.b2Vec2.Subtract(l,a,s.b2Vec2.s_t0))+this.m_sBx*c-this.m_sAx*h,o=-this.m_springMass*(t+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=o,s.b2Vec2.Scale(o,this.m_ax,d);const u=o*this.m_sAx,p=o*this.m_sBx;a.SubtractScaled(e,d),h-=r*u,l.AddScaled(i,d),c+=n*p}{const e=c-h-this.m_motorSpeed;let i=-this.m_motorMass*e;const o=this.m_motorImpulse,a=t.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=s.b2Clamp(this.m_motorImpulse+i,-a,a),i=this.m_motorImpulse-o,h-=r*i,c+=n*i}if(this.m_enableLimit){{const o=this.m_translation-this.m_lowerTranslation,u=s.b2Vec2.Dot(this.m_ax,s.b2Vec2.Subtract(l,a,s.b2Vec2.s_t0))+this.m_sBx*c-this.m_sAx*h;let p=-this.m_axialMass*(u+Math.max(o,0)*t.step.inv_dt);const m=this.m_lowerImpulse;this.m_lowerImpulse=Math.max(this.m_lowerImpulse+p,0),p=this.m_lowerImpulse-m,s.b2Vec2.Scale(p,this.m_ax,d);const f=p*this.m_sAx,_=p*this.m_sBx;a.SubtractScaled(e,d),h-=r*f,l.AddScaled(i,d),c+=n*_}{const o=this.m_upperTranslation-this.m_translation,u=s.b2Vec2.Dot(this.m_ax,s.b2Vec2.Subtract(a,l,s.b2Vec2.s_t0))+this.m_sAx*h-this.m_sBx*c;let p=-this.m_axialMass*(u+Math.max(o,0)*t.step.inv_dt);const m=this.m_upperImpulse;this.m_upperImpulse=Math.max(this.m_upperImpulse+p,0),p=this.m_upperImpulse-m,s.b2Vec2.Scale(p,this.m_ax,d);const f=p*this.m_sAx,_=p*this.m_sBx;a.AddScaled(e,d),h+=r*f,l.SubtractScaled(i,d),c-=n*_}}{const t=s.b2Vec2.Dot(this.m_ay,s.b2Vec2.Subtract(l,a,s.b2Vec2.s_t0))+this.m_sBy*c-this.m_sAy*h,o=-this.m_mass*t;this.m_impulse+=o,s.b2Vec2.Scale(o,this.m_ay,d);const u=o*this.m_sAy,p=o*this.m_sBy;a.SubtractScaled(e,d),h-=r*u,l.AddScaled(i,d),c+=n*p}t.velocities[this.m_indexA].w=h,t.velocities[this.m_indexB].w=c}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let r=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let a=t.positions[this.m_indexB].a,h=0;const{qA:l,qB:c,lalcA:d,lalcB:u,rA:p,rB:m,d:f,P:_,ay:g}=o;if(this.m_enableLimit){l.Set(r),c.Set(a),s.b2Rot.MultiplyVec2(l,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,d),p),s.b2Rot.MultiplyVec2(c,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,u),m),s.b2Vec2.Subtract(n,e,f).Add(m).Subtract(p);const t=s.b2Rot.MultiplyVec2(l,this.m_localXAxisA,this.m_ax),o=s.b2Vec2.Cross(s.b2Vec2.Add(f,p,s.b2Vec2.s_t0),this.m_ax),g=s.b2Vec2.Cross(m,this.m_ax);let b=0;const y=s.b2Vec2.Dot(t,f);if(Math.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?b=y:y<=this.m_lowerTranslation?b=Math.min(y-this.m_lowerTranslation,0):y>=this.m_upperTranslation&&(b=Math.max(y-this.m_upperTranslation,0)),0!==b){const i=this.m_invMassA+this.m_invMassB+this.m_invIA*o*o+this.m_invIB*g*g;let l=0;0!==i&&(l=-b/i),s.b2Vec2.Scale(l,t,_);const c=l*o,d=l*g;e.SubtractScaled(this.m_invMassA,_),r-=this.m_invIA*c,n.AddScaled(this.m_invMassB,_),a+=this.m_invIB*d,h=Math.abs(b)}}{l.Set(r),c.Set(a),s.b2Rot.MultiplyVec2(l,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,d),p),s.b2Rot.MultiplyVec2(c,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,u),m),s.b2Vec2.Subtract(n,e,f).Add(m).Subtract(p),s.b2Rot.MultiplyVec2(l,this.m_localYAxisA,g);const t=s.b2Vec2.Cross(s.b2Vec2.Add(f,p,s.b2Vec2.s_t0),g),i=s.b2Vec2.Cross(m,g),o=s.b2Vec2.Dot(f,g),b=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;let y=0;0!==b&&(y=-o/b),s.b2Vec2.Scale(y,g,_);const w=y*t,v=y*i;e.SubtractScaled(this.m_invMassA,_),r-=this.m_invIA*w,n.AddScaled(this.m_invMassB,_),a+=this.m_invIB*v,h=Math.max(h,Math.abs(o))}return t.positions[this.m_indexA].a=r,t.positions[this.m_indexB].a=a,h<=i.b2_linearSlop}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){const i=this.m_springImpulse+this.m_lowerImpulse-this.m_upperImpulse;return e.x=t*(this.m_impulse*this.m_ay.x+i*this.m_ax.x),e.y=t*(this.m_impulse*this.m_ay.y+i*this.m_ax.y),e}GetReactionTorque(t){return t*this.m_motorImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetJointTranslation(){const t=this.m_bodyA,e=this.m_bodyB,{pA:i,pB:r,d:n,axis:a}=o;t.GetWorldPoint(this.m_localAnchorA,i),e.GetWorldPoint(this.m_localAnchorB,r),s.b2Vec2.Subtract(r,i,n),t.GetWorldVector(this.m_localXAxisA,a);return s.b2Vec2.Dot(n,a)}GetJointLinearSpeed(){const t=this.m_bodyA,e=this.m_bodyB,{rA:i,rB:r,lalcA:n,lalcB:a,axis:h}=o;s.b2Rot.MultiplyVec2(t.m_xf.q,s.b2Vec2.Subtract(this.m_localAnchorA,t.m_sweep.localCenter,n),i),s.b2Rot.MultiplyVec2(e.m_xf.q,s.b2Vec2.Subtract(this.m_localAnchorB,e.m_sweep.localCenter,a),r);const l=s.b2Vec2.Add(t.m_sweep.c,i,s.b2Vec2.s_t0),c=s.b2Vec2.Add(e.m_sweep.c,r,s.b2Vec2.s_t1),d=s.b2Vec2.Subtract(c,l,s.b2Vec2.s_t2);s.b2Rot.MultiplyVec2(t.m_xf.q,this.m_localXAxisA,h);const u=t.m_linearVelocity,p=e.m_linearVelocity,m=t.m_angularVelocity,f=e.m_angularVelocity;return s.b2Vec2.Dot(d,s.b2Vec2.CrossScalarVec2(m,h,s.b2Vec2.s_t0))+s.b2Vec2.Dot(h,s.b2Vec2.AddCrossScalarVec2(p,f,r,s.b2Vec2.s_t0).Subtract(u).Subtract(s.b2Vec2.CrossScalarVec2(m,i,s.b2Vec2.s_t1)))}GetJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a}GetJointAngularSpeed(){const t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(t){return t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t),t}SetMotorSpeed(t){return t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t),t}SetMaxMotorTorque(t){t!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=t)}GetMotorTorque(t){return t*this.m_motorImpulse}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(t){return t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t,this.m_lowerImpulse=0,this.m_upperImpulse=0),t}GetLowerLimit(){return this.m_lowerTranslation}GetUpperLimit(){return this.m_upperTranslation}SetLimits(t,e){t===this.m_lowerTranslation&&e===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_lowerImpulse=0,this.m_upperImpulse=0)}Draw(t){const{p1:e,p2:i,pA:r,pB:a,axis:h}=o.Draw,l=this.m_bodyA.GetTransform(),c=this.m_bodyB.GetTransform();if(s.b2Transform.MultiplyVec2(l,this.m_localAnchorA,r),s.b2Transform.MultiplyVec2(c,this.m_localAnchorB,a),s.b2Rot.MultiplyVec2(l.q,this.m_localXAxisA,h),t.DrawSegment(r,a,n.debugColors.joint5),this.m_enableLimit){const{lower:a,upper:c,perp:d}=o.Draw;s.b2Vec2.AddScaled(r,this.m_lowerTranslation,h,a),s.b2Vec2.AddScaled(r,this.m_upperTranslation,h,c),s.b2Rot.MultiplyVec2(l.q,this.m_localYAxisA,d),t.DrawSegment(a,c,n.debugColors.joint1),t.DrawSegment(s.b2Vec2.SubtractScaled(a,.5,d,e),s.b2Vec2.AddScaled(a,.5,d,i),n.debugColors.joint2),t.DrawSegment(s.b2Vec2.SubtractScaled(c,.5,d,e),s.b2Vec2.AddScaled(c,.5,d,i),n.debugColors.joint3)}else t.DrawSegment(s.b2Vec2.Subtract(r,h,e),s.b2Vec2.Add(r,h,i),n.debugColors.joint1);t.DrawPoint(r,5,n.debugColors.joint1),t.DrawPoint(a,5,n.debugColors.joint4)}}t.exports.b2WheelJoint=l}));var Os=a("fAtfp");_s=a("2eI7i");a.register("cCaDq",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2ContactManager=void 0;var i=a("cz6ik"),s=a("5rhj8"),r=a("2eI7i"),n=a("guemH");t.exports.b2ContactManager=class{constructor(){this.m_broadPhase=new i.b2BroadPhase,this.m_contactList=null,this.m_contactCount=0,this.m_contactFilter=n.b2ContactFilter.b2_defaultFilter,this.m_contactListener=n.b2ContactListener.b2_defaultListener,this.m_contactFactory=new s.b2ContactFactory,this.AddPair=(t,e)=>{let i=t.fixture,s=e.fixture,r=t.childIndex,n=e.childIndex,o=i.GetBody(),a=s.GetBody();if(o===a)return;let h=a.GetContactList();for(;h;){if(h.other===o){const t=h.contact.GetFixtureA(),e=h.contact.GetFixtureB(),o=h.contact.GetChildIndexA(),a=h.contact.GetChildIndexB();if(t===i&&e===s&&o===r&&a===n)return;if(t===s&&e===i&&o===n&&a===r)return}h=h.next}if(!1===a.ShouldCollide(o))return;if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(i,s))return;const l=this.m_contactFactory.Create(i,r,s,n);null!==l&&(i=l.GetFixtureA(),s=l.GetFixtureB(),r=l.GetChildIndexA(),n=l.GetChildIndexB(),o=i.m_body,a=s.m_body,l.m_prev=null,l.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=l),this.m_contactList=l,l.m_nodeA.other=a,l.m_nodeA.prev=null,l.m_nodeA.next=o.m_contactList,null!==o.m_contactList&&(o.m_contactList.prev=l.m_nodeA),o.m_contactList=l.m_nodeA,l.m_nodeB.other=o,l.m_nodeB.prev=null,l.m_nodeB.next=a.m_contactList,null!==a.m_contactList&&(a.m_contactList.prev=l.m_nodeB),a.m_contactList=l.m_nodeB,++this.m_contactCount)}}FindNewContacts(){this.m_broadPhase.UpdatePairs(this.AddPair)}Destroy(t){const e=t.GetFixtureA(),i=t.GetFixtureB(),s=e.GetBody(),r=i.GetBody();this.m_contactListener&&t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_contactList&&(this.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA===s.m_contactList&&(s.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB===r.m_contactList&&(r.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&!e.IsSensor()&&!i.IsSensor()&&(e.GetBody().SetAwake(!0),i.GetBody().SetAwake(!0)),this.m_contactFactory.Destroy(t),--this.m_contactCount}Collide(){let t=this.m_contactList;for(;t;){const e=t.GetFixtureA(),i=t.GetFixtureB(),s=t.GetChildIndexA(),n=t.GetChildIndexB(),o=e.GetBody(),a=i.GetBody();if(t.m_filterFlag){if(!a.ShouldCollide(o)||this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(e,i)){const e=t;t=e.m_next,this.Destroy(e);continue}t.m_filterFlag=!1}const h=o.IsAwake()&&o.m_type!==r.b2BodyType.b2_staticBody,l=a.IsAwake()&&a.m_type!==r.b2BodyType.b2_staticBody;if(!h&&!l){t=t.m_next;continue}const c=e.m_proxies[s].treeNode,d=i.m_proxies[n].treeNode;if(c.aabb.TestOverlap(d.aabb))t.Update(this.m_contactListener),t=t.m_next;else{const e=t;t=e.m_next,this.Destroy(e)}}}}})),a.register("5rhj8",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2ContactFactory=void 0;var i=a("cOy3h"),s=a("ePV3I"),r=a("1oBVO"),n=a("9dPSc"),o=a("5VGP8"),h=a("80Spy"),l=a("6LbY4"),c=a("4VCsw");t.exports.b2ContactFactory=class{constructor(){const t=new Array(i.b2ShapeType.e_typeCount);for(let e=0;e<i.b2ShapeType.e_typeCount;e++)t[e]=new Array(i.b2ShapeType.e_typeCount);this.m_registers=t,this.AddType(s.b2CircleContact,i.b2ShapeType.e_circle,i.b2ShapeType.e_circle),this.AddType(n.b2PolygonAndCircleContact,i.b2ShapeType.e_polygon,i.b2ShapeType.e_circle),this.AddType(r.b2PolygonContact,i.b2ShapeType.e_polygon,i.b2ShapeType.e_polygon),this.AddType(o.b2EdgeAndCircleContact,i.b2ShapeType.e_edge,i.b2ShapeType.e_circle),this.AddType(h.b2EdgeAndPolygonContact,i.b2ShapeType.e_edge,i.b2ShapeType.e_polygon),this.AddType(l.b2ChainAndCircleContact,i.b2ShapeType.e_chain,i.b2ShapeType.e_circle),this.AddType(c.b2ChainAndPolygonContact,i.b2ShapeType.e_chain,i.b2ShapeType.e_polygon)}AddType(t,e,i){const s=[],r=t=>{s.push(t)};this.m_registers[e][i]={createFcn(e,i,r,n){var o;const a=null!==(o=s.pop())&&void 0!==o?o:new t;return a.Reset(e,i,r,n),a},destroyFcn:r},e!==i&&(this.m_registers[i][e]={createFcn(e,i,r,n){var o;const a=null!==(o=s.pop())&&void 0!==o?o:new t;return a.Reset(r,n,e,i),a},destroyFcn:r})}Create(t,e,i,s){const r=t.GetType(),n=i.GetType(),o=this.m_registers[r][n];return o?o.createFcn(t,e,i,s):null}Destroy(t){const e=t.m_fixtureA.GetType(),i=t.m_fixtureB.GetType(),s=this.m_registers[e][i];null==s||s.destroyFcn(t)}}})),a.register("ePV3I",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2CircleContact=void 0;var i=a("6ryQ2"),s=a("4VHnc");class r extends s.b2Contact{Evaluate(t,e,s){i.b2CollideCircles(t,this.GetShapeA(),e,this.GetShapeB(),s)}}t.exports.b2CircleContact=r})),a.register("4VHnc",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2Contact=t.exports.b2ContactEdge=t.exports.b2MixRestitutionThreshold=t.exports.b2MixRestitution=t.exports.b2MixFriction=void 0;var i=a("1Zs4L"),s=a("5IUIQ");function r(t,e){return Math.sqrt(t*e)}function n(t,e){return t>e?t:e}function o(t,e){return t<e?t:e}t.exports.b2MixFriction=r,t.exports.b2MixRestitution=n,t.exports.b2MixRestitutionThreshold=o;class h{constructor(t){this.m_other=null,this.prev=null,this.next=null,this.contact=t}get other(){return i.b2Assert(null!==this.m_other),this.m_other}set other(t){i.b2Assert(null===this.m_other),this.m_other=t}Reset(){this.m_other=null,this.prev=null,this.next=null}}t.exports.b2ContactEdge=h;t.exports.b2Contact=class{constructor(){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_prev=null,this.m_next=null,this.m_nodeA=new h(this),this.m_nodeB=new h(this),this.m_indexA=0,this.m_indexB=0,this.m_manifold=new s.b2Manifold,this.m_toiCount=0,this.m_toi=0,this.m_friction=0,this.m_restitution=0,this.m_restitutionThreshold=0,this.m_tangentSpeed=0,this.m_oldManifold=new s.b2Manifold}GetManifold(){return this.m_manifold}GetWorldManifold(t){const e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody(),s=this.GetShapeA(),r=this.GetShapeB();t.Initialize(this.m_manifold,e.GetTransform(),s.m_radius,i.GetTransform(),r.m_radius)}IsTouching(){return this.m_touchingFlag}SetEnabled(t){this.m_enabledFlag=t}IsEnabled(){return this.m_enabledFlag}GetNext(){return this.m_next}GetFixtureA(){return this.m_fixtureA}GetChildIndexA(){return this.m_indexA}GetShapeA(){return this.m_fixtureA.GetShape()}GetFixtureB(){return this.m_fixtureB}GetChildIndexB(){return this.m_indexB}GetShapeB(){return this.m_fixtureB.GetShape()}FlagForFiltering(){this.m_filterFlag=!0}SetFriction(t){this.m_friction=t}GetFriction(){return this.m_friction}ResetFriction(){this.m_friction=r(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)}SetRestitution(t){this.m_restitution=t}GetRestitution(){return this.m_restitution}ResetRestitution(){this.m_restitution=n(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}SetRestitutionThreshold(t){this.m_restitutionThreshold=t}GetRestitutionThreshold(){return this.m_restitutionThreshold}ResetRestitutionThreshold(){this.m_restitutionThreshold=o(this.m_fixtureA.m_restitutionThreshold,this.m_fixtureB.m_restitutionThreshold)}SetTangentSpeed(t){this.m_tangentSpeed=t}GetTangentSpeed(){return this.m_tangentSpeed}Reset(t,e,i,s){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!0,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_fixtureA=t,this.m_fixtureB=i,this.m_indexA=e,this.m_indexB=s,this.m_manifold.pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.Reset(),this.m_nodeB.Reset(),this.m_toiCount=0,this.m_friction=r(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=n(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution),this.m_restitutionThreshold=o(this.m_fixtureA.m_restitutionThreshold,this.m_fixtureB.m_restitutionThreshold)}Update(t){const e=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_enabledFlag=!0;let i=!1;const r=this.m_touchingFlag,n=this.m_fixtureA.IsSensor(),o=this.m_fixtureB.IsSensor(),a=n||o,h=this.m_fixtureA.GetBody(),l=this.m_fixtureB.GetBody(),c=h.GetTransform(),d=l.GetTransform();if(a){const t=this.GetShapeA(),e=this.GetShapeB();i=s.b2TestOverlap(t,this.m_indexA,e,this.m_indexB,c,d),this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,c,d),i=this.m_manifold.pointCount>0;for(let t=0;t<this.m_manifold.pointCount;++t){const e=this.m_manifold.points[t];e.normalImpulse=0,e.tangentImpulse=0;const i=e.id;for(let t=0;t<this.m_oldManifold.pointCount;++t){const s=this.m_oldManifold.points[t];if(s.id.key===i.key){e.normalImpulse=s.normalImpulse,e.tangentImpulse=s.tangentImpulse;break}}}i!==r&&(h.SetAwake(!0),l.SetAwake(!0))}this.m_touchingFlag=i,!r&&i&&t&&t.BeginContact(this),r&&!i&&t&&t.EndContact(this),!a&&i&&t&&t.PreSolve(this,this.m_oldManifold)}}})),a.register("1oBVO",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2PolygonContact=void 0;var i=a("eC9Ai"),s=a("4VHnc");class r extends s.b2Contact{Evaluate(t,e,s){i.b2CollidePolygons(t,this.GetShapeA(),e,this.GetShapeB(),s)}}t.exports.b2PolygonContact=r})),a.register("9dPSc",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2PolygonAndCircleContact=void 0;var i=a("6ryQ2"),s=a("4VHnc");class r extends s.b2Contact{Evaluate(t,e,s){i.b2CollidePolygonAndCircle(t,this.GetShapeA(),e,this.GetShapeB(),s)}}t.exports.b2PolygonAndCircleContact=r})),a.register("5VGP8",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2EdgeAndCircleContact=void 0;var i=a("eTDvN"),s=a("4VHnc");class r extends s.b2Contact{Evaluate(t,e,s){i.b2CollideEdgeAndCircle(t,this.GetShapeA(),e,this.GetShapeB(),s)}}t.exports.b2EdgeAndCircleContact=r})),a.register("80Spy",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2EdgeAndPolygonContact=void 0;var i=a("eTDvN"),s=a("4VHnc");class r extends s.b2Contact{Evaluate(t,e,s){i.b2CollideEdgeAndPolygon(t,this.GetShapeA(),e,this.GetShapeB(),s)}}t.exports.b2EdgeAndPolygonContact=r})),a.register("6LbY4",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2ChainAndCircleContact=void 0;var i=a("eTDvN"),s=a("3H5xV"),r=a("4VHnc");class n extends r.b2Contact{Evaluate(t,e,s){const r=n.Evaluate_s_edge;this.GetShapeA().GetChildEdge(r,this.m_indexA),i.b2CollideEdgeAndCircle(t,r,e,this.GetShapeB(),s)}}t.exports.b2ChainAndCircleContact=n,n.Evaluate_s_edge=new s.b2EdgeShape})),a.register("4VCsw",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2ChainAndPolygonContact=void 0;var i=a("eTDvN"),s=a("3H5xV"),r=a("4VHnc");class n extends r.b2Contact{Evaluate(t,e,s){const r=n.Evaluate_s_edge;this.GetShapeA().GetChildEdge(r,this.m_indexA),i.b2CollideEdgeAndPolygon(t,r,e,this.GetShapeB(),s)}}t.exports.b2ChainAndPolygonContact=n,n.Evaluate_s_edge=new s.b2EdgeShape})),a.register("guemH",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2ContactListener=t.exports.b2ContactImpulse=t.exports.b2ContactFilter=t.exports.b2DestructionListener=void 0;var i=a("1Zs4L");t.exports.b2DestructionListener=class{SayGoodbyeJoint(t){}SayGoodbyeFixture(t){}};class s{ShouldCollide(t,e){const i=t.GetFilterData(),s=e.GetFilterData();return i.groupIndex===s.groupIndex&&0!==i.groupIndex?i.groupIndex>0:0!=(i.maskBits&s.categoryBits)&&0!=(i.categoryBits&s.maskBits)}}t.exports.b2ContactFilter=s,s.b2_defaultFilter=new s;t.exports.b2ContactImpulse=class{constructor(){this.normalImpulses=i.b2MakeNumberArray(i.b2_maxManifoldPoints),this.tangentImpulses=i.b2MakeNumberArray(i.b2_maxManifoldPoints),this.count=0}};class r{BeginContact(t){}EndContact(t){}PreSolve(t,e){}PostSolve(t,e){}}t.exports.b2ContactListener=r,r.b2_defaultListener=new r}));var Ls=a("cCaDq");a.register("7CdZd",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2Island=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("9oZZB"),n=a("2hX2H"),o=a("2eI7i"),h=a("2MWdt"),l=a("guemH");class c{constructor(t,e,s,r){this.m_bodyCount=0,this.m_jointCount=0,this.m_contactCount=0,this.m_bodyCapacity=t,this.m_listener=r,this.m_bodies=new Array(t),this.m_contacts=new Array(e),this.m_joints=new Array(s),this.m_velocities=i.b2MakeArray(t,h.b2Velocity),this.m_positions=i.b2MakeArray(t,h.b2Position),this.Resize(t)}Resize(t){for(;this.m_bodyCapacity<t;)this.m_velocities[this.m_bodyCapacity]=new h.b2Velocity,this.m_positions[this.m_bodyCapacity]=new h.b2Position,this.m_bodyCapacity++}Clear(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0}AddBody(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount]=t,++this.m_bodyCount}AddContact(t){this.m_contacts[this.m_contactCount++]=t}AddJoint(t){this.m_joints[this.m_jointCount++]=t}Solve(t,e,r,n){const a=c.s_timer.Reset(),h=e.dt;for(let t=0;t<this.m_bodyCount;++t){const e=this.m_bodies[t];this.m_positions[t].c.Copy(e.m_sweep.c);const{a:i}=e.m_sweep,s=this.m_velocities[t].v.Copy(e.m_linearVelocity);let n=e.m_angularVelocity;e.m_sweep.c0.Copy(e.m_sweep.c),e.m_sweep.a0=e.m_sweep.a,e.m_type===o.b2BodyType.b2_dynamicBody&&(s.x+=h*e.m_invMass*(e.m_gravityScale*e.m_mass*r.x+e.m_force.x),s.y+=h*e.m_invMass*(e.m_gravityScale*e.m_mass*r.y+e.m_force.y),n+=h*e.m_invI*e.m_torque,s.Scale(1/(1+h*e.m_linearDamping)),n*=1/(1+h*e.m_angularDamping)),this.m_positions[t].a=i,this.m_velocities[t].w=n}a.Reset();const l=c.s_solverData;l.step.Copy(e),l.positions=this.m_positions,l.velocities=this.m_velocities;const d=c.s_contactSolverDef;d.step.Copy(e),d.contacts=this.m_contacts,d.count=this.m_contactCount,d.positions=this.m_positions,d.velocities=this.m_velocities;const u=c.s_contactSolver.Initialize(d);u.InitializeVelocityConstraints(),e.warmStarting&&u.WarmStart();for(let t=0;t<this.m_jointCount;++t)this.m_joints[t].InitVelocityConstraints(l);t.solveInit=a.GetMilliseconds(),a.Reset();for(let t=0;t<e.config.velocityIterations;++t){for(let t=0;t<this.m_jointCount;++t)this.m_joints[t].SolveVelocityConstraints(l);u.SolveVelocityConstraints()}u.StoreImpulses(),t.solveVelocity=a.GetMilliseconds();for(let t=0;t<this.m_bodyCount;++t){const{c:e}=this.m_positions[t];let{a:r}=this.m_positions[t];const{v:n}=this.m_velocities[t];let{w:o}=this.m_velocities[t];const a=s.b2Vec2.Scale(h,n,c.s_translation);if(s.b2Vec2.Dot(a,a)>i.b2_maxTranslationSquared){const t=i.b2_maxTranslation/a.Length();n.Scale(t)}const l=h*o;if(l*l>i.b2_maxRotationSquared){o*=i.b2_maxRotation/Math.abs(l)}e.AddScaled(h,n),r+=h*o,this.m_positions[t].a=r,this.m_velocities[t].w=o}a.Reset();let p=!1;for(let t=0;t<e.config.positionIterations;++t){const t=u.SolvePositionConstraints();let e=!0;for(let t=0;t<this.m_jointCount;++t){const i=this.m_joints[t].SolvePositionConstraints(l);e=e&&i}if(t&&e){p=!0;break}}for(let t=0;t<this.m_bodyCount;++t){const e=this.m_bodies[t];e.m_sweep.c.Copy(this.m_positions[t].c),e.m_sweep.a=this.m_positions[t].a,e.m_linearVelocity.Copy(this.m_velocities[t].v),e.m_angularVelocity=this.m_velocities[t].w,e.SynchronizeTransform()}if(t.solvePosition=a.GetMilliseconds(),this.Report(u.m_velocityConstraints),n){let t=i.b2_maxFloat;const e=i.b2_linearSleepTolerance*i.b2_linearSleepTolerance,r=i.b2_angularSleepTolerance*i.b2_angularSleepTolerance;for(let i=0;i<this.m_bodyCount;++i){const n=this.m_bodies[i];n.GetType()!==o.b2BodyType.b2_staticBody&&(!n.m_autoSleepFlag||n.m_angularVelocity*n.m_angularVelocity>r||s.b2Vec2.Dot(n.m_linearVelocity,n.m_linearVelocity)>e?(n.m_sleepTime=0,t=0):(n.m_sleepTime+=h,t=Math.min(t,n.m_sleepTime)))}if(t>=i.b2_timeToSleep&&p)for(let t=0;t<this.m_bodyCount;++t){this.m_bodies[t].SetAwake(!1)}}}SolveTOI(t,e,r){for(let t=0;t<this.m_bodyCount;++t){const e=this.m_bodies[t];this.m_positions[t].c.Copy(e.m_sweep.c),this.m_positions[t].a=e.m_sweep.a,this.m_velocities[t].v.Copy(e.m_linearVelocity),this.m_velocities[t].w=e.m_angularVelocity}const n=c.s_contactSolverDef;n.contacts=this.m_contacts,n.count=this.m_contactCount,n.step.Copy(t),n.positions=this.m_positions,n.velocities=this.m_velocities;const o=c.s_contactSolver.Initialize(n);for(let i=0;i<t.config.positionIterations;++i){if(o.SolveTOIPositionConstraints(e,r))break}this.m_bodies[e].m_sweep.c0.Copy(this.m_positions[e].c),this.m_bodies[e].m_sweep.a0=this.m_positions[e].a,this.m_bodies[r].m_sweep.c0.Copy(this.m_positions[r].c),this.m_bodies[r].m_sweep.a0=this.m_positions[r].a,o.InitializeVelocityConstraints();for(let e=0;e<t.config.velocityIterations;++e)o.SolveVelocityConstraints();const a=t.dt;for(let t=0;t<this.m_bodyCount;++t){const{c:e}=this.m_positions[t];let{a:r}=this.m_positions[t];const{v:n}=this.m_velocities[t];let{w:o}=this.m_velocities[t];const h=s.b2Vec2.Scale(a,n,c.s_translation);if(s.b2Vec2.Dot(h,h)>i.b2_maxTranslationSquared){const t=i.b2_maxTranslation/h.Length();n.Scale(t)}const l=a*o;if(l*l>i.b2_maxRotationSquared){o*=i.b2_maxRotation/Math.abs(l)}e.AddScaled(a,n),r+=a*o,this.m_positions[t].a=r,this.m_velocities[t].w=o;const d=this.m_bodies[t];d.m_sweep.c.Copy(e),d.m_sweep.a=r,d.m_linearVelocity.Copy(n),d.m_angularVelocity=o,d.SynchronizeTransform()}this.Report(o.m_velocityConstraints)}Report(t){for(let e=0;e<this.m_contactCount;++e){const i=this.m_contacts[e],s=t[e],r=c.s_impulse;r.count=s.pointCount;for(let t=0;t<s.pointCount;++t)r.normalImpulses[t]=s.points[t].normalImpulse,r.tangentImpulses[t]=s.points[t].tangentImpulse;this.m_listener.PostSolve(i,r)}}}t.exports.b2Island=c,c.s_timer=new r.b2Timer,c.s_solverData=new h.b2SolverData,c.s_contactSolverDef=new n.b2ContactSolverDef,c.s_contactSolver=new n.b2ContactSolver,c.s_translation=new s.b2Vec2,c.s_impulse=new l.b2ContactImpulse})),a.register("2hX2H",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2ContactSolver=t.exports.b2ContactSolverDef=t.exports.b2ContactVelocityConstraint=t.exports.b2GetBlockSolve=t.exports.b2SetBlockSolve=void 0;var i=a("1Zs4L"),s=a("4L5iv"),r=a("5IUIQ"),n=a("2MWdt");let o=!0;t.exports.b2SetBlockSolve=function(t){o=t},t.exports.b2GetBlockSolve=function(){return o};class h{constructor(){this.rA=new s.b2Vec2,this.rB=new s.b2Vec2,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}}class l{constructor(){this.points=i.b2MakeArray(i.b2_maxManifoldPoints,h),this.normal=new s.b2Vec2,this.tangent=new s.b2Vec2,this.normalMass=new s.b2Mat22,this.K=new s.b2Mat22,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.invIA=0,this.invIB=0,this.friction=0,this.restitution=0,this.threshold=0,this.tangentSpeed=0,this.pointCount=0,this.contactIndex=0}}t.exports.b2ContactVelocityConstraint=l;class c{constructor(){this.localPoints=i.b2MakeArray(i.b2_maxManifoldPoints,s.b2Vec2),this.localNormal=new s.b2Vec2,this.localPoint=new s.b2Vec2,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.localCenterA=new s.b2Vec2,this.localCenterB=new s.b2Vec2,this.invIA=0,this.invIB=0,this.type=r.b2ManifoldType.e_circles,this.radiusA=0,this.radiusB=0,this.pointCount=0}}t.exports.b2ContactSolverDef=class{constructor(){this.step=n.b2TimeStep.Create(),this.count=0}};class d{constructor(){this.normal=new s.b2Vec2,this.point=new s.b2Vec2,this.separation=0}Initialize(t,e,i,n){const o=d.Initialize_s_pointA,a=d.Initialize_s_pointB,h=d.Initialize_s_planePoint,l=d.Initialize_s_clipPoint;switch(t.type){case r.b2ManifoldType.e_circles:s.b2Transform.MultiplyVec2(e,t.localPoint,o),s.b2Transform.MultiplyVec2(i,t.localPoints[0],a),s.b2Vec2.Subtract(a,o,this.normal).Normalize(),s.b2Vec2.Mid(o,a,this.point),this.separation=s.b2Vec2.Dot(s.b2Vec2.Subtract(a,o,s.b2Vec2.s_t0),this.normal)-t.radiusA-t.radiusB;break;case r.b2ManifoldType.e_faceA:s.b2Rot.MultiplyVec2(e.q,t.localNormal,this.normal),s.b2Transform.MultiplyVec2(e,t.localPoint,h),s.b2Transform.MultiplyVec2(i,t.localPoints[n],l),this.separation=s.b2Vec2.Dot(s.b2Vec2.Subtract(l,h,s.b2Vec2.s_t0),this.normal)-t.radiusA-t.radiusB,this.point.Copy(l);break;case r.b2ManifoldType.e_faceB:s.b2Rot.MultiplyVec2(i.q,t.localNormal,this.normal),s.b2Transform.MultiplyVec2(i,t.localPoint,h),s.b2Transform.MultiplyVec2(e,t.localPoints[n],l),this.separation=s.b2Vec2.Dot(s.b2Vec2.Subtract(l,h,s.b2Vec2.s_t0),this.normal)-t.radiusA-t.radiusB,this.point.Copy(l),this.normal.Negate()}}}d.Initialize_s_pointA=new s.b2Vec2,d.Initialize_s_pointB=new s.b2Vec2,d.Initialize_s_planePoint=new s.b2Vec2,d.Initialize_s_clipPoint=new s.b2Vec2;class u{constructor(){this.m_step=n.b2TimeStep.Create(),this.m_positionConstraints=i.b2MakeArray(1024,c),this.m_velocityConstraints=i.b2MakeArray(1024,l),this.m_count=0}Initialize(t){if(this.m_step.Copy(t.step),this.m_count=t.count,this.m_positionConstraints.length<this.m_count){const t=Math.max(2*this.m_positionConstraints.length,this.m_count);for(;this.m_positionConstraints.length<t;)this.m_positionConstraints[this.m_positionConstraints.length]=new c}if(this.m_velocityConstraints.length<this.m_count){const t=Math.max(2*this.m_velocityConstraints.length,this.m_count);for(;this.m_velocityConstraints.length<t;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new l}this.m_positions=t.positions,this.m_velocities=t.velocities,this.m_contacts=t.contacts;for(let t=0;t<this.m_count;++t){const e=this.m_contacts[t],i=e.m_fixtureA,s=e.m_fixtureB,r=i.GetShape(),n=s.GetShape(),o=r.m_radius,a=n.m_radius,h=i.GetBody(),l=s.GetBody(),c=e.GetManifold(),{pointCount:d}=c,u=this.m_velocityConstraints[t];u.friction=e.m_friction,u.restitution=e.m_restitution,u.threshold=e.m_restitutionThreshold,u.tangentSpeed=e.m_tangentSpeed,u.indexA=h.m_islandIndex,u.indexB=l.m_islandIndex,u.invMassA=h.m_invMass,u.invMassB=l.m_invMass,u.invIA=h.m_invI,u.invIB=l.m_invI,u.contactIndex=t,u.pointCount=d,u.K.SetZero(),u.normalMass.SetZero();const p=this.m_positionConstraints[t];p.indexA=h.m_islandIndex,p.indexB=l.m_islandIndex,p.invMassA=h.m_invMass,p.invMassB=l.m_invMass,p.localCenterA.Copy(h.m_sweep.localCenter),p.localCenterB.Copy(l.m_sweep.localCenter),p.invIA=h.m_invI,p.invIB=l.m_invI,p.localNormal.Copy(c.localNormal),p.localPoint.Copy(c.localPoint),p.pointCount=d,p.radiusA=o,p.radiusB=a,p.type=c.type;for(let t=0;t<d;++t){const e=c.points[t],i=u.points[t];this.m_step.warmStarting?(i.normalImpulse=this.m_step.dtRatio*e.normalImpulse,i.tangentImpulse=this.m_step.dtRatio*e.tangentImpulse):(i.normalImpulse=0,i.tangentImpulse=0),i.rA.SetZero(),i.rB.SetZero(),i.normalMass=0,i.tangentMass=0,i.velocityBias=0,p.localPoints[t].Copy(e.localPoint)}}return this}InitializeVelocityConstraints(){const t=u.InitializeVelocityConstraints_s_xfA,e=u.InitializeVelocityConstraints_s_xfB,i=u.InitializeVelocityConstraints_s_worldManifold;for(let r=0;r<this.m_count;++r){const n=this.m_velocityConstraints[r],a=this.m_positionConstraints[r],{radiusA:h,radiusB:l,localCenterA:c,localCenterB:d}=a,u=this.m_contacts[n.contactIndex].GetManifold(),{indexA:p,indexB:m,tangent:f,pointCount:_}=n,g=n.invMassA,b=n.invMassB,y=n.invIA,w=n.invIB,v=this.m_positions[p].c,x=this.m_positions[p].a,S=this.m_velocities[p].v,A=this.m_velocities[p].w,P=this.m_positions[m].c,C=this.m_positions[m].a,T=this.m_velocities[m].v,E=this.m_velocities[m].w;t.q.Set(x),e.q.Set(C),s.b2Vec2.Subtract(v,s.b2Rot.MultiplyVec2(t.q,c,s.b2Vec2.s_t0),t.p),s.b2Vec2.Subtract(P,s.b2Rot.MultiplyVec2(e.q,d,s.b2Vec2.s_t0),e.p),i.Initialize(u,t,h,e,l),n.normal.Copy(i.normal),s.b2Vec2.CrossVec2One(n.normal,f);for(let t=0;t<_;++t){const e=n.points[t];s.b2Vec2.Subtract(i.points[t],v,e.rA),s.b2Vec2.Subtract(i.points[t],P,e.rB);const r=s.b2Vec2.Cross(e.rA,n.normal),o=s.b2Vec2.Cross(e.rB,n.normal),a=g+b+y*r*r+w*o*o;e.normalMass=a>0?1/a:0;const h=s.b2Vec2.Cross(e.rA,f),l=s.b2Vec2.Cross(e.rB,f),c=g+b+y*h*h+w*l*l;e.tangentMass=c>0?1/c:0,e.velocityBias=0;const d=s.b2Vec2.Dot(n.normal,s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(T,E,e.rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(S,A,e.rA,s.b2Vec2.s_t1),s.b2Vec2.s_t0));d<-n.threshold&&(e.velocityBias=-n.restitution*d)}if(2===n.pointCount&&o){const t=n.points[0],e=n.points[1],i=s.b2Vec2.Cross(t.rA,n.normal),r=s.b2Vec2.Cross(t.rB,n.normal),o=s.b2Vec2.Cross(e.rA,n.normal),a=s.b2Vec2.Cross(e.rB,n.normal),h=g+b+y*i*i+w*r*r,l=g+b+y*o*o+w*a*a,c=g+b+y*i*o+w*r*a;h*h<1e3*(h*l-c*c)?(n.K.ex.Set(h,c),n.K.ey.Set(c,l),n.K.GetInverse(n.normalMass)):n.pointCount=1}}}WarmStart(){const t=u.WarmStart_s_P;for(let e=0;e<this.m_count;++e){const i=this.m_velocityConstraints[e],{indexA:r,indexB:n,pointCount:o,normal:a,tangent:h}=i,l=i.invMassA,c=i.invIA,d=i.invMassB,u=i.invIB,p=this.m_velocities[r].v;let m=this.m_velocities[r].w;const f=this.m_velocities[n].v;let _=this.m_velocities[n].w;for(let e=0;e<o;++e){const r=i.points[e];s.b2Vec2.Add(s.b2Vec2.Scale(r.normalImpulse,a,s.b2Vec2.s_t0),s.b2Vec2.Scale(r.tangentImpulse,h,s.b2Vec2.s_t1),t),m-=c*s.b2Vec2.Cross(r.rA,t),p.SubtractScaled(l,t),_+=u*s.b2Vec2.Cross(r.rB,t),f.AddScaled(d,t)}this.m_velocities[r].w=m,this.m_velocities[n].w=_}}SolveVelocityConstraints(){const t=u.SolveVelocityConstraints_s_dv,e=u.SolveVelocityConstraints_s_dv1,i=u.SolveVelocityConstraints_s_dv2,r=u.SolveVelocityConstraints_s_P,n=u.SolveVelocityConstraints_s_a,a=u.SolveVelocityConstraints_s_b,h=u.SolveVelocityConstraints_s_x,l=u.SolveVelocityConstraints_s_d,c=u.SolveVelocityConstraints_s_P1,d=u.SolveVelocityConstraints_s_P2,p=u.SolveVelocityConstraints_s_P1P2;for(let u=0;u<this.m_count;++u){const m=this.m_velocityConstraints[u],{indexA:f,indexB:_,pointCount:g,normal:b,tangent:y,friction:w}=m,v=m.invMassA,x=m.invIA,S=m.invMassB,A=m.invIB,P=this.m_velocities[f].v;let C=this.m_velocities[f].w;const T=this.m_velocities[_].v;let E=this.m_velocities[_].w;for(let e=0;e<g;++e){const i=m.points[e];s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(T,E,i.rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(P,C,i.rA,s.b2Vec2.s_t1),t);const n=s.b2Vec2.Dot(t,y)-m.tangentSpeed;let o=i.tangentMass*-n;const a=w*i.normalImpulse,h=s.b2Clamp(i.tangentImpulse+o,-a,a);o=h-i.tangentImpulse,i.tangentImpulse=h,s.b2Vec2.Scale(o,y,r),P.SubtractScaled(v,r),C-=x*s.b2Vec2.Cross(i.rA,r),T.AddScaled(S,r),E+=A*s.b2Vec2.Cross(i.rB,r)}if(1===m.pointCount||!1===o)for(let e=0;e<g;++e){const i=m.points[e];s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(T,E,i.rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(P,C,i.rA,s.b2Vec2.s_t1),t);const n=s.b2Vec2.Dot(t,b);let o=-i.normalMass*(n-i.velocityBias);const a=Math.max(i.normalImpulse+o,0);o=a-i.normalImpulse,i.normalImpulse=a,s.b2Vec2.Scale(o,b,r),P.SubtractScaled(v,r),C-=x*s.b2Vec2.Cross(i.rA,r),T.AddScaled(S,r),E+=A*s.b2Vec2.Cross(i.rB,r)}else{const t=m.points[0],r=m.points[1];n.Set(t.normalImpulse,r.normalImpulse),s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(T,E,t.rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(P,C,t.rA,s.b2Vec2.s_t1),e),s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(T,E,r.rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(P,C,r.rA,s.b2Vec2.s_t1),i);let o=s.b2Vec2.Dot(e,b),u=s.b2Vec2.Dot(i,b);for(a.x=o-t.velocityBias,a.y=u-r.velocityBias,a.Subtract(s.b2Mat22.MultiplyVec2(m.K,n,s.b2Vec2.s_t0));;){if(s.b2Mat22.MultiplyVec2(m.normalMass,a,h).Negate(),h.x>=0&&h.y>=0){s.b2Vec2.Subtract(h,n,l),s.b2Vec2.Scale(l.x,b,c),s.b2Vec2.Scale(l.y,b,d),s.b2Vec2.Add(c,d,p),P.SubtractScaled(v,p),C-=x*(s.b2Vec2.Cross(t.rA,c)+s.b2Vec2.Cross(r.rA,d)),T.AddScaled(S,p),E+=A*(s.b2Vec2.Cross(t.rB,c)+s.b2Vec2.Cross(r.rB,d)),t.normalImpulse=h.x,r.normalImpulse=h.y;break}if(h.x=-t.normalMass*a.x,h.y=0,o=0,u=m.K.ex.y*h.x+a.y,h.x>=0&&u>=0){s.b2Vec2.Subtract(h,n,l),s.b2Vec2.Scale(l.x,b,c),s.b2Vec2.Scale(l.y,b,d),s.b2Vec2.Add(c,d,p),P.SubtractScaled(v,p),C-=x*(s.b2Vec2.Cross(t.rA,c)+s.b2Vec2.Cross(r.rA,d)),T.AddScaled(S,p),E+=A*(s.b2Vec2.Cross(t.rB,c)+s.b2Vec2.Cross(r.rB,d)),t.normalImpulse=h.x,r.normalImpulse=h.y;break}if(h.x=0,h.y=-r.normalMass*a.y,o=m.K.ey.x*h.y+a.x,u=0,h.y>=0&&o>=0){s.b2Vec2.Subtract(h,n,l),s.b2Vec2.Scale(l.x,b,c),s.b2Vec2.Scale(l.y,b,d),s.b2Vec2.Add(c,d,p),P.SubtractScaled(v,p),C-=x*(s.b2Vec2.Cross(t.rA,c)+s.b2Vec2.Cross(r.rA,d)),T.AddScaled(S,p),E+=A*(s.b2Vec2.Cross(t.rB,c)+s.b2Vec2.Cross(r.rB,d)),t.normalImpulse=h.x,r.normalImpulse=h.y;break}if(h.x=0,h.y=0,o=a.x,u=a.y,o>=0&&u>=0){s.b2Vec2.Subtract(h,n,l),s.b2Vec2.Scale(l.x,b,c),s.b2Vec2.Scale(l.y,b,d),s.b2Vec2.Add(c,d,p),P.SubtractScaled(v,p),C-=x*(s.b2Vec2.Cross(t.rA,c)+s.b2Vec2.Cross(r.rA,d)),T.AddScaled(S,p),E+=A*(s.b2Vec2.Cross(t.rB,c)+s.b2Vec2.Cross(r.rB,d)),t.normalImpulse=h.x,r.normalImpulse=h.y;break}break}}this.m_velocities[f].w=C,this.m_velocities[_].w=E}}StoreImpulses(){for(let t=0;t<this.m_count;++t){const e=this.m_velocityConstraints[t],i=this.m_contacts[e.contactIndex].GetManifold();for(let t=0;t<e.pointCount;++t)i.points[t].normalImpulse=e.points[t].normalImpulse,i.points[t].tangentImpulse=e.points[t].tangentImpulse}}SolvePositionConstraints(){const t=u.SolvePositionConstraints_s_xfA,e=u.SolvePositionConstraints_s_xfB,r=u.SolvePositionConstraints_s_psm,n=u.SolvePositionConstraints_s_rA,o=u.SolvePositionConstraints_s_rB,a=u.SolvePositionConstraints_s_P;let h=0;for(let l=0;l<this.m_count;++l){const c=this.m_positionConstraints[l],{indexA:d,indexB:u,localCenterA:p,localCenterB:m,pointCount:f}=c,_=c.invMassA,g=c.invIA,b=c.invMassB,y=c.invIB,w=this.m_positions[d].c;let v=this.m_positions[d].a;const x=this.m_positions[u].c;let S=this.m_positions[u].a;for(let l=0;l<f;++l){t.q.Set(v),e.q.Set(S),s.b2Vec2.Subtract(w,s.b2Rot.MultiplyVec2(t.q,p,s.b2Vec2.s_t0),t.p),s.b2Vec2.Subtract(x,s.b2Rot.MultiplyVec2(e.q,m,s.b2Vec2.s_t0),e.p),r.Initialize(c,t,e,l);const{normal:d,point:u,separation:f}=r;s.b2Vec2.Subtract(u,w,n),s.b2Vec2.Subtract(u,x,o),h=Math.min(h,f);const A=s.b2Clamp(i.b2_baumgarte*(f+i.b2_linearSlop),-i.b2_maxLinearCorrection,0),P=s.b2Vec2.Cross(n,d),C=s.b2Vec2.Cross(o,d),T=_+b+g*P*P+y*C*C,E=T>0?-A/T:0;s.b2Vec2.Scale(E,d,a),w.SubtractScaled(_,a),v-=g*s.b2Vec2.Cross(n,a),x.AddScaled(b,a),S+=y*s.b2Vec2.Cross(o,a)}this.m_positions[d].c.Copy(w),this.m_positions[d].a=v,this.m_positions[u].c.Copy(x),this.m_positions[u].a=S}return h>=-3*i.b2_linearSlop}SolveTOIPositionConstraints(t,e){const r=u.SolveTOIPositionConstraints_s_xfA,n=u.SolveTOIPositionConstraints_s_xfB,o=u.SolveTOIPositionConstraints_s_psm,a=u.SolveTOIPositionConstraints_s_rA,h=u.SolveTOIPositionConstraints_s_rB,l=u.SolveTOIPositionConstraints_s_P;let c=0;for(let d=0;d<this.m_count;++d){const u=this.m_positionConstraints[d],{indexA:p,indexB:m,localCenterA:f,localCenterB:_,pointCount:g}=u;let b=0,y=0;p!==t&&p!==e||(b=u.invMassA,y=u.invIA);let w=0,v=0;m!==t&&m!==e||(w=u.invMassB,v=u.invIB);const x=this.m_positions[p].c;let S=this.m_positions[p].a;const A=this.m_positions[m].c;let P=this.m_positions[m].a;for(let t=0;t<g;++t){r.q.Set(S),n.q.Set(P),s.b2Vec2.Subtract(x,s.b2Rot.MultiplyVec2(r.q,f,s.b2Vec2.s_t0),r.p),s.b2Vec2.Subtract(A,s.b2Rot.MultiplyVec2(n.q,_,s.b2Vec2.s_t0),n.p),o.Initialize(u,r,n,t);const{normal:e,point:d,separation:p}=o;s.b2Vec2.Subtract(d,x,a),s.b2Vec2.Subtract(d,A,h),c=Math.min(c,p);const m=s.b2Clamp(i.b2_toiBaumgarte*(p+i.b2_linearSlop),-i.b2_maxLinearCorrection,0),g=s.b2Vec2.Cross(a,e),C=s.b2Vec2.Cross(h,e),T=b+w+y*g*g+v*C*C,E=T>0?-m/T:0;s.b2Vec2.Scale(E,e,l),x.SubtractScaled(b,l),S-=y*s.b2Vec2.Cross(a,l),A.AddScaled(w,l),P+=v*s.b2Vec2.Cross(h,l)}this.m_positions[p].a=S,this.m_positions[m].a=P}return c>=-1.5*i.b2_linearSlop}}t.exports.b2ContactSolver=u,u.InitializeVelocityConstraints_s_xfA=new s.b2Transform,u.InitializeVelocityConstraints_s_xfB=new s.b2Transform,u.InitializeVelocityConstraints_s_worldManifold=new r.b2WorldManifold,u.WarmStart_s_P=new s.b2Vec2,u.SolveVelocityConstraints_s_dv=new s.b2Vec2,u.SolveVelocityConstraints_s_dv1=new s.b2Vec2,u.SolveVelocityConstraints_s_dv2=new s.b2Vec2,u.SolveVelocityConstraints_s_P=new s.b2Vec2,u.SolveVelocityConstraints_s_a=new s.b2Vec2,u.SolveVelocityConstraints_s_b=new s.b2Vec2,u.SolveVelocityConstraints_s_x=new s.b2Vec2,u.SolveVelocityConstraints_s_d=new s.b2Vec2,u.SolveVelocityConstraints_s_P1=new s.b2Vec2,u.SolveVelocityConstraints_s_P2=new s.b2Vec2,u.SolveVelocityConstraints_s_P1P2=new s.b2Vec2,u.SolvePositionConstraints_s_xfA=new s.b2Transform,u.SolvePositionConstraints_s_xfB=new s.b2Transform,u.SolvePositionConstraints_s_psm=new d,u.SolvePositionConstraints_s_rA=new s.b2Vec2,u.SolvePositionConstraints_s_rB=new s.b2Vec2,u.SolvePositionConstraints_s_P=new s.b2Vec2,u.SolveTOIPositionConstraints_s_xfA=new s.b2Transform,u.SolveTOIPositionConstraints_s_xfB=new s.b2Transform,u.SolveTOIPositionConstraints_s_psm=new d,u.SolveTOIPositionConstraints_s_rA=new s.b2Vec2,u.SolveTOIPositionConstraints_s_rB=new s.b2Vec2,u.SolveTOIPositionConstraints_s_P=new s.b2Vec2})),a.register("2MWdt",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2SolverData=t.exports.b2Velocity=t.exports.b2Position=t.exports.b2TimeStep=t.exports.b2Profile=void 0;var i=a("4L5iv");t.exports.b2Profile=class{constructor(){this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0}Reset(){return this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0,this}};class s{constructor(){this.dt=0,this.inv_dt=0,this.dtRatio=0,this.config={velocityIterations:0,positionIterations:0},this.warmStarting=!1}static Create(){return new s}Copy(t){return this.dt=t.dt,this.inv_dt=t.inv_dt,this.dtRatio=t.dtRatio,this.config={...t.config},this.warmStarting=t.warmStarting,this}}t.exports.b2TimeStep=s;t.exports.b2Position=class{constructor(){this.c=new i.b2Vec2,this.a=0}};t.exports.b2Velocity=class{constructor(){this.v=new i.b2Vec2,this.w=0}};t.exports.b2SolverData=class{constructor(){this.step=s.Create()}}}));var Gs=a("7CdZd"),Fs=a("2MWdt");class ks{constructor(t){this.m_contactManager=new Ls.b2ContactManager,this.m_bodyList=null,this.m_jointList=null,this.m_bodyCount=0,this.m_jointCount=0,this.m_gravity=new ys.b2Vec2,this.m_allowSleep=!0,this.m_destructionListener=null,this.m_inv_dt0=0,this.m_newContacts=!1,this.m_locked=!1,this.m_clearForces=!0,this.m_warmStarting=!0,this.m_continuousPhysics=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new Fs.b2Profile,this.m_island=new Gs.b2Island(2*bs.b2_maxTOIContacts,bs.b2_maxTOIContacts,0,this.m_contactManager.m_contactListener),this.s_stack=[],this.m_gravity.Copy(t)}static Create(t){return new ks(t)}SetDestructionListener(t){this.m_destructionListener=t}GetDestructionListener(){return this.m_destructionListener}SetContactFilter(t){this.m_contactManager.m_contactFilter=t}SetContactListener(t){this.m_contactManager.m_contactListener=t,this.m_island.m_listener=t}CreateBody(t={}){bs.b2Assert(!this.IsLocked());const e=new _s.b2Body(t,this);return e.m_prev=null,e.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=e),this.m_bodyList=e,++this.m_bodyCount,e}DestroyBody(t){var e,i;bs.b2Assert(!this.IsLocked());let s=t.m_jointList;for(;s;){const i=s;s=s.next,null===(e=this.m_destructionListener)||void 0===e||e.SayGoodbyeJoint(i.joint),this.DestroyJoint(i.joint),t.m_jointList=s}t.m_jointList=null;let r=t.m_contactList;for(;r;){const t=r;r=r.next,this.m_contactManager.Destroy(t.contact)}t.m_contactList=null;const n=this.m_contactManager.m_broadPhase;let o=t.m_fixtureList;for(;o;){const e=o;o=o.m_next,null===(i=this.m_destructionListener)||void 0===i||i.SayGoodbyeFixture(e),e.DestroyProxies(n),t.m_fixtureList=o,t.m_fixtureCount-=1}t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}static Joint_Create(t){switch(t.type){case Ss.b2JointType.e_distanceJoint:return new Ps.b2DistanceJoint(t);case Ss.b2JointType.e_mouseJoint:return new Rs.b2MouseJoint(t);case Ss.b2JointType.e_prismaticJoint:return new Bs.b2PrismaticJoint(t);case Ss.b2JointType.e_revoluteJoint:return new Is.b2RevoluteJoint(t);case Ss.b2JointType.e_pulleyJoint:return new Ds.b2PulleyJoint(t);case Ss.b2JointType.e_gearJoint:return new Ts.b2GearJoint(t);case Ss.b2JointType.e_wheelJoint:return new Os.b2WheelJoint(t);case Ss.b2JointType.e_weldJoint:return new Ms.b2WeldJoint(t);case Ss.b2JointType.e_frictionJoint:return new Cs.b2FrictionJoint(t);case Ss.b2JointType.e_motorJoint:return new Es.b2MotorJoint(t);case Ss.b2JointType.e_areaJoint:return new As.b2AreaJoint(t)}throw new Error}CreateJoint(t){bs.b2Assert(!this.IsLocked());const e=ks.Joint_Create(t);e.m_prev=null,e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB;const i=e.m_bodyA,s=e.m_bodyB;if(!t.collideConnected){let t=s.GetContactList();for(;t;)t.other===i&&t.contact.FlagForFiltering(),t=t.next}return e}DestroyJoint(t){bs.b2Assert(!this.IsLocked()),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_jointList&&(this.m_jointList=t.m_next);const e=t.m_bodyA,i=t.m_bodyB,s=t.m_collideConnected;if(e.SetAwake(!0),i.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA===e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB===i.m_jointList&&(i.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,--this.m_jointCount,!s){let t=i.GetContactList();for(;t;)t.other===e&&t.contact.FlagForFiltering(),t=t.next}}Step(t,e){const i=ks.Step_s_stepTimer.Reset();this.m_newContacts&&(this.m_contactManager.FindNewContacts(),this.m_newContacts=!1),this.m_locked=!0;const s=ks.Step_s_step;s.dt=t,s.config={...e},s.inv_dt=t>0?1/t:0,s.dtRatio=this.m_inv_dt0*t,s.warmStarting=this.m_warmStarting;{const t=ks.Step_s_timer.Reset();this.m_contactManager.Collide(),this.m_profile.collide=t.GetMilliseconds()}if(this.m_stepComplete&&s.dt>0){const t=ks.Step_s_timer.Reset();this.Solve(s),this.m_profile.solve=t.GetMilliseconds()}if(this.m_continuousPhysics&&s.dt>0){const t=ks.Step_s_timer.Reset();this.SolveTOI(s),this.m_profile.solveTOI=t.GetMilliseconds()}s.dt>0&&(this.m_inv_dt0=s.inv_dt),this.m_clearForces&&this.ClearForces(),this.m_locked=!1,this.m_profile.step=i.GetMilliseconds()}ClearForces(){for(let t=this.m_bodyList;t;t=t.GetNext())t.m_force.SetZero(),t.m_torque=0}QueryAABB(t,e){this.m_contactManager.m_broadPhase.Query(t,(t=>{const i=bs.b2Verify(t.userData);return e(i.fixture)}))}QueryAllAABB(t,e=[]){return this.QueryAABB(t,(t=>(e.push(t),!0))),e}QueryPointAABB(t,e){this.m_contactManager.m_broadPhase.QueryPoint(t,(t=>{const i=bs.b2Verify(t.userData);return e(i.fixture)}))}QueryAllPointAABB(t,e=[]){return this.QueryPointAABB(t,(t=>(e.push(t),!0))),e}QueryFixtureShape(t,e,i,s){const r=ks.QueryFixtureShape_s_aabb;t.ComputeAABB(r,i,e),this.m_contactManager.m_broadPhase.Query(r,(r=>{const n=bs.b2Verify(r.userData),{fixture:o}=n;return!vs.b2TestOverlap(t,e,o.GetShape(),n.childIndex,i,o.GetBody().GetTransform())||s(o)}))}QueryAllFixtureShape(t,e,i,s=[]){return this.QueryFixtureShape(t,e,i,(t=>(s.push(t),!0))),s}QueryFixturePoint(t,e){this.m_contactManager.m_broadPhase.QueryPoint(t,(i=>{const s=bs.b2Verify(i.userData),{fixture:r}=s;return!r.TestPoint(t)||e(r)}))}QueryAllFixturePoint(t,e=[]){return this.QueryFixturePoint(t,(t=>(e.push(t),!0))),e}RayCast(t,e,i){const s=ks.RayCast_s_input;s.maxFraction=1,s.p1.Copy(t),s.p2.Copy(e),this.m_contactManager.m_broadPhase.RayCast(s,((s,r)=>{const n=bs.b2Verify(r.userData),{fixture:o}=n,a=n.childIndex,h=ks.RayCast_s_output;if(o.RayCast(h,s,a)){const{fraction:s}=h,r=ks.RayCast_s_point;return r.Set((1-s)*t.x+s*e.x,(1-s)*t.y+s*e.y),i(o,r,h.normal,s)}return s.maxFraction}))}RayCastOne(t,e){let i=null,s=1;return this.RayCast(t,e,((t,e,r,n)=>(n<s&&(s=n,i=t),s))),i}RayCastAll(t,e,i=[]){return this.RayCast(t,e,(t=>(i.push(t),1))),i}GetBodyList(){return this.m_bodyList}GetJointList(){return this.m_jointList}GetContactList(){return this.m_contactManager.m_contactList}SetAllowSleeping(t){if(t!==this.m_allowSleep&&(this.m_allowSleep=t,!this.m_allowSleep))for(let t=this.m_bodyList;t;t=t.m_next)t.SetAwake(!0)}GetAllowSleeping(){return this.m_allowSleep}SetWarmStarting(t){this.m_warmStarting=t}GetWarmStarting(){return this.m_warmStarting}SetContinuousPhysics(t){this.m_continuousPhysics=t}GetContinuousPhysics(){return this.m_continuousPhysics}SetSubStepping(t){this.m_subStepping=t}GetSubStepping(){return this.m_subStepping}GetProxyCount(){return this.m_contactManager.m_broadPhase.GetProxyCount()}GetBodyCount(){return this.m_bodyCount}GetJointCount(){return this.m_jointCount}GetContactCount(){return this.m_contactManager.m_contactCount}GetTreeHeight(){return this.m_contactManager.m_broadPhase.GetTreeHeight()}GetTreeBalance(){return this.m_contactManager.m_broadPhase.GetTreeBalance()}GetTreeQuality(){return this.m_contactManager.m_broadPhase.GetTreeQuality()}SetGravity(t){this.m_gravity.Copy(t)}GetGravity(){return this.m_gravity}IsLocked(){return this.m_locked}SetAutoClearForces(t){this.m_clearForces=t}GetAutoClearForces(){return this.m_clearForces}ShiftOrigin(t){bs.b2Assert(!this.IsLocked());for(let e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.Subtract(t),e.m_sweep.c0.Subtract(t),e.m_sweep.c.Subtract(t);for(let e=this.m_jointList;e;e=e.m_next)e.ShiftOrigin(t);this.m_contactManager.m_broadPhase.ShiftOrigin(t)}GetContactManager(){return this.m_contactManager}GetProfile(){return this.m_profile}Solve(t){this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0;const e=this.m_island;e.Resize(this.m_bodyCount),e.Clear();for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag=!1;for(let t=this.m_contactManager.m_contactList;t;t=t.m_next)t.m_islandFlag=!1;for(let t=this.m_jointList;t;t=t.m_next)t.m_islandFlag=!1;const i=this.s_stack;for(let s=this.m_bodyList;s;s=s.m_next){if(s.m_islandFlag)continue;if(!s.IsAwake()||!s.IsEnabled())continue;if(s.GetType()===_s.b2BodyType.b2_staticBody)continue;e.Clear();let r=0;for(i[r++]=s,s.m_islandFlag=!0;r>0;){const t=i[--r];if(bs.b2Assert(null!==t),e.AddBody(t),t.GetType()!==_s.b2BodyType.b2_staticBody){t.m_awakeFlag=!0;for(let s=t.m_contactList;s;s=s.next){const{contact:t}=s;if(t.m_islandFlag)continue;if(!t.IsEnabled()||!t.IsTouching())continue;const n=t.m_fixtureA.m_isSensor,o=t.m_fixtureB.m_isSensor;if(n||o)continue;e.AddContact(t),t.m_islandFlag=!0;const{other:a}=s;a.m_islandFlag||(i[r++]=a,a.m_islandFlag=!0)}for(let s=t.m_jointList;s;s=s.next){if(s.joint.m_islandFlag)continue;const{other:t}=s;t.IsEnabled()&&(e.AddJoint(s.joint),s.joint.m_islandFlag=!0,t.m_islandFlag||(i[r++]=t,t.m_islandFlag=!0))}}}const n=new Fs.b2Profile;e.Solve(n,t,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=n.solveInit,this.m_profile.solveVelocity+=n.solveVelocity,this.m_profile.solvePosition+=n.solvePosition;for(let t=0;t<e.m_bodyCount;++t){const i=e.m_bodies[t];i.GetType()===_s.b2BodyType.b2_staticBody&&(i.m_islandFlag=!1)}}for(let t=0;t<i.length&&i[t];++t)i[t]=null;const s=new ws.b2Timer;for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag&&t.GetType()!==_s.b2BodyType.b2_staticBody&&t.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=s.GetMilliseconds()}SolveTOI(t){const e=this.m_island;if(e.Clear(),this.m_stepComplete){for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag=!1,t.m_sweep.alpha0=0;for(let t=this.m_contactManager.m_contactList;t;t=t.m_next)t.m_toiFlag=!1,t.m_islandFlag=!1,t.m_toiCount=0,t.m_toi=1}for(;;){let i=null,s=1;for(let t=this.m_contactManager.m_contactList;t;t=t.m_next){if(!t.IsEnabled())continue;if(t.m_toiCount>bs.b2_maxSubSteps)continue;let e=1;if(t.m_toiFlag)e=t.m_toi;else{const i=t.GetFixtureA(),s=t.GetFixtureB();if(i.IsSensor()||s.IsSensor())continue;const r=i.GetBody(),n=s.GetBody(),o=r.m_type,a=n.m_type,h=r.IsAwake()&&o!==_s.b2BodyType.b2_staticBody,l=n.IsAwake()&&a!==_s.b2BodyType.b2_staticBody;if(!h&&!l)continue;const c=r.IsBullet()||o!==_s.b2BodyType.b2_dynamicBody,d=n.IsBullet()||a!==_s.b2BodyType.b2_dynamicBody;if(!c&&!d)continue;let{alpha0:u}=r.m_sweep;r.m_sweep.alpha0<n.m_sweep.alpha0?(u=n.m_sweep.alpha0,r.m_sweep.Advance(u)):n.m_sweep.alpha0<r.m_sweep.alpha0&&(u=r.m_sweep.alpha0,n.m_sweep.Advance(u));const p=t.GetChildIndexA(),m=t.GetChildIndexB(),f=ks.SolveTOI_s_toi_input;f.proxyA.SetShape(i.GetShape(),p),f.proxyB.SetShape(s.GetShape(),m),f.sweepA.Copy(r.m_sweep),f.sweepB.Copy(n.m_sweep),f.tMax=1;const _=ks.SolveTOI_s_toi_output;xs.b2TimeOfImpact(_,f);const g=_.t;e=_.state===xs.b2TOIOutputState.e_touching?Math.min(u+(1-u)*g,1):1,t.m_toi=e,t.m_toiFlag=!0}e<s&&(i=t,s=e)}if(null===i||1-10*bs.b2_epsilon<s){this.m_stepComplete=!0;break}const r=i.GetFixtureA(),n=i.GetFixtureB(),o=r.GetBody(),a=n.GetBody(),h=ks.SolveTOI_s_backup1.Copy(o.m_sweep),l=ks.SolveTOI_s_backup2.Copy(a.m_sweep);if(o.Advance(s),a.Advance(s),i.Update(this.m_contactManager.m_contactListener),i.m_toiFlag=!1,++i.m_toiCount,!i.IsEnabled()||!i.IsTouching()){i.SetEnabled(!1),o.m_sweep.Copy(h),a.m_sweep.Copy(l),o.SynchronizeTransform(),a.SynchronizeTransform();continue}o.SetAwake(!0),a.SetAwake(!0),e.Clear(),e.AddBody(o),e.AddBody(a),e.AddContact(i),o.m_islandFlag=!0,a.m_islandFlag=!0,i.m_islandFlag=!0;for(let t=0;t<2;++t){const i=0===t?o:a;if(i.m_type===_s.b2BodyType.b2_dynamicBody)for(let t=i.m_contactList;t&&e.m_bodyCount!==e.m_bodyCapacity&&e.m_contactCount!==bs.b2_maxTOIContacts;t=t.next){const{contact:r}=t;if(r.m_islandFlag)continue;const{other:n}=t;if(n.m_type===_s.b2BodyType.b2_dynamicBody&&!i.IsBullet()&&!n.IsBullet())continue;const o=r.m_fixtureA.m_isSensor,a=r.m_fixtureB.m_isSensor;if(o||a)continue;const h=ks.SolveTOI_s_backup.Copy(n.m_sweep);n.m_islandFlag||n.Advance(s),r.Update(this.m_contactManager.m_contactListener),r.IsEnabled()&&r.IsTouching()?(r.m_islandFlag=!0,e.AddContact(r),n.m_islandFlag||(n.m_islandFlag=!0,n.m_type!==_s.b2BodyType.b2_staticBody&&n.SetAwake(!0),e.AddBody(n))):(n.m_sweep.Copy(h),n.SynchronizeTransform())}}const c=ks.SolveTOI_s_subStep;c.dt=(1-s)*t.dt,c.inv_dt=1/c.dt,c.dtRatio=1,c.config={...t.config,positionIterations:20},c.warmStarting=!1,e.SolveTOI(c,o.m_islandIndex,a.m_islandIndex);for(let t=0;t<e.m_bodyCount;++t){const i=e.m_bodies[t];if(i.m_islandFlag=!1,i.m_type===_s.b2BodyType.b2_dynamicBody){i.SynchronizeFixtures();for(let t=i.m_contactList;t;t=t.next)t.contact.m_toiFlag=!1,t.contact.m_islandFlag=!1}}if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}}}gs.b2World=ks,ks.Step_s_step=Fs.b2TimeStep.Create(),ks.Step_s_stepTimer=new ws.b2Timer,ks.Step_s_timer=new ws.b2Timer,ks.QueryFixtureShape_s_aabb=new vs.b2AABB,ks.RayCast_s_input=new vs.b2RayCastInput,ks.RayCast_s_output=new vs.b2RayCastOutput,ks.RayCast_s_point=new ys.b2Vec2,ks.SolveTOI_s_subStep=Fs.b2TimeStep.Create(),ks.SolveTOI_s_backup=new ys.b2Sweep,ks.SolveTOI_s_backup1=new ys.b2Sweep,ks.SolveTOI_s_backup2=new ys.b2Sweep,ks.SolveTOI_s_toi_input=new xs.b2TOIInput,ks.SolveTOI_s_toi_output=new xs.b2TOIOutput,Object.defineProperty(ps,"b2World",{enumerable:!0,get:function(){return gs.b2World}}),fs(a("guemH"),ps),fs(a("7CdZd"),ps),fs(a("2MWdt"),ps),fs(a("cCaDq"),ps),fs(a("4VHnc"),ps),fs(a("5rhj8"),ps);var Ns=a("2hX2H");Object.defineProperty(ps,"b2SetBlockSolve",{enumerable:!0,get:function(){return Ns.b2SetBlockSolve}}),Object.defineProperty(ps,"b2GetBlockSolve",{enumerable:!0,get:function(){return Ns.b2GetBlockSolve}}),fs(a("7oGb5"),ps),fs(a("gNfK4"),ps),fs(a("acQC1"),ps),fs(a("g1B28"),ps),fs(a("dicKF"),ps),fs(a("kNql8"),ps),fs(a("hYVEs"),ps),fs(a("kueJb"),ps),fs(a("kd0sK"),ps),fs(a("jrvQ3"),ps),fs(a("bvnb7"),ps),fs(a("fAtfp"),ps),a.register("cui95",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.b2Rope=t.exports.b2RopeTuning=t.exports.b2BendingModel=t.exports.b2StretchingModel=void 0;var i=a("1Zs4L"),s=a("cCzda"),r=a("4L5iv");const n={J1:new r.b2Vec2,J2:new r.b2Vec2,J3:new r.b2Vec2,r:new r.b2Vec2,e1:new r.b2Vec2,e2:new r.b2Vec2,Jd1:new r.b2Vec2,Jd2:new r.b2Vec2,d:new r.b2Vec2,u:new r.b2Vec2,dp1:new r.b2Vec2,dp2:new r.b2Vec2,dp3:new r.b2Vec2,d1:new r.b2Vec2,d2:new r.b2Vec2,dHat:new r.b2Vec2};var o,h,l,c;(h=o=t.exports.b2StretchingModel||(t.exports.b2StretchingModel={}))[h.b2_pbdStretchingModel=0]="b2_pbdStretchingModel",h[h.b2_xpbdStretchingModel=1]="b2_xpbdStretchingModel",(c=l=t.exports.b2BendingModel||(t.exports.b2BendingModel={}))[c.b2_springAngleBendingModel=0]="b2_springAngleBendingModel",c[c.b2_pbdAngleBendingModel=1]="b2_pbdAngleBendingModel",c[c.b2_xpbdAngleBendingModel=2]="b2_xpbdAngleBendingModel",c[c.b2_pbdDistanceBendingModel=3]="b2_pbdDistanceBendingModel",c[c.b2_pbdHeightBendingModel=4]="b2_pbdHeightBendingModel",c[c.b2_pbdTriangleBendingModel=5]="b2_pbdTriangleBendingModel";class d{constructor(){this.stretchingModel=o.b2_pbdStretchingModel,this.bendingModel=l.b2_pbdAngleBendingModel,this.damping=0,this.stretchStiffness=1,this.stretchHertz=0,this.stretchDamping=0,this.bendStiffness=.5,this.bendHertz=1,this.bendDamping=0,this.isometric=!1,this.fixedEffectiveMass=!1,this.warmStart=!1}Copy(t){return this.stretchingModel=t.stretchingModel,this.bendingModel=t.bendingModel,this.damping=t.damping,this.stretchStiffness=t.stretchStiffness,this.stretchHertz=t.stretchHertz,this.stretchDamping=t.stretchDamping,this.bendStiffness=t.bendStiffness,this.bendHertz=t.bendHertz,this.bendDamping=t.bendDamping,this.isometric=t.isometric,this.fixedEffectiveMass=t.fixedEffectiveMass,this.warmStart=t.warmStart,this}}t.exports.b2RopeTuning=d;class u{constructor(){this.i1=0,this.i2=0,this.invMass1=0,this.invMass2=0,this.L=0,this.lambda=0,this.spring=0,this.damper=0}}class p{constructor(){this.i1=0,this.i2=0,this.i3=0,this.invMass1=0,this.invMass2=0,this.invMass3=0,this.invEffectiveMass=0,this.lambda=0,this.L1=0,this.L2=0,this.alpha1=0,this.alpha2=0,this.spring=0,this.damper=0}}t.exports.b2Rope=class{constructor(t){this.m_position=new r.b2Vec2,this.m_count=0,this.m_stretchCount=0,this.m_bendCount=0,this.m_gravity=new r.b2Vec2,this.m_tuning=new d,i.b2Assert(t.vertices.length>=3),this.m_position.Copy(t.position),this.m_count=t.vertices.length,this.m_bindPositions=i.b2MakeArray(this.m_count,r.b2Vec2),this.m_ps=i.b2MakeArray(this.m_count,r.b2Vec2),this.m_p0s=i.b2MakeArray(this.m_count,r.b2Vec2),this.m_vs=i.b2MakeArray(this.m_count,r.b2Vec2),this.m_invMasses=i.b2MakeNumberArray(this.m_count);for(let e=0;e<this.m_count;++e){this.m_bindPositions[e].Copy(t.vertices[e]),r.b2Vec2.Add(t.vertices[e],this.m_position,this.m_ps[e]),r.b2Vec2.Add(t.vertices[e],this.m_position,this.m_p0s[e]),this.m_vs[e].SetZero();const i=t.masses[e];this.m_invMasses[e]=i>0?1/i:0}this.m_stretchCount=this.m_count-1,this.m_bendCount=this.m_count-2,this.m_stretchConstraints=new Array(this.m_stretchCount);for(let t=0;t<this.m_stretchCount;t++)this.m_stretchConstraints[t]=new u;this.m_bendConstraints=new Array(this.m_bendCount);for(let t=0;t<this.m_bendCount;t++)this.m_bendConstraints[t]=new p;for(let t=0;t<this.m_stretchCount;++t){const e=this.m_stretchConstraints[t],i=this.m_ps[t],s=this.m_ps[t+1];e.i1=t,e.i2=t+1,e.L=r.b2Vec2.Distance(i,s),e.invMass1=this.m_invMasses[t],e.invMass2=this.m_invMasses[t+1],e.lambda=0,e.damper=0,e.spring=0}const{J1:e,J2:s,r:o,e1:a,e2:h,Jd1:l,Jd2:c}=n;for(let t=0;t<this.m_bendCount;++t){const i=this.m_bendConstraints[t],n=this.m_ps[t],d=this.m_ps[t+1],u=this.m_ps[t+2];i.i1=t,i.i2=t+1,i.i3=t+2,i.invMass1=this.m_invMasses[t],i.invMass2=this.m_invMasses[t+1],i.invMass3=this.m_invMasses[t+2],i.invEffectiveMass=0,i.L1=r.b2Vec2.Distance(n,d),i.L2=r.b2Vec2.Distance(d,u),i.lambda=0,r.b2Vec2.Subtract(d,n,a),r.b2Vec2.Subtract(u,d,h);const p=a.LengthSquared(),m=h.LengthSquared();if(p*m==0)continue;r.b2Vec2.Skew(a,l).Scale(-1/p),r.b2Vec2.Skew(h,c).Scale(1/m),r.b2Vec2.Negate(l,e),r.b2Vec2.Subtract(l,c,s);const f=c;i.invEffectiveMass=i.invMass1*r.b2Vec2.Dot(e,e)+i.invMass2*r.b2Vec2.Dot(s,s)+i.invMass3*r.b2Vec2.Dot(f,f),r.b2Vec2.Subtract(u,n,o);const _=o.LengthSquared();0!==_&&(i.alpha1=r.b2Vec2.Dot(h,o)/_,i.alpha2=r.b2Vec2.Dot(a,o)/_)}this.m_gravity.Copy(t.gravity),this.SetTuning(t.tuning)}SetTuning(t){this.m_tuning.Copy(t);const e=2*Math.PI*this.m_tuning.bendHertz;for(let t=0;t<this.m_bendCount;++t){const i=this.m_bendConstraints[t],s=i.L1*i.L1,r=i.L2*i.L2;if(s*r==0){i.spring=0,i.damper=0;continue}const n=1/i.L1+1/i.L2,o=i.invMass1/s+i.invMass2*n*n+i.invMass3/r;if(0===o){i.spring=0,i.damper=0;continue}const a=1/o;i.spring=a*e*e,i.damper=2*a*this.m_tuning.bendDamping*e}const i=2*Math.PI*this.m_tuning.stretchHertz;for(let t=0;t<this.m_stretchCount;++t){const e=this.m_stretchConstraints[t],s=e.invMass1+e.invMass2;if(0===s)continue;const r=1/s;e.spring=r*i*i,e.damper=2*r*this.m_tuning.stretchDamping*i}}Step(t,e,i){if(0===t)return;const s=1/t,r=Math.exp(-t*this.m_tuning.damping);for(let e=0;e<this.m_count;++e)this.m_invMasses[e]>0?(this.m_vs[e].Scale(r),this.m_vs[e].AddScaled(t,this.m_gravity)):(this.m_vs[e].x=s*(this.m_bindPositions[e].x+i.x-this.m_p0s[e].x),this.m_vs[e].y=s*(this.m_bindPositions[e].y+i.y-this.m_p0s[e].y));this.m_tuning.bendingModel===l.b2_springAngleBendingModel&&this.ApplyBendForces(t);for(let t=0;t<this.m_bendCount;++t)this.m_bendConstraints[t].lambda=0;for(let t=0;t<this.m_stretchCount;++t)this.m_stretchConstraints[t].lambda=0;for(let e=0;e<this.m_count;++e)this.m_ps[e].AddScaled(t,this.m_vs[e]);for(let i=0;i<e;++i)this.m_tuning.bendingModel===l.b2_pbdAngleBendingModel?this.SolveBend_PBD_Angle():this.m_tuning.bendingModel===l.b2_xpbdAngleBendingModel?this.SolveBend_XPBD_Angle(t):this.m_tuning.bendingModel===l.b2_pbdDistanceBendingModel?this.SolveBend_PBD_Distance():this.m_tuning.bendingModel===l.b2_pbdHeightBendingModel?this.SolveBend_PBD_Height():this.m_tuning.bendingModel===l.b2_pbdTriangleBendingModel&&this.SolveBend_PBD_Triangle(),this.m_tuning.stretchingModel===o.b2_pbdStretchingModel?this.SolveStretch_PBD():this.m_tuning.stretchingModel===o.b2_xpbdStretchingModel&&this.SolveStretch_XPBD(t);for(let t=0;t<this.m_count;++t)this.m_vs[t].x=s*(this.m_ps[t].x-this.m_p0s[t].x),this.m_vs[t].y=s*(this.m_ps[t].y-this.m_p0s[t].y),this.m_p0s[t].Copy(this.m_ps[t])}Reset(t){this.m_position.Copy(t);for(let t=0;t<this.m_count;++t)r.b2Vec2.Add(this.m_bindPositions[t],this.m_position,this.m_ps[t]),this.m_p0s[t].Copy(this.m_ps[t]),this.m_vs[t].SetZero();for(let t=0;t<this.m_bendCount;++t)this.m_bendConstraints[t].lambda=0;for(let t=0;t<this.m_stretchCount;++t)this.m_stretchConstraints[t].lambda=0}SolveStretch_PBD(){const t=this.m_tuning.stretchStiffness,{d:e}=n;for(let i=0;i<this.m_stretchCount;++i){const s=this.m_stretchConstraints[i],n=this.m_ps[s.i1],o=this.m_ps[s.i2];r.b2Vec2.Subtract(o,n,e);const a=e.Normalize(),h=s.invMass1+s.invMass2;if(0===h)continue;const l=s.invMass1/h,c=s.invMass2/h;n.SubtractScaled(t*l*(s.L-a),e),o.AddScaled(t*c*(s.L-a),e)}}SolveStretch_XPBD(t){const{dp1:e,dp2:i,u:s,J1:o}=n;for(let n=0;n<this.m_stretchCount;++n){const a=this.m_stretchConstraints[n],h=this.m_ps[a.i1],l=this.m_ps[a.i2];r.b2Vec2.Subtract(h,this.m_p0s[a.i1],e),r.b2Vec2.Subtract(l,this.m_p0s[a.i2],i),r.b2Vec2.Subtract(l,h,s);const c=s.Normalize();r.b2Vec2.Negate(s,o);const d=s,u=a.invMass1+a.invMass2;if(0===u)continue;const p=1/(a.spring*t*t),m=p*(t*t*a.damper)/t,f=c-a.L,_=r.b2Vec2.Dot(o,e)+r.b2Vec2.Dot(d,i),g=-(f+p*a.lambda+m*_)/((1+m)*u+p);h.AddScaled(a.invMass1*g,o),l.AddScaled(a.invMass2*g,d),a.lambda+=g}}SolveBend_PBD_Angle(){const t=this.m_tuning.bendStiffness,{Jd1:e,Jd2:i,J1:s,J2:o,d1:a,d2:h}=n;for(let n=0;n<this.m_bendCount;++n){const l=this.m_bendConstraints[n],c=this.m_ps[l.i1],d=this.m_ps[l.i2],u=this.m_ps[l.i3];r.b2Vec2.Subtract(d,c,a),r.b2Vec2.Subtract(u,d,h);const p=r.b2Vec2.Cross(a,h),m=r.b2Vec2.Dot(a,h),f=Math.atan2(p,m);let _,g;if(this.m_tuning.isometric?(_=l.L1*l.L1,g=l.L2*l.L2):(_=a.LengthSquared(),g=h.LengthSquared()),_*g==0)continue;r.b2Vec2.Skew(a,e).Scale(-1/_),r.b2Vec2.Skew(h,i).Scale(1/g),r.b2Vec2.Negate(e,s),r.b2Vec2.Subtract(e,i,o);const b=i;let y;y=this.m_tuning.fixedEffectiveMass?l.invEffectiveMass:l.invMass1*r.b2Vec2.Dot(s,s)+l.invMass2*r.b2Vec2.Dot(o,o)+l.invMass3*r.b2Vec2.Dot(b,b),0===y&&(y=l.invEffectiveMass);const w=-t*f/y;c.AddScaled(l.invMass1*w,s),d.AddScaled(l.invMass2*w,o),u.AddScaled(l.invMass3*w,b)}}SolveBend_XPBD_Angle(t){const{dp1:e,dp2:i,dp3:s,d1:o,d2:a,Jd1:h,Jd2:l,J1:c,J2:d}=n;for(let n=0;n<this.m_bendCount;++n){const u=this.m_bendConstraints[n],p=this.m_ps[u.i1],m=this.m_ps[u.i2],f=this.m_ps[u.i3];let _,g;if(r.b2Vec2.Subtract(p,this.m_p0s[u.i1],e),r.b2Vec2.Subtract(m,this.m_p0s[u.i2],i),r.b2Vec2.Subtract(f,this.m_p0s[u.i3],s),r.b2Vec2.Subtract(m,p,o),r.b2Vec2.Subtract(f,m,a),this.m_tuning.isometric?(_=u.L1*u.L1,g=u.L2*u.L2):(_=o.LengthSquared(),g=a.LengthSquared()),_*g==0)continue;const b=r.b2Vec2.Cross(o,a),y=r.b2Vec2.Dot(o,a),w=Math.atan2(b,y);r.b2Vec2.Skew(o,h).Scale(-1/_),r.b2Vec2.Skew(a,l).Scale(1/g),r.b2Vec2.Negate(h,c),r.b2Vec2.Subtract(h,l,d);const v=l;let x;if(x=this.m_tuning.fixedEffectiveMass?u.invEffectiveMass:u.invMass1*r.b2Vec2.Dot(c,c)+u.invMass2*r.b2Vec2.Dot(d,d)+u.invMass3*r.b2Vec2.Dot(v,v),0===x)continue;const S=1/(u.spring*t*t),A=S*(t*t*u.damper)/t,P=w,C=r.b2Vec2.Dot(c,e)+r.b2Vec2.Dot(d,i)+r.b2Vec2.Dot(v,s),T=-(P+S*u.lambda+A*C)/((1+A)*x+S);p.AddScaled(u.invMass1*T,c),m.AddScaled(u.invMass2*T,d),f.AddScaled(u.invMass3*T,v),u.lambda+=T}}SolveBend_PBD_Distance(){const t=this.m_tuning.bendStiffness,{d:e}=n;for(let i=0;i<this.m_bendCount;++i){const s=this.m_bendConstraints[i],{i1:n}=s,o=s.i3,a=this.m_ps[n],h=this.m_ps[o];r.b2Vec2.Subtract(h,a,e);const l=e.Normalize(),c=s.invMass1+s.invMass3;if(0===c)continue;const d=s.invMass1/c,u=s.invMass3/c;a.SubtractScaled(t*d*(s.L1+s.L2-l),e),h.AddScaled(t*u*(s.L1+s.L2-l),e)}}SolveBend_PBD_Height(){const t=this.m_tuning.bendStiffness,{dHat:e,J1:i,J2:s,J3:o,d:a}=n;for(let n=0;n<this.m_bendCount;++n){const h=this.m_bendConstraints[n],l=this.m_ps[h.i1],c=this.m_ps[h.i2],d=this.m_ps[h.i3];a.x=h.alpha1*l.x+h.alpha2*d.x-c.x,a.y=h.alpha1*l.y+h.alpha2*d.y-c.y;const u=a.Length();if(0===u)continue;r.b2Vec2.Scale(1/u,a,e),r.b2Vec2.Scale(h.alpha1,e,i),r.b2Vec2.Negate(e,s),r.b2Vec2.Scale(h.alpha2,e,o);const p=h.invMass1*h.alpha1*h.alpha1+h.invMass2+h.invMass3*h.alpha2*h.alpha2;if(0===p)continue;const m=-t*(1/p)*u;l.AddScaled(h.invMass1*m,i),c.AddScaled(h.invMass2*m,s),d.AddScaled(h.invMass3*m,o)}}SolveBend_PBD_Triangle(){const t=this.m_tuning.bendStiffness,{d:e}=n;for(let i=0;i<this.m_bendCount;++i){const s=this.m_bendConstraints[i],r=this.m_ps[s.i1],n=this.m_ps[s.i2],o=this.m_ps[s.i3],a=s.invMass1,h=s.invMass2,l=s.invMass3,c=t/(a+l+2*h);e.x=n.x-1/3*(r.x+n.x+o.x),e.y=n.y-1/3*(r.y+n.y+o.y),r.AddScaled(2*a*c,e),n.AddScaled(-4*h*c,e),o.AddScaled(2*l*c,e)}}ApplyBendForces(t){const e=2*Math.PI*this.m_tuning.bendHertz,{d1:i,d2:s,Jd1:o,Jd2:a,J1:h,J2:l}=n;for(let n=0;n<this.m_bendCount;++n){const c=this.m_bendConstraints[n],d=this.m_ps[c.i1],u=this.m_ps[c.i2],p=this.m_ps[c.i3],m=this.m_vs[c.i1],f=this.m_vs[c.i2],_=this.m_vs[c.i3];let g,b;if(r.b2Vec2.Subtract(u,d,i),r.b2Vec2.Subtract(p,u,s),this.m_tuning.isometric?(g=c.L1*c.L1,b=c.L2*c.L2):(g=i.LengthSquared(),b=s.LengthSquared()),g*b==0)continue;const y=r.b2Vec2.Cross(i,s),w=r.b2Vec2.Dot(i,s),v=Math.atan2(y,w);r.b2Vec2.Skew(i,o).Scale(-1/g),r.b2Vec2.Skew(s,a).Scale(1/b),r.b2Vec2.Negate(o,h),r.b2Vec2.Subtract(o,a,l);const x=a;let S;if(S=this.m_tuning.fixedEffectiveMass?c.invEffectiveMass:c.invMass1*r.b2Vec2.Dot(h,h)+c.invMass2*r.b2Vec2.Dot(l,l)+c.invMass3*r.b2Vec2.Dot(x,x),0===S)continue;const A=1/S,P=-t*(A*e*e*v+2*A*this.m_tuning.bendDamping*e*(r.b2Vec2.Dot(h,m)+r.b2Vec2.Dot(l,f)+r.b2Vec2.Dot(x,_)));this.m_vs[c.i1].AddScaled(c.invMass1*P,h),this.m_vs[c.i2].AddScaled(c.invMass2*P,l),this.m_vs[c.i3].AddScaled(c.invMass3*P,x)}}Draw(t){for(let e=0;e<this.m_count-1;++e){t.DrawSegment(this.m_ps[e],this.m_ps[e+1],s.debugColors.rope);const i=this.m_invMasses[e]>0?s.debugColors.ropePointD:s.debugColors.ropePointG;t.DrawPoint(this.m_ps[e],5,i)}const e=this.m_invMasses[this.m_count-1]>0?s.debugColors.ropePointD:s.debugColors.ropePointG;t.DrawPoint(this.m_ps[this.m_count-1],5,e)}}})),fs(a("cui95"),ps);class Vs{static Vector(t,e){var i=new ps.b2Vec2;return i.x=t,i.y=e,i}static RangedRandom(t,e){return t+Math.random()*(e-t)}static NearestInt(t){return t-Math.floor(t)>=.5?Math.floor(t)+1:Math.floor(t)}static FormatDate(t){if(isNaN(t))return"Oct. 17, 2008";var e=new Date;e.setTime(t);return["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."][e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}static GetDist(t,e,i,s){return Math.sqrt((t-i)*(t-i)+(e-s)*(e-s))}static GetAngle(t){return Math.atan2(t.y,t.x)}static NormalizeAngle(t){for(;t>=2*Math.PI;)t-=2*Math.PI;for(;t<0;)t+=2*Math.PI;return t}static Midpoint(t,e){return new ps.b2Vec2((t.x+e.x)/2,(t.y+e.y)/2)}static HexColour(t,e,i){return i|e<<8|t<<16}static HexColourString(t,e,i){return`#${[t,e,i].map((t=>t.toString(16).padStart(2,"0"))).join("")}`}static b2ColorToHex(t){return 255*t.b|255*t.g<<8|255*t.r<<16}static ObjectInArray(t,e){if(!e)return!1;for(var i=0;i<e.length;i++)if(t==e[i])return!0;return!1}static RemoveFromArray(t,e){for(var i=new Array,s=0;s<e.length;s++)t!=e[s]&&i.push(e[s]);return i}static InsertIntoArray(t,e,i){for(var s=new Array,r=0;r<e.length;r++)r==i&&s.push(t),s.push(e[r]);return r<=i&&s.push(t),s}static RemoveDuplicates(t){for(var e=new Array,i=0;i<t.length;i++){for(var s=!1,r=0;r<i;r++)if(t[i]==t[r]){s=!0;break}s||e.push(t[i])}return e}static SegmentsIntersect(t,e,i,s,r,n,o,a){if(t==r&&e==n||t==o&&e==a||i==r&&s==n||i==o&&s==a)return!1;Math.abs(t-i)<1e-5&&(i+=1e-4);var h=(s-e)/(i-t);Math.abs(r-o)<1e-5&&(o+=1e-4);var l=(a-n)/(o-r);if(h==l)return!1;var c=(n-r*l-(e-t*h))/(h-l);return(c>=t&&c<=i||c<=t&&c>=i)&&(c>=r&&c<=o||c<=r&&c>=o)}static DistanceFromPointToLine(t,e,i){i.Normalize();var s=new ps.b2Vec2(e.x-t.x,e.y-t.y);return Math.abs(Vs.Determinant(new ps.b2Mat22(0,i,s)))}static Determinant(t){return t.col1.x*t.col2.y-t.col1.y*t.col2.x}}class Us{static Init(){Us.renderer=Sa.renderer,Us.m_stageMc=Sa.theRoot,Us.ascii=new Array(222),this.fillAscii(),Us.keyState=new Array(222),Us.keyArr=new Array;for(var t=0;t<222;t++)Us.keyState[t]=0,null!=Us.ascii[t]&&Us.keyArr.push(t);Us.bufferSize=5,Us.keyBuffer=new Array(Us.bufferSize);for(var e=0;e<Us.bufferSize;e++)Us.keyBuffer[e]=new Array(0,0);Us.renderer.view.tabIndex=-1,Us.renderer.view.addEventListener("keydown",(t=>this.keyPress(t))),Us.renderer.view.addEventListener("keyup",(t=>this.keyRelease(t))),Us.m_stageMc.on("mousedown",(t=>this.mousePress(t))),Us.m_stageMc.on("mouseup",(t=>this.mouseRelease(t))),Us.m_stageMc.on("mousemove",(t=>this.mouseMove(t))),Us.m_stageMc.on("mousewheel",(t=>this.mouseWheel(t))),Us.m_stageMc.on("mouseout",(t=>this.mouseLeave(t)))}static update(){for(var t=0;t<Us.keyArr.length;t++)0!=Us.keyState[Us.keyArr[t]]&&Us.keyState[Us.keyArr[t]]++;for(var e=0;e<Us.bufferSize;e++)Us.keyBuffer[e][1]++;Us.mouseReleased=!1,Us.mousePressed=!1,Us.mouseOver=!1}static mousePress(t){Us.mousePressed=!0,Us.mouseDown=!0,Us.mouseDragX=0,Us.mouseDragY=0,Us.m_currController&&Us.m_currController.mouseClick(!1)}static mouseWheel(t){Us.mouseWheelVal+=t.delta}static mouseRelease(t){Us.mouseDown=!1,Us.mouseReleased=!0,Us.m_currController&&Us.m_currController.mouseClick(!0)}static mouseLeave(t){Us.mouseReleased=Us.mouseDown,Us.mouseDown=!1}static mouseMove(t){Us.mouseX=t.data.global.x-Us.m_stageMc.x,Us.mouseY=t.data.global.y-Us.m_stageMc.y,Us.mouseDown&&(Us.mouseDragX+=Us.mouseOffsetX,Us.mouseDragY+=Us.mouseOffsetY),Us.m_currController&&Us.m_currController.mouseMove(Us.mouseX,Us.mouseY)}static getKeyHold(t){return Math.max(0,Us.keyState[t])}static isKeyDown(t){return Us.keyState[t]>0}static isKeyPressed(t){return Us.timeSinceLastKey=0,1==Us.keyState[t]}static isKeyReleased(t){return-1==Us.keyState[t]}static isKeyInBuffer(t,e,i){return Us.keyBuffer[e][0]==t&&Us.keyBuffer[e][1]<=i}static keyPress(t){Us.keyState[t.keyCode]=Math.max(Us.keyState[t.keyCode],1),Us.lastKey=t.keyCode,Us.m_currController&&Us.m_currController.keyPress(Us.lastKey,!1)}static keyRelease(t){Us.keyState[t.keyCode]=-1;for(var e=Us.bufferSize-1;e>0;e--)Us.keyBuffer[e]=Us.keyBuffer[e-1];Us.keyBuffer[0]=[t.keyCode,0],Us.m_currController&&Us.m_currController.keyPress(t.keyCode,!0)}static getKeyString(t){return Us.ascii[t]}static getKeyNumber(t){const e=Object.keys(Us.ascii).find((e=>Us.ascii[e]===t||Us.ascii[e]===t.toUpperCase()||Us.ascii[e]===t.toLowerCase()));return e?+e:null}static fillAscii(){Us.ascii[65]="A",Us.ascii[66]="B",Us.ascii[67]="C",Us.ascii[68]="D",Us.ascii[69]="E",Us.ascii[70]="F",Us.ascii[71]="G",Us.ascii[72]="H",Us.ascii[73]="I",Us.ascii[74]="J",Us.ascii[75]="K",Us.ascii[76]="L",Us.ascii[77]="M",Us.ascii[78]="N",Us.ascii[79]="O",Us.ascii[80]="P",Us.ascii[81]="Q",Us.ascii[82]="R",Us.ascii[83]="S",Us.ascii[84]="T",Us.ascii[85]="U",Us.ascii[86]="V",Us.ascii[87]="W",Us.ascii[88]="X",Us.ascii[89]="Y",Us.ascii[90]="Z",Us.ascii[48]="0",Us.ascii[49]="1",Us.ascii[50]="2",Us.ascii[51]="3",Us.ascii[52]="4",Us.ascii[53]="5",Us.ascii[54]="6",Us.ascii[55]="7",Us.ascii[56]="8",Us.ascii[57]="9",Us.ascii[96]="NP 0",Us.ascii[97]="NP 1",Us.ascii[98]="NP 2",Us.ascii[99]="NP 3",Us.ascii[100]="NP 4",Us.ascii[101]="NP 5",Us.ascii[102]="NP 6",Us.ascii[103]="NP 7",Us.ascii[104]="NP 8",Us.ascii[105]="NP 9",Us.ascii[111]="NP /",Us.ascii[106]="NP *",Us.ascii[109]="NP -",Us.ascii[107]="NP +",Us.ascii[110]="NP .",Us.ascii[112]="F1",Us.ascii[113]="F2",Us.ascii[114]="F3",Us.ascii[115]="F4",Us.ascii[116]="F5",Us.ascii[117]="F6",Us.ascii[118]="F7",Us.ascii[119]="F8",Us.ascii[120]="F9",Us.ascii[122]="F11",Us.ascii[123]="F12",Us.ascii[124]="F13",Us.ascii[125]="F14",Us.ascii[126]="F15",Us.ascii[32]="Space",Us.ascii[17]="Ctrl",Us.ascii[16]="Shift",Us.ascii[20]="Caps",Us.ascii[144]="NumLk",Us.ascii[145]="ScrLk",Us.ascii[192]="~",Us.ascii[38]="Up",Us.ascii[40]="Down",Us.ascii[37]="Left",Us.ascii[39]="Right",Us.ascii[45]="Ins",Us.ascii[46]="Del",Us.ascii[33]="PgUp",Us.ascii[34]="PgDn",Us.ascii[35]="End",Us.ascii[36]="Home",Us.ascii[188]=",",Us.ascii[190]=".",Us.ascii[186]=";",Us.ascii[222]="'",Us.ascii[219]="[",Us.ascii[221]="]",Us.ascii[189]="-",Us.ascii[187]="=",Us.ascii[220]="\\",Us.ascii[191]="/",Us.ascii[9]="Tab",Us.ascii[8]="Bksp",Us.ascii[13]="Enter",Us.ascii[19]="Break",Us.ascii[27]="ESC"}}Us.lastKey=0,Us.timeSinceLastKey=0,Us.mouseDown=!1,Us.mouseReleased=!1,Us.mousePressed=!1,Us.mouseOver=!1,Us.mouseWheelVal=0,Us.mouseX=0,Us.mouseY=0,Us.mouseOffsetX=0,Us.mouseOffsetY=0,Us.mouseDragX=0,Us.mouseDragY=0;class Ws{static Init(){Ws.obj=localStorage.Incredibots?JSON.parse(localStorage.Incredibots):Ws.obj,Ws.obj.data.hasOwnProperty("levelCheckmarks")||(Ws.obj.data.levelCheckmarks=0,Ws.flush(Ws.obj)),Ws.obj.data.hasOwnProperty("robotsRated")||(Ws.obj.data.robotsRated=new Array,Ws.flush(Ws.obj)),Ws.obj.data.hasOwnProperty("replaysRated")||(Ws.obj.data.replaysRated=new Array,Ws.flush(Ws.obj)),Ws.obj.data.hasOwnProperty("challengesRated")||(Ws.obj.data.challengesRated=new Array,Ws.flush(Ws.obj)),Ws.obj.data.hasOwnProperty("readTerms2")||(Ws.obj.data.readTerms2=!1),Ws.flush(Ws.obj)}static IsLevelDone(t){return 0!=(Ws.obj.data.levelCheckmarks&1<<t)}static IsAnythingDone(){return 0!=Ws.obj.data.levelCheckmarks}static SetLevelDone(t){Ws.obj.data.levelCheckmarks|=1<<t,Ws.flush(Ws.obj)}static HasRatedRobot(t){return Vs.ObjectInArray(t,Ws.obj.data.robotsRated)}static HasRatedReplay(t){return Vs.ObjectInArray(t,Ws.obj.data.replaysRated)}static HasRatedChallenge(t){return Vs.ObjectInArray(t,Ws.obj.data.challengesRated)}static SetRobotRated(t){Ws.obj.data.robotsRated.push(t),Ws.flush(Ws.obj)}static SetReplayRated(t){Ws.obj.data.replaysRated.push(t),Ws.flush(Ws.obj)}static SetChallengeRated(t){Ws.obj.data.challengesRated.push(t),Ws.flush(Ws.obj)}static HasReadTerms(){return Ws.obj.data.readTerms2}static SetTermsRead(){Ws.obj.data.readTerms2=!0,Ws.flush(Ws.obj)}static flush(t){localStorage.Incredibots=JSON.stringify(t)}}Ws.obj={data:{levelCheckmarks:0,robotsRated:[],replaysRated:[],challengesRated:[],readTerms2:!1}},a("7qcjp");var js=a("4Y6fG"),Xs=a("8TYxR");class Ys extends Xs.Container{constructor(){super(),this.mfpsCount=0,this.mfpsCount2=0,this.avgCount=30,this.avgCount2=30,this.textBox=new js.Text("..."),this.textBox.style.fill="#aa1144",this.textBox2=new js.Text("..."),this.textBox2.width=150,this.textBox2.style.fill="#aa1144",this.textBox2.y=15,this.textBox3=new js.Text("..."),this.textBox3.style.fill="#aa1144",this.textBox3.y=30,this.oldT=window.performance.now(),this.addChild(this.textBox),this.addChild(this.textBox2),this.addChild(this.textBox3)}update(){var t=window.performance.now()-this.oldT;this.mfpsCount+=t,this.avgCount<1&&(this.textBox.text=String(Math.round(1e3/(this.mfpsCount/30))+" fps average"),this.avgCount=30,this.mfpsCount=0),this.avgCount--,this.oldT=window.performance.now(),this.textBox3.text=Math.round(window.performance.memory.usedJSHeapSize/1048576)+" MB used"}updatePhys(t){var e=window.performance.now()-t;this.mfpsCount2+=e,this.avgCount2<1&&(this.textBox2.text=String("Physics step: "+Math.round(this.mfpsCount2/30)+" ms ("+Math.round(1e3/(this.mfpsCount2/30))+" fps)"),this.avgCount2=30,this.mfpsCount2=0),this.avgCount2--}}class Hs extends ps.b2ContactListener{constructor(t){super(),this.cont=t}BeginContact(t){this.cont.ContactAdded(t)}}class zs extends ps.b2ContactFilter{constructor(){super()}ShouldCollide(t,e){const i=t.GetUserData(),s=e.GetUserData();return!!(i&&i.isSandbox||s&&s.isSandbox)||!!(!i||!s||i.collide||i.editable&&!s.editable||-1!=i.isPiston&&-1!=s.isPiston)&&(!!(!i||!s||s.collide||s.editable&&!i.editable||-1!=i.isPiston&&-1!=s.isPiston)&&(!(i&&s&&-1!=i.isPiston&&-1!=s.isPiston&&!i.collide&&(!i.editable||s.editable))&&(!(i&&s&&-1!=i.isPiston&&-1!=s.isPiston&&!s.collide&&(!s.editable||i.editable))&&(!(!i||!s||-1==i.isPiston||-1==s.isPiston||i.isPiston!=s.isPiston||t.GetBody()==e.GetBody()||t.GetFilterData().groupIndex!=e.GetFilterData().groupIndex)||super.ShouldCollide(t,e)))))}}class Js{constructor(t,e){this.frame=t,this.key=e}}a("7qcjp");var qs=a("8lrKM");class Ks{static getLinearGradientTexture([t,e],i=512,s="to top"){const r=i,n=document.createElement("canvas");"to top"===s||"to bottom"===s?(n.width=1,n.height=r):(n.width=r,n.height=1);const o=n.getContext("2d"),a=o.createLinearGradient(0,0,0,r);return"to top"===s||"to right"===s?(a.addColorStop(0,t),a.addColorStop(1,e)):(a.addColorStop(0,e),a.addColorStop(1,t)),o.fillStyle=a,o.fillRect(0,0,1,r),qs.Texture.from(n)}}class Zs{constructor(){this.drawColours=!0,this.m_drawScale=1,this.m_drawXOff=0,this.m_drawYOff=0,this.m_lineThickness=.08,this.m_alpha=1,this.m_fillAlpha=1,this.m_xformScale=1,this.m_drawFlags=0}SetFlags(t){this.m_drawFlags=t}GetFlags(){return this.m_drawFlags}AppendFlags(t){this.m_drawFlags|=t}ClearFlags(t){this.m_drawFlags&=~t}DrawPolygon(t,e,i){if(this.IsPolygonOnScreen(t,e)){this.m_sprite.lineStyle(1,Vs.b2ColorToHex(i),this.m_alpha),this.m_sprite.moveTo(t[0].x*this.m_drawScale-this.m_drawXOff,t[0].y*this.m_drawScale-this.m_drawYOff);for(var s=1;s<e;s++)this.m_sprite.lineTo(t[s].x*this.m_drawScale-this.m_drawXOff,t[s].y*this.m_drawScale-this.m_drawYOff);this.m_sprite.lineTo(t[0].x*this.m_drawScale-this.m_drawXOff,t[0].y*this.m_drawScale-this.m_drawYOff)}}DrawSolidPolygon(t,e,i,s=!1,r=!0){if(this.IsPolygonOnScreen(t,e)){var n=Zs.DarkenColour(i);r?this.m_sprite.lineStyle(this.m_lineThickness*this.m_drawScale,this.drawColours?Vs.b2ColorToHex(s?Zs.DarkenColour(n):n):Vs.b2ColorToHex(i),this.m_alpha):this.m_sprite.lineStyle(0,0,0),this.m_sprite.moveTo(t[0].x*this.m_drawScale-this.m_drawXOff,t[0].y*this.m_drawScale-this.m_drawYOff),this.m_sprite.beginFill(this.drawColours&&s?Vs.b2ColorToHex(Zs.BrightenColour(i)):Vs.b2ColorToHex(i),this.m_fillAlpha*(s?.8:1));for(var o=1;o<e;o++)this.m_sprite.lineTo(t[o].x*this.m_drawScale-this.m_drawXOff,t[o].y*this.m_drawScale-this.m_drawYOff);this.m_sprite.lineTo(t[0].x*this.m_drawScale-this.m_drawXOff,t[0].y*this.m_drawScale-this.m_drawYOff),this.m_sprite.endFill()}}DrawSolidCannon(t,e,i,s=!1,r=!0){if(this.IsPolygonOnScreen(t,e)){var n=Zs.DarkenColour(i);r?this.m_sprite.lineStyle(this.m_lineThickness*this.m_drawScale,this.drawColours?Vs.b2ColorToHex(s?Zs.DarkenColour(n):n):Vs.b2ColorToHex(i),this.m_alpha):this.m_sprite.lineStyle(0,0,0),this.m_sprite.moveTo(t[0].x*this.m_drawScale-this.m_drawXOff,t[0].y*this.m_drawScale-this.m_drawYOff),this.m_sprite.beginFill(Vs.b2ColorToHex(i),this.m_fillAlpha*(s?.8:1)),this.m_sprite.lineTo(t[1].x*this.m_drawScale-this.m_drawXOff,t[1].y*this.m_drawScale-this.m_drawYOff),this.m_sprite.lineTo(t[2].x*this.m_drawScale-this.m_drawXOff,t[2].y*this.m_drawScale-this.m_drawYOff),this.m_sprite.lineTo(t[3].x*this.m_drawScale-this.m_drawXOff,t[3].y*this.m_drawScale-this.m_drawYOff),this.m_sprite.lineTo(t[0].x*this.m_drawScale-this.m_drawXOff,t[0].y*this.m_drawScale-this.m_drawYOff),this.m_sprite.endFill(),this.m_sprite.moveTo(t[0].x*this.m_drawScale-this.m_drawXOff,t[0].y*this.m_drawScale-this.m_drawYOff),this.m_sprite.lineTo(.5*(t[1].x+t[2].x)*this.m_drawScale-this.m_drawXOff,.5*(t[1].y+t[2].y)*this.m_drawScale-this.m_drawYOff),this.m_sprite.lineTo(t[3].x*this.m_drawScale-this.m_drawXOff,t[3].y*this.m_drawScale-this.m_drawYOff)}}DrawCircle(t,e,i){this.IsCircleOnScreen(t,e)&&(this.m_sprite.lineStyle(1,Vs.b2ColorToHex(i),this.m_alpha),this.m_sprite.drawCircle(t.x*this.m_drawScale-this.m_drawXOff,t.y*this.m_drawScale-this.m_drawYOff,e*this.m_drawScale))}DrawSolidCircle(t,e,i,s,r=!1,n=!0,o=!1){if(this.IsCircleOnScreen(t,e)){var a=Zs.DarkenColour(s);if(n?this.m_sprite.lineStyle(this.m_lineThickness*this.m_drawScale,this.drawColours?Vs.b2ColorToHex(r?Zs.DarkenColour(a):a):Vs.b2ColorToHex(s),this.m_alpha):this.m_sprite.lineStyle(0,0,0),this.m_sprite.moveTo(0,0),this.m_sprite.beginFill(this.drawColours?Vs.b2ColorToHex(r?Zs.BrightenColour(s):s):Vs.b2ColorToHex(s),this.m_fillAlpha*(r?.8:1)),this.m_sprite.drawCircle(t.x*this.m_drawScale-this.m_drawXOff,t.y*this.m_drawScale-this.m_drawYOff,e*this.m_drawScale),this.m_sprite.endFill(),n&&!o)for(var h=0;h<16;h++){var l=Math.atan2(i.s,i.c)+2*h*Math.PI/16;this.m_sprite.moveTo((t.x+Math.cos(l)*(.9*e))*this.m_drawScale-this.m_drawXOff,(t.y+Math.sin(l)*(.9*e))*this.m_drawScale-this.m_drawYOff),this.m_sprite.lineTo((t.x+Math.cos(l)*e)*this.m_drawScale-this.m_drawXOff,(t.y+Math.sin(l)*e)*this.m_drawScale-this.m_drawYOff)}}}DrawSegment(t,e,i){this.m_sprite.lineStyle(1,Vs.b2ColorToHex(i),this.m_alpha),this.m_sprite.moveTo(t.x*this.m_drawScale-this.m_drawXOff,t.y*this.m_drawScale-this.m_drawYOff),this.m_sprite.lineTo(e.x*this.m_drawScale-this.m_drawXOff,e.y*this.m_drawScale-this.m_drawYOff)}DrawSolidSegment(t,e,i){this.m_sprite.lineStyle(this.m_lineThickness*this.m_drawScale,Vs.b2ColorToHex(i),this.m_alpha),this.m_sprite.moveTo(t.x*this.m_drawScale-this.m_drawXOff,t.y*this.m_drawScale-this.m_drawYOff),this.m_sprite.lineTo(e.x*this.m_drawScale-this.m_drawXOff,e.y*this.m_drawScale-this.m_drawYOff)}IsPolygonOnScreen(t,e){var i,s;i=t[0].x<-5,s=t[0].y<-5;for(var r=0;r<e;r++){var n=t[r].x*this.m_drawScale-this.m_drawXOff,o=t[r].y*this.m_drawScale-this.m_drawYOff;if((n>=-5||!i)&&(n<805||i)&&(o>=-5||!s)&&(o<605||s))return!0}return!1}IsCircleOnScreen(t,e){var i=new ps.b2Vec2,s=e*this.m_drawScale;return i.x=t.x*this.m_drawScale-this.m_drawXOff,i.y=t.y*this.m_drawScale-this.m_drawYOff,i.x+s>=-5&&i.x-s<805&&i.y+s>=-5&&i.y-s<605}static BrightenColour(t){var e,i,s,r=Zs.GetR(t),n=Zs.GetG(t),o=Zs.GetB(t),a=Math.max(r,n,o),h=100*a/255+20;return 0==r&&(r=1),0==n&&(n=1),0==o&&(o=1),0==a&&(a=1),e=255*r/a*h/100,i=255*n/a*h/100,s=255*o/a*h/100,e=Math.min(e,255),i=Math.min(i,255),s=Math.min(s,255),new ps.b2Color(e/255,i/255,s/255)}static DarkenColour(t){var e,i,s,r=Zs.GetR(t),n=Zs.GetG(t),o=Zs.GetB(t),a=Math.max(r,n,o),h=100*a/255-40;return e=255*r/a*h/100,i=255*n/a*h/100,s=255*o/a*h/100,e=Math.max(e,0),i=Math.max(i,0),s=Math.max(s,0),new ps.b2Color(e/255,i/255,s/255)}static GetR(t){return(16711680&Vs.b2ColorToHex(t))>>16}static GetG(t){return(65280&Vs.b2ColorToHex(t))>>8}static GetB(t){return 255&Vs.b2ColorToHex(t)}}Zs.e_shapeBit=1,Zs.e_jointBit=2,Zs.e_coreShapeBit=4,Zs.e_aabbBit=8,Zs.e_obbBit=16,Zs.e_pairBit=32,Zs.e_centerOfMassBit=64,a("7qcjp");var Qs=a("f6Kro"),$s=(Xs=a("8TYxR"),a("kpTES"));class tr{constructor(t,e,i=0,s=0,r=0){this.sClouds=new Array,this.cloudPositions=new Array,this.cloudVelocities=new Array,this.starRadii=new Array,this.cont=t,this.skyType=e,this.sky=new Xs.Container;const n=new Qs.Sprite(Ks.getLinearGradientTexture(e==La.BACKGROUND_SOLID_COLOUR?[Vs.HexColourString(i,s,r),Vs.HexColourString(i,s,r)]:[tr.topColours[e],tr.bottomColours[e]]));if(n.position.set(0,0),n.width=800,n.height=600,this.sky.addChild(n),this.cont.addChild(this.sky),this.lastCloudIndex=this.cont.getChildIndex(this.sky),this.numClouds=0,0==e){this.numClouds=Math.min((this.cont.GetMaxX()-this.cont.GetMinX())/10,15);for(var o=0;o<this.numClouds;o++){var a=new Qs.Sprite(sa.cCloud0),h=Math.floor(10*Math.random());0==h&&(a.texture=sa.cCloud0),1==h&&(a.texture=sa.cCloud1),2==h&&(a.texture=sa.cCloud2),3==h&&(a.texture=sa.cCloud3),4==h&&(a.texture=sa.cCloud4),5==h&&(a.texture=sa.cCloud5),6==h&&(a.texture=sa.cCloud6),7==h&&(a.texture=sa.cCloud7),8==h&&(a.texture=sa.cCloud8),h>=9&&(a.texture=sa.cCloud9),this.cont.addChild(a),this.lastCloudIndex=this.cont.getChildIndex(a),this.sClouds.push(a),this.cloudPositions.push(new ps.b2Vec2(Vs.RangedRandom(this.cont.GetMinX()-5,this.cont.GetMaxX()+5),Vs.RangedRandom(-15,6))),this.cloudVelocities.push(3*Math.random()/120+1/120)}}else if(1==e){var l=this.cont.GetMaxX()-this.cont.GetMinX()+10;this.cont instanceof Xa&&(l*=1.5),this.numClouds=10*(this.cont.GetMaxX()-this.cont.GetMinX());var c=new $s.Graphics;for(c.beginFill(11454938),c.drawCircle(0,0,1),c.drawCircle(90*l,0,1),c.drawCircle(0,90*l,1),c.drawCircle(90*l,90*l,1),c.endFill(),o=0;o<this.numClouds;o++)this.cloudPositions.push(Vs.Vector(Vs.RangedRandom(0,90*l),Vs.RangedRandom(0,90*l))),this.cloudVelocities.push(0),this.starRadii.push(this.cont instanceof Xa?Vs.RangedRandom(3,8):Vs.RangedRandom(2,6)),c.beginFill(11454938),c.drawCircle(this.cloudPositions[o].x,this.cloudPositions[o].y,this.starRadii[o]),c.endFill();this.cont.addChild(c),this.lastCloudIndex=this.cont.getChildIndex(c),this.sClouds.push(c)}this.Update(!0,!0)}Update(t,e){if(t)if(0==this.skyType)for(var i=0;i<this.numClouds;i++)this.sClouds[i].width=this.sClouds[i].texture.width*this.cont.GetPhysScale()/90,this.sClouds[i].height=this.sClouds[i].texture.height*this.cont.GetPhysScale()/90;else 1==this.skyType&&(this.sClouds[0].width=this.cont.World2ScreenX(this.cont.GetMaxX()+5)-this.cont.World2ScreenX(this.cont.GetMinX()-5),this.sClouds[0].height=this.sClouds[0].width);if(0==this.skyType)for(i=0;i<this.numClouds;i++)this.cont.IsPaused()||(this.cloudPositions[i].x-=this.cloudVelocities[i],this.cloudPositions[i].x<this.cont.GetMinX()-5&&(this.cloudPositions[i].x=this.cont.GetMaxX()+5)),(!this.cont.IsPaused()||e||t)&&(this.sClouds[i].x=this.cont.World2ScreenX(this.cloudPositions[i].x)-this.sClouds[i].width/2,this.sClouds[i].y=this.cont.World2ScreenY(this.cloudPositions[i].y)-this.sClouds[i].height/2);else 1==this.skyType&&(!this.cont.IsPaused()||e||t)&&(this.sClouds[0].x=this.cont.World2ScreenX(this.cont.GetMinX()-5),this.sClouds[0].y=this.cont.World2ScreenY(this.cont.GetMinY()-5))}Delete(){if(this.cont.removeChild(this.sky),0==this.skyType)for(var t=0;t<this.numClouds;t++)this.cont.removeChild(this.sClouds[t]);else 1==this.skyType&&this.cont.removeChild(this.sClouds[0])}}tr.topColours=["#43B0F7","#171717","#292935","#22243C","#BE4A3C","#4790EC"],tr.bottomColours=["#8ACEF7","#353738","#48475F","#40457E","#EB7A76","#EC8D66"],a("7qcjp");qs=a("8lrKM");var er=a("hzsgD"),ir=a("k3j5h");a("5pLOZ");var sr=a("bqYnE"),rr=(qs=a("8lrKM"),function(){function t(t,e){this._output=e,this._input=t}return Object.defineProperty(t.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach((function(t){t&&t.disconnect()})),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var i=null;t.forEach((function(t){null===i?e._input.connect(t.destination):i.connect(t.destination),i=t})),i.connect(this._output)}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},t}()),nr=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){this.destination=t,this.source=e||t},t.prototype.connect=function(t){this.source.connect(t)},t.prototype.disconnect=function(){this.source.disconnect()},t.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},t}(),or=function(t,e){return(or=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function ar(t,e){function i(){this.constructor=t}or(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var hr,lr=function(){return(lr=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function cr(){return hr}var dr,ur,pr,mr,fr=function(){function t(){}return t.setParamValue=function(t,e){if(t.setValueAtTime){var i=cr().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e},t}(),_r=0,gr=function(t){function e(e){var i=t.call(this)||this;return i.id=_r++,i._media=null,i._paused=!1,i._muted=!1,i._elapsed=0,i.init(e),i}return ar(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},e.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh(),this._update(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){if(this._source){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),s=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);fr.setParamValue(this._gain.gain,r*s*i),fr.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed)}},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",i))},e.prototype.play=function(t){var e=t.start,i=t.end,s=t.speed,r=t.loop,n=t.volume,o=t.muted;this._paused=!1;var a=this._media.nodes.cloneBufferSource(),h=a.source,l=a.gain;this._source=h,this._gain=l,this._speed=s,this._volume=n,this._loop=!!r,this._muted=o,this.refresh();var c=this._source.buffer.duration;this._duration=c,this._end=i,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=i,this._source.loopStart=e,this._source.start(0,e)):i?this._source.start(0,e,i-e):this._source.start(0,e),this.emit("start"),this._update(!0),this._enabled=!0},e.prototype._toSec=function(t){return t>10&&(t/=1e3),t||0},Object.defineProperty(e.prototype,"_enabled",{set:function(t){ir.Ticker.shared.remove(this._updateListener,this),t&&ir.Ticker.shared.add(this._updateListener,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},e.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},e.prototype._now=function(){return this._media.context.audioContext.currentTime},e.prototype._updateListener=function(){this._update()},e.prototype._update=function(t){if(void 0===t&&(t=!1),this._source){var e=this._now(),i=e-this._lastUpdate;if(i>0||t){var s=this._source.playbackRate.value;this._elapsed+=i*s,this._lastUpdate=e;var r=this._duration,n=void 0;if(this._source.loopStart){var o=this._source.loopEnd-this._source.loopStart;n=(this._source.loopStart+this._elapsed%o)/r}else n=this._elapsed%r/r;this._progress=n,this.emit("progress",this._progress,r)}}},e.prototype.init=function(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)},e.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(0),this._source.disconnect(),this._source=null)},e.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.disconnect()),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},e}(s(sr)),br=function(t){function e(e){var i=this,s=e.audioContext,r=s.createBufferSource(),n=s.createGain(),o=s.createAnalyser();return r.connect(o),o.connect(n),n.connect(e.destination),(i=t.call(this,o,n)||this).context=e,i.bufferSource=r,i.gain=n,i.analyser=o,i}return ar(e,t),Object.defineProperty(e.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(e.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},e.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,fr.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;var i=this.context.audioContext.createGain();return e.connect(i),i.connect(this.destination),{source:e,gain:i}},Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!0,configurable:!0}),e.BUFFER_SIZE=0,e}(rr),yr=function(){function t(){}return t.prototype.init=function(t){this.parent=t,this._nodes=new br(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},t.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null,this._source=null,this.source=null},t.prototype.create=function(){return new gr(this)},Object.defineProperty(t.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),t.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},t.prototype._loadUrl=function(t){var e=this,i=new XMLHttpRequest,s=this.parent.url;i.open("GET",s,!0),i.responseType="arraybuffer",i.onload=function(){e.source=i.response,e._decode(i.response,t)},i.send()},t.prototype._decode=function(t,e){var i=this;this.parent.context.decode(t,(function(t,s){if(t)e&&e(t);else{i.parent.isLoaded=!0,i.buffer=s;var r=i.parent.autoPlayStart();e&&e(null,i.parent,r)}}))},t}(),wr=function(t){function e(){var i=this,r=window,n=new e.AudioContext,o=n.createDynamicsCompressor(),a=n.createAnalyser();return a.connect(o),o.connect(n.destination),(i=t.call(this,a,o)||this)._ctx=n,i._offlineCtx=new e.OfflineAudioContext(1,2,r.OfflineAudioContext?n.sampleRate:44100),i._unlocked=!1,i.compressor=o,i.analyser=a,i.events=new(s(sr)),i.volume=1,i.speed=1,i.muted=!1,i.paused=!1,"running"!==n.state&&(i._unlock(),i._unlock=i._unlock.bind(i),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchstart",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i}return ar(e,t),e.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},e.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()},Object.defineProperty(e,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this._ctx;void 0!==e.close&&e.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){this.events.emit("refresh")},e.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},e.prototype.decode=function(t,e){this._offlineCtx.decodeAudioData(t,(function(t){e(null,t)}),(function(t){e(new Error(t.message||"Unable to decode file"))}))},e}(rr),vr={WebAudioMedia:yr,WebAudioInstance:gr,WebAudioNodes:br,WebAudioContext:wr,WebAudioUtils:fr},xr={Filter:nr,EqualizerFilter:function(t){function e(i,s,r,n,o,a,h,l,c,d){void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===c&&(c=0),void 0===d&&(d=0);var u=this;if(!cr().useLegacy){var p=[{f:e.F32,type:"lowshelf",gain:i},{f:e.F64,type:"peaking",gain:s},{f:e.F125,type:"peaking",gain:r},{f:e.F250,type:"peaking",gain:n},{f:e.F500,type:"peaking",gain:o},{f:e.F1K,type:"peaking",gain:a},{f:e.F2K,type:"peaking",gain:h},{f:e.F4K,type:"peaking",gain:l},{f:e.F8K,type:"peaking",gain:c},{f:e.F16K,type:"highshelf",gain:d}].map((function(t){var e=cr().context.audioContext.createBiquadFilter();return e.type=t.type,fr.setParamValue(e.Q,1),e.frequency.value=t.f,fr.setParamValue(e.gain,t.gain),e}));(u=t.call(this,p[0],p[p.length-1])||this).bands=p,u.bandsMap={};for(var m=0;m<u.bands.length;m++){var f=u.bands[m];m>0&&u.bands[m-1].connect(f),u.bandsMap[f.frequency.value]=f}return u}u=t.call(this,null)||this}return ar(e,t),e.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw new Error("No band found for frequency "+t);fr.setParamValue(this.bandsMap[t].gain,e)},e.prototype.getGain=function(t){if(!this.bandsMap[t])throw new Error("No band found for frequency "+t);return this.bandsMap[t].gain.value},Object.defineProperty(e.prototype,"f32",{get:function(){return this.getGain(e.F32)},set:function(t){this.setGain(e.F32,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this.getGain(e.F64)},set:function(t){this.setGain(e.F64,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f125",{get:function(){return this.getGain(e.F125)},set:function(t){this.setGain(e.F125,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f250",{get:function(){return this.getGain(e.F250)},set:function(t){this.setGain(e.F250,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f500",{get:function(){return this.getGain(e.F500)},set:function(t){this.setGain(e.F500,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f1k",{get:function(){return this.getGain(e.F1K)},set:function(t){this.setGain(e.F1K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f2k",{get:function(){return this.getGain(e.F2K)},set:function(t){this.setGain(e.F2K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f4k",{get:function(){return this.getGain(e.F4K)},set:function(t){this.setGain(e.F4K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f8k",{get:function(){return this.getGain(e.F8K)},set:function(t){this.setGain(e.F8K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f16k",{get:function(){return this.getGain(e.F16K)},set:function(t){this.setGain(e.F16K,t)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.bands.forEach((function(t){fr.setParamValue(t.gain,0)}))},e.prototype.destroy=function(){this.bands.forEach((function(t){t.disconnect()})),this.bands=null,this.bandsMap=null},e.F32=32,e.F64=64,e.F125=125,e.F250=250,e.F500=500,e.F1K=1e3,e.F2K=2e3,e.F4K=4e3,e.F8K=8e3,e.F16K=16e3,e}(nr),DistortionFilter:function(t){function e(e){void 0===e&&(e=0);var i=this;if(!cr().useLegacy){var s=cr().context.audioContext.createWaveShaper();return(i=t.call(this,s)||this)._distortion=s,i.amount=e,i}i=t.call(this,null)||this}return ar(e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(t){t*=1e3,this._amount=t;for(var e,i=new Float32Array(44100),s=Math.PI/180,r=0;r<44100;++r)e=2*r/44100-1,i[r]=(3+t)*e*20*s/(Math.PI+t*Math.abs(e));this._distortion.curve=i,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._distortion=null,t.prototype.destroy.call(this)},e}(nr),StereoFilter:function(t){function e(e){void 0===e&&(e=0);var i=this;if(!cr().useLegacy){var s,r,n,o=cr().context.audioContext;return o.createStereoPanner?n=s=o.createStereoPanner():((r=o.createPanner()).panningModel="equalpower",n=r),(i=t.call(this,n)||this)._stereo=s,i._panner=r,i.pan=e,i}i=t.call(this,null)||this}return ar(e,t),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?fr.setParamValue(this._stereo.pan,t):this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._stereo=null,this._panner=null},e}(nr),ReverbFilter:function(t){function e(e,i,s){void 0===e&&(e=3),void 0===i&&(i=2),void 0===s&&(s=!1);var r=this;if(!cr().useLegacy)return(r=t.call(this,null)||this)._seconds=r._clamp(e,1,50),r._decay=r._clamp(i,0,100),r._reverse=s,r._rebuild(),r;r=t.call(this,null)||this}return ar(e,t),e.prototype._clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},Object.defineProperty(e.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){for(var t,e=cr().context.audioContext,i=e.sampleRate,s=i*this._seconds,r=e.createBuffer(2,s,i),n=r.getChannelData(0),o=r.getChannelData(1),a=0;a<s;a++)t=this._reverse?s-a:a,n[a]=(2*Math.random()-1)*Math.pow(1-t/s,this._decay),o[a]=(2*Math.random()-1)*Math.pow(1-t/s,this._decay);var h=cr().context.audioContext.createConvolver();h.buffer=r,this.init(h)},e}(nr),MonoFilter:function(t){function e(){var e=this;if(!cr().useLegacy){var i=cr().context.audioContext,s=i.createChannelSplitter(),r=i.createChannelMerger();return r.connect(s),(e=t.call(this,r,s)||this)._merger=r,e}e=t.call(this,null)||this}return ar(e,t),e.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,t.prototype.destroy.call(this)},e}(nr),TelephoneFilter:function(t){function e(){if(!cr().useLegacy){var e=cr().context.audioContext,i=e.createBiquadFilter(),s=e.createBiquadFilter(),r=e.createBiquadFilter(),n=e.createBiquadFilter();return i.type="lowpass",fr.setParamValue(i.frequency,2e3),s.type="lowpass",fr.setParamValue(s.frequency,2e3),r.type="highpass",fr.setParamValue(r.frequency,500),n.type="highpass",fr.setParamValue(n.frequency,500),i.connect(s),s.connect(r),r.connect(n),t.call(this,i,n)||this}t.call(this,null)}return ar(e,t),e}(nr)},Sr=0,Ar=function(t){function e(e){var i=t.call(this)||this;return i.id=Sr++,i.init(e),i}return ar(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},Object.defineProperty(e.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype._onPlay=function(){this._playing=!0},e.prototype._onPause=function(){this._playing=!1},e.prototype.init=function(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t},e.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},e.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),s=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);this._source.volume=r*i*s,this._source.playbackRate=this._speed*t.speed*e.speed},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",i))},e.prototype.play=function(t){var i=this,s=t.start,r=t.end,n=t.speed,o=t.loop,a=t.volume,h=t.muted;this._speed=n,this._volume=a,this._loop=!!o,this._muted=h,this.refresh(),this.loop&&null!==r&&(this.loop=!1),this._start=s,this._end=r||this._duration,this._start=Math.max(0,this._start-e.PADDING),this._end=Math.min(this._end+e.PADDING,this._duration),this._source.onloadedmetadata=function(){i._source&&(i._source.currentTime=s,i._source.onloadedmetadata=null,i.emit("progress",s,i._duration),ir.Ticker.shared.add(i._onUpdate,i))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},e.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},e.prototype._onComplete=function(){ir.Ticker.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},e.prototype.destroy=function(){ir.Ticker.shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},e.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},e.PADDING=.1,e}(s(sr)),Pr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ar(e,t),e.prototype.init=function(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)},e.prototype.create=function(){return new Ar(this)},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._source.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),e.prototype.load=function(t){var e=this._source,i=this.parent;if(4!==e.readyState){if(!i.url)return t(new Error("sound.url or sound.source must be set"));e.src=i.url;var s=function(){e.removeEventListener("canplaythrough",r),e.removeEventListener("load",r),e.removeEventListener("abort",n),e.removeEventListener("error",o)},r=function(){s(),i.isLoaded=!0;var e=i.autoPlayStart();t&&t(null,i,e)},n=function(){s(),t&&t(new Error("Sound loading has been aborted"))},o=function(){s();var i="Failed to load audio element (code: "+e.error.code+")";t&&t(new Error(i))};e.addEventListener("canplaythrough",r,!1),e.addEventListener("load",r,!1),e.addEventListener("abort",n,!1),e.addEventListener("error",o,!1),e.load()}else{i.isLoaded=!0;var a=i.autoPlayStart();t&&setTimeout((function(){t(null,i,a)}),0)}},e}(s(sr)),Cr=function(t){function e(){var e=t.call(this)||this;return e.speed=1,e.volume=1,e.muted=!1,e.paused=!1,e}return ar(e,t),e.prototype.refresh=function(){this.emit("refresh")},e.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioContext",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},e.prototype.destroy=function(){this.removeAllListeners()},e}(s(sr)),Tr={HTMLAudioMedia:Pr,HTMLAudioInstance:Ar,HTMLAudioContext:Cr},Er=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid"],Rr=(dr={m4a:"mp4",oga:"ogg"},ur=document.createElement("audio"),pr={},mr=/^no$/,Er.forEach((function(t){var e=dr[t]||t,i=ur.canPlayType("audio/"+t).replace(mr,""),s=ur.canPlayType("audio/"+e).replace(mr,"");pr[t]=!!i||!!s})),Object.freeze(pr)),Br=/\.(\{([^\}]+)\})(\?.*)?$/;function Dr(t){var e=Br,i="string"==typeof t?t:t.url;if(e.test(i)){for(var s=e.exec(i),r=s[2].split(","),n=r[r.length-1],o=0,a=r.length;o<a;o++){var h=r[o];if(Rr[h]){n=h;break}}var l=i.replace(s[1],n);return"string"!=typeof t&&(t.extension=n,t.url=l),l}return i}var Ir,Mr=function(){function t(){}return t.add=function(){t.legacy=cr().useLegacy},Object.defineProperty(t,"legacy",{set:function(t){var e=Er;t?e.forEach((function(t){er.LoaderResource.setExtensionXhrType(t,er.LoaderResource.XHR_RESPONSE_TYPE.DEFAULT),er.LoaderResource.setExtensionLoadType(t,er.LoaderResource.LOAD_TYPE.AUDIO)})):e.forEach((function(t){er.LoaderResource.setExtensionXhrType(t,er.LoaderResource.XHR_RESPONSE_TYPE.BUFFER),er.LoaderResource.setExtensionLoadType(t,er.LoaderResource.LOAD_TYPE.XHR)}))},enumerable:!0,configurable:!0}),t.pre=function(t,e){Dr(t),e()},t.use=function(t,e){t.data&&Er.indexOf(t.extension)>-1?t.sound=cr().add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},t}(),Or=function(){function t(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}return t.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},t.prototype.destroy=function(){this.parent=null},t}(),Lr=function(){function t(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);var i=e.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}return t.from=function(e){var i={};return"string"==typeof e?i.url=e:e instanceof ArrayBuffer||e instanceof HTMLAudioElement?i.source=e:i=e,(i=lr({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},i)).url&&(i.url=Dr(i.url)),Object.freeze(i),new t(cr().useLegacy?new Pr:new yr,i)},Object.defineProperty(t.prototype,"context",{get:function(){return cr().context},enumerable:!0,configurable:!0}),t.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},t.prototype.resume=function(){return this.isPlaying=this._instances.length>0,this.paused=!1,this},Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!0,configurable:!0}),t.prototype.addSprites=function(t,e){if("object"==typeof t){var i={};for(var s in t)i[s]=this.addSprites(s,t[s]);return i}if("string"==typeof t){var r=new Or(this,e);return this._sprites[t]=r,r}},t.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},t.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var i in this._sprites)this.removeSprites(i);return this},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!0,configurable:!0}),t.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this},t.prototype.play=function(t,e){var i,s=this;if("string"==typeof t?i={sprite:n=t,loop:this.loop,complete:e}:"function"==typeof t?(i={}).complete=t:i=t,(i=lr({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},i||{})).sprite){var r=i.sprite,n=this._sprites[r];i.start=n.start,i.end=n.end,i.speed=n.speed||1,i.loop=n.loop||i.loop,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return new Promise((function(t,e){s.autoPlay=!0,s._autoPlayOptions=i,s._preload((function(s,r,n){s?e(s):(i.loaded&&i.loaded(s,r,n),t(n))}))}));this.singleInstance&&this._removeInstances();var o=this._createInstance();return this._instances.push(o),this.isPlaying=!0,o.once("end",(function(){i.complete&&i.complete(s),s._onComplete(o)})),o.once("stop",(function(){s._onComplete(o)})),o.play(i),o},t.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},t.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),t.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(t.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.media.duration},enumerable:!0,configurable:!0}),t.prototype.autoPlayStart=function(){var t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t},t.prototype._removeInstances=function(){for(var t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0},t.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)},t.prototype._createInstance=function(){if(t._pool.length>0){var e=t._pool.pop();return e.init(this.media),e}return this.media.create()},t.prototype._poolInstance=function(e){e.destroy(),t._pool.indexOf(e)<0&&t._pool.push(e)},t._pool=[],t}(),Gr=function(){function t(){this.init()}return t.prototype.init=function(){return this.supported&&(this._webAudioContext=new wr),this._htmlAudioContext=new Cr,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!==wr.AudioContext},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if("object"==typeof t){var i={};for(var s in t){var r=this._getOptions(t[s],e);i[s]=this.add(s,r)}return i}if("string"==typeof t){if(e instanceof Lr)return this._sounds[t]=e,e;r=this._getOptions(e);var n=Lr.from(r);return this._sounds[t]=n,n}},t.prototype._getOptions=function(t,e){var i;return i="string"==typeof t?{url:t}:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?{source:t}:t,lr({},i,e||{})},Object.defineProperty(t.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){Mr.legacy=t,this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(t.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!0,configurable:!0}),t.prototype.togglePauseAll=function(){return this._context.togglePause()},t.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},t.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},t.prototype.toggleMuteAll=function(){return this._context.toggleMute()},t.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},t.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},t.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},t.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},t.prototype.exists=function(t,e){return void 0===e&&(e=!1),!!this._sounds[t]},t.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},t.prototype.play=function(t,e){return this.find(t).play(e)},t.prototype.stop=function(t){return this.find(t).stop()},t.prototype.pause=function(t){return this.find(t).pause()},t.prototype.resume=function(t){return this.find(t).resume()},t.prototype.volume=function(t,e){var i=this.find(t);return void 0!==e&&(i.volume=e),i.volume},t.prototype.speed=function(t,e){var i=this.find(t);return void 0!==e&&(i.speed=e),i.speed},t.prototype.duration=function(t){return this.find(t).duration},t.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},t}(),Fr=0,kr={get PLAY_ID(){return Fr},playOnce:function(t,e){var i="alias"+Fr++;return cr().add(i,{url:t,preload:!0,autoPlay:!0,loaded:function(t){t&&(cr().remove(i),e&&e(t))},complete:function(){cr().remove(i),e&&e(null)}}),i},render:function(t,e){var i=document.createElement("canvas");e=lr({width:512,height:128,fill:"black"},e||{}),i.width=e.width,i.height=e.height;var s=qs.BaseTexture.from(i);if(!(t.media instanceof yr))return s;var r=t.media,n=i.getContext("2d");n.fillStyle=e.fill;for(var o=r.buffer.getChannelData(0),a=Math.ceil(o.length/e.width),h=e.height/2,l=0;l<e.width;l++){for(var c=1,d=-1,u=0;u<a;u++){var p=o[l*a+u];p<c&&(c=p),p>d&&(d=p)}n.fillRect(l,(1+c)*h,1,Math.max(1,(d-c)*h))}return s},resolveUrl:Dr,sineTone:function(t,e){void 0===t&&(t=200),void 0===e&&(e=1);var i=Lr.from({singleInstance:!0});if(!(i.media instanceof yr))return i;for(var s=i.media,r=i.context.audioContext.createBuffer(1,48e3*e,48e3),n=r.getChannelData(0),o=0;o<n.length;o++){var a=t*(o/r.sampleRate)*Math.PI;n[o]=2*Math.sin(a)}return s.buffer=r,i.isLoaded=!0,i},extensions:Er,supported:Rr},Nr=(Ir=new Gr,hr=Ir,Ir);er.Loader.registerPlugin(Mr),Object.defineProperties(Nr,{Filterable:{get:function(){return rr}},filters:{get:function(){return xr}},htmlaudio:{get:function(){return Tr}},Sound:{get:function(){return Lr}},SoundLibrary:{get:function(){return Gr}},SoundSprite:{get:function(){return Or}},utils:{get:function(){return kr}},webaudio:{get:function(){return vr}},sound:{get:function(){return Nr}}});var Vr,Ur=Nr;Vr=new URL(a("fyf1v").resolve("BolLZ"),import.meta.url).toString();var Wr;Wr=new URL(a("fyf1v").resolve("8i9w5"),import.meta.url).toString();var jr;jr=new URL(a("fyf1v").resolve("faeoS"),import.meta.url).toString();var Xr;Xr=new URL(a("fyf1v").resolve("3E4Tu"),import.meta.url).toString();var Yr;Yr=new URL(a("fyf1v").resolve("1wGsW"),import.meta.url).toString();var Hr;Hr=new URL(a("fyf1v").resolve("7W7Hn"),import.meta.url).toString();var zr;zr=new URL(a("fyf1v").resolve("46jrC"),import.meta.url).toString();var Jr;Jr=new URL(a("fyf1v").resolve("kfnQD"),import.meta.url).toString();var qr;qr=new URL(a("fyf1v").resolve("5LyFZ"),import.meta.url).toString();var Kr;Kr=new URL(a("fyf1v").resolve("9ogY7"),import.meta.url).toString();var Zr;Zr=new URL(a("fyf1v").resolve("iMjMP"),import.meta.url).toString();var Qr;Qr=new URL(a("fyf1v").resolve("8CiaQ"),import.meta.url).toString();var $r;$r=new URL(a("fyf1v").resolve("1x8XD"),import.meta.url).toString();var tn;tn=new URL(a("fyf1v").resolve("jjs3O"),import.meta.url).toString();var en;en=new URL(a("fyf1v").resolve("dgwWW"),import.meta.url).toString();var sn;sn=new URL(a("fyf1v").resolve("l8S3n"),import.meta.url).toString();var rn;rn=new URL(a("fyf1v").resolve("lKD9J"),import.meta.url).toString();var nn;nn=new URL(a("fyf1v").resolve("kjyvk"),import.meta.url).toString();var on;on=new URL(a("fyf1v").resolve("eNZQ7"),import.meta.url).toString();var an;an=new URL(a("fyf1v").resolve("bBlAE"),import.meta.url).toString();var hn;hn=new URL(a("fyf1v").resolve("3Omtd"),import.meta.url).toString();var ln;ln=new URL(a("fyf1v").resolve("gaanQ"),import.meta.url).toString();var cn;cn=new URL(a("fyf1v").resolve("5Erx8"),import.meta.url).toString();var dn;dn=new URL(a("fyf1v").resolve("aTIhA"),import.meta.url).toString();var un;un=new URL(a("fyf1v").resolve("7ZUPD"),import.meta.url).toString();var pn;pn=new URL(a("fyf1v").resolve("3uQm8"),import.meta.url).toString();var mn;mn=new URL(a("fyf1v").resolve("lR76d"),import.meta.url).toString();var fn;fn=new URL(a("fyf1v").resolve("8o9cX"),import.meta.url).toString();var _n;_n=new URL(a("fyf1v").resolve("f4TIO"),import.meta.url).toString();var gn;gn=new URL(a("fyf1v").resolve("bGMYI"),import.meta.url).toString();var bn;bn=new URL(a("fyf1v").resolve("1d9nZ"),import.meta.url).toString();var yn;yn=new URL(a("fyf1v").resolve("cPnrf"),import.meta.url).toString();var wn;wn=new URL(a("fyf1v").resolve("iG0Bx"),import.meta.url).toString();var vn;vn=new URL(a("fyf1v").resolve("iQIsd"),import.meta.url).toString();var xn;xn=new URL(a("fyf1v").resolve("5GQhb"),import.meta.url).toString();var Sn;Sn=new URL(a("fyf1v").resolve("1jYQG"),import.meta.url).toString();var An;An=new URL(a("fyf1v").resolve("kVHpm"),import.meta.url).toString();var Pn;Pn=new URL(a("fyf1v").resolve("3TvBj"),import.meta.url).toString();var Cn;Cn=new URL(a("fyf1v").resolve("e3n17"),import.meta.url).toString();var Tn;Tn=new URL(a("fyf1v").resolve("eabsy"),import.meta.url).toString();var En;En=new URL(a("fyf1v").resolve("2coDs"),import.meta.url).toString();var Rn;Rn=new URL(a("fyf1v").resolve("i0Q83"),import.meta.url).toString();var Bn;Bn=new URL(a("fyf1v").resolve("7A0lF"),import.meta.url).toString();var Dn;Dn=new URL(a("fyf1v").resolve("jmWJG"),import.meta.url).toString();var In;In=new URL(a("fyf1v").resolve("6m2Ir"),import.meta.url).toString();var Mn;Mn=new URL(a("fyf1v").resolve("hHvwR"),import.meta.url).toString();var On;On=new URL(a("fyf1v").resolve("eTKns"),import.meta.url).toString();var Ln;Ln=new URL(a("fyf1v").resolve("lUmCX"),import.meta.url).toString();var Gn;Gn=new URL(a("fyf1v").resolve("lC0IJ"),import.meta.url).toString();var Fn;Fn=new URL(a("fyf1v").resolve("fyF78"),import.meta.url).toString();var kn;kn=new URL(a("fyf1v").resolve("2QlGh"),import.meta.url).toString();var Nn;Nn=new URL(a("fyf1v").resolve("4wduP"),import.meta.url).toString();var Vn;Vn=new URL(a("fyf1v").resolve("8wmZY"),import.meta.url).toString();var Un;Un=new URL(a("fyf1v").resolve("1yx4D"),import.meta.url).toString();var Wn;Wn=new URL(a("fyf1v").resolve("cbHP4"),import.meta.url).toString();var jn;jn=new URL(a("fyf1v").resolve("1DFxY"),import.meta.url).toString();var Xn;Xn=new URL(a("fyf1v").resolve("QDCHH"),import.meta.url).toString();var Yn;Yn=new URL(a("fyf1v").resolve("iYbx8"),import.meta.url).toString();var Hn;Hn=new URL(a("fyf1v").resolve("dQq4H"),import.meta.url).toString();var zn;zn=new URL(a("fyf1v").resolve("664Hz"),import.meta.url).toString();var Jn;Jn=new URL(a("fyf1v").resolve("eTxPh"),import.meta.url).toString();var qn;qn=new URL(a("fyf1v").resolve("jf38N"),import.meta.url).toString();var Kn;Kn=new URL(a("fyf1v").resolve("hvYKr"),import.meta.url).toString();var Zn;Zn=new URL(a("fyf1v").resolve("jbyAM"),import.meta.url).toString();var Qn;Qn=new URL(a("fyf1v").resolve("T2OoQ"),import.meta.url).toString();var $n;$n=new URL(a("fyf1v").resolve("3AzLE"),import.meta.url).toString();var to;to=new URL(a("fyf1v").resolve("aHI8b"),import.meta.url).toString();var eo;eo=new URL(a("fyf1v").resolve("4Yy29"),import.meta.url).toString();var io;io=new URL(a("fyf1v").resolve("6fM5k"),import.meta.url).toString();var so;so=new URL(a("fyf1v").resolve("euKVD"),import.meta.url).toString();var ro;ro=new URL(a("fyf1v").resolve("5r3DH"),import.meta.url).toString();var no;no=new URL(a("fyf1v").resolve("bWcVw"),import.meta.url).toString();var oo;oo=new URL(a("fyf1v").resolve("4FCeL"),import.meta.url).toString();var ao;ao=new URL(a("fyf1v").resolve("4u7FZ"),import.meta.url).toString();var ho;ho=new URL(a("fyf1v").resolve("dU4wG"),import.meta.url).toString();var lo;lo=new URL(a("fyf1v").resolve("7cY5T"),import.meta.url).toString();var co;co=new URL(a("fyf1v").resolve("earm4"),import.meta.url).toString();var uo;uo=new URL(a("fyf1v").resolve("jqVaB"),import.meta.url).toString();var po;po=new URL(a("fyf1v").resolve("hs4dr"),import.meta.url).toString();var mo;mo=new URL(a("fyf1v").resolve("k6Sfz"),import.meta.url).toString();var fo;fo=new URL(a("fyf1v").resolve("3rznl"),import.meta.url).toString();var _o;_o=new URL(a("fyf1v").resolve("01nYM"),import.meta.url).toString();var go;go=new URL(a("fyf1v").resolve("d6JBj"),import.meta.url).toString();var bo;bo=new URL(a("fyf1v").resolve("5REBf"),import.meta.url).toString();var yo;yo=new URL(a("fyf1v").resolve("5ci7c"),import.meta.url).toString();var wo;wo=new URL(a("fyf1v").resolve("BehQz"),import.meta.url).toString();var vo;vo=new URL(a("fyf1v").resolve("jShUj"),import.meta.url).toString();var xo;xo=new URL(a("fyf1v").resolve("gi9jE"),import.meta.url).toString();var So;So=new URL(a("fyf1v").resolve("3qg54"),import.meta.url).toString();var Ao;Ao=new URL(a("fyf1v").resolve("6xsxY"),import.meta.url).toString();var Po;Po=new URL(a("fyf1v").resolve("4g9F7"),import.meta.url).toString();var Co;Co=new URL(a("fyf1v").resolve("fm3qp"),import.meta.url).toString();var To;To=new URL(a("fyf1v").resolve("gmRFe"),import.meta.url).toString();var Eo;Eo=new URL(a("fyf1v").resolve("2bRho"),import.meta.url).toString();var Ro;Ro=new URL(a("fyf1v").resolve("dtwrn"),import.meta.url).toString();var Bo;Bo=new URL(a("fyf1v").resolve("3PRIg"),import.meta.url).toString();var Do;Do=new URL(a("fyf1v").resolve("2JvDc"),import.meta.url).toString();var Io;Io=new URL(a("fyf1v").resolve("gvWuZ"),import.meta.url).toString();var Mo;Mo=new URL(a("fyf1v").resolve("2wxwK"),import.meta.url).toString();var Oo;Oo=new URL(a("fyf1v").resolve("hXPnz"),import.meta.url).toString();var Lo;Lo=new URL(a("fyf1v").resolve("ftFAj"),import.meta.url).toString();var Go;Go=new URL(a("fyf1v").resolve("1Zfem"),import.meta.url).toString();var Fo;Fo=new URL(a("fyf1v").resolve("ju8JF"),import.meta.url).toString();var ko;ko=new URL(a("fyf1v").resolve("aNhL2"),import.meta.url).toString();var No;No=new URL(a("fyf1v").resolve("aydti"),import.meta.url).toString();var Vo;Vo=new URL(a("fyf1v").resolve("5ZayP"),import.meta.url).toString();var Uo;Uo=new URL(a("fyf1v").resolve("j7QpO"),import.meta.url).toString();var Wo;Wo=new URL(a("fyf1v").resolve("lSj1X"),import.meta.url).toString();var jo;jo=new URL(a("fyf1v").resolve("17y8G"),import.meta.url).toString();var Xo;Xo=new URL(a("fyf1v").resolve("gv2nk"),import.meta.url).toString();var Yo;Yo=new URL(a("fyf1v").resolve("7PI7P"),import.meta.url).toString();var Ho;Ho=new URL(a("fyf1v").resolve("8vJax"),import.meta.url).toString();var zo;zo=new URL(a("fyf1v").resolve("emROc"),import.meta.url).toString();var Jo;Jo=new URL(a("fyf1v").resolve("8NEg3"),import.meta.url).toString();var qo;qo=new URL(a("fyf1v").resolve("8tGLu"),import.meta.url).toString();var Ko;Ko=new URL(a("fyf1v").resolve("bR50Z"),import.meta.url).toString();var Zo;Zo=new URL(a("fyf1v").resolve("k4a0b"),import.meta.url).toString();var Qo;Qo=new URL(a("fyf1v").resolve("WBL1A"),import.meta.url).toString();var $o;$o=new URL(a("fyf1v").resolve("hsZXf"),import.meta.url).toString();var ta;ta=new URL(a("fyf1v").resolve("FL9n9"),import.meta.url).toString();var ea;ea=new URL(a("fyf1v").resolve("gTTE3"),import.meta.url).toString();var ia;ia=new URL(a("fyf1v").resolve("aXEti"),import.meta.url).toString();class sa{static async load(){const t=[];for(const e in sa.paths)t.push(fetch(sa.paths[e]).then((t=>t.blob())).then((t=>sa[e]=t)));for(const e in sa.textures)t.push(qs.Texture.fromURL(sa.textures[e]).then((t=>sa[e]=t)));await Promise.all(t)}}sa.paths={cReplay:s(Wr),cRobot:s(Vr),cSpaceship:s(jr),cRace:s(Xr)},sa.textures={cMainMenuLogo:s(an),cCongrats:s(hn),cLevelSelectBox1L:s(ln),cLevelSelectBox1M:s(cn),cLevelSelectBox1R:s(dn),cLevelSelectBox2L:s(un),cLevelSelectBox2M:s(pn),cLevelSelectBox2R:s(mn),cLevelSelectOtherBoxL:s(fn),cLevelSelectOtherBoxM:s(_n),cLevelSelectOtherBoxR:s(gn),cLevelSelectLevelCheckBoxA:s(bn),cLevelSelectLevelCheckBoxB:s(yn),cLevelSelectStartHereText:s(wn),cLevelSelectStartHereArrow:s(vn),cGuiButtonRedBase:s(xn),cGuiButtonRedRoll:s(Sn),cGuiButtonRedClick:s(An),cGuiButtonPurpleBase:s(Pn),cGuiButtonPurpleRoll:s(Cn),cGuiButtonPurpleClick:s(Tn),cGuiButtonBlueBase:s(En),cGuiButtonBlueRoll:s(Rn),cGuiButtonBlueClick:s(Bn),cGuiButtonPinkBase:s(Dn),cGuiButtonPinkRoll:s(In),cGuiButtonPinkClick:s(Mn),cGuiButtonOrangeBase:s(On),cGuiButtonOrangeRoll:s(Ln),cGuiButtonOrangeClick:s(Gn),cGuiButtonPlayBase:s(Fn),cGuiButtonPlayRoll:s(kn),cGuiButtonPlayClick:s(Nn),cGuiButtonXBase:s(Vn),cGuiButtonXRoll:s(Un),cGuiButtonXClick:s(Wn),cGuiWindowTop120:s(jn),cGuiWindowBottom120:s(Xn),cGuiWindowMid120:s(Yn),cGuiWindowTop154:s(Hn),cGuiWindowBottom154:s(zn),cGuiWindowMid154:s(Jn),cGuiWindowTop200:s(qn),cGuiWindowBottom200:s(Kn),cGuiWindowMid200:s(Zn),cGuiWindowTop248:s(Qn),cGuiWindowBottom248:s($n),cGuiWindowMid248:s(to),cGuiWindowTop547:s(eo),cGuiWindowBottom547:s(io),cGuiWindowMid547:s(so),cGuiWindowLeft800:s(ro),cGuiWindowRight800:s(no),cGuiWindowMid800:s(oo),cGuiWindowLeft600:s(ao),cGuiWindowRight600:s(ho),cGuiWindowMid600:s(lo),cGuiWindowLeft700:s(co),cGuiWindowRight700:s(uo),cGuiWindowMid700:s(po),cGuiWindowLinebox:s(mo),cGuiWindowLine:s(fo),cGuiMenuBar:s(_o),cGuiMenuBarRoll:s(go),cGuiMenuCheckBoxABase:s(bo),cGuiMenuCheckBoxARoll:s(yo),cGuiMenuCheckBoxAClick:s(wo),cGuiMenuCheckBoxBBase:s(vo),cGuiMenuCheckBoxBRoll:s(xo),cGuiMenuCheckBoxBClick:s(So),cGuiCheckboxABase:s(Ao),cGuiCheckboxARoll:s(Po),cGuiCheckboxAClick:s(Co),cGuiCheckboxADisabled:s(To),cGuiCheckboxBBase:s(Eo),cGuiCheckboxBRoll:s(Ro),cGuiCheckboxBClick:s(Bo),cGuiCheckboxBDisabled:s(Do),cGuiTextAreaBase:s(Io),cGuiTextAreaRoll:s(Mo),cGuiTextAreaDisabled:s(Oo),cGuiComboboxBase:s(Lo),cGuiComboboxRoll:s(Go),cGuiComboboxClick:s(Fo),cGuiListboxBase:s(ko),cGuiListboxRoll:s(No),cGuiListboxClick:s(Vo),cGuiListboxWideBase:s(Uo),cGuiListboxWideRoll:s(Wo),cGuiListboxWideClick:s(jo),cGuiSliderGroove:s(Xo),cGuiSliderGrooveDisabled:s(Yo),cGuiSliderThumb:s(Ho),cCloud0:s(zo),cCloud1:s(Jo),cCloud2:s(qo),cCloud3:s(Ko),cCloud4:s(Zo),cCloud5:s(Qo),cCloud6:s($o),cCloud7:s(ta),cCloud8:s(ea),cCloud9:s(ia)},sa.cRoll=Ur.Sound.from(s(Yr)),sa.cClick=Ur.Sound.from(s(Hr)),sa.cShape1=Ur.Sound.from(s(zr)),sa.cShape2=Ur.Sound.from(s(Jr)),sa.cShape3=Ur.Sound.from(s(qr)),sa.cShape4=Ur.Sound.from(s(Kr)),sa.cShape5=Ur.Sound.from(s(Zr)),sa.cJoint1=Ur.Sound.from(s(Qr)),sa.cJoint2=Ur.Sound.from(s($r)),sa.cJoint3=Ur.Sound.from(s(tn)),sa.cJoint4=Ur.Sound.from(s(en)),sa.cJoint5=Ur.Sound.from(s(sn)),sa.cIntro=Ur.Sound.from(s(rn)),sa.cWin=Ur.Sound.from(s(nn)),sa.cLose=Ur.Sound.from(s(on)),a("7qcjp");js=a("4Y6fG");class ra extends Zs{DrawWorld(t,e,i,s=!0,r=!0,n=!0,o=null){var a;if(this.m_sprite.clear(),o&&(i||o.showConditions)){for(a=0;a<o.winConditions.length;a++)0==o.winConditions[a].object?((O=new Array(4))[0]=new ps.b2Vec2(o.winConditions[a].minX,o.winConditions[a].minY),O[1]=new ps.b2Vec2(o.winConditions[a].minX,o.winConditions[a].maxY),O[2]=new ps.b2Vec2(o.winConditions[a].maxX,o.winConditions[a].maxY),O[3]=new ps.b2Vec2(o.winConditions[a].maxX,o.winConditions[a].minY),this.drawColours&&(this.m_fillAlpha=.2),this.DrawSolidPolygon(O,4,new ps.b2Color(.5,.8,.5))):o.winConditions[a].object<5&&this.DrawSolidSegment(new ps.b2Vec2(o.winConditions[a].minX,o.winConditions[a].minY),new ps.b2Vec2(o.winConditions[a].maxX,o.winConditions[a].maxY),ra.DarkenColour(new ps.b2Color(.5,.8,.5)));for(a=0;a<o.lossConditions.length;a++)0==o.lossConditions[a].object?((O=new Array(4))[0]=new ps.b2Vec2(o.lossConditions[a].minX,o.lossConditions[a].minY),O[1]=new ps.b2Vec2(o.lossConditions[a].minX,o.lossConditions[a].maxY),O[2]=new ps.b2Vec2(o.lossConditions[a].maxX,o.lossConditions[a].maxY),O[3]=new ps.b2Vec2(o.lossConditions[a].maxX,o.lossConditions[a].minY),this.drawColours&&(this.m_fillAlpha=.2),this.DrawSolidPolygon(O,4,new ps.b2Color(.8,.7,.7))):o.lossConditions[a].object<5&&this.DrawSolidSegment(new ps.b2Vec2(o.lossConditions[a].minX,o.lossConditions[a].minY),new ps.b2Vec2(o.lossConditions[a].maxX,o.lossConditions[a].maxY),ra.DarkenColour(new ps.b2Color(.7,.7,.8)))}if(i){if(this.drawColours&&n)for(a=0;a<t.length;a++)if((!t[a].isStatic||t[a].isEditable||s||t[a].drawAnyway)&&t[a]instanceof mh&&t[a].terrain&&t[a].outline){var h=ra.s_normalColor,l=!1;this.drawColours?(h=new ps.b2Color(t[a].red/255,t[a].green/255,t[a].blue/255),(t[a]instanceof mh&&t[a].highlightForJoint||Vs.ObjectInArray(t[a],e))&&(l=!0)):(t[a].isEditable||(h=ra.s_uneditableColor),t[a].isStatic&&t[a].isEditable&&(h=ra.s_staticEditableColor),Vs.ObjectInArray(t[a],e)&&(h=ra.s_selectedColor),t[a].isStatic&&!t[a].isEditable&&(h=ra.s_staticColor),t[a]instanceof mh&&t[a].highlightForJoint&&(h=ra.s_jointCreatingColor)),h=ra.DarkenColour(h),l&&(h=ra.DarkenColour(h));var c=Math.max(.1,this.m_lineThickness*Math.pow(this.m_drawScale,.5)/8);if(t[a]instanceof _h){var d=t[a];this.m_fillAlpha=d.opacity/255,this.DrawSolidCircle(new ps.b2Vec2(d.centerX,d.centerY),d.radius+.8*c,new ps.b2Rot(d.angle),h,!1,!1)}else if(t[a]instanceof gh){var u=t[a];this.m_fillAlpha=u.opacity/255,this.DrawSolidPolygon(u.GetVerticesForOutline(c),4,h,!1,!1)}else if(t[a]instanceof bh){var p=t[a];this.m_fillAlpha=p.opacity/255,this.DrawSolidPolygon(p.GetVerticesForOutline(c),3,h,!1,!1)}else if(t[a]instanceof yh){var m=t[a];this.m_fillAlpha=m.opacity/255,this.DrawSolidPolygon(m.GetVerticesForOutline(c),4,h,!1,!1)}}for(a=0;a<t.length;a++)if((!t[a].isStatic||t[a].isEditable||s||t[a].drawAnyway)&&(t[a]instanceof mh||t[a]instanceof Sh))if(h=ra.s_normalColor,l=!1,this.drawColours?(h=new ps.b2Color(t[a].red/255,t[a].green/255,t[a].blue/255),(t[a]instanceof mh&&t[a].highlightForJoint||Vs.ObjectInArray(t[a],e))&&(l=!0)):(t[a]instanceof fh&&(h=ra.s_jointColor),t[a].isEditable||(h=ra.s_uneditableColor),t[a].isStatic&&t[a].isEditable&&(h=ra.s_staticEditableColor),Vs.ObjectInArray(t[a],e)&&(h=ra.s_selectedColor),t[a].isStatic&&!t[a].isEditable&&(h=ra.s_staticColor),t[a]instanceof mh&&t[a].highlightForJoint&&(h=ra.s_jointCreatingColor)),t[a]instanceof _h)d=t[a],this.drawColours&&(this.m_fillAlpha=d.opacity/255),this.DrawSolidCircle(new ps.b2Vec2(d.centerX,d.centerY),d.radius,new ps.b2Rot(d.angle),h,l,d.outline&&(!d.terrain||!this.drawColours)&&n);else if(t[a]instanceof gh)u=t[a],this.drawColours&&(this.m_fillAlpha=u.opacity/255),this.DrawSolidPolygon(u.GetVertices(),4,h,l,u.outline&&(!u.terrain||!this.drawColours)&&n);else if(t[a]instanceof bh)p=t[a],this.drawColours&&(this.m_fillAlpha=p.opacity/255),this.DrawSolidPolygon(p.GetVertices(),3,h,l,p.outline&&(!p.terrain||!this.drawColours)&&n);else if(t[a]instanceof yh)m=t[a],this.drawColours&&(this.m_fillAlpha=m.opacity/255),this.DrawSolidCannon(m.GetVertices(),4,h,l,m.outline&&(!m.terrain||!this.drawColours)&&n);else if(t[a]instanceof Sh){var f=t[a],_=f.anchorX-f.axis.x*f.initLength/2,g=f.anchorY-f.axis.y*f.initLength/2,b=f.anchorX+f.axis.x*f.initLength/2,y=f.anchorY+f.axis.y*f.initLength/2,w=Math.atan2(f.axis.y,f.axis.x);this.drawColours&&(this.m_fillAlpha=f.opacity/255),(T=new Array)[0]=new ps.b2Vec2(_-.25,g-.05),T[1]=new ps.b2Vec2(_+.25,g-.05),T[2]=new ps.b2Vec2(_+.25,g+.05),T[3]=new ps.b2Vec2(_-.25,g+.05);var v=Math.sqrt(.065);for(C=0;C<4;C++){var x=Math.atan2(T[C].y-g,T[C].x-_);x=Vs.NormalizeAngle(w+x+Math.PI/2),T[C].x=_+v*Math.cos(x),T[C].y=g+v*Math.sin(x)}this.DrawSolidPolygon(T,4,h,l,f.outline&&n);var S=_+(v=Math.sqrt(.2*.2+f.initLength*f.initLength/4))*Math.cos(Math.atan2(-f.initLength/2,-.2)+w+Math.PI/2),A=g+v*Math.sin(Math.atan2(-f.initLength/2,-.2)+w+Math.PI/2);for(T[0]=new ps.b2Vec2(_-.05,g-f.initLength/2),T[1]=new ps.b2Vec2(_+.05,g-f.initLength/2),T[2]=new ps.b2Vec2(_+.05,g+f.initLength/2),T[3]=new ps.b2Vec2(_-.05,g+f.initLength/2),v=Math.sqrt(.05*.05+f.initLength*f.initLength/4),C=0;C<4;C++)x=Math.atan2(T[C].y-g,T[C].x-_),x=Vs.NormalizeAngle(w+x+Math.PI/2),T[C].x=S+v*Math.cos(x),T[C].y=A+v*Math.sin(x);for(this.DrawSolidPolygon(T,4,h,l,f.outline&&n),S=_+(v=Math.sqrt(.2*.2+f.initLength*f.initLength/4))*Math.cos(Math.atan2(-f.initLength/2,.2)+w+Math.PI/2),A=g+v*Math.sin(Math.atan2(-f.initLength/2,.2)+w+Math.PI/2),T[0]=new ps.b2Vec2(_-.05,g-f.initLength/2),T[1]=new ps.b2Vec2(_+.05,g-f.initLength/2),T[2]=new ps.b2Vec2(_+.05,g+f.initLength/2),T[3]=new ps.b2Vec2(_-.05,g+f.initLength/2),v=Math.sqrt(.05*.05+f.initLength*f.initLength/4),C=0;C<4;C++)x=Math.atan2(T[C].y-g,T[C].x-_),x=Vs.NormalizeAngle(w+x+Math.PI/2),T[C].x=S+v*Math.cos(x),T[C].y=A+v*Math.sin(x);for(this.DrawSolidPolygon(T,4,h,l,f.outline&&n),S=_+(v=Math.sqrt(.0225+f.initLength*f.initLength))*Math.cos(Math.atan2(-f.initLength,-.15)+w+Math.PI/2),A=g+v*Math.sin(Math.atan2(-f.initLength,-.15)+w+Math.PI/2),T[0]=new ps.b2Vec2(_-.1,g-.05),T[1]=new ps.b2Vec2(_+.1,g-.05),T[2]=new ps.b2Vec2(_+.1,g+.05),T[3]=new ps.b2Vec2(_-.1,g+.05),v=Math.sqrt(.1*.1+.05*.05),C=0;C<4;C++)x=Math.atan2(T[C].y-g,T[C].x-_),x=Vs.NormalizeAngle(w+x+Math.PI/2),T[C].x=S+v*Math.cos(x),T[C].y=A+v*Math.sin(x);for(this.DrawSolidPolygon(T,4,h,l,f.outline&&n),S=_+(v=Math.sqrt(.0225+f.initLength*f.initLength))*Math.cos(Math.atan2(-f.initLength,.15)+w+Math.PI/2),A=g+v*Math.sin(Math.atan2(-f.initLength,.15)+w+Math.PI/2),T[0]=new ps.b2Vec2(_-.1,g-.05),T[1]=new ps.b2Vec2(_+.1,g-.05),T[2]=new ps.b2Vec2(_+.1,g+.05),T[3]=new ps.b2Vec2(_-.1,g+.05),v=Math.sqrt(.1*.1+.05*.05),C=0;C<4;C++)x=Math.atan2(T[C].y-g,T[C].x-_),x=Vs.NormalizeAngle(w+x+Math.PI/2),T[C].x=S+v*Math.cos(x),T[C].y=A+v*Math.sin(x);for(this.DrawSolidPolygon(T,4,h,l,f.outline&&n),S=b+(v=f.initLength/2-.1)*Math.cos(Math.atan2(f.initLength/2-.1,0)+w+Math.PI/2),A=y+v*Math.sin(Math.atan2(f.initLength/2-.1,0)+w+Math.PI/2),T[0]=new ps.b2Vec2(b-.05,y-f.initLength/2),T[1]=new ps.b2Vec2(b+.05,y-f.initLength/2),T[2]=new ps.b2Vec2(b+.05,y+f.initLength/2),T[3]=new ps.b2Vec2(b-.05,y+f.initLength/2),v=Math.sqrt(.05*.05+f.initLength*f.initLength/4),C=0;C<4;C++)x=Math.atan2(T[C].y-y,T[C].x-b),x=Vs.NormalizeAngle(w+x+Math.PI/2),T[C].x=S+v*Math.cos(x),T[C].y=A+v*Math.sin(x);for(this.DrawSolidPolygon(T,4,h,l,f.outline&&n),S=b+(v=f.initLength-.1)*Math.cos(Math.atan2(f.initLength-.1,0)+w+Math.PI/2),A=y+v*Math.sin(Math.atan2(f.initLength-.1,0)+w+Math.PI/2),T[0]=new ps.b2Vec2(b-.15,y-.05),T[1]=new ps.b2Vec2(b+.15,y-.05),T[2]=new ps.b2Vec2(b+.15,y+.05),T[3]=new ps.b2Vec2(b-.15,y+.05),v=Math.sqrt(.025),C=0;C<4;C++)x=Math.atan2(T[C].y-y,T[C].x-b),x=Vs.NormalizeAngle(w+x+Math.PI/2),T[C].x=S+v*Math.cos(x),T[C].y=A+v*Math.sin(x);this.DrawSolidPolygon(T,4,h,l,f.outline&&n)}if(r)for(a=0;a<t.length;a++)if(t[a]instanceof fh||t[a]instanceof Ah)if(h=ra.s_jointColor,t[a].isEditable||(h=ra.s_uneditableColor),t[a].isStatic&&t[a].isEditable&&(h=ra.s_staticEditableColor),Vs.ObjectInArray(t[a],e)&&(h=ra.s_selectedColor),t[a].isStatic&&!t[a].isEditable&&(h=ra.s_staticColor),t[a]instanceof mh&&t[a].highlightForJoint&&(h=ra.s_jointCreatingColor),t[a]instanceof vh)for(var P=t[a],C=0;C<2;C++){var T=new Array;T[0]=new ps.b2Vec2(P.anchorX-.075*(C+1)*30/this.m_drawScale,P.anchorY-.075*(C+1)*30/this.m_drawScale),T[1]=new ps.b2Vec2(P.anchorX-.075*(C+1)*30/this.m_drawScale,P.anchorY+.075*(C+1)*30/this.m_drawScale),T[2]=new ps.b2Vec2(P.anchorX+.075*(C+1)*30/this.m_drawScale,P.anchorY+.075*(C+1)*30/this.m_drawScale),T[3]=new ps.b2Vec2(P.anchorX+.075*(C+1)*30/this.m_drawScale,P.anchorY-.075*(C+1)*30/this.m_drawScale),this.DrawPolygon(T,4,h)}else if(t[a]instanceof xh){var E=t[a];this.DrawCircle(new ps.b2Vec2(E.anchorX,E.anchorY),2.25/this.m_drawScale,h),this.DrawCircle(new ps.b2Vec2(E.anchorX,E.anchorY),4.5/this.m_drawScale,h)}else if(t[a]instanceof Ah){var R=t[a];for(C=0;C<2;C++)(T=new Array)[0]=new ps.b2Vec2(R.centerX+.2*Math.cos(R.angle)*(C+1)*30/this.m_drawScale,R.centerY+.2*Math.sin(R.angle)*(C+1)*30/this.m_drawScale),T[1]=new ps.b2Vec2(R.centerX+.1*Math.cos(R.angle+2*Math.PI/3)*(C+1)*30/this.m_drawScale,R.centerY+.1*Math.sin(R.angle+2*Math.PI/3)*(C+1)*30/this.m_drawScale),T[2]=new ps.b2Vec2(R.centerX+.1*Math.cos(R.angle+4*Math.PI/3)*(C+1)*30/this.m_drawScale,R.centerY+.1*Math.sin(R.angle+4*Math.PI/3)*(C+1)*30/this.m_drawScale),this.DrawPolygon(T,3,h)}}else{var B;this.GetFlags();if(this.drawColours&&n)for(a=0;a<t.length;a++)(!t[a].isStatic||t[a].isEditable||s||t[a].drawAnyway)&&t[a]instanceof mh&&t[a].terrain&&t[a].outline&&(B=t[a].GetBody().GetTransform(),t[a]instanceof yh?this.DrawCannonForOutline(t[a].GetShape(),B,new ps.b2Color(t[a].red/255,t[a].green/255,t[a].blue/255),t[a].opacity/255):this.DrawShapeForOutline(t[a].GetShape(),B,new ps.b2Color(t[a].red/255,t[a].green/255,t[a].blue/255),t[a].opacity/255));for(a=0;a<t.length;a++){if(!t[a].isStatic||t[a].isEditable||s||t[a].drawAnyway)if(t[a]instanceof mh)B=t[a].GetBody().GetTransform(),this.drawColours?t[a]instanceof yh?this.DrawCannon(t[a].GetShape(),t[a].GetUserData(),B,new ps.b2Color(t[a].red/255,t[a].green/255,t[a].blue/255),t[a].opacity/255,n):this.DrawShape(t[a].GetShape(),t[a].GetUserData(),B,new ps.b2Color(t[a].red/255,t[a].green/255,t[a].blue/255),t[a].opacity/255,n):t[a].isStatic?t[a]instanceof yh?this.DrawCannon(t[a].GetShape(),t[a].GetUserData(),B,ra.s_staticColor,1,n):this.DrawShape(t[a].GetShape(),t[a].GetUserData(),B,ra.s_staticColor,1,n):t[a]instanceof yh?this.DrawCannon(t[a].GetShape(),t[a].GetUserData(),B,ra.s_normalColor,1,n):this.DrawShape(t[a].GetShape(),t[a].GetUserData(),B,ra.s_normalColor,1,n);else if(t[a]instanceof Sh){const e=t[a];var D=e.GetFixtures();for(C=0;C<D.length;C++){const i=D[C];B=i.GetBody().GetTransform(),this.drawColours?this.DrawShape(i.GetShape(),e.part2.GetUserData(),B,new ps.b2Color(t[a].red/255,t[a].green/255,t[a].blue/255),t[a].opacity/255,n):t[a].isStatic?this.DrawShape(i.GetShape(),e.part2.GetUserData(),B,ra.s_staticColor,1,n):this.DrawShape(i.GetShape(),e.part2.GetUserData(),B,ra.s_normalColor,1,n)}}if(t[a]instanceof yh)for(C=0;C<t[a].cannonballs.length;C++){const e=t[a].cannonballs[C];B=e.GetTransform(),this.drawColours?this.DrawShape(e.GetFixtureList().GetShape(),t[a].GetUserData(),B,new ps.b2Color(t[a].red/255,t[a].green/255,t[a].blue/255),t[a].opacity/255,n,!0):this.DrawShape(e.GetFixtureList().GetShape(),t[a].GetUserData(),B,ra.s_normalColor,1,n,!0)}}}for(a=0;a<t.length;a++)if(t[a]instanceof wh){t[a].m_textField.visible=i||t[a].alwaysVisible||t[a].displayKeyPressed,t[a].m_textField.x=t[a].x*this.m_drawScale-this.m_drawXOff,t[a].m_textField.y=t[a].y*this.m_drawScale-this.m_drawYOff;var I=new js.TextStyle;if(I.fontSize=t[a].scaleWithZoom?t[a].size*this.m_drawScale/30:t[a].size,I.fill=t[a].red<<16|t[a].green<<8|t[a].blue,I.fontFamily=Sa.GLOBAL_FONT,t[a].m_textField.style=I,i){var M=Vs.ObjectInArray(t[a],e)?new ps.b2Color(1,1,1):new ps.b2Color(.1,.1,.1),O=new Array;O[0]=new ps.b2Vec2(t[a].x,t[a].y),O[1]=new ps.b2Vec2(t[a].x+t[a].w,t[a].y),O[2]=new ps.b2Vec2(t[a].x+t[a].w,t[a].y+t[a].h),O[3]=new ps.b2Vec2(t[a].x,t[a].y+t[a].h),this.DrawPolygon(O,4,M);var L=new Array;for(C=0;C<4;C++)L[0]=new ps.b2Vec2(O[C].x-4/this.m_drawScale,O[C].y-4/this.m_drawScale),L[1]=new ps.b2Vec2(O[C].x-4/this.m_drawScale,O[C].y+4/this.m_drawScale),L[2]=new ps.b2Vec2(O[C].x+4/this.m_drawScale,O[C].y+4/this.m_drawScale),L[3]=new ps.b2Vec2(O[C].x+4/this.m_drawScale,O[C].y-4/this.m_drawScale),this.DrawPolygon(L,4,M)}}}DrawJoint(t){var e=t.GetBodyA(),i=t.GetBodyB(),s=e.GetTransform(),r=i.GetTransform(),n=s.GetPosition(),o=r.GetPosition(),a=new ps.b2Vec2,h=new ps.b2Vec2;t.GetAnchorA(a),t.GetAnchorB(h);var l=ra.s_jointColor;switch(t.GetType()){case ps.b2JointType.e_revoluteJoint:this.DrawCircle(a,1.5/this.m_drawScale,l),this.DrawCircle(h,3/this.m_drawScale,l);break;case ps.b2JointType.e_prismaticJoint:var c=new ps.b2Vec2,d=new ps.b2Vec2;t.GetBodyA().GetWorldPoint(t.GetUserData().localPoint1,c),t.GetBodyB().GetWorldPoint(t.GetUserData().localPoint2,d),this.DrawSegment(c,d,l);var u=Vs.Midpoint(c,d);this.DrawCircle(u,1.5/this.m_drawScale,l),this.DrawCircle(u,3/this.m_drawScale,l);break;case ps.b2JointType.e_mouseJoint:this.DrawSegment(a,h,l);break;default:e.GetUserData().groundBody||this.DrawSegment(n,a,l),i.GetUserData().groundBody||this.DrawSegment(o,h,l),this.DrawSegment(a,h,l)}}DrawShape(t,e,i,s,r,n=!0,o=!1){switch(t.GetType()){case ps.b2ShapeType.e_circle:{var a=t;const c=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(i,a.m_p,c);var h=a.m_radius,l=i.q;this.drawColours&&(this.m_fillAlpha=r),this.DrawSolidCircle(c,h,l,s,!1,e.outline&&(!this.drawColours||!e.terrain)&&n,o)}break;case ps.b2ShapeType.e_polygon:var c,d=t,u=d.m_count,p=d.m_vertices,m=new Array(ps.b2_maxPolygonVertices);for(c=0;c<u;++c){const t=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(i,p[c],t),m[c]=t}this.drawColours&&(this.m_fillAlpha=r),this.DrawSolidPolygon(m,u,s,!1,e.outline&&(!this.drawColours||!e.terrain)&&n)}}DrawCannon(t,e,i,s,r,n=!0){for(var o=t,a=[o.m_vertices[3],o.m_vertices[0],o.m_vertices[1],o.m_vertices[2]],h=new Array,l=0;l<4;++l){const t=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(i,a[l],t),h[l]=t}this.drawColours&&(this.m_fillAlpha=r),this.DrawSolidCannon(h,4,s,!1,e.outline&&(!this.drawColours||!e.terrain)&&n)}DrawShapeForOutline(t,e,i,s){i=ra.DarkenColour(i);var r=Math.max(.1,this.m_lineThickness*Math.pow(this.m_drawScale,.5)/8);switch(t.GetType()){case ps.b2ShapeType.e_circle:{var n=t;const r=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(e,n.m_p,r);var o=n.m_radius,a=e.q;this.drawColours&&(this.m_fillAlpha=s),this.DrawSolidCircle(r,o,a,i,!1,!1)}break;case ps.b2ShapeType.e_polygon:var h,l=t,c=l.m_count,d=l.m_vertices,u=new Array(ps.b2_maxPolygonVertices);for(h=0;h<c;++h){const t=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(e,d[h],t),u[h]=t}u=mh.GetOutlineVertices(u,c,r),this.drawColours&&(this.m_fillAlpha=s),this.DrawSolidPolygon(u,c,i,!1,!1)}}DrawCannonForOutline(t,e,i,s){i=ra.DarkenColour(i);for(var r=Math.max(.1,this.m_lineThickness*Math.pow(this.m_drawScale,.5)/8),n=t.m_vertices,o=new Array(ps.b2_maxPolygonVertices),a=0;a<4;++a){const t=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(e,n[a],t),o[a]=t}o=mh.GetOutlineVertices(o,4,r),this.drawColours&&(this.m_fillAlpha=s),this.DrawSolidCannon(o,4,i,!1,!1)}DrawTempShape(t,e,i,s,r,n,o,a){var h;if(this.drawColours?this.m_fillAlpha=1:this.m_fillAlpha=.5,t==na.NEW_CIRCLE&&1==e){var l=Vs.GetDist(i,s,o,a);l<_h.MIN_RADIUS&&(l=_h.MIN_RADIUS),l>_h.MAX_RADIUS&&(l=_h.MAX_RADIUS),this.drawColours&&(this.m_fillAlpha=na.defaultO/255);const t=new ps.b2Rot;t.c=(o-i)/l,t.s=(a-s)/l,this.DrawSolidCircle(new ps.b2Vec2(i,s),l,t,this.drawColours?new ps.b2Color(na.defaultR/255,na.defaultG/255,na.defaultB/255):ra.s_selectedColor)}else if(t==na.NEW_RECT&&1==e){var c=o-i,d=a-s;Math.abs(c)<gh.MIN_WIDTH&&(c=c<0?-gh.MIN_WIDTH:gh.MIN_WIDTH),Math.abs(c)>gh.MAX_WIDTH&&(c=c<0?-gh.MAX_WIDTH:gh.MAX_WIDTH),Math.abs(d)<gh.MIN_WIDTH&&(d=d<0?-gh.MIN_WIDTH:gh.MIN_WIDTH),Math.abs(d)>gh.MAX_WIDTH&&(d=d<0?-gh.MAX_WIDTH:gh.MAX_WIDTH),(h=new Array(4))[0]=new ps.b2Vec2(i,s),h[1]=new ps.b2Vec2(i+c,s),h[2]=new ps.b2Vec2(i+c,s+d),h[3]=new ps.b2Vec2(i,s+d),this.drawColours&&(this.m_fillAlpha=na.defaultO/255),this.DrawSolidPolygon(h,4,this.drawColours?new ps.b2Color(na.defaultR/255,na.defaultG/255,na.defaultB/255):ra.s_selectedColor)}else if(t==na.NEW_CANNON&&1==e){c=o>=i||a>=s?Math.max(o-i,2*(a-s)):Math.min(o-i,2*(a-s)),Math.abs(c)<yh.MIN_WIDTH&&(c=c<0?-yh.MIN_WIDTH:yh.MIN_WIDTH),Math.abs(c)>yh.MAX_WIDTH&&(c=c<0?-yh.MAX_WIDTH:yh.MAX_WIDTH),(h=new Array(4))[0]=new ps.b2Vec2(i,s),h[1]=new ps.b2Vec2(i+c,s),h[2]=new ps.b2Vec2(i+c,s+c/2),h[3]=new ps.b2Vec2(i,s+c/2),this.drawColours&&(this.m_fillAlpha=na.defaultO/255),this.DrawSolidCannon(h,4,this.drawColours?new ps.b2Color(na.defaultR/255,na.defaultG/255,na.defaultB/255):ra.s_selectedColor)}else if(t==na.NEW_TRIANGLE&&1==e){var u,p=o,m=a,f=Vs.GetDist(i,s,o,a);f<bh.MIN_SIDE_LENGTH?(u=Math.atan2(s-a,o-i),p=i+bh.MIN_SIDE_LENGTH*Math.cos(u),m=s-bh.MIN_SIDE_LENGTH*Math.sin(u)):f>bh.MAX_SIDE_LENGTH&&(u=Math.atan2(s-a,o-i),p=i+bh.MAX_SIDE_LENGTH*Math.cos(u),m=s-bh.MAX_SIDE_LENGTH*Math.sin(u)),this.DrawSegment(new ps.b2Vec2(i,s),new ps.b2Vec2(p,m),this.drawColours?new ps.b2Color(.0666,.0666,.0666):ra.s_selectedColor)}else if(t==na.NEW_TRIANGLE&&2==e){var _=Vs.GetDist(i,s,o,a),g=Vs.GetDist(r,n,o,a),b=Vs.GetDist(i,s,r,n),y=Vs.NormalizeAngle(Math.acos((b*b+_*_-g*g)/(2*b*_))),w=Vs.NormalizeAngle(Math.acos((b*b+g*g-_*_)/(2*b*g))),v=Vs.NormalizeAngle(Math.acos((_*_+g*g-b*b)/(2*_*g)));_<=bh.MAX_SIDE_LENGTH&&_>=bh.MIN_SIDE_LENGTH&&g<=bh.MAX_SIDE_LENGTH&&g>=bh.MIN_SIDE_LENGTH&&y>=bh.MIN_TRIANGLE_ANGLE&&w>=bh.MIN_TRIANGLE_ANGLE&&v>=bh.MIN_TRIANGLE_ANGLE?((h=new Array(3))[0]=new ps.b2Vec2(i,s),h[1]=new ps.b2Vec2(r,n),h[2]=new ps.b2Vec2(o,a),this.drawColours&&(this.m_fillAlpha=na.defaultO/255),this.DrawSolidPolygon(h,3,this.drawColours?new ps.b2Color(na.defaultR/255,na.defaultG/255,na.defaultB/255):ra.s_selectedColor)):this.DrawSegment(new ps.b2Vec2(i,s),new ps.b2Vec2(r,n),this.drawColours?new ps.b2Color(.0666,.0666,.0666):ra.s_selectedColor)}else t==na.NEW_FIXED_JOINT||t==na.NEW_REVOLUTE_JOINT||t==na.NEW_PRISMATIC_JOINT||t==na.FINALIZING_JOINT?(this.DrawCircle(new ps.b2Vec2(o,a),2.25/this.m_drawScale,ra.s_selectedColor),this.DrawCircle(new ps.b2Vec2(o,a),4.5/this.m_drawScale,ra.s_selectedColor),t==na.NEW_PRISMATIC_JOINT&&1==e&&(this.DrawCircle(new ps.b2Vec2(i,s),2.25/this.m_drawScale,ra.s_selectedColor),this.DrawCircle(new ps.b2Vec2(i,s),4.5/this.m_drawScale,ra.s_selectedColor),this.DrawSegment(new ps.b2Vec2(i,s),new ps.b2Vec2(o,a),ra.s_selectedColor))):t==na.BOX_SELECTING||t==na.NEW_TEXT&&1==e||t==na.DRAWING_BOX&&1==e||t==na.DRAWING_BUILD_BOX&&1==e?((h=new Array(4))[0]=new ps.b2Vec2(i,s),h[1]=new ps.b2Vec2(i,a),h[2]=new ps.b2Vec2(o,a),h[3]=new ps.b2Vec2(o,s),this.drawColours&&(this.m_fillAlpha=.5),this.DrawSolidPolygon(h,4,new ps.b2Color(.8,.5,.5))):t==na.NEW_THRUSTERS?(this.DrawCircle(new ps.b2Vec2(o,a),2.25/this.m_drawScale,ra.s_selectedColor),this.DrawCircle(new ps.b2Vec2(o,a),4.5/this.m_drawScale,ra.s_selectedColor)):t==na.DRAWING_HORIZONTAL_LINE&&1==e?this.DrawSegment(new ps.b2Vec2(i,s),new ps.b2Vec2(o,s),new ps.b2Color(.0666,.0666,.0666)):t==na.DRAWING_VERTICAL_LINE&&1==e&&this.DrawSegment(new ps.b2Vec2(i,s),new ps.b2Vec2(i,a),new ps.b2Color(.0666,.0666,.0666))}}ra.s_jointColor=new ps.b2Color(.8,.8,.4),ra.s_selectedColor=new ps.b2Color(.4,.4,.9),ra.s_normalColor=new ps.b2Color(.5,.5,.5),ra.s_uneditableColor=new ps.b2Color(.6,.6,.6),ra.s_jointCreatingColor=new ps.b2Color(.9,.4,.4),ra.s_staticColor=new ps.b2Color(.4,.9,.4),ra.s_staticEditableColor=new ps.b2Color(.6,.8,.6);class na{}na.INIT_PHYS_SCALE=30,na.MIN_ZOOM_VAL=12,na.MAX_ZOOM_VAL=75,na.ZOOM_FOCUS_X=400,na.ZOOM_FOCUS_Y=310,na.REPLAY_SYNC_FRAMES=3,na.ADMIN_USERS=["Oliver","Ryan Clark","aaaaajon","andreas002","BillyJimBob","EMDF","fighterlegend","Sruixan","Illume","Cheeseyx","Leafsnail","bigjohnpalmer","jayther","Spedione","Thax","b0tman","zom","KyuubisSlave","Redstater","rutgersemp","Euphrates","lakeeriesuperstar","SilverGun","mattbob","bowman9898","willempiee","dark dan21","pandm"],na.playingReplay=!1,na.viewingUnsavedReplay=!1,na.replayDirectlyLinked=!1,na.collisionGroup=1,na.wasMouseDown=!1,na.minDensity=1,na.maxDensity=30,na.maxRJStrength=30,na.maxRJSpeed=30,na.maxSJStrength=30,na.maxSJSpeed=30,na.maxThrusterStrength=30,na.initX=Number.MAX_VALUE,na.initY=Number.MAX_VALUE,na.initZoom=Number.MAX_VALUE,na.defaultR=253,na.defaultG=66,na.defaultB=42,na.defaultO=255,na.clickedBox=!1,na.adStarted=!1,na.snapToCenter=!0,na.showJoints=!0,na.showOutlines=!0,na.showGraphics=!0,na.showColours=!0,na.centerOnSelected=!1,na.failedChallenge=!1,na.justLoadedRobotWithChallenge=!1,na.cannonballs=[],na.showTutorial=!0,na.ratedCurRobot=!1,na.ratedCurReplay=!1,na.ratedCurChallenge=!1,na.loadAndInsert=!1,na.potentialRobotID="",na.potentialRobotEditable=!1,na.potentialRobotPublic=!1,na.potentialRobotFeatured=!1,na.potentialChallengeID="",na.potentialChallengeEditable=!1,na.potentialChallengePublic=!1,na.potentialChallengeFeatured=!1,na.potentialReplayID="",na.potentialReplayPublic=!1,na.potentialReplayFeatured=!1,na.curRobotID="",na.curRobotEditable=!0,na.curRobotPublic=!1,na.curRobotFeatured=!1,na.curChallengeID="",na.curChallengePublic=!1,na.curChallengeFeatured=!1,na.curReplayID="",na.curReplayPublic=!1,na.curReplayFeatured=!1,na.userName="_Public",na.password="",na.sessionID="",na.clipboardParts=[],na.replayParts=[],na.loadedParts=[],na.shapeSound1=sa.cShape1,na.shapeSound2=sa.cShape2,na.shapeSound3=sa.cShape3,na.shapeSound4=sa.cShape4,na.shapeSound5=sa.cShape5,na.jointSound1=sa.cJoint1,na.jointSound2=sa.cJoint2,na.jointSound3=sa.cJoint3,na.jointSound4=sa.cJoint4,na.jointSound5=sa.cJoint5,na.winSound=sa.cWin,na.loseSound=sa.cLose,na.introVolume=.5,na.NEW_CIRCLE=0,na.NEW_RECT=1,na.NEW_TRIANGLE=2,na.NEW_FIXED_JOINT=3,na.NEW_REVOLUTE_JOINT=4,na.NEW_PRISMATIC_JOINT=5,na.ROTATE=6,na.PASTE=7,na.BOX_SELECTING=8,na.FINALIZING_JOINT=9,na.NEW_TEXT=10,na.RESIZING_TEXT=11,na.RESIZING_SHAPES=12,na.NEW_THRUSTERS=13,na.DRAWING_BOX=14,na.DRAWING_HORIZONTAL_LINE=15,na.DRAWING_VERTICAL_LINE=16,na.SELECTING_SHAPE=17,na.DRAWING_BUILD_BOX=18,na.NEW_CANNON=19,a("7qcjp");js=a("4Y6fG");var oa=a("7qcjp");Qs=a("f6Kro"),Xs=a("8TYxR");class aa extends Xs.Container{set disabled(t){if(this._disabled=t,this._disabled){const t=new oa.filters.ColorMatrixFilter;t.brightness(.5,!0),this.interactive=!1,this.alpha=.7,this.filters=[t]}else this.interactive=!0,this.alpha=1,this.filters=[]}get disabled(){return this._disabled}constructor(t,e,i,s,r,n,o,a=null,h=!1,l=!1){super(),this.sCheckbox=null,this.buttonOffset=!1,this.depressed=!1,this.label=null,this.background=null,this._disabled=!1,o==aa.PURPLE?(this.upTexture=aa.purpleButtonBase(),this.overTexture=aa.purpleButtonRoll(),this.downTexture=aa.purpleButtonClick()):o==aa.RED?(this.upTexture=aa.redButtonBase(),this.overTexture=aa.redButtonRoll(),this.downTexture=aa.redButtonClick()):o==aa.BLUE?(this.upTexture=aa.blueButtonBase(),this.overTexture=aa.blueButtonRoll(),this.downTexture=aa.blueButtonClick()):o==aa.PINK?(this.upTexture=aa.pinkButtonBase(),this.overTexture=aa.pinkButtonRoll(),this.downTexture=aa.pinkButtonClick()):o==aa.ORANGE?(this.upTexture=aa.orangeButtonBase(),this.overTexture=aa.orangeButtonRoll(),this.downTexture=aa.orangeButtonClick()):o==aa.PLAY?(this.upTexture=aa.playButtonBase(),this.overTexture=aa.playButtonRoll(),this.downTexture=aa.playButtonClick()):o==aa.X&&(this.upTexture=aa.xButtonBase(),this.overTexture=aa.xButtonRoll(),this.downTexture=aa.xButtonClick()),a||((a=new js.TextStyle).fontSize=11),a.fill="#573D40",a.fontFamily=Sa.GLOBAL_FONT,a.align="center",this.width=s,this.height=r,this.position.set(e,i),this.buttonMode=!0,this.interactive=!0,this.background=new Qs.Sprite(this.upTexture),this.background.width=s,this.background.height=r,this.addChild(this.background),this.label=new js.Text(t),this.label.style=a,this.label.anchor.set(.5),this.label.x=s/2,this.label.y=r/2,this.addChild(this.label),this.on("click",(t=>{this.disabled||n(t)})).on("tap",(t=>{this.disabled||n(t)})).on("mousedown",this.bDown).on("mouseover",this.mouseOver).on("mouseout",this.bUp).on("click",this.bUp).on("click",this.mouseClick),h&&(this.sCheckbox=l?new Qs.Sprite(sa.cLevelSelectLevelCheckBoxB):new Qs.Sprite(sa.cLevelSelectLevelCheckBoxA),this.sCheckbox.x=110,this.sCheckbox.y=12,this.sCheckbox.smoothing=!0,this.addChild(this.sCheckbox))}SetState(t){t?(this.buttonOffset||(this.x+=2,this.y+=2,this.buttonOffset=!0),this.depressed=!0,this.background.texture=this.downTexture):(this.buttonOffset&&(this.x-=2,this.y-=2,this.buttonOffset=!1),this.depressed=!1,this.background.texture=this.upTexture)}bDown(){this.disabled||(this.buttonOffset||(this.x+=2,this.y+=2,this.buttonOffset=!0),this.background.texture=this.downTexture)}bUp(){this.disabled||(this.buttonOffset&&(this.x-=2,this.y-=2,this.buttonOffset=!1),this.background.texture=this.upTexture)}mouseOver(){this.disabled||(Sa.enableSound&&aa.lastRolloverFrame!=Math.floor(Date.now()/150)&&(aa.rolloverSound.stop(),aa.rolloverSound.volume=.2,aa.rolloverSound.play(),aa.lastRolloverFrame=Math.floor(Date.now()/150)),this.background.texture=this.overTexture)}mouseClick(){this.disabled||Sa.enableSound&&(aa.clickSound.volume=.8,aa.clickSound.play())}static redButtonBase(){return sa.cGuiButtonRedBase}static redButtonRoll(){return sa.cGuiButtonRedRoll}static redButtonClick(){return sa.cGuiButtonRedClick}static blueButtonBase(){return sa.cGuiButtonBlueBase}static blueButtonRoll(){return sa.cGuiButtonBlueRoll}static blueButtonClick(){return sa.cGuiButtonBlueClick}static purpleButtonBase(){return sa.cGuiButtonPurpleBase}static purpleButtonRoll(){return sa.cGuiButtonPurpleRoll}static purpleButtonClick(){return sa.cGuiButtonPurpleClick}static pinkButtonBase(){return sa.cGuiButtonPinkBase}static pinkButtonRoll(){return sa.cGuiButtonPinkRoll}static pinkButtonClick(){return sa.cGuiButtonPinkClick}static orangeButtonBase(){return sa.cGuiButtonOrangeBase}static orangeButtonRoll(){return sa.cGuiButtonOrangeRoll}static orangeButtonClick(){return sa.cGuiButtonOrangeClick}static playButtonBase(){return sa.cGuiButtonPlayBase}static playButtonRoll(){return sa.cGuiButtonPlayRoll}static playButtonClick(){return sa.cGuiButtonPlayClick}static xButtonBase(){return sa.cGuiButtonXBase}static xButtonRoll(){return sa.cGuiButtonXRoll}static xButtonClick(){return sa.cGuiButtonXClick}}aa.PURPLE=0,aa.RED=1,aa.BLUE=2,aa.PINK=3,aa.ORANGE=4,aa.PLAY=5,aa.X=6,aa.rolloverSound=sa.cRoll,aa.clickSound=sa.cClick,aa.lastRolloverFrame=0,a("7qcjp");js=a("4Y6fG"),$s=a("kpTES"),Qs=a("f6Kro");class ha extends $s.Graphics{set label(t){this._label.text=t}get label(){return this._label.text}set style(t){this._style=t,this.disabled||(this._label.style=t)}get style(){return this._style}set disabledStyle(t){this._disabledStyle=t,this.disabled&&(this._label.style=t)}get disabledStyle(){return this._disabledStyle}set selected(t){this._selected=t,this.updateIcon()}get selected(){return this._selected}set disabled(t){this._disabled=t,this._label.style=this._disabled?this._disabledStyle:this._style,this.updateIcon()}get disabled(){return this._disabled}constructor(t,e,i){super(),this.enabled=!0,this.focusEnabled=!0,this._selected=!1,this._disabled=!1,this._mouseOver=!1,this._mouseDown=!1,this._style=new js.TextStyle,this._disabledStyle=new js.TextStyle;this.buttonMode=!0,this.interactive=!0,this.x=t,this.y=e,this._icon=new Qs.Sprite,this._icon.x=5,this._icon.y=0,this._label=new js.Text(""),this._label.anchor.set(0,.5),this._label.x=32,this._label.y=12,this.textures={upIcon:sa.cGuiCheckboxABase,overIcon:sa.cGuiCheckboxARoll,downIcon:sa.cGuiCheckboxAClick,disabledIcon:sa.cGuiCheckboxADisabled,selectedUpIcon:sa.cGuiCheckboxBBase,selectedOverIcon:sa.cGuiCheckboxBRoll,selectedDownIcon:sa.cGuiCheckboxBClick,selectedDisabledIcon:sa.cGuiCheckboxBDisabled},this._icon.texture=this.selected?this.textures.selectedUpIcon:this.textures.upIcon,this.beginFill(16777215,.01),this.drawRect(0,0,i,22),this.endFill(),this.addChild(this._icon),this.addChild(this._label),this.on("click",(t=>this.mouseClick(t))),this.on("mouseover",(()=>{this._mouseOver=!0,this.updateIcon()})),this.on("mouseout",(()=>{this._mouseOver=!1,this.updateIcon()})),this.on("mousedown",(()=>{this._mouseDown=!0,this.updateIcon()})),this.on("mouseup",(()=>{this._mouseDown=!1,this.updateIcon()}))}async load(){}mouseClick(t){this.disabled||(this.toggle(),Sa.enableSound&&ha.clickSound.play(),this.emit("change",this.selected))}toggle(){this.selected=!this.selected,this.updateIcon()}updateIcon(){let t="Up";this._mouseOver&&(t="Over"),this._mouseDown&&(t="Down"),this._disabled&&(t="Disabled"),this._icon.texture=this.selected?this.textures[`selected${t}Icon`]:this.textures[`${t.toLowerCase()}Icon`]}}ha.clickSound=sa.cClick,a("7qcjp");Xs=a("8TYxR"),$s=a("kpTES");class la extends Xs.Container{set value(t){this._value=t,this.handleValueChange(t)}get value(){return this._value}set enabled(t){this._enabled=t,this.handleEnabledChange(t)}get enabled(){return this._enabled}constructor(){super(),this._enabled=!0,this.minValue=0,this.maxValue=30,this._value=0,this._dragging=!1,this.track=new $s.Graphics,this.track.interactive=!0,this.track.buttonMode=!0,this.thumb=new $s.Graphics,this.thumb.interactive=!0,this.thumb.buttonMode=!0,this.thumb.clear(),this.thumb.beginTextureFill({texture:sa.cGuiSliderThumb}),this.thumb.drawRect(0,0,16,15),this.thumb.endFill(),this.track.on("pointerdown",(t=>{this.handlePositionChange(t.data.getLocalPosition(this.track.parent))})),this.thumb.on("pointerdown",(t=>{this._data=t.data,this._dragging=!0})),this.thumb.on("pointerup",(()=>{this._data=null,this._dragging=!0})),this.thumb.on("pointerupoutside",(()=>{this._data=null,this._dragging=!0})),this.thumb.on("pointermove",(()=>{if(!this._dragging||!this._data)return;const t=this._data.getLocalPosition(this.track.parent);this.handlePositionChange(t)})),this.addChild(this.track),this.addChild(this.thumb),this.enabled=!0,this.handleEnabledChange(this.enabled),this.handleValueChange(this._value)}handleEnabledChange(t){this.interactive=t,this.track.interactive=t,this.thumb.interactive=t,this.thumb.alpha=t?1:.5,this.track.clear(),this.track.beginTextureFill({texture:t?sa.cGuiSliderGroove:sa.cGuiSliderGrooveDisabled}),this.track.drawRect(0,0,80,16),this.track.endFill()}handlePositionChange(t){const e=this.track.width-this.thumb.width,i=t.x-this.thumb.width/2,s=i/(this.track.width-this.thumb.width);this.thumb.x=i,this.thumb.x>e&&(this.thumb.x=e),this.thumb.x<0&&(this.thumb.x=0),this._value=+(s*this.maxValue-this.minValue).toFixed(0),this._value<this.minValue&&(this._value=this.minValue),this._value>this.maxValue&&(this._value=this.maxValue),this.emit("change",this._value)}handleValueChange(t){const e=this.maxValue-this.minValue,i=(t-this.minValue)*((this.track.width-this.thumb.width)/e);this.thumb.x=i}}a("7qcjp");var ca=a("VYQOJ");$s=a("kpTES");class da extends $s.Graphics{constructor(t,e,i,s,r=!0){var n;if(super(),this.x=t,this.y=e,this.interactive=!0,this.lineStyle(0,0,0),800==i)this.beginTextureFill({texture:sa.cGuiWindowMid800}),this.drawRect(17,0,i-34,s),this.endFill(),this.beginTextureFill({texture:sa.cGuiWindowRight800}),this.drawRect(i-17,0,17,s),this.endFill(),(n=new ca.Matrix).translate(-1,0),this.beginTextureFill({texture:sa.cGuiWindowLeft800,matrix:n}),this.drawRect(-1,0,18,s),this.endFill();else if(720==i)this.beginTextureFill({texture:sa.cGuiWindowMid700}),this.drawRect(24,0,i-48,s),this.endFill(),this.beginTextureFill({texture:sa.cGuiWindowRight700}),this.drawRect(i-24,0,24,s),this.endFill(),this.beginTextureFill({texture:sa.cGuiWindowLeft700}),this.drawRect(0,0,24,s),this.endFill(),(n=new ca.Matrix).translate(12,287),this.beginTextureFill({texture:sa.cGuiWindowLine,matrix:n}),this.drawRect(12,287,684,6),this.endFill(),(n=new ca.Matrix).translate(53,20),this.beginTextureFill({texture:sa.cGuiWindowLinebox,matrix:n}),this.drawRect(53,20,602,80),this.endFill(),(n=new ca.Matrix).translate(53,315),this.beginTextureFill({texture:sa.cGuiWindowLinebox,matrix:n}),this.drawRect(53,313,602,80),this.endFill();else if(600==i||312==i)this.beginTextureFill({texture:sa.cGuiWindowMid600}),this.drawRect(24,0,i-48,s),this.endFill(),this.beginTextureFill({texture:sa.cGuiWindowRight600}),this.drawRect(i-24,0,24,s),this.endFill(),this.beginTextureFill({texture:sa.cGuiWindowLeft600}),this.drawRect(0,0,24,s),this.endFill(),r&&312==i&&((n=new ca.Matrix).translate(12,287),this.beginTextureFill({texture:sa.cGuiWindowLine,matrix:n}),this.drawRect(12,275,274,6),this.endFill());else{var o,a,h;120==i?(o=sa.cGuiWindowTop120,a=sa.cGuiWindowMid120,h=sa.cGuiWindowBottom120):154==i?(o=sa.cGuiWindowTop154,a=sa.cGuiWindowMid154,h=sa.cGuiWindowBottom154):200==i?(o=sa.cGuiWindowTop200,a=sa.cGuiWindowMid200,h=sa.cGuiWindowBottom200):248==i?(o=sa.cGuiWindowTop248,a=sa.cGuiWindowMid248,h=sa.cGuiWindowBottom248):(o=sa.cGuiWindowTop547,a=sa.cGuiWindowMid547,h=sa.cGuiWindowBottom547),this.beginTextureFill({texture:a}),this.drawRect(-1,15,i+10,s-30),this.endFill(),this.beginTextureFill({texture:o}),this.drawRect(-1,0,i+10,15),this.endFill(),(n=new ca.Matrix).translate(0,s-15),this.beginTextureFill({texture:h,matrix:n}),this.drawRect(-1,s-15,i+10,24),this.endFill()}this.fader=new $s.Graphics,this.fader.beginFill(0,1),this.fader.lineStyle(0,0,1),this.fader.moveTo(0,0),this.fader.lineTo(i-1,0),this.fader.lineTo(i-1,s-1),this.fader.lineTo(0,s-1),this.fader.lineTo(0,0),this.fader.endFill(),this.fader.visible=!1,this.fader.interactive=!0,this.fader.buttonMode=!0,this.addChild(this.fader)}MouseOver(t,e){return this.visible&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}ShowFader(){this.fader.visible=!0}HideFader(){this.fader.visible=!1}}a("7qcjp");js=a("4Y6fG"),Qs=a("f6Kro"),$s=a("kpTES"),Xs=a("8TYxR");const ua=[];class pa extends Xs.Container{set selectedIndex(t){this._selectedIndex=t,this.itemsWidgets.forEach(((t,e)=>{e===this._selectedIndex?(t.selected=!0,this.label.text=t.text):t.selected=!1})),this.menuOpen=!1,this.emit("change",this._selectedIndex)}get selectedIndex(){return this._selectedIndex}set menuOpen(t){this._menuOpen=t,this.zIndex=this._menuOpen?1e3:0,this.itemsContainer.visible=this._menuOpen}get menuOpen(){return this._menuOpen}constructor(t,e,i,s){super(),this.buttonOffset=!1,this.label=new js.Text(""),this.background=new Qs.Sprite,this.itemsTextStyle=null,this._selectedIndex=0,this._menuOpen=!1,this.items=[],this.itemsWidgets=[],this.width=i,this.height=s,this.x=t,this.y=e,ua.push(this),this.upTexture=sa.cGuiComboboxBase,this.overTexture=sa.cGuiComboboxRoll,this.downTexture=sa.cGuiComboboxClick,this.itemsTextStyle=new js.TextStyle,this.itemsTextStyle.fontSize=11,this.itemsTextStyle.fill="#573D40",this.itemsTextStyle.fontFamily=Sa.GLOBAL_FONT,this.itemsTextStyle.align="left",this.width=i,this.height=s,this.position.set(t,e),this.buttonMode=!0,this.interactive=!0,this.background.texture=this.upTexture,this.background.width=i,this.background.height=s,this.addChild(this.background),this.label.text="",this.label.style=this.itemsTextStyle,this.label.anchor.set(0,.5),this.label.x=10,this.label.y=s/2,this.addChild(this.label),this.itemsContainer=new Xs.Container,this.itemsContainer.x=5,this.itemsContainer.width=i-10,this.itemsContainer.height=s,this.itemsContainer.y=s,this.itemsContainer.visible=this._menuOpen,this.addChild(this.itemsContainer),this.itemsContainerBackground=new $s.Graphics,this.itemsContainerBackground.height=s,this.itemsContainerBackground.beginFill(255),this.itemsContainerBackground.drawRect(0,0,i-10,s),this.itemsContainerBackground.endFill(),this.itemsContainer.addChild(this.itemsContainerBackground),this.on("click",(t=>{t.target===this&&(this.openMenu(),Sa.enableSound&&(pa.clickSound.volume=.8,pa.clickSound.play()))})).on("mousedown",(t=>{this.background.texture=this.downTexture,this.buttonOffset||(this.x+=2,this.y+=2,this.buttonOffset=!0)})).on("mouseover",(t=>{this.background.texture=this.overTexture,Sa.enableSound&&(pa.rolloverSound.stop(),pa.rolloverSound.volume=.2,pa.rolloverSound.play())})).on("mouseout",(t=>{this.menuOpen||(this.background.texture=this.upTexture,this.buttonOffset&&(this.x-=2,this.y-=2,this.buttonOffset=!1))})),this.zIndex=0}addItem(t){this.items.push(t),this.label.text=this.items[this.selectedIndex].label,this.itemsContainer.removeChild(...this.itemsWidgets),this.itemsContainerBackground.height=20*this.items.length,this.itemsWidgets=[],this.items.forEach(((t,e)=>{const i=new ma(t.label,0,20*e,this.itemsContainer.width,20);i.on("select",(()=>{this.selectedIndex=e})),this.itemsContainer.addChild(i),this.itemsWidgets.push(i)}))}openMenu(){ua.forEach((t=>{t!==this&&(t.menuOpen=!1)})),this.menuOpen=!this.menuOpen}}pa.rolloverSound=sa.cRoll,pa.clickSound=sa.cClick,a("7qcjp");js=a("4Y6fG"),Qs=a("f6Kro"),Xs=a("8TYxR");class ma extends Xs.Container{set selected(t){this._selected=t,this._selected?this.background.texture=this.downTexture:this.background.texture=this.upTexture}get selected(){return this._selected}set text(t){this._text=t,this.label.text=this._text}get text(){return this._text}constructor(t,e,i,s,r){super(),this.label=new js.Text(""),this.background=new Qs.Sprite,this._selected=!1,this._text="",this.width=s,this.height=r,this.x=e,this.y=i,this.buttonMode=!0,this.interactive=!0,this.text=t,this.upTexture=sa.cGuiListboxBase,this.overTexture=sa.cGuiListboxRoll,this.downTexture=sa.cGuiListboxClick;const n=new js.TextStyle;n.fontSize=11,n.fill="#573D40",n.fontFamily=Sa.GLOBAL_FONT,n.align="left",this.background.texture=this.upTexture,this.background.width=s,this.background.height=r,this.addChild(this.background),this.label.style=n,this.label.anchor.set(0,.5),this.label.x=10,this.label.y=r/2,this.addChild(this.label),this.on("click",(t=>{Sa.enableSound&&(ma.clickSound.stop(),ma.clickSound.volume=.2,ma.clickSound.play()),t.stopPropagation(),this.emit("select",t)})).on("mousedown",(t=>{this.background.texture=this.downTexture})).on("mouseover",(t=>{this.background.texture=this.selected?this.downTexture:this.overTexture,Sa.enableSound&&(ma.rolloverSound.stop(),ma.rolloverSound.volume=.2,ma.rolloverSound.play())})).on("mouseout",(t=>{this.background.texture=this.selected?this.downTexture:this.upTexture}))}}ma.rolloverSound=sa.cRoll,ma.clickSound=sa.cClick,a.register("1R6DB",(function(t,e){!function(t){const e=t.PIXI;class i extends e.Container{constructor(t){super(),this._input_style=Object.assign({position:"absolute",background:"none",border:"none",outline:"none",transformOrigin:"0 0",lineHeight:"1"},t.input),t.box?this._box_generator="function"==typeof t.box?t.box:new s(t.box):this._box_generator=null,this._input_style.hasOwnProperty("multiline")?(this._multiline=!!this._input_style.multiline,delete this._input_style.multiline):this._multiline=!1,this._box_cache={},this._previous={},this._dom_added=!1,this._dom_visible=!0,this._placeholder="",this._placeholderColor=11119017,this._selection=[0,0],this._restrict_value="",this._createDOMInput(),this.substituteText=!0,this._setState("DEFAULT"),this._addListeners()}get substituteText(){return this._substituted}set substituteText(t){this._substituted!=t&&(this._substituted=t,t?(this._createSurrogate(),this._dom_visible=!1):(this._destroySurrogate(),this._dom_visible=!0),this.placeholder=this._placeholder,this._update())}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this._substituted?(this._updateSurrogate(),this._dom_input.placeholder=""):this._dom_input.placeholder=t}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._dom_input.disabled=t,this._setState(t?"DISABLED":"DEFAULT")}get maxLength(){return this._max_length}set maxLength(t){this._max_length=t,this._dom_input.setAttribute("maxlength",t)}get restrict(){return this._restrict_regex}set restrict(t){t instanceof RegExp?("^"!==(t=t.toString().slice(1,-1)).charAt(0)&&(t="^"+t),"$"!==t.charAt(t.length-1)&&(t+="$"),t=new RegExp(t)):t=new RegExp("^["+t+"]*$"),this._restrict_regex=t}get text(){return this._dom_input.value}set text(t){this._dom_input.value=t,this._substituted&&this._updateSurrogate()}get htmlInput(){return this._dom_input}focus(){this._substituted&&!this.dom_visible&&this._setDOMInputVisible(!0),this._dom_input.focus()}blur(){this._dom_input.blur()}select(){this.focus(),this._dom_input.select()}setInputStyle(t,e){this._input_style[t]=e,this._dom_input.style[t]=e,!this._substituted||"fontFamily"!==t&&"fontSize"!==t||this._updateFontMetrics(),this._last_renderer&&this._update()}destroy(t){this._destroyBoxCache(),super.destroy(t)}_createDOMInput(){this._multiline?(this._dom_input=document.createElement("textarea"),this._dom_input.style.resize="none"):(this._dom_input=document.createElement("input"),this._dom_input.type="text");for(let t in this._input_style)this._dom_input.style[t]=this._input_style[t]}_addListeners(){this.on("added",this._onAdded.bind(this)),this.on("removed",this._onRemoved.bind(this)),this._dom_input.addEventListener("keydown",this._onInputKeyDown.bind(this)),this._dom_input.addEventListener("input",this._onInputInput.bind(this)),this._dom_input.addEventListener("keyup",this._onInputKeyUp.bind(this)),this._dom_input.addEventListener("focus",this._onFocused.bind(this)),this._dom_input.addEventListener("blur",this._onBlurred.bind(this))}_onInputKeyDown(t){this._selection=[this._dom_input.selectionStart,this._dom_input.selectionEnd],this.emit("keydown",t.keyCode)}_onInputInput(t){this._restrict_regex&&this._applyRestriction(),this._substituted&&this._updateSubstitution(),this.emit("input",this.text)}_onInputKeyUp(t){this.emit("keyup",t.keyCode)}_onFocused(){this._setState("FOCUSED"),this.emit("focus")}_onBlurred(){this._setState("DEFAULT"),this.emit("blur")}_onAdded(){document.body.appendChild(this._dom_input),this._dom_input.style.display="none",this._dom_added=!0}_onRemoved(){document.body.removeChild(this._dom_input),this._dom_added=!1}_setState(t){this.state=t,this._updateBox(),this._substituted&&this._updateSubstitution()}renderWebGL(t){super.renderWebGL(t),this._renderInternal(t)}renderCanvas(t){super.renderCanvas(t),this._renderInternal(t)}render(t){super.render(t),this._renderInternal(t)}_renderInternal(t){this._resolution=t.resolution,this._last_renderer=t,this._canvas_bounds=this._getCanvasBounds(),this._needsUpdate()&&this._update()}_update(){this._updateDOMInput(),this._substituted&&this._updateSurrogate(),this._updateBox()}_updateBox(){this._box_generator&&(this._needsNewBoxCache()&&this._buildBoxCache(),this.state==this._previous.state&&this._box==this._box_cache[this.state]||(this._box&&this.removeChild(this._box),this._box=this._box_cache[this.state],this.addChildAt(this._box,0),this._previous.state=this.state))}_updateSubstitution(){"FOCUSED"===this.state?(this._dom_visible=!0,this._surrogate.visible=0===this.text.length):(this._dom_visible=!1,this._surrogate.visible=!0),this._updateDOMInput(),this._updateSurrogate()}_updateDOMInput(){this._canvas_bounds&&(this._dom_input.style.top=(this._canvas_bounds.top||0)+"px",this._dom_input.style.left=(this._canvas_bounds.left||0)+"px",this._dom_input.style.transform=this._pixiMatrixToCSS(this._getDOMRelativeWorldTransform()),this._dom_input.style.opacity=this.worldAlpha,this._setDOMInputVisible(this.worldVisible&&this._dom_visible),this._previous.canvas_bounds=this._canvas_bounds,this._previous.world_transform=this.worldTransform.clone(),this._previous.world_alpha=this.worldAlpha,this._previous.world_visible=this.worldVisible)}_applyRestriction(){this._restrict_regex.test(this.text)?this._restrict_value=this.text:(this.text=this._restrict_value,this._dom_input.setSelectionRange(this._selection[0],this._selection[1]))}_needsUpdate(){return!this._comparePixiMatrices(this.worldTransform,this._previous.world_transform)||!this._compareClientRects(this._canvas_bounds,this._previous.canvas_bounds)||this.worldAlpha!=this._previous.world_alpha||this.worldVisible!=this._previous.world_visible}_needsNewBoxCache(){let t=this._getDOMInputBounds();return!this._previous.input_bounds||t.width!=this._previous.input_bounds.width||t.height!=this._previous.input_bounds.height}_createSurrogate(){this._surrogate_hitbox=new e.Graphics,this._surrogate_hitbox.alpha=0,this._surrogate_hitbox.interactive=!0,this._surrogate_hitbox.cursor="text",this._surrogate_hitbox.on("pointerdown",this._onSurrogateFocus.bind(this)),this.addChild(this._surrogate_hitbox),this._surrogate_mask=new e.Graphics,this.addChild(this._surrogate_mask),this._surrogate=new e.Text("",{}),this.addChild(this._surrogate),this._surrogate.mask=this._surrogate_mask,this._updateFontMetrics(),this._updateSurrogate()}_updateSurrogate(){let t=this._deriveSurrogatePadding(),e=this._getDOMInputBounds();switch(this._surrogate.style=this._deriveSurrogateStyle(),this._surrogate.style.padding=Math.max.apply(Math,t),this._surrogate.y=this._multiline?t[0]:(e.height-this._surrogate.height)/2,this._surrogate.x=t[3],this._surrogate.text=this._deriveSurrogateText(),this._surrogate.style.align){case"left":this._surrogate.x=t[3];break;case"center":this._surrogate.x=.5*e.width-.5*this._surrogate.width;break;case"right":this._surrogate.x=e.width-t[1]-this._surrogate.width}this._updateSurrogateHitbox(e),this._updateSurrogateMask(e,t)}_updateSurrogateHitbox(t){this._surrogate_hitbox.clear(),this._surrogate_hitbox.beginFill(0),this._surrogate_hitbox.drawRect(0,0,t.width,t.height),this._surrogate_hitbox.endFill(),this._surrogate_hitbox.interactive=!this._disabled}_updateSurrogateMask(t,e){this._surrogate_mask.clear(),this._surrogate_mask.beginFill(0),this._surrogate_mask.drawRect(e[3],0,t.width-e[3]-e[1],t.height),this._surrogate_mask.endFill()}_destroySurrogate(){this._surrogate&&(this.removeChild(this._surrogate),this.removeChild(this._surrogate_hitbox),this._surrogate.destroy(),this._surrogate_hitbox.destroy(),this._surrogate=null,this._surrogate_hitbox=null)}_onSurrogateFocus(){this._setDOMInputVisible(!0),setTimeout(this._ensureFocus.bind(this),10)}_ensureFocus(){this._hasFocus()||this.focus()}_deriveSurrogateStyle(){let t=new e.TextStyle;for(var i in this._input_style)switch(i){case"color":t.fill=this._input_style.color;break;case"fontFamily":case"fontSize":case"fontWeight":case"fontVariant":case"fontStyle":t[i]=this._input_style[i];break;case"letterSpacing":t.letterSpacing=parseFloat(this._input_style.letterSpacing);break;case"textAlign":t.align=this._input_style.textAlign}return this._multiline&&(t.lineHeight=parseFloat(t.fontSize),t.wordWrap=!0,t.wordWrapWidth=this._getDOMInputBounds().width),0===this._dom_input.value.length&&(t.fill=this._placeholderColor),t}_deriveSurrogatePadding(){let t=this._input_style.textIndent?parseFloat(this._input_style.textIndent):0;if(this._input_style.padding&&this._input_style.padding.length>0){let e=this._input_style.padding.trim().split(" ");if(1==e.length){let i=parseFloat(e[0]);return[i,i,i,i+t]}if(2==e.length){let i=parseFloat(e[0]),s=parseFloat(e[1]);return[i,s,i,s+t]}if(4==e.length){let i=e.map((t=>parseFloat(t)));return i[3]+=t,i}}return[0,0,0,t]}_deriveSurrogateText(){return 0===this._dom_input.value.length?this._placeholder:"password"==this._dom_input.type?"•".repeat(this._dom_input.value.length):this._dom_input.value}_updateFontMetrics(){const t=this._deriveSurrogateStyle().toFontString();this._font_metrics=e.TextMetrics.measureFont(t)}_buildBoxCache(){this._destroyBoxCache();let t=["DEFAULT","FOCUSED","DISABLED"],e=this._getDOMInputBounds();for(let i in t)this._box_cache[t[i]]=this._box_generator(e.width,e.height,t[i]);this._previous.input_bounds=e}_destroyBoxCache(){this._box&&(this.removeChild(this._box),this._box=null);for(let t in this._box_cache)this._box_cache[t].destroy(),this._box_cache[t]=null,delete this._box_cache[t]}_hasFocus(){return document.activeElement===this._dom_input}_setDOMInputVisible(t){this._dom_input.style.display=t?"block":"none"}_getCanvasBounds(){let t=this._last_renderer.view.getBoundingClientRect(),e={top:t.top,left:t.left,width:t.width,height:t.height};return e.left+=window.scrollX,e.top+=window.scrollY,e}_getDOMInputBounds(){let t=!1;this._dom_added||(document.body.appendChild(this._dom_input),t=!0);let e=this._dom_input.style.transform,i=this._dom_input.style.display;this._dom_input.style.transform="",this._dom_input.style.display="block";let s=this._dom_input.getBoundingClientRect();return this._dom_input.style.transform=e,this._dom_input.style.display=i,t&&document.body.removeChild(this._dom_input),s}_getDOMRelativeWorldTransform(){let t=this._last_renderer.view.getBoundingClientRect(),e=this.worldTransform.clone();return e.scale(this._resolution,this._resolution),e.scale(t.width/this._last_renderer.width,t.height/this._last_renderer.height),e}_pixiMatrixToCSS(t){return"matrix("+[t.a,t.b,t.c,t.d,t.tx,t.ty].join(",")+")"}_comparePixiMatrices(t,e){return!(!t||!e)&&(t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d&&t.tx==e.tx&&t.ty==e.ty)}_compareClientRects(t,e){return!(!t||!e)&&(t.left==e.left&&t.top==e.top&&t.width==e.width&&t.height==e.height)}}function s(t){if((t=t||{fill:13421772}).default)t.focused=t.focused||t.default,t.disabled=t.disabled||t.default;else{let e=t;(t={}).default=t.focused=t.disabled=e}return function(i,s,r){let n=t[r.toLowerCase()],o=new e.Graphics;return n.fill&&o.beginFill(n.fill),n.stroke&&o.lineStyle(n.stroke.width||1,n.stroke.color||0,n.stroke.alpha||1),n.rounded?o.drawRoundedRect(0,0,i,s,n.rounded):o.drawRect(0,0,i,s),o.endFill(),o.closePath(),o}}t.exportTo[0][t.exportTo[1]]=i}("object"==typeof PIXI?{PIXI:PIXI,exportTo:[PIXI,"TextInput"]}:{PIXI:a("7qcjp"),exportTo:[t,"exports"]})}));var fa=a("1R6DB");a("7qcjp");js=a("4Y6fG"),Xs=a("8TYxR"),Qs=a("f6Kro");const _a=[];class ga extends Xs.Container{set maxLength(t){this.textInput.maxLength=t||0}get maxLength(){return this.textInput.maxLength}get enabled(){return!this.textInput.disabled}set enabled(t){this.textInput.disabled=!t}get editable(){return!this.textInput.disabled}set editable(t){this.textInput.disabled=!t}get text(){return this.textInput.text}set text(t){this.textInput.text=t}constructor(t,e,i,r,n=null){super(),this.x=t,this.y=e,_a.push(this),this.baseSkin=sa.cGuiTextAreaBase,this.rollSkin=sa.cGuiTextAreaRoll,this.disabledSkin=sa.cGuiTextAreaDisabled,n||(n=new js.TextStyle),n.fontFamily=Sa.GLOBAL_FONT,n.fill="#4C3D57",this.textInput=new(s(fa))({input:{fontSize:`${n.fontSize}pt`,color:n.fill,zIndex:1e3,width:`${i}px`,height:`${r}px`},box:(t,e,i)=>{const s=new Qs.Sprite;return s.texture=this.baseSkin,s.width=t,s.height=e,"DEFAULT"===i&&(s.texture=this.baseSkin),"FOCUSED"===i&&(s.texture=this.rollSkin),"DISABLED"===i&&(s.texture=this.disabledSkin),s}}),this.textInput.on("click",(t=>{this.emit("click",t)})),this.textInput.on("focus",(t=>{this.emit("focus",this.textInput.text)})),this.textInput.on("blur",(t=>{this.emit("blur",this.textInput.text)})),this.textInput.on("input",(t=>{this.emit("change",t),this.text=t})),this.textInput.on("keydown",(t=>{this.emit("keydown",this,t)})),this.textInput.on("keyup",(t=>{this.emit("keyup",this,t)})),this.addChild(this.textInput)}setSelection(t,e){this.textInput.htmlInput.setSelectionRange(t,e)}}fa=a("1R6DB");a("7qcjp");js=a("4Y6fG"),Xs=a("8TYxR"),Qs=a("f6Kro");class ba extends Xs.Container{constructor(t,e,i,r,n=null){super(),this.text="",this.x=t,this.y=e,this.baseSkin=sa.cGuiTextAreaBase,this.rollSkin=sa.cGuiTextAreaRoll,n||(n=new js.TextStyle),n.fontFamily=Sa.GLOBAL_FONT,n.fill="#4C3D57";const o=new Xs.Container,a=new Qs.Sprite(this.baseSkin);a.width=i,a.height=r,o.addChild(a),this.textInput=new(s(fa))({input:{multiline:!0,fontSize:`${n.fontSize}pt`,color:n.fill,zIndex:1e3,width:i-20+"px",height:r-20+"px",padding:"10px"},box:(t,e,i)=>{const s=new Qs.Sprite;return s.texture=this.baseSkin,s.width=t,s.height=e,"DEFAULT"===i&&(s.texture=this.baseSkin),"FOCUSED"===i&&(s.texture=this.rollSkin),"DISABLED"===i&&(s.texture=this.baseSkin),s}}),this.textInput.on("input",(t=>{this.text=t,this.emit("change",t)})),this.textInput.on("focus",(()=>{this.emit("focus")})),this.textInput.on("blur",(()=>{this.emit("blur")})),this.addChild(this.textInput)}get editable(){return!this.textInput.disabled}set editable(t){this.textInput.disabled=!t}}a("7qcjp");js=a("4Y6fG"),$s=a("kpTES");class ya extends $s.Graphics{constructor(t,e,i){super();const s=i;this.interactive=!0,this.text=new js.Text(t),this.text.anchor.set(.5),this.text.x=e+s/2,this.text.y=10.5,this.addChild(this.text),this.beginFill(16777215,.01),this.drawRect(e,0,s,21),this.endFill()}set style(t){this.text.style=t}get style(){return this.text.style}}class wa extends $s.Graphics{constructor(t){super(),this.mouseDown=!1,this.cont=t,this.m_currentMenu=null,this.interactive=!0,this.menuBitmap=sa.cGuiMenuBar,this.menuBitmapRoll=sa.cGuiMenuBarRoll,this.beginTextureFill({texture:this.menuBitmap}),this.drawRect(0,0,800,21);const e=new js.TextStyle;e.fontFamily=Sa.GLOBAL_FONT,e.align="center",e.fill="#E1E1EA",e.fontSize=12,e.dropShadow=!0,e.dropShadowColor="#343550",e.dropShadowDistance=1,this.fileText=new ya("File",0,40),this.fileText.interactive=!0,this.fileText.style=e,this.fileText.on("mousedown",(t=>this.file(t))),this.fileText.on("mouseover",(t=>this.maybeFile(t))),this.fileText.on("mouseout",(t=>this.noFile(t))),this.addChild(this.fileText),this.editText=new ya("Edit",40,40),this.editText.interactive=!0,this.editText.style=e,this.editText.on("mousedown",(t=>this.edit(t))),this.editText.on("mouseover",(t=>this.maybeEdit(t))),this.editText.on("mouseout",(t=>this.noEdit(t))),this.addChild(this.editText),this.viewText=new ya("View",80,40),this.viewText.interactive=!0,this.viewText.style=e,this.viewText.on("mousedown",(t=>this.view(t))),this.viewText.on("mouseover",(t=>this.maybeView(t))),this.viewText.on("mouseout",(t=>this.noView(t))),this.addChild(this.viewText),this.commentText=new ya("Share!",120,60),this.commentText.interactive=!0,this.commentText.style=e,this.commentText.on("mousedown",(t=>this.comment(t))),this.commentText.on("mouseover",(t=>this.maybeComment(t))),this.commentText.on("mouseout",(t=>this.noComment(t))),this.addChild(this.commentText),this.helpText=new ya("Help",180,45),this.helpText.interactive=!0,this.helpText.style=e,this.helpText.on("mousedown",(t=>this.help(t))),this.helpText.on("mouseover",(t=>this.maybeHelp(t))),this.helpText.on("mouseout",(t=>this.noHelp(t))),this.addChild(this.helpText),this.aboutText=new ya("About",750,50),this.aboutText.interactive=!0,this.aboutText.style=e,this.aboutText.on("mousedown",(t=>this.about(t))),this.aboutText.on("mouseover",(t=>this.maybeAbout(t))),this.aboutText.on("mouseout",(t=>this.noAbout(t))),this.addChild(this.aboutText),this.extrasText=new ya("Extras",225,50),this.extrasText.interactive=!0,this.extrasText.style=e,this.extrasText.on("mousedown",(t=>this.extras(t))),this.extrasText.on("mouseover",(t=>this.maybeExtras(t))),this.extrasText.on("mouseout",(t=>this.noExtras(t))),this.addChild(this.extrasText)}Update(){}MouseClick(t,e,i){!(i>20)||this.m_currentMenu&&this.MouseOverMenu(e,i)||this.HideAll()}BuildFileMenu(){this.m_currentMenu&&this.removeChild(this.m_currentMenu),this.m_currentMenu=new $s.Graphics,this.m_currentMenu.interactive=!0,this.m_currentMenu.x=0,this.m_currentMenu.y=20,this.m_currentMenu.beginFill(16644586,1),this.m_currentMenu.lineStyle(1,4404847),this.m_currentMenu.moveTo(0,0),this.m_currentMenu.drawRect(0,0,155,200);var t=new va(this,"Main Menu",155,(()=>this.cont.newButton()));t.y=0,this.m_currentMenu.addChild(t),(t=new va(this,"Save...",155,(()=>this.cont.saveButton()))).y=20,this.m_currentMenu.addChild(t),(t=new va(this,"Load Robot",155,(()=>this.cont.loadRobotButton()))).y=40,this.m_currentMenu.addChild(t),(t=new va(this,"Load And Insert",155,(()=>this.cont.loadAndInsertButton()))).y=60,this.m_currentMenu.addChild(t),(t=new va(this,"Load Replay",155,(()=>this.cont.loadReplayButton()))).y=80,this.m_currentMenu.addChild(t),(t=new va(this,"Load Challenge",155,(()=>this.cont.loadChallengeButton()))).y=100,this.m_currentMenu.addChild(t),(t=new va(this,"Log In",155,(()=>this.cont.loginButton()))).y=120,this.m_currentMenu.addChild(t),(t=new va(this,"View High Scores",155,(()=>this.cont.highScoresButton()))).y=140,this.m_currentMenu.addChild(t),(t=new va(this,"Report As Inappropriate",155,(()=>this.cont.reportButton()))).y=160,this.m_currentMenu.addChild(t),(t=new va(this,Sa.enableSound?"Disable Sound":"Enable Sound",155,(()=>this.soundButton()))).y=180,this.m_currentMenu.addChild(t),this.addChild(this.m_currentMenu)}BuildEditMenu(){this.m_currentMenu&&this.removeChild(this.m_currentMenu),this.m_currentMenu=new $s.Graphics,this.m_currentMenu.interactive=!0,this.m_currentMenu.x=40,this.m_currentMenu.y=20,this.m_currentMenu.beginFill(16644586,1),this.m_currentMenu.lineStyle(1,4404847),this.m_currentMenu.moveTo(0,0),this.m_currentMenu.drawRect(0,0,120,200);var t=new va(this,"Change Settings",120,(()=>this.cont.sandboxSettingsButton()));t.y=0,this.m_currentMenu.addChild(t),(t=new va(this,"Clear All",120,(()=>this.cont.clearButton()))).y=20,this.m_currentMenu.addChild(t),(t=new va(this,"Undo",120,(()=>this.cont.undoButton()))).y=40,this.m_currentMenu.addChild(t),(t=new va(this,"Redo",120,(()=>this.cont.redoButton()))).y=60,this.m_currentMenu.addChild(t),(t=new va(this,"Cut",120,(()=>this.cont.cutButton()))).y=80,this.m_currentMenu.addChild(t),(t=new va(this,"Copy",120,(()=>this.cont.copyButton()))).y=100,this.m_currentMenu.addChild(t),(t=new va(this,"Paste",120,(()=>this.pasteButton()))).y=120,this.m_currentMenu.addChild(t),(t=new va(this,"Delete",120,(()=>this.cont.deleteButton()))).y=140,this.m_currentMenu.addChild(t),(t=new va(this,"Move to Front",120,(()=>this.cont.frontButton()))).y=160,this.m_currentMenu.addChild(t),(t=new va(this,"Move to Back",120,(()=>this.cont.backButton()))).y=180,this.m_currentMenu.addChild(t),this.addChild(this.m_currentMenu)}BuildViewMenu(){this.m_currentMenu&&this.removeChild(this.m_currentMenu),this.m_currentMenu=new $s.Graphics,this.m_currentMenu.interactive=!0,this.m_currentMenu.x=80,this.m_currentMenu.y=21,this.m_currentMenu.beginFill(16644586,1),this.m_currentMenu.lineStyle(1,4404847),this.m_currentMenu.moveTo(0,0),this.m_currentMenu.drawRect(0,0,140,140);var t=new va(this,"Zoom In",140,(()=>this.cont.zoomInButton()));t.y=0,this.m_currentMenu.addChild(t),(t=new va(this,"Zoom Out",140,(()=>this.cont.zoomOutButton()))).y=20,this.m_currentMenu.addChild(t),(t=new va(this,"Snap to Center",140,(()=>this.cont.centerBox()),!0,na.snapToCenter)).y=40,this.m_currentMenu.addChild(t),(t=new va(this,"Show Joints",140,(()=>this.cont.jointBox()),!0,na.showJoints)).y=60,this.m_currentMenu.addChild(t),(t=new va(this,"Show Colors",140,(()=>this.cont.colourBox()),!0,na.showColours)).y=80,this.m_currentMenu.addChild(t),(t=new va(this,"Show Outlines",140,(()=>this.cont.globalOutlineBox()),!0,na.showOutlines)).y=100,this.m_currentMenu.addChild(t),(t=new va(this,"Center on Selection",140,(()=>this.cont.centerOnSelectedBox()),!0,na.centerOnSelected)).y=120,this.m_currentMenu.addChild(t),this.addChild(this.m_currentMenu)}BuildCommentMenu(){if(this.m_currentMenu&&this.removeChild(this.m_currentMenu),this.m_currentMenu=new $s.Graphics,this.m_currentMenu.interactive=!0,this.m_currentMenu.x=120,this.m_currentMenu.y=21,this.m_currentMenu.beginFill(16644586,1),this.m_currentMenu.lineStyle(1,4404847),this.m_currentMenu.moveTo(0,0),this.m_currentMenu.drawRect(0,0,180,60),na.playingReplay){var t=new va(this,"Comment on this Replay",180,(()=>this.cont.commentReplayButton()));t.y=0,this.m_currentMenu.addChild(t),(t=new va(this,"Link to this Replay",180,(()=>this.cont.linkReplayButton()))).y=20,this.m_currentMenu.addChild(t),(t=new va(this,"Embed this Replay",180,(()=>this.cont.embedReplayButton()))).y=40,this.m_currentMenu.addChild(t)}else"challenge"===this.cont.controllerType&&""!=na.curChallengeID&&na.curChallengePublic?((t=new va(this,"Comment on this Challenge",180,(()=>this.cont.commentChallengeButton()))).y=0,this.m_currentMenu.addChild(t),(t=new va(this,"Link to this Challenge",180,(()=>this.cont.linkChallengeButton()))).y=20,this.m_currentMenu.addChild(t),(t=new va(this,"Embed this Challenge",180,(()=>this.cont.embedChallengeButton()))).y=40,this.m_currentMenu.addChild(t)):((t=new va(this,"Comment on this Robot",180,(()=>this.cont.commentButton()))).y=0,this.m_currentMenu.addChild(t),(t=new va(this,"Link to this Robot",180,(()=>this.cont.linkButton()))).y=20,this.m_currentMenu.addChild(t),(t=new va(this,"Embed this Robot",180,(()=>this.cont.embedButton()))).y=40,this.m_currentMenu.addChild(t));this.addChild(this.m_currentMenu)}BuildHelpMenu(){this.m_currentMenu&&this.removeChild(this.m_currentMenu),this.m_currentMenu=new $s.Graphics,this.m_currentMenu.interactive=!0,this.m_currentMenu.x=180,this.m_currentMenu.y=21,this.m_currentMenu.beginFill(16644586,1),this.m_currentMenu.lineStyle(1,4404847),this.m_currentMenu.moveTo(0,0),this.m_currentMenu.drawRect(0,0,115,40);var t=new va(this,"Incredibots Help",115,(()=>this.helpButton()));t.y=0,this.m_currentMenu.addChild(t),(t=new va(this,"Forums",115,(()=>this.forumsButton()))).y=20,this.m_currentMenu.addChild(t),this.addChild(this.m_currentMenu)}BuildAboutMenu(){this.m_currentMenu&&this.removeChild(this.m_currentMenu),this.m_currentMenu=new $s.Graphics,this.m_currentMenu.interactive=!0,this.m_currentMenu.x=670,this.m_currentMenu.y=21,this.m_currentMenu.beginFill(16644586,1),this.m_currentMenu.lineStyle(1,4404847),this.m_currentMenu.moveTo(0,0),this.m_currentMenu.drawRect(0,0,130,40);var t=new va(this,"Credits",130,(()=>this.credits()));t.y=0,this.m_currentMenu.addChild(t),(t=new va(this,"GrubbyGames.com",130,(()=>this.grubby()))).y=20,this.m_currentMenu.addChild(t),this.addChild(this.m_currentMenu)}BuildExtrasMenu(){this.m_currentMenu&&this.removeChild(this.m_currentMenu),this.m_currentMenu=new $s.Graphics,this.m_currentMenu.interactive=!0,this.m_currentMenu.x=225,this.m_currentMenu.y=21,this.m_currentMenu.beginFill(16644586,1),this.m_currentMenu.lineStyle(1,4404847),this.m_currentMenu.moveTo(0,0),this.m_currentMenu.drawRect(0,0,115,"sandbox"===this.cont.controllerType?100:60);var t=new va(this,"Mirror Horizontal",115,(()=>this.mirrorHorizontalButton()));t.y=0,this.m_currentMenu.addChild(t),(t=new va(this,"Mirror Vertical",115,(()=>this.mirrorVerticalButton()))).y=20,this.m_currentMenu.addChild(t),(t=new va(this,"Scale",115,(()=>this.cont.scaleButton()))).y=40,this.m_currentMenu.addChild(t),"sandbox"===this.cont.controllerType&&((t=new va(this,"Thrusters",115,(()=>this.cont.thrustersButton()))).y=60,this.m_currentMenu.addChild(t),(t=new va(this,"Cannon",115,(()=>this.cont.cannonButton()))).y=80,this.m_currentMenu.addChild(t)),this.addChild(this.m_currentMenu)}MouseOverMenu(t,e){return!!this.m_currentMenu&&(this.m_currentMenu&&t>=this.m_currentMenu.x&&t<this.m_currentMenu.x+this.m_currentMenu.width&&e>=this.m_currentMenu.y&&e<this.m_currentMenu.y+this.m_currentMenu.height)}file(t,e=!0){this.mouseDown&&e?(this.noFile(t),this.mouseDown=!1):(this.noEdit(t),this.MakeDummyMenu(),this.noView(t),this.MakeDummyMenu(),this.noComment(t),this.MakeDummyMenu(),this.noHelp(t),this.MakeDummyMenu(),this.noAbout(t),this.MakeDummyMenu(),this.noExtras(t),this.beginTextureFill({texture:this.menuBitmapRoll}),this.drawRect(0,0,40,21),this.BuildFileMenu(),this.mouseDown=!0)}maybeFile(t){this.mouseDown&&this.file(t,!1)}noFile(t){t.target!==this&&t.target!==this.m_currentMenu&&this.m_currentMenu&&!this.MouseOverMenu(t.data.global.x,t.data.global.y)&&(this.beginTextureFill({texture:this.menuBitmap}),this.drawRect(0,0,40,21),this.removeChild(this.m_currentMenu),this.m_currentMenu=null)}edit(t,e=!0){this.mouseDown&&e?(this.noEdit(t),this.mouseDown=!1):(this.noFile(t),this.MakeDummyMenu(),this.noView(t),this.MakeDummyMenu(),this.noComment(t),this.MakeDummyMenu(),this.noHelp(t),this.MakeDummyMenu(),this.noAbout(t),this.MakeDummyMenu(),this.noExtras(t),this.beginTextureFill({texture:this.menuBitmapRoll}),this.drawRect(40,0,40,21),this.mouseDown=!0,this.BuildEditMenu())}maybeEdit(t){this.mouseDown&&this.edit(t,!1)}noEdit(t){t.target!==this&&t.target!==this.m_currentMenu&&this.m_currentMenu&&!this.MouseOverMenu(t.stageX,t.stageY)&&(this.beginTextureFill({texture:this.menuBitmap}),this.drawRect(40,0,40,21),this.removeChild(this.m_currentMenu),this.m_currentMenu=null)}view(t,e=!0){this.mouseDown&&e?(this.noView(t),this.mouseDown=!1):(this.noFile(t),this.MakeDummyMenu(),this.noEdit(t),this.MakeDummyMenu(),this.noComment(t),this.MakeDummyMenu(),this.noHelp(t),this.MakeDummyMenu(),this.noAbout(t),this.MakeDummyMenu(),this.noExtras(t),this.beginTextureFill({texture:this.menuBitmapRoll}),this.drawRect(80,0,40,21),this.mouseDown=!0,this.BuildViewMenu())}maybeView(t){this.mouseDown&&this.view(t,!1)}noView(t){t.target!==this&&t.target!==this.m_currentMenu&&this.m_currentMenu&&!this.MouseOverMenu(t.stageX,t.stageY)&&(this.beginTextureFill({texture:this.menuBitmap}),this.drawRect(80,0,40,21),this.removeChild(this.m_currentMenu),this.m_currentMenu=null)}comment(t,e=!0){this.mouseDown&&e?(this.noComment(t),this.mouseDown=!1):(this.noFile(t),this.MakeDummyMenu(),this.noEdit(t),this.MakeDummyMenu(),this.noView(t),this.MakeDummyMenu(),this.noHelp(t),this.MakeDummyMenu(),this.noAbout(t),this.MakeDummyMenu(),this.noExtras(t),this.beginTextureFill({texture:this.menuBitmapRoll}),this.drawRect(120,0,60,21),this.mouseDown=!0,this.BuildCommentMenu())}maybeComment(t){this.mouseDown&&this.comment(t,!1)}noComment(t){t.target!==this&&t.target!==this.m_currentMenu&&this.m_currentMenu&&!this.MouseOverMenu(t.stageX,t.stageY)&&(this.beginTextureFill({texture:this.menuBitmap}),this.drawRect(120,0,60,21),this.removeChild(this.m_currentMenu),this.m_currentMenu=null)}help(t,e=!0){this.mouseDown&&e?(this.noHelp(t),this.mouseDown=!1):(this.noFile(t),this.MakeDummyMenu(),this.noEdit(t),this.MakeDummyMenu(),this.noView(t),this.MakeDummyMenu(),this.noComment(t),this.MakeDummyMenu(),this.noAbout(t),this.MakeDummyMenu(),this.noExtras(t),this.beginTextureFill({texture:this.menuBitmapRoll}),this.drawRect(180,0,40,21),this.mouseDown=!0,this.BuildHelpMenu())}maybeHelp(t){this.mouseDown&&this.help(t,!1)}noHelp(t){t.target!==this&&t.target!==this.m_currentMenu&&this.m_currentMenu&&!this.MouseOverMenu(t.stageX,t.stageY)&&(this.beginTextureFill({texture:this.menuBitmap}),this.drawRect(180,0,40,21),this.removeChild(this.m_currentMenu),this.m_currentMenu=null)}about(t,e=!0){this.mouseDown&&e?(this.noAbout(t),this.mouseDown=!1):(this.noFile(t),this.MakeDummyMenu(),this.noEdit(t),this.MakeDummyMenu(),this.noView(t),this.MakeDummyMenu(),this.noComment(t),this.MakeDummyMenu(),this.noHelp(t),this.MakeDummyMenu(),this.noExtras(t),this.beginTextureFill({texture:this.menuBitmapRoll}),this.drawRect(750,0,50,21),this.mouseDown=!0,this.BuildAboutMenu())}maybeAbout(t){this.mouseDown&&this.about(t,!1)}noAbout(t){t.target!==this&&t.target!==this.m_currentMenu&&this.m_currentMenu&&!this.MouseOverMenu(t.stageX,t.stageY)&&(this.beginTextureFill({texture:this.menuBitmap}),this.drawRect(750,0,50,21),this.removeChild(this.m_currentMenu),this.m_currentMenu=null)}extras(t,e=!0){this.mouseDown&&e?(this.noExtras(t),this.mouseDown=!1):(this.noFile(t),this.MakeDummyMenu(),this.noEdit(t),this.MakeDummyMenu(),this.noView(t),this.MakeDummyMenu(),this.noComment(t),this.MakeDummyMenu(),this.noHelp(t),this.MakeDummyMenu(),this.noAbout(t),this.beginTextureFill({texture:this.menuBitmapRoll}),this.drawRect(225,0,50,21),this.mouseDown=!0,this.BuildExtrasMenu())}maybeExtras(t){this.mouseDown&&this.extras(t,!1)}noExtras(t){t.target!==this&&t.target!==this.m_currentMenu&&this.m_currentMenu&&!this.MouseOverMenu(t.stageX,t.stageY)&&(this.beginTextureFill({texture:this.menuBitmap}),this.drawRect(225,0,50,21),this.removeChild(this.m_currentMenu),this.m_currentMenu=null)}HideAll(){this.m_currentMenu&&(this.removeChild(this.m_currentMenu),this.m_currentMenu=null,this.beginTextureFill({texture:this.menuBitmap}),this.drawRect(0,0,800,21)),this.mouseDown=!1}MakeDummyMenu(){this.m_currentMenu=new $s.Graphics,this.addChild(this.m_currentMenu)}pasteButton(){this.cont.ignoreAClick=!0,this.cont.pasteButton()}mirrorHorizontalButton(){this.cont.ignoreAClick=!0,this.cont.mirrorHorizontal()}mirrorVerticalButton(){this.cont.ignoreAClick=!0,this.cont.mirrorVertical()}soundButton(){Sa.enableSound=!Sa.enableSound}credits(){Sa.BrowserRedirect("http://www.incredifriends.com/",!0)}grubby(){Sa.BrowserRedirect("http://www.grubbygames.com",!0)}helpButton(){Sa.BrowserRedirect("http://www.incredifriends.com/",!0)}forumsButton(){Sa.BrowserRedirect("http://www.incredifriends.com/",!0)}}a("7qcjp");$s=a("kpTES"),Qs=a("f6Kro"),js=a("4Y6fG");class va extends $s.Graphics{constructor(t,e,i,s,r=!1,n=!1){super(),this.m_checkBoxBase=new Qs.Sprite,this.m_checkBoxRoll=new Qs.Sprite,this.m_checkBoxClick=new Qs.Sprite;var o=new js.TextStyle;o.fontFamily=Sa.GLOBAL_FONT,o.fontSize=12,o.fill="#242930",this.interactive=!0,this.m_width=i,this.m_Text=new js.Text((r?"  ":"")+e),this.m_Text.x=10,this.m_Text.y=3,this.m_Text.style=o,this.addChild(this.m_Text),this.on("mouseup",(()=>s())),this.on("mouseup",(()=>t.HideAll())),this.on("mouseover",(()=>this.highlight())),this.on("mouseout",(()=>this.deHighlight())),r&&(n?(this.m_checkBoxBase.texture=sa.cGuiMenuCheckBoxBBase,this.addChild(this.m_checkBoxBase),this.m_checkBoxRoll.texture=sa.cGuiMenuCheckBoxBRoll,this.m_checkBoxRoll.visible=!1,this.addChild(this.m_checkBoxRoll),this.m_checkBoxClick.texture=sa.cGuiMenuCheckBoxBClick,this.m_checkBoxClick.visible=!1,this.addChild(this.m_checkBoxClick)):(this.m_checkBoxBase.texture=sa.cGuiMenuCheckBoxABase,this.addChild(this.m_checkBoxBase),this.m_checkBoxRoll.texture=sa.cGuiMenuCheckBoxARoll,this.m_checkBoxRoll.visible=!1,this.addChild(this.m_checkBoxRoll),this.m_checkBoxClick.texture=sa.cGuiMenuCheckBoxAClick,this.m_checkBoxClick.visible=!1,this.addChild(this.m_checkBoxClick)),this.m_checkBoxBase.x=3,this.m_checkBoxRoll.x=3,this.m_checkBoxClick.x=3,this.on("mousedown",(()=>this.click())))}highlight(){this.beginFill(16692612,1),this.lineStyle(0,16692612),this.drawRect(1,1,this.m_width-2,18),this.m_checkBoxBase&&(this.m_checkBoxBase.visible=!1,this.m_checkBoxRoll.visible=!Us.mouseDown,this.m_checkBoxClick.visible=Us.mouseDown)}deHighlight(){this.beginFill(16644586,1),this.lineStyle(0,16644586),this.drawRect(1,1,this.m_width-2,18),this.m_checkBoxBase&&(this.m_checkBoxBase.visible=!0,this.m_checkBoxRoll.visible=!1,this.m_checkBoxClick.visible=!1)}click(){this.m_checkBoxBase.visible=!1,this.m_checkBoxRoll.visible=!1,this.m_checkBoxClick.visible=!0}}a("7qcjp");js=a("4Y6fG");class xa extends da{constructor(t,e,i=!1,s=!1,r=!1){super(300,200,200,100+(r?20:0)),this.cont=t;for(var n=e.length,o=0;n>31;){var a=e.substring(0,o+31).lastIndexOf(" ");e=e.substring(0,a)+"\n"+e.substring(a+1),r?(n=e.length-a,o=a):(n-=a,o+=a)}this.msgArea=new js.Text(""),this.msgArea.x=13,this.msgArea.y=15,this.msgArea.text=e;var h=new js.TextStyle;if(i&&(h.align="center"),h.fill=2369840,h.fontFamily=Sa.GLOBAL_FONT,h.fontSize=12,h.wordWrap=!0,h.wordWrapWidth=178,this.msgArea.style=h,this.addChild(this.msgArea),s){var l=new aa("OK",75,57,50,30,(()=>this.cont.DialogOK()),aa.PURPLE);this.addChild(l)}else{let t=0;this.timer=setInterval((()=>{t++,15!==t?this.TimerDotHandler():this.StopTimer()}),1e3)}}TimerDotHandler(){this.msgArea.text+="."}TimerHideHandler(){this.StopTimer(),this.visible=!1}StopTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)}ShowOKButton(){var t=new aa("OK",75,57,50,30,(()=>this.cont.HideDialog()),aa.PURPLE);this.addChild(t)}ShowOKAndCancelButton(t){var e=new aa("OK",40,57+(8==t?20:0),50,30,(()=>0==t?this.cont.ConfirmSaveRobot():1==t?this.cont.ConfirmSaveReplay():2==t?this.cont.ConfirmDeleteRobot():3==t?this.cont.ConfirmDeleteReplay():4==t?this.cont.ConfirmNewRobot():5==t?this.BrowserRedirect():6==t?this.BrowserRedirect2():7==t?this.BrowserRedirect3():8==t?this.BrowserRedirect4():9==t?this.cont.ConfirmSaveChallenge():10==t?this.cont.ConfirmDeleteChallenge():11==t?this.editButton():this.cont.ConfirmLogout()),aa.PURPLE);this.addChild(e),e=new aa("Cancel",100,57+(8==t?20:0),60,30,(()=>this.cont.HideConfirmDialog()),aa.PURPLE),this.addChild(e),this.StopTimer()}ShowBuildBoxButtons(){var t=new aa("Keep",25,80,70,35,(()=>this.cont.HideConfirmDialog()),aa.PURPLE);this.addChild(t),t=new aa("Delete",95,80,80,35,(()=>this.cont.DeleteBuildBoxes()),aa.PURPLE),this.addChild(t),this.StopTimer()}SetMessage(t,e=!1){if(this.msgArea.text=t,e){var i=new js.TextStyle;i.fontSize=10,i.wordWrap=!0,this.msgArea.style=i}}editButton(){this.cont.editButton(!0)}GetMessage(){return this.msgArea.text}HideInXSeconds(t){setTimeout((()=>{this.TimerHideHandler()}),1e3*t)}BrowserRedirect(){Sa.BrowserRedirect()}BrowserRedirect2(){Sa.inIFrame?Sa.BrowserRedirect("http://incredibots.com/old/"+na.replay.version+"/incredibots.php?replayID="+na.potentialReplayID):Sa.BrowserRedirect("http://incredibots.com/old/"+na.replay.version+"/?replayID="+na.potentialReplayID)}BrowserRedirect3(){Sa.BrowserRedirect(null,!1,!0)}BrowserRedirect4(){Sa.BrowserRedirect("http://www.incredifriends.com/",!0),this.cont.HideConfirmDialog()}}a("7qcjp");js=a("4Y6fG");class Sa{static BrowserRedirect(t=null,e=!1,i=!1){const s=t||"http://www.incredibots.com/";let r="_self";e&&(r="_blank"),i&&(r="_top"),window.open(s,r)}constructor(t){this.preloadedBots={cRace:null,cSpaceship:null},Sa.renderer=t,Sa.theRoot=Sa.renderer.stage,Sa.theRoot.interactive=!0;var e=window.location.href,i=e.indexOf("://")+3,s=e.indexOf("/",i),r=e.substring(i,s),n=r.lastIndexOf(".")-1,o=r.lastIndexOf(".",n)+1;"incredibotsgold.com"==(r=r.substring(o,r.length))&&(Sa.premiumMode=!0),t.ticker.maxFPS=30,t.ticker.add((t=>this.update())),addEventListener(Event.ADDED_TO_STAGE,this.Init,!1,0,!0),Ws.Init(),this.Init(),Sa.DEBUG_VERSION&&(Sa.m_fpsCounter.x=7,Sa.m_fpsCounter.y=525,Sa.theRoot.addChild(Sa.m_fpsCounter))}Init(){Us.Init(),sa.cSpaceship.arrayBuffer().then((t=>new cs(t))).then((t=>this.preloadedBots.cSpaceship=t)),sa.cRace.arrayBuffer().then((t=>new cs(t))).then((t=>this.preloadedBots.cRace=t))}rehideMouse(t){Mouse.hide()}update(){if(Sa.frameCounter++,Sa.firstFrame){var t=new URLSearchParams(window.location.search);if(t.get("replayID")){Sa.loadReplayMode=!0;var e=t.get("replayID")}if(t.get("robotID")){Sa.loadRobotMode=!0;var i=t.get("robotID")}if(t.get("challengeID")){Sa.loadChallengeMode=!0;var s=t.get("challengeID")}t.get("iframe")&&(Sa.inIFrame=!0),Sa.loadReplayMode&&!Sa.premiumMode?(Ya.settings=new La(15,0,0,0,0),Sa.m_curController=new Ya,Sa.m_curController.LoadReplayNow(e),na.potentialReplayID=e,na.potentialReplayPublic=!0,na.replayDirectlyLinked=!0,Sa.theRoot.addChild(Sa.m_curController),Sa.nextControllerType=0):Sa.loadRobotMode&&!Sa.premiumMode?(Ya.settings=new La(15,0,0,0,0),Sa.m_curController=new Ya,Sa.m_curController.LoadRobotNow(i),na.potentialRobotID=i,na.potentialRobotPublic=!0,Sa.theRoot.addChild(Sa.m_curController),Sa.nextControllerType=0):Sa.loadChallengeMode&&!Sa.premiumMode?(Ya.settings=new La(15,0,0,0,0),Sa.m_curController=new Ya,Sa.m_curController.LoadChallengeNow(s),na.potentialChallengeID=s,na.potentialChallengePublic=!0,Sa.theRoot.addChild(Sa.m_curController),Sa.nextControllerType=0):(Sa.m_curController=new Xa,Sa.theRoot.addChild(Sa.m_curController)),Sa.firstFrame=!1}Sa.changeControllers&&(Sa.theRoot.removeChild(Sa.m_curController),-1==Sa.nextControllerType?Sa.m_curController=new Xa(!0):10==Sa.nextControllerType?Sa.m_curController=new th:11==Sa.nextControllerType?Sa.m_curController=new Qa:12==Sa.nextControllerType?Sa.m_curController=new $a:13==Sa.nextControllerType?Sa.m_curController=new eh:14==Sa.nextControllerType?Sa.m_curController=new ih:15==Sa.nextControllerType?Sa.m_curController=new sh:16==Sa.nextControllerType?Sa.m_curController=new nh:17==Sa.nextControllerType?Sa.m_curController=new rh:18==Sa.nextControllerType?Sa.m_curController=new ah:19==Sa.nextControllerType?Sa.m_curController=new oh:1==Sa.nextControllerType?Sa.m_curController=new Ha:2==Sa.nextControllerType?Sa.m_curController=new Ka:3==Sa.nextControllerType?Sa.m_curController=new za:4==Sa.nextControllerType?Sa.m_curController=new qa(this.preloadedBots.cRace):5==Sa.nextControllerType?Sa.m_curController=new Ja(this.preloadedBots.cSpaceship):Sa.m_curController=new Ya,Sa.theRoot.addChild(Sa.m_curController),Sa.changeControllers=!1),Sa.m_curController.Update(),Us.update(),Sa.DEBUG_VERSION&&Sa.m_fpsCounter.update()}static ShowMouse(){}static ShowHourglass(){}}Sa.m_fpsCounter=new Ys,Sa.changeControllers=!1,Sa.nextControllerType=-1,Sa.firstFrame=!0,Sa.frameCounter=0,Sa.inIFrame=!1,Sa.loadRobotMode=!1,Sa.loadReplayMode=!1,Sa.loadChallengeMode=!1,Sa.premiumMode=!1,Sa.enableSound=!0,Sa.VERSION_STRING="2.23 CE",Sa.DEBUG_VERSION=!0,Sa.ENABLE_SITE_LOCK=643-(Sa.DEBUG_VERSION?2:1),Sa._mochiads_game_id="50feb50977299858",Sa.lastAdTime=0,Sa.GLOBAL_FONT="Arial";class Aa extends da{constructor(t){super(249,83,312,434),this.cont=t;var e=new js.TextStyle;e.fontSize=20,e.fontFamily=Sa.GLOBAL_FONT,e.align="center";var i=new js.Text("");i.text="Choose a Level:",i.style=e,i.anchor.set(.5,0),i.x=156,i.y=12,this.addChild(i),(e=new js.TextStyle).fontSize=12;var s=new aa("1. Drive a Tank!       ",1,38,155,50,(()=>this.tankButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(0));this.addChild(s),s=new aa("2. Shape Up            ",1,83,155,50,(()=>this.shapeButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(1)),this.addChild(s),s=new aa("3. Car Creation       ",1,128,155,50,(()=>this.carButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(2)),this.addChild(s),s=new aa("4. JumpBot              ",1,173,155,50,(()=>this.jumpBotButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(3)),this.addChild(s),s=new aa("5. DumpBot             ",1,218,155,50,(()=>this.dumpBotButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(4)),this.addChild(s),s=new aa("6. Catapult               ",145,38,155,50,(()=>this.catapultButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(5)),this.addChild(s),s=new aa("7. Home Movies      ",145,83,155,50,(()=>this.homeMovieButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(6)),this.addChild(s),s=new aa("9. New in IB2           ",145,173,155,50,(()=>this.newFeaturesButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(8)),this.addChild(s),s=new aa("10. Challenges         ",145,218,155,50,(()=>this.challengeEditorButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(9)),this.addChild(s),s=new aa("11. Monkey Bars       ",1,280,155,50,(()=>this.monkeyBarsButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(10)),this.addChild(s),s=new aa("12. Climb                   ",1,325,155,50,(()=>this.climbButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(11)),this.addChild(s),s=new aa("13. Bike Race            ",145,280,155,50,(()=>this.lunarButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(12)),this.addChild(s),s=new aa("14. Spaceships         ",145,325,155,50,(()=>this.cannonButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(13)),this.addChild(s),(e=new js.TextStyle).fontSize=11,s=new aa("8. Rube Goldberg       ",145,128,155,50,(()=>this.rubeGoldbergButton()),aa.ORANGE,e,!0,Ws.IsLevelDone(7)),this.addChild(s),(e=new js.TextStyle).fontSize=12,s=new aa("Back",106,376,100,40,(()=>this.backButton()),aa.PURPLE,e),this.addChild(s)}backButton(){this.visible=!1,this.cont.fader2.visible=!1}tankButton(){Sa.changeControllers=!0,Sa.nextControllerType=10}shapeButton(){Sa.changeControllers=!0,Sa.nextControllerType=11}carButton(){Sa.changeControllers=!0,Sa.nextControllerType=12}jumpBotButton(){Sa.changeControllers=!0,Sa.nextControllerType=13}dumpBotButton(){Sa.changeControllers=!0,Sa.nextControllerType=14}catapultButton(){Sa.changeControllers=!0,Sa.nextControllerType=15}homeMovieButton(){var t=new La(15,1,0,0,0);Ya.settings=t,Sa.changeControllers=!0,Sa.nextControllerType=16}rubeGoldbergButton(){var t=new La(15,1,0,0,0);Ya.settings=t,Sa.changeControllers=!0,Sa.nextControllerType=17}newFeaturesButton(){var t=new La(1,0,1,5,1);Ya.settings=t,Sa.changeControllers=!0,Sa.nextControllerType=18}challengeEditorButton(){Ha.challenge=null;var t=new La(15,0,2,0,5);Ya.settings=t,Sa.changeControllers=!0,Sa.nextControllerType=19}monkeyBarsButton(){Ha.challenge=null;var t=new La(15,0,2,0,0);Ya.settings=t,Sa.changeControllers=!0,Sa.nextControllerType=2}climbButton(){Ha.challenge=null;var t=new La(15,0,2,0,3);Ya.settings=t,Sa.changeControllers=!0,Sa.nextControllerType=3}lunarButton(){Ha.challenge=null;var t=new La(15,0,2,0,5);Ya.settings=t,Sa.changeControllers=!0,Sa.nextControllerType=4}cannonButton(){Ha.challenge=null;var t=new La(15,0,2,0,1);Ya.settings=t,Sa.changeControllers=!0,Sa.nextControllerType=5}}a("7qcjp");js=a("4Y6fG");class Pa extends da{constructor(t,e,i,s,r=!1){super(e,i,248,25==s?185:1==s||4==s||14==s||21==s||23==s||27==s||30==s||44==s||48==s||50==s||52==s||53==s||56==s||57==s||58==s||60==s||s>70&&s<82?180:170),this.TUTORIAL_MESSAGES=["Welcome to the world of IncrediBots 2!\n\nThis is the robot building screen,\nwhere you'll learn to construct\namazing robots like this tank... or\nanything else you can imagine!",'These introductory levels will teach you\nthe game’s basics. Later, for a real test\nof your skill, go to one of the\n"Challenges" from the main menu.\n\nOr try Sandbox Mode, where you can\nmake any robot or contraption you want!','For now, click and drag the world\naround to explore, and click "Zoom In"\nand "Zoom Out" as necessary.\n\nHit the "Play!" button when\nyou’re ready to control the Tank-Bot!',"Good job!\n\nYou can watch or save a replay using the\nmenu that appears after playing a level.\n\nYou can also submit your score to the\nworldwide high scores list!","Now you'll learn some of\nthe game's tools so you can make\nyour own creations...\n\nFirst, click \"Rectangle\", then click\nand drag to draw a rectangle within\nthe yellow box to the left.",'\nGood! Next draw a triangle.\n\nClick "Triangle", then click 3 times\nto place the 3 points of your triangle,\nagain within the yellow box.','\nThat\'s it. Next up is the circle tool.\n\nClick "Circle", then click and drag\nwithin the yellow box to the left to draw\na circle.','Your goal is to get the circle to roll into\nthe pit to the right. Click "Play!" and\nlet gravity do its work!\n\nIf the circle gets stuck on something,\nstop the simulation and move the\nshapes around until it works.',"Now you'll complete the construction\nof this basic Car-Bot!\n\nThe wheels and body of the car have\nbeen created below, but they need\nto be  joined together...",'\nMake a "Rotating Joint"\nby clicking its button, then clicking\non the center point of one\nof the wheels.','Great! This joins the wheel to the body\nof the car, and allows it to rotate.\n\nBefore you do the same for the second\nwheel, click the "Snap to Center" option\nin the "View" menu to disable it.','Now that "Snap to Center" is off, click\n"Rotating Joint" and place a joint\nnear the center of the other wheel.\n\nThis allows finer placement of a joint,\nrather than at the exact center of a shape.','\nLastly, click each joint in turn and\ncheck its "Enable Motor"\noption to the left.','\nGood! The Car-Bot is fully built,\nso click "Play!" to take it for\na test drive!','Drag the Car-Bot into the yellow\nconfines of the "build zone".\n\nA robot connected by joints can be\ndragged as a single unit. To move an\nindividual piece of such a robot, you’d\nhave to delete its connecting joints first.','For this JumpBot to clear that gap, it\'ll\nneed a piston to help it jump!\n\nSliding joints can act like pistons. Click\n"Sliding Joint", then click the green\ntriangle followed by the red car body.','Good! Now, with the sliding joint\nselected, check its "Enable Motor"\noption to the left.\n\nThis will give the sliding joint a motor\ncontrolled with the up/down keys.','\n\nNow take the JumpBot for a spin\nby clicking "Play!"',"This sliding joint has too little\nstrength to jump the bot over the gap!\n\nSelect the sliding joint, then give its\nmotor more STRENGTH and SPEED\nby adjusting the sliders on the left.","There's one more modification\nyou should make.\n\nSelect the red car body and adjust its\nDENSITY slider to its lowest value,\nto make the bot lighter.",'\nExcellent! Now this JumpBot\nshould finally be able to clear the gap...\n\nClick "Play!" and give it another go!',"Let's make a DumpBot – a car with a\nforklift, that can dump these objects\ninto the pit to the left!\n\nFirst, draw a rectangle for the car body.\nMake it about this size; if it's too big the\nmotors might have trouble moving it.",'Okay. Now draw a circle for one\nof the car\'s wheels.\n\nThen make a copy of this wheel: select\nthe wheel, click "Copy" on the menu to\nthe left, and click "Paste" up above.','Great! Now move these two identical\nwheels into position, then place a\nRotating Joint at the center of each one.\n(Also make sure to enable their motors.)\n\n"Undo" and "Redo" can be helpful\nbuttons if you ever make a mistake!','Now draw the arm your car will use\nto lift objects (we\'ll draw the loading\nbucket at the end of the arm later).\n\nDraw a rectangle of roughly the size\nshown in the "build zone".',"\nThat's it! Next you'll want to attach\nthe arm to the front of your car's\nbody, with a Rotating Joint.\n\nClick the \"Rotating Joint\" button up top.",'You don\'t want this loading arm to be\nloosely flopping around, so you need\nto tell it to be "rigid".\n\nFirst enable its motor, and then\nuncheck its "floppy" option on the left.','Great! All the DumpBot needs now\nis a loading bucket at the end of its arm.\nUse 2 rectangles to make a\nloading bucket like the example\nin the "build zone".\n\nIf you\'re having trouble, use the "Zoom\nIn" button to make drawing easier.','Okay, now fix the bucket\'s 2 rectangles\ntogether by creating a Fixed Joint.\n\nIf you have trouble, try disabling "Snap\nto Center" in the "View" menu.',"Lastly, move the bucket into\nposition at the end of the loading arm.\n\nThen attach either of its parts to\nthe loading arm with a Fixed Joint!","Great! Now just one more thing...\nThe loading arm's motor may be too\nfast right now to control easily.\n\nSelect it, then increase its STRENGTH,\nand decrease its SPEED, using\nthe sliders to the left.",'\n\nOkay, now click "Play!"\nand put your DumpBot to the test!',"Here's a catapult!\n\nYou're going to modify its settings\nso it can launch the ball all the\nway into the pit to the right.","First let's set limits on the\nrotation of its motor.\n\nWhen the arm reaches its rotation limit,\nit'll suddenly stop rotating, and this\nwill send the ball flying!",'Select the rotating joint at the\nbase of its arm.\n\nThen click on the box at the left labeled\n"Lower Limit (degrees)", and type\n"-10" to set that as the rotation limit.','Well Done!\n\nNext, click on the box labeled\n"Upper Limit (degrees)", and type\n"50" to set that as the upper rotation limit.','Good! Now try out the catapult\nby clicking "Play!"\n\nAfter launching the ball into the air,\nyou can zoom out to watch it, or click\nand drag to pan the view around.','Ideally the camera itself would\nfollow the ball as it flies through the air!\n\nSelect the ball, then check the\n"Camera Focus" option in the menu to\nthe left. Then click "Play!" again...',"\nThis is a SANDBOX level, so\nthere’s no real goal.\n\nYou’ll get a checkmark on the tutorial\nselect screen just for following\nalong with the instructions.","IncrediBots 2 is not just about robots...\n\nRagdolls like this can also be created,\nto be stars in your own Home Movies!\n\nLet’s tweak a few things to make her\nlook a little more like a real person.",'\nFirst, select the circle of her face, then\nclick "Change Color" on the left.\n\nUse the drop-down box to select the\n"Beige" color, then click "Okay".','\nGood! Now select each piece of her\nhair, in turn, and un-check the\n"Show Outlines" box at bottom left.','One more tweak: select the upper\npiece of one leg, and click "Move to\nBack". Repeat for her other leg.\n\nShapes can be moved in front of\nother shapes, or behind them, using\nthese tools.','Great! Now let’s allow one of her\narms to be animated.\n\nSelect the Rotating Joint that you\ncan see at one of her shoulders, then\nclick "Enable Motor".','Okay, now let’s make a copy of her!\n\nHold down SHIFT while you click and\ndrag a selection box around the whole\nragdoll. This selects all of its parts...\n\nThen click "Copy" on the left.','\nNow click "Paste" up above.\n\nThen move the second ragdoll\nwherever you like, and click the mouse\nbutton to place her there!','\nA good movie needs dialogue, so click\nthe "Text" button up above!\n\nThen click somewhere to place the box\nin which your text will appear.',"Enter a line of dialogue in the text box\non the left panel. You can also set\nthe text size and color.\n\nThen try resizing the text box by clicking\nand dragging on its bottom right corner.",'We want this text to appear at the\nproper time! So un-check the "Always\nDisplay" option on the left.\n\nThe default key for displaying text is the\n"Space" bar. But you can create many text\nboxes and define a different key for each.','\nGood! Now when you\'re ready,\nclick "Save..." up above\nto save this creation.\n\nYou can save a bot at any time.','If you already have a user account, log in\nnow with your user name and password.\n\nOtherwise click "New User".\nNO EMAIL ADDRESS OR PERSONAL\nINFORMATION IS REQUIRED.','Enter the user name and password\nyou would like to use.\n\nThen click "Register" to create\nyour user account.','Now click "Play!" to start the action\nof your movie! Make the text appear\nwhen you want, and move the arm\nmotors of the ragdolls.\n\nZooming or moving the view around\nwill be recorded as part of your movie.','To save your movie (or a replay on any\nlevel), click "Save Replay".\n\nThe options you have when saving a\nreplay are the same as when\nyou save a robot.',"You’ve now learned all you need to\ncreate your own home movies...\n\nWith your imagination and the\nsimple tools of IncrediBots 2, the\npossibilities are endless!","In addition to watching the replay or\nsubmitting a high score, this menu also\nallows you to LINK to this robot from\na website, or EMBED the replay into\nyour site or blog.\n\nYou can do so with the buttons above!","\nNow we need something to keep\nher from falling over.\n\nCreate a new Rectangle that overlaps\nher lower torso, and then connect them\nusing a Fixed Joint.",'Now we need to be able to control the\nloading arm independently of the wheels.\nClick in the box on the left labelled\n"Rotate CW" and press the up arrow key.\n\nThen click the "Rotate CCW" box and\npress the down arrow key.',"There are 3 overlapping shapes here, so\nyou'll need to keep clicking to cycle\nthrough possible pairs of shapes\nto create the joint on.\n\nKeep clicking until the arm and the\nbody are highlighted, then move\nthe mouse away.",'Now select the newly created\nrectangle and check the "Fixate"\ncheckbox on the left.\n\nThis will fix that part to the world,\nand keep that part from moving.','We don\'t want people to be able to see\nthis rectangle, so click "Change Color"\non the left and in the area labelled\n"Opacity", enter 0.\n\nFinally, uncheck the "Show Outlines"\ncheckbox to make this shape\ncompletely invisible!',"Your goal in this challenge:\n\nBuild a bot that can traverse\nall the rugged terrain and make it\nto the finish line!","Your goal in this challenge:\n\nBuild a bot to jump as far as\npossible, starting its jump where the\ngrass ends to the right!","Your goal in this challenge:\n\nBuild a bot that can cross\nthe finish line by finding its way\nover all the hurdles!","\nYour goal in this challenge:\n\nBuild a bot that can cross\nthis chasm by using the monkey\nbars above!","Your goal in this challenge:\n\nBuild a bot that can gather the orange\nobjects on the right, then dump them\ninto the pit on the left... the\nfaster, the better!","\nYour goal in this challenge:\n\nBuild a bot that can climb to the\ntop of the stairs in as short\na time as possible!",'This challenge was contributed by\nIncrediBots user Illume.\n\nYour goal in this challenge:\nSimply hit "Play!" and use the arrow\nkeys to race your bike to the finish!',"This challenge was contributed by\nIncrediBots user jayther.\n\nYour goal in this challenge:\nPilot your spacecraft through the debris\nand attack the giant enemy starship's\nweak point for massive damage!","Your goal in this final challenge:\n\nBuild a bot that's versatile enough\nto jump, climb, and scramble its way\nover all the obstacles in its path!","\nThis is a SANDBOX level, so\nthere’s no real goal.\n\nYou’ll get a checkmark on the tutorial\nselect screen just for following\nalong with the instructions.","Crazy contraptions are all part of\nthe fun in IncrediBots 2!\n\nThis machine has been set up for you,\nbut it'll need a couple of tweaks\nbefore it's ready to go.\n\nThe goal: to get the ball to the \"End\"...","First let's complete the ramp to the left\nof the car, so the ball can roll down it.\n\nWe'll use the two rectangles to the right,\nwhich aren't attached to anything.\n\nFirst, select the one standing up straight.",'Now click the "Rotate" button on the left.\n\nMove your mouse around until this\nrectangle is tilted at roughly the same\nangle as the other rectangle.\n\nThen click to accept this rotation.',"\n\nGood! Now move this rectangle\nso that it sits end-to-end with\nthe other one.","Next, multi-select the two rectangles\nby first clicking on one, then holding\nSHIFT as you click on the other.\n\nYou can select as many objects as you\nlike in this way; or, you can hold SHIFT\nwhile you click and drag a selection box.","With multiple objects selected, the buttons\non the left allow you to multi-delete,\nmulti-rotate, or multi-copy and paste...\n\nFor now, just drag the two rectangles into\nthe gap so they complete the ramp.",'Objects like this ramp need to be "fixated"\nso they won\'t fall down with gravity.\n\nClick each of the two rectangles in turn,\nand enable the "Fixate" option on\nthe menu to the left.','Here\'s a cool thing about motors: you\ncan tell a motor to be automatically "on"...\n\nSelect the Rotating Joint of the cart\'s\nback wheel, then enable the "Auto-On\nCCW" option. This will make it rotate\ncounter-clockwise, and never stop!','You can prevent any part of a machine or\nrobot from colliding with other parts...\n\nDo this for the leftmost part of the letter\n"N" in "End". Select it, then un-check\nit\'s "Collide" option, so the ball\nwill roll right through it!',"\n\nOkay, we're ready to roll!\n\nClick \"Play!\" and let's see what this\nRube Goldberg machine can do!","Great job! Now that you've learned\nall the basics, you're ready to start\ndesigning contraptions of your own!\n\nRemember, click \"Sandbox\" on the main\nmenu if you want to make complex\nmachines or animated home movies.","\nWelcome to IncrediBots 2!\n\nIn this tutorial, we'll go over some of\nthe new features that IncrediBots 2\nhas to offer!","\nAs you can see, it's now possible\nto change the look and parameters\nof Sandbox Mode.\n\nYou can even change the strength\nof gravity, as we've done here!","\nFor this tutorial, we'll build a\nballoon animal out of these shapes.\n\nTo start, drag the legs, head, and tail\ninto place and connect the pieces\ntogether using fixed joints.",'Now we want to select each of the\ncircles used in the legs, neck and tail,\nand select the "Outlines Behind"\noption on the side panel.\n\nThis lets you create compound\nshapes that look more cohesive.','\nGreat, that looks better!\n\nNow press "Play!" and experiment\nwith another new feature, dragging\nthe balloon animal around!','What if we want to prevent certain\nobjects from being dragged?\n\nMulti-select all of the shapes used\nin the balloon animal and use the\n"Undraggable" checkbox to make\nthem undraggable.','Finally, attach the piece of white string\non the left to the balloon animal with\na rotating joint and click "Play!" again.\n\nThis time you\'ll have to use\nthe string to drag it around.','\nWell done!\n\nTo experiment more with different\nsandbox settings, press "Advanced\nSandbox" from the main menu.',"Now it's time to learn about the\nIncrediBots 2 challenge editor!\n\nWith the challenge editor, you can make\nyour own mini-games, complete with\nwin and loss conditions and with their\nown high scores tables!","In this tutorial we'll make a\nbridge building challenge.\n\nThe object of our challenge will be to\nbuild a bridge over this gap so that the\ncar on the left can return to its garage.","\nThe first thing we'll do is add a\nbuild box to confine where the\nuser can build their robot.\n\nClick on the build box button.","\nNow draw a rectangle for the build box.\n\nMake sure to include some of each\nedge of ground in the build area,\nto allow for some bridge foundation.",'\nNext, we need to define what it means\nto win or lose our challenge.\n\nClick the "Set Conditions" button.','Using this screen we can customize\nthe win and loss conditions\nfor our challenge.\n\nFirst select "A specific shape" and\n"Within a box" in the top half of the\nscreen and hit "Add Condition."',"\n\nSelect one of the pieces of the car,\n then use the arrow keys to scroll to the\nright, and draw a box around the garage.",'See the checkbox labelled "All conditions\nmust be satisfied simultaneously?"\n\nIf we had multiple win conditions, this\ncheckbox would determine if all of them\nneed to be satisfied at once, or just any\none of them.','\n\nNext create a loss condition using\nthe bottom half of this screen:\n\n"Any shape is below a line."',"\nDraw a line a fair bit under the gap.\n\nNow if any part of the bridge or the car\ncrosses this line, the player will lose!",'Lastly, we\'ll add one more loss condition:\n"A specific shape is below a line."\n\nExcept this time, before hitting the button,\nuncheck the checkbox that says\n"Immediate loss if condition met."',"Select a balloon, and then draw\na line a little bit above it.\n\nNow with this condition, we won't\nlose immediately, but in order to win,\nthe balloon has to be above that line.","\nNow that we're done adding win\nand loss conditions, there's one more\nstep to creating our challenge.\n\nExit the Conditions screen and click\n\"Restrictions.\"","\nThis screen will also appear right\nbefore you go to save a challenge.\n\nHere we can define exactly what\nis and isn't allowed in our challenge.",'\nIn order to make things a bit more\ndifficult, check "Exclude Fixed Joints,"\n"Exclude Sliding Joints," and\n"Exclude Thrusters."',"Now uncheck \"Allow user Control of Bot.\"\n\nNote that the player will still be able to\ncontrol the car, they just can't control\nany rotating joints on their bridge now.\n\nClose the window when you're done.",'Congratulations, you\'ve made your first\nchallenge!  This tutorial is complete!\n\nYou can play your challenge now by\nhitting the "Test Challenge" button, or you\ncan press "Challenge Editor" from the\nmain menu to make more challenges!','\nHere\'s a sample challenge for you to try!\n\nTo check out some user-created\nchallenges, press "Load Challenge"\nfrom the main menu.'];const n=1==s||4==s||14==s||21==s||23==s||27==s||30==s||44==s||48==s||50==s||52==s||53==s||56==s||57==s||58==s||60==s||s>70&&s<82?180:170;s>=70&&e<100?e<50&&(e=50):e<100&&(e=100),e>500&&(e=520),i<120&&(i=120),i>380&&(i=380),this.initX=e,this.initY=i,this.cont=t,this.num=s;var o=this.TUTORIAL_MESSAGES[s];o=this.TUTORIAL_MESSAGES[s],this.msgArea=new js.Text(""),this.msgArea.anchor.set(.5,0),this.msgArea.x=124,this.msgArea.y=16,this.msgArea.text=o;var a=new js.TextStyle;a.fontSize=12,a.align="center",a.fontFamily=Sa.GLOBAL_FONT,a.leading=2,a.fill=2369840,a.wordWrap=!0,a.wordWrapWidth=228,this.msgArea.style=a,this.addChild(this.msgArea);var h=new aa(r?"More...":"OK",89,25==s?140:n?135:125,70,40,(()=>this.closeWindow()),aa.PURPLE);this.addChild(h)}ResetPosition(){this.x=this.initX,this.y=this.initY}closeWindow(){this.cont.CloseTutorialDialog(this.num)}}a("7qcjp");js=a("4Y6fG");class Ca extends da{constructor(t,e=null){super(276,90,248,430),this.cont=t,this.sortableChildren=!0;var i=new js.TextStyle,s=new js.Text("");s.text="Advanced Sandbox\nSetup",s.x=124,s.y=32,i.align="center",i.fontFamily=Sa.GLOBAL_FONT,i.fontSize=18,i.fill="#242930",s.style=i,s.anchor.set(.5),this.addChild(s),(s=new js.Text("")).text="Sandbox Size:",s.x=20,s.y=77,i.fontSize=12,i.align="left",i.fontFamily=Sa.GLOBAL_FONT,i.fill="#242930",s.style=i,this.addChild(s),(s=new js.Text("")).text="Terrain Shape:",s.x=20,s.y=112,i.fontSize=12,i.align="left",i.fontFamily=Sa.GLOBAL_FONT,i.fill="#242930",s.style=i,this.addChild(s),(s=new js.Text("")).text="Terrain Theme:",s.x=20,s.y=147,i.fontSize=12,i.align="left",i.fontFamily=Sa.GLOBAL_FONT,i.fill="#242930",s.style=i,this.addChild(s),(s=new js.Text("")).text="Background:",s.x=20,s.y=182,i.fontSize=12,i.align="left",i.fontFamily=Sa.GLOBAL_FONT,i.fill="#242930",s.style=i,this.addChild(s),(s=new js.Text("")).text="Red:",s.x=130,s.y=210,i.fontSize=11,i.align="left",i.fontFamily=Sa.GLOBAL_FONT,i.fill="#242930",s.style=i,this.addChild(s),(s=new js.Text("")).text="Green:",s.x=130,s.y=230,i.fontSize=11,i.align="left",i.fontFamily=Sa.GLOBAL_FONT,i.fill="#242930",s.style=i,this.addChild(s),(s=new js.Text("")).text="Blue:",s.x=130,s.y=250,i.fontSize=11,i.align="left",i.fontFamily=Sa.GLOBAL_FONT,i.fill="#242930",s.style=i,this.addChild(s),(s=new js.Text("")).text="Gravity:",s.x=45,s.y=280,i.fontSize=12,i.align="center",i.fontFamily=Sa.GLOBAL_FONT,i.fill="#242930",s.style=i,this.addChild(s),this.sizeBox=new pa(110,70,130,32),this.sizeBox.addItem({label:"  Small"}),this.sizeBox.addItem({label:"  Medium"}),this.sizeBox.addItem({label:"  Large"}),(i=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,i.fontSize=12,i.fill="#573D40",this.sizeBox.label.style=i,e&&(this.sizeBox.selectedIndex=e.size),this.addChild(this.sizeBox),this.shapeBox=new pa(110,105,130,32),this.shapeBox.addItem({label:"  Flat Land"}),this.shapeBox.addItem({label:"  Box"}),this.shapeBox.addItem({label:"  Empty"}),(i=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,i.fontSize=12,i.fill="#573D40",this.shapeBox.label.style=i,e&&(this.shapeBox.selectedIndex=e.terrainType),this.addChild(this.shapeBox),this.themeBox=new pa(110,140,130,32),this.themeBox.addItem({label:"  Grass"}),this.themeBox.addItem({label:"  Dirt"}),this.themeBox.addItem({label:"  Sand"}),this.themeBox.addItem({label:"  Rock"}),this.themeBox.addItem({label:"  Snow"}),this.themeBox.addItem({label:"  Moon"}),this.themeBox.addItem({label:"  Mars"}),(i=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,i.fontSize=12,i.fill="#573D40",this.themeBox.label.style=i,e&&(this.themeBox.selectedIndex=e.terrainTheme),this.addChild(this.themeBox),this.bgBox=new pa(110,175,130,32),this.bgBox.addItem({label:"  Sky"}),this.bgBox.addItem({label:"  Space"}),this.bgBox.addItem({label:"  Night"}),this.bgBox.addItem({label:"  Dusk"}),this.bgBox.addItem({label:"  Mars"}),this.bgBox.addItem({label:"  Sunset"}),this.bgBox.addItem({label:"  Solid Color"}),(i=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,i.fontSize=12,i.fill="#573D40",this.bgBox.label.style=i,e&&(this.bgBox.selectedIndex=e.background),this.bgBox.on("change",(()=>this.bgBoxChanged())),this.addChild(this.bgBox),(i=new js.TextStyle).fontSize=10,this.redArea=new ga(170,210,30,20,i),this.redArea.text="125",this.redArea.maxLength=3,this.redArea.on("change",(t=>this.redText(t))),this.redArea.enabled=6==this.bgBox.selectedIndex,this.redArea.editable=6==this.bgBox.selectedIndex,e&&6==this.bgBox.selectedIndex&&(this.redArea.text=e.backgroundR+""),this.addChild(this.redArea),this.greenArea=new ga(170,230,30,20,i),this.greenArea.text="125",this.greenArea.maxLength=3,this.greenArea.on("change",(t=>this.greenText(t))),this.greenArea.enabled=6==this.bgBox.selectedIndex,this.greenArea.editable=6==this.bgBox.selectedIndex,e&&6==this.bgBox.selectedIndex&&(this.greenArea.text=e.backgroundG+""),this.addChild(this.greenArea),this.blueArea=new ga(170,250,30,20,i),this.blueArea.text="255",this.blueArea.maxLength=3,this.blueArea.on("change",(t=>this.blueText(t))),this.blueArea.enabled=6==this.bgBox.selectedIndex,this.blueArea.editable=6==this.bgBox.selectedIndex,e&&6==this.bgBox.selectedIndex&&(this.blueArea.text=e.backgroundB+""),this.addChild(this.blueArea),this.gravitySlider=new la,this.gravitySlider.x=78,this.gravitySlider.y=302,this.gravitySlider.minValue=0,this.gravitySlider.maxValue=30,this.gravitySlider.value=15,this.gravitySlider.on("change",(t=>this.sliderChange(t))),e&&(this.gravitySlider.value=e.gravity),this.addChild(this.gravitySlider),(i=new js.TextStyle).fontSize=10,this.gravityArea=new ga(114,320,30,20,i),this.gravityArea.text="15",e&&(this.gravityArea.text=e.gravity+""),this.gravityArea.maxLength=5,this.gravityArea.on("change",(t=>this.gravityText(t))),this.addChild(this.gravityArea),(i=new js.TextStyle).fontSize=15,this.okButton=new aa("Okay!",49,340,150,50,this.okButtonPressed.bind(this),aa.PURPLE,i),this.addChild(this.okButton),(i=new js.TextStyle).fontSize=13,this.cancelButton=new aa("Cancel",74,385,100,35,this.cancelButtonPressed.bind(this),aa.PURPLE,i),this.addChild(this.cancelButton)}cancelButtonPressed(t){this.cont instanceof Xa?this.cont.fader2.visible=!1:this.cont.m_fader.visible=!1,this.visible=!1,this.cont.removeChild(this)}okButtonPressed(t){var e=new La(this.gravitySlider.value,this.sizeBox.selectedIndex,this.shapeBox.selectedIndex,this.themeBox.selectedIndex,this.bgBox.selectedIndex,parseInt(this.redArea.text),parseInt(this.greenArea.text),parseInt(this.blueArea.text));Ya.settings=e,this.cont instanceof Xa?Sa.changeControllers=!0:("challenge"===this.cont.controllerType&&(ControllerChallenge.challenge.settings=e),this.cont.RefreshSandboxSettings(),this.cont.m_fader.visible=!1)}bgBoxChanged(){this.redArea.enabled=6==this.bgBox.selectedIndex,this.greenArea.enabled=6==this.bgBox.selectedIndex,this.blueArea.enabled=6==this.bgBox.selectedIndex,this.redArea.editable=6==this.bgBox.selectedIndex,this.greenArea.editable=6==this.bgBox.selectedIndex,this.blueArea.editable=6==this.bgBox.selectedIndex}redText(t){var e=parseInt(t);e<0&&(e=0),e>255&&(e=255),isNaN(e)&&(e=0),this.redArea.text=e+""}greenText(t){var e=parseInt(t);e<0&&(e=0),e>255&&(e=255),isNaN(e)&&(e=0),this.greenArea.text=e+""}blueText(t){var e=parseInt(t);e<0&&(e=0),e>255&&(e=255),isNaN(e)&&(e=0),this.blueArea.text=e+""}gravityText(t){var e=parseInt(t);e<0&&(e=0),e>30&&(e=30),isNaN(e)&&(e=15),this.gravityArea.text=t,this.gravitySlider.value=e}sliderChange(t){this.gravityArea.text=t.toString()}refreshMouse(t){t.target!=this.bgBox.dropdown&&t.target!=this.themeBox.dropdown||(t.target.height=140),Sa.RefreshMouse(stage,t.target)}}a("7qcjp");js=a("4Y6fG");class Ta extends da{constructor(t,e){super(244,83,312,434,!1),this.cont=t,this.type=e;var i=new js.TextStyle;i.fontFamily=Sa.GLOBAL_FONT,i.fill="#242930",i.fontSize=12,i.align="center",this.msgArea=new js.Text(""),this.msgArea.x=150,this.msgArea.y=42.5,this.msgArea.anchor.set(.5,.5),this.msgArea.text="Copy and paste the text you got from exporting\nyour "+(this.type==Ta.TYPE_ROBOT?"robot":this.type==Ta.TYPE_REPLAY?"replay":"challenge")+' in the box below, then press "Import."',this.msgArea.style=i,this.addChild(this.msgArea),(i=new js.TextStyle).fontSize=10,this.linkArea=new ba(15,85,265,260,i),this.addChild(this.linkArea),this.importButton=new aa("Import",100,345,100,35,(t=>this.doImport(t)),aa.ORANGE),this.addChild(this.importButton),this.cancelButton=new aa("Cancel",100,375,100,35,(t=>this.cont.HideImportDialog(t)),aa.PURPLE),this.addChild(this.cancelButton)}async doImport(t){this.linkArea.text.length>0&&(this.cont.HideImportDialog(t),this.type==Ta.TYPE_ROBOT?this.cont.processLoadedRobot(await hh.ImportRobot(this.linkArea.text)):this.type==Ta.TYPE_REPLAY?this.cont.processLoadedReplay(hh.ImportReplay(this.linkArea.text)):this.type==Ta.TYPE_CHALLENGE&&this.cont.processLoadedChallenge(hh.ImportChallenge(this.linkArea.text)))}}Ta.TYPE_ROBOT=0,Ta.TYPE_REPLAY=1,Ta.TYPE_CHALLENGE=2,a("7qcjp");js=a("4Y6fG");class Ea extends da{constructor(t,e,i){super(244,83,312,434,!1),this.cont=t;var s=new js.TextStyle;s.fontFamily=Sa.GLOBAL_FONT,s.fill=2369840,this.msgArea=new js.Text(""),this.msgArea.x=15,this.msgArea.y=25,this.msgArea.text="The IncrediBots servers are going to be shut down\nsoon, thus saving to the servers has been disabled.\n\nInstead, you may export your "+i+' to a file.\nTo do so, copy and paste the text below into a file;\nit can be restored by clicking "Load", then "Import."\n\nNOTE: Make sure to do this with all of your\nimportant robots, replays, and challenges, as\nsoon this will be the only way to access them!',s.fontSize=12,s.align="center",this.msgArea.style=s,this.addChild(this.msgArea),(s=new js.TextStyle).fontSize=10,this.linkArea=new ba(15,185,265,160,s),this.linkArea.text=e,this.linkArea.textInput.text=e,this.linkArea.on("focus",(()=>this.linkAreaClicked())),this.addChild(this.linkArea),this.okButton=new aa("OK",125,385,50,30,(()=>this.cont.HideExportDialog()),aa.PURPLE),this.addChild(this.okButton),this.copyButton=new aa("Copy to Clipboard",80,350,140,35,(()=>this.copyButtonPressed()),aa.ORANGE),this.addChild(this.copyButton)}copyButtonPressed(){this.linkArea.textInput.select(),document.execCommand("copy")}linkAreaClicked(){this.linkArea.textInput.select()}}a("7qcjp");Xs=a("8TYxR"),js=a("4Y6fG");class Ra extends da{constructor(t){super(0,5,800,95),this.cont=t,this.m_editPanel=new Xs.Container,this.addChild(this.m_editPanel),this.m_gamePanel=new Xs.Container,this.m_gamePanel.visible=!1,this.addChild(this.m_gamePanel),this.m_pausePanel=new Xs.Container,this.m_pausePanel.visible=!1,this.addChild(this.m_pausePanel);var e=new js.TextStyle;e.fontFamily=Sa.GLOBAL_FONT,Sa.inIFrame||(this.m_circleButton=new aa("Circle",10,15,105,35,(()=>this.cont.circleButton()),aa.BLUE),this.m_editPanel.addChild(this.m_circleButton),this.m_rectButton=new aa("Rectangle",110,15,105,35,(()=>this.cont.rectButton()),aa.BLUE),this.m_editPanel.addChild(this.m_rectButton),this.m_triangleButton=new aa("Triangle",210,15,105,35,(()=>this.cont.triangleButton()),aa.BLUE),this.m_editPanel.addChild(this.m_triangleButton),this.m_fixedJointButton=new aa("Fixed Joint",10,45,105,35,(()=>this.cont.fjButton()),aa.BLUE),this.m_editPanel.addChild(this.m_fixedJointButton),this.m_revoluteJointButton=new aa("Rotating Joint",110,45,105,35,(()=>this.cont.rjButton()),aa.BLUE),this.m_editPanel.addChild(this.m_revoluteJointButton),this.m_prismaticJointButton=new aa("Sliding Joint",210,45,105,35,(()=>this.cont.pjButton()),aa.BLUE),this.m_editPanel.addChild(this.m_prismaticJointButton),this.m_textButton=new aa("Text",310,45,60,35,(()=>this.cont.textButton()),aa.BLUE),this.m_editPanel.addChild(this.m_textButton),this.m_pasteButton=new aa("Paste",370,45,60,35,(()=>this.cont.pasteButton()),aa.ORANGE),this.m_editPanel.addChild(this.m_pasteButton),this.m_undoButton=new aa("Undo",310,15,60,35,(()=>this.cont.undoButton()),aa.ORANGE),this.m_editPanel.addChild(this.m_undoButton),this.m_redoButton=new aa("Redo",370,15,60,35,(()=>this.cont.redoButton()),aa.ORANGE),this.m_editPanel.addChild(this.m_redoButton)),this.m_zoomInButton=new aa("Zoom In",430,15,80,35,(()=>this.cont.zoomInButton()),aa.PINK),this.m_editPanel.addChild(this.m_zoomInButton),this.m_zoomInButton=new aa("Zoom In",430,15,80,35,(()=>this.cont.zoomInButton()),aa.PINK),this.m_gamePanel.addChild(this.m_zoomInButton),this.m_zoomInButton=new aa("Zoom In",430,15,80,35,(()=>this.cont.zoomInButton()),aa.PINK),this.m_pausePanel.addChild(this.m_zoomInButton),this.m_zoomOutButton=new aa("Zoom Out",430,45,80,35,(()=>this.cont.zoomOutButton()),aa.PINK),this.m_editPanel.addChild(this.m_zoomOutButton),this.m_zoomOutButton=new aa("Zoom Out",430,45,80,35,(()=>this.cont.zoomOutButton()),aa.PINK),this.m_gamePanel.addChild(this.m_zoomOutButton),this.m_zoomOutButton=new aa("Zoom Out",430,45,80,35,(()=>this.cont.zoomOutButton()),aa.PINK),this.m_pausePanel.addChild(this.m_zoomOutButton),this.m_conditionsButton=new aa("Set Conditions",520,45,95,35,(()=>this.cont.conditionsButton()),aa.BLUE),this.m_buildBoxButton=new aa("Build Box",610,45,85,35,(()=>this.cont.buildBoxButton()),aa.BLUE),this.m_restrictionsButton=new aa("Restrictions",695,15,95,30,(()=>this.cont.restrictionsButton()),aa.BLUE),this.m_conditionsButton.visible=!1,this.m_restrictionsButton.visible=!1,this.m_buildBoxButton.visible=!1,this.m_loadButton=new aa("Load...",520,45,95,35,(()=>this.cont.loadButton()),aa.PURPLE),this.m_loginButton=new aa("Login",610,45,85,35,(()=>this.cont.loginButton()),aa.PURPLE),this.m_loginButton.visible="_Public"==na.userName,this.m_logoutButton=new aa("Logout",610,45,85,35,(()=>this.cont.logoutButton()),aa.PURPLE),this.m_logoutButton.visible="_Public"!=na.userName,this.m_editPanel.addChild(this.m_loadButton),this.m_editPanel.addChild(this.m_loginButton),this.m_editPanel.addChild(this.m_logoutButton),this.m_editPanel.addChild(this.m_conditionsButton),this.m_editPanel.addChild(this.m_buildBoxButton),this.m_editPanel.addChild(this.m_restrictionsButton),this.m_saveButton=new aa("Save...",520,15,95,35,(()=>this.cont.saveButton()),aa.PURPLE),this.m_editPanel.addChild(this.m_saveButton),this.m_newButton=new aa("Main Menu",610,15,85,35,(()=>this.cont.newButton()),aa.PURPLE),this.m_editPanel.addChild(this.m_newButton),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=15,this.m_playButton=new aa("Resume",610,45,75,35,(()=>this.cont.playButton()),aa.RED),this.m_pausePanel.addChild(this.m_playButton),this.m_playButton=new aa("Play!",700,35,85,45,(()=>this.cont.playButton()),aa.PLAY,e),this.m_editPanel.addChild(this.m_playButton),this.m_testButton=new aa("    Test\nChallenge",700,35,85,45,(()=>this.cont.playButton()),aa.PLAY),this.m_testButton.visible=!1,this.m_editPanel.addChild(this.m_testButton),this.m_editButton=new aa("Edit Challenge",695,15,95,30,(()=>this.cont.editButton()),aa.RED),this.m_editButton.visible=!1,this.m_editPanel.addChild(this.m_editButton),this.m_pauseButton=new aa("Pause",610,45,75,35,(()=>this.cont.pauseButton()),aa.RED),this.m_gamePanel.addChild(this.m_pauseButton),this.m_resetButton=new aa("Stop",700,35,85,45,(()=>na.playingReplay?this.cont.rewindButton():this.cont.resetButton()),aa.PLAY,e),this.m_gamePanel.addChild(this.m_resetButton),this.m_resetButton2=new aa("Stop",700,35,85,45,(()=>na.playingReplay?this.cont.rewindButton():this.cont.resetButton()),aa.PLAY,e),this.m_pausePanel.addChild(this.m_resetButton2),this.m_rewindButton=new aa(na.playingReplay?"Rewind":"Restart",535,45,75,35,(()=>na.playingReplay?this.cont.resetButton():this.cont.rewindButton()),aa.RED),this.m_gamePanel.addChild(this.m_rewindButton),this.m_rewindButton2=new aa(na.playingReplay?"Rewind":"Restart",535,45,75,35,(()=>na.playingReplay?this.cont.resetButton():this.cont.rewindButton()),aa.RED),this.m_pausePanel.addChild(this.m_rewindButton2),na.playingReplay||(this.m_saveReplayButton=new aa("Save Replay",550,15,120,35,(()=>this.cont.saveReplayButton()),aa.PURPLE),this.m_gamePanel.addChild(this.m_saveReplayButton),this.m_saveReplayButton2=new aa("Save Replay",550,15,120,35,(()=>this.cont.saveReplayButton()),aa.PURPLE),this.m_pausePanel.addChild(this.m_saveReplayButton2)),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=12,e.fill="#242930",this.m_header=new js.Text(na.playingReplay?"    Replay in Progress":"Simulation in Progress"),this.m_header.x=300,this.m_header.y=25,this.m_header.style=e,this.m_gamePanel.addChild(this.m_header),this.m_header=new js.Text(na.playingReplay?"    Replay Paused":"Simulation Paused"),this.m_header.x=310,this.m_header.y=25,this.m_header.style=e,this.m_pausePanel.addChild(this.m_header),this.m_featureButton=new aa("Feature!",85,15,90,35,(()=>this.cont.featureButton()),aa.PURPLE),this.m_featureButton.visible=!1,this.m_gamePanel.addChild(this.m_featureButton),this.m_featureButton2=new aa("Feature!",85,15,90,35,(()=>this.cont.featureButton()),aa.PURPLE),this.m_featureButton2.visible=!1,this.m_pausePanel.addChild(this.m_featureButton2),this.ShowFeatureButton(),this.m_rateButton=new aa(na.playingReplay?"Rate this Replay!":"Rate this Robot!",165,15,140,35,(()=>this.rateButton()),aa.ORANGE),this.m_gamePanel.addChild(this.m_rateButton),this.m_rateButton2=new aa(na.playingReplay?"Rate this Replay!":"Rate this Robot!",165,15,140,35,(()=>this.rateButton()),aa.ORANGE),this.m_pausePanel.addChild(this.m_rateButton2),this.m_rateButton3=new aa("Rate this Challenge!",165,15,140,35,(()=>this.rateButton()),aa.ORANGE),this.m_rateButton3.visible=!1,this.m_gamePanel.addChild(this.m_rateButton3),this.m_rateButton4=new aa("Rate this Challenge!",165,15,140,35,(()=>this.rateButton()),aa.ORANGE),this.m_rateButton4.visible=!1,this.m_pausePanel.addChild(this.m_rateButton4),this.m_commentButton=new aa(na.playingReplay?"Comment on this Replay":"Comment on this Robot",15,45,160,35,(()=>this.commentButton()),aa.ORANGE),this.m_gamePanel.addChild(this.m_commentButton),this.m_commentButton2=new aa(na.playingReplay?"Comment on this Replay":"Comment on this Robot",15,45,160,35,(()=>this.commentButton()),aa.ORANGE),this.m_pausePanel.addChild(this.m_commentButton2),this.m_commentButton3=new aa("Comment on this Challenge",15,45,160,35,(()=>this.commentButton()),aa.ORANGE),this.m_commentButton3.visible=!1,this.m_gamePanel.addChild(this.m_commentButton3),this.m_commentButton4=new aa("Comment on this Challenge",15,45,160,35,(()=>this.commentButton()),aa.ORANGE),this.m_commentButton4.visible=!1,this.m_pausePanel.addChild(this.m_commentButton4),this.m_linkButton=new aa(na.playingReplay?"Link to this Replay":"Link to this Robot",165,45,140,35,(()=>this.linkButton()),aa.ORANGE),this.m_gamePanel.addChild(this.m_linkButton),this.m_linkButton2=new aa(na.playingReplay?"Link to this Replay":"Link to this Robot",165,45,140,35,(()=>this.linkButton()),aa.ORANGE),this.m_pausePanel.addChild(this.m_linkButton2),this.m_linkButton3=new aa("Link to this Challenge",165,45,140,35,(()=>this.linkButton()),aa.ORANGE),this.m_linkButton3.visible=!1,this.m_gamePanel.addChild(this.m_linkButton3),this.m_linkButton4=new aa("Link to this Challenge",165,45,140,35,(()=>this.linkButton()),aa.ORANGE),this.m_linkButton4.visible=!1,this.m_pausePanel.addChild(this.m_linkButton4),this.m_embedButton=new aa(na.playingReplay?"Embed this Replay":"Embed this Robot",295,45,140,35,(()=>this.embedButton()),aa.ORANGE),this.m_gamePanel.addChild(this.m_embedButton),this.m_embedButton2=new aa(na.playingReplay?"Embed this Replay":"Embed this Robot",295,45,140,35,(()=>this.embedButton()),aa.ORANGE),this.m_pausePanel.addChild(this.m_embedButton2),this.m_embedButton3=new aa("Embed this Challenge",295,45,140,35,(()=>this.embedButton()),aa.ORANGE),this.m_embedButton3.visible=!1,this.m_gamePanel.addChild(this.m_embedButton3),this.m_embedButton4=new aa("Embed this Challenge",295,45,140,35,(()=>this.embedButton()),aa.ORANGE),this.m_embedButton4.visible=!1,this.m_pausePanel.addChild(this.m_embedButton4);const i=this.cont.constructor.name;["ControllerTutorial","ControllerHomeMovies","ControllerRubeGoldberg","ControllerNewFeatures","ControllerChallengeEditor"].includes(i)&&(this.m_tutorialButton=new aa("View Previous Tip",660,90,140,40,(()=>this.cont.tutorialButton()),aa.PURPLE),this.m_editPanel.addChild(this.m_tutorialButton)),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=24,e.fill="#242930",this.m_timer1=new js.Text(""),this.m_timer1.text="0:00",this.m_timer1.x=30,this.m_timer1.y=22,this.m_timer1.style=e,this.m_gamePanel.addChild(this.m_timer1),this.m_timer2=new js.Text(""),this.m_timer2.text="0:00",this.m_timer2.x=30,this.m_timer2.y=22,this.m_timer2.style=e,this.m_pausePanel.addChild(this.m_timer2)}Update(t){Sa.inIFrame||(t==na.NEW_CIRCLE?this.m_circleButton.SetState(!0):this.m_circleButton.depressed&&this.m_circleButton.SetState(!1),t==na.NEW_RECT?this.m_rectButton.SetState(!0):this.m_rectButton.depressed&&this.m_rectButton.SetState(!1),t==na.NEW_TRIANGLE?this.m_triangleButton.SetState(!0):this.m_triangleButton.depressed&&this.m_triangleButton.SetState(!1),t==na.NEW_FIXED_JOINT?this.m_fixedJointButton.SetState(!0):this.m_fixedJointButton.depressed&&this.m_fixedJointButton.SetState(!1),t==na.NEW_REVOLUTE_JOINT?this.m_revoluteJointButton.SetState(!0):this.m_revoluteJointButton.depressed&&this.m_revoluteJointButton.SetState(!1),t==na.NEW_PRISMATIC_JOINT?this.m_prismaticJointButton.SetState(!0):this.m_prismaticJointButton.depressed&&this.m_prismaticJointButton.SetState(!1),t==na.NEW_TEXT?this.m_textButton.SetState(!0):this.m_textButton.depressed&&this.m_textButton.SetState(!1)),na.playingReplay?(this.m_featureButton.label=na.curReplayFeatured?"Un-feature!":"Feature!",this.m_featureButton2.label=na.curReplayFeatured?"Un-feature!":"Feature!"):""!=na.curChallengeID?(this.m_featureButton.label=na.curChallengeFeatured?"Un-feature!":"Feature!",this.m_featureButton2.label=na.curChallengeFeatured?"Un-feature!":"Feature!"):(this.m_featureButton.label=na.curRobotFeatured?"Un-feature!":"Feature!",this.m_featureButton2.label=na.curRobotFeatured?"Un-feature!":"Feature!")}rateButton(){na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic?this.cont.rateReplayButton():""!=na.curChallengeID&&na.curChallengePublic?this.cont.rateChallengeButton():this.cont.rateButton()}commentButton(){na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic?this.cont.commentReplayButton():""!=na.curChallengeID&&na.curChallengePublic?this.cont.commentChallengeButton():this.cont.commentButton()}linkButton(){na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic?this.cont.linkReplayButton():""!=na.curChallengeID&&na.curChallengePublic?this.cont.linkChallengeButton():this.cont.linkButton()}embedButton(){na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic?this.cont.embedReplayButton():""!=na.curChallengeID&&na.curChallengePublic?this.cont.embedChallengeButton():this.cont.embedButton()}ShowLogin(){this.m_loginButton.visible=!0,this.m_logoutButton.visible=!1}ShowLogout(){this.m_loginButton.visible=!1,this.m_logoutButton.visible=!0}ShowEditButton(){this.m_playButton.visible=!0,this.m_testButton.visible=!1,this.m_loadButton.visible=!0,this.m_loginButton.visible="_Public"==na.userName,this.m_logoutButton.visible="_Public"!=na.userName,this.m_conditionsButton.visible=!1,this.m_buildBoxButton.visible=!1,this.m_restrictionsButton.visible=!1,this.m_editButton.visible=!Ha.playOnlyMode}HideEditButton(){this.m_playButton.visible=!1,this.m_testButton.visible=!0,this.m_loadButton.visible=!1,this.m_loginButton.visible=!1,this.m_logoutButton.visible=!1,this.m_conditionsButton.visible=!0,this.m_buildBoxButton.visible=!0,this.m_restrictionsButton.visible=!0,this.m_editButton.visible=!1}SetTimer(t){if(t>=108e3)this.m_timer1.text="59:59",this.m_timer2.text="59:59";else{var e=Math.floor(t/1800);t%=1800;var i=Math.floor(t/30);i<10?(this.m_timer1.text=e+":0"+i,this.m_timer2.text=e+":0"+i):(this.m_timer1.text=e+":"+i,this.m_timer2.text=e+":"+i)}var s=new js.TextStyle;s.fontFamily=Sa.GLOBAL_FONT,s.fontSize=24,this.m_timer1.style=s,this.m_timer2.style=s}ShowEditPanel(t=!1){if(this.m_editPanel.visible=!0,this.m_gamePanel.visible=!1,this.m_pausePanel.visible=!1,t){this.m_gamePanel.removeChild(this.m_resetButton),this.m_pausePanel.removeChild(this.m_resetButton2),this.m_gamePanel.removeChild(this.m_rewindButton),this.m_pausePanel.removeChild(this.m_rewindButton2),this.m_gamePanel.removeChild(this.m_commentButton),this.m_pausePanel.removeChild(this.m_commentButton2),this.m_gamePanel.removeChild(this.m_linkButton),this.m_pausePanel.removeChild(this.m_linkButton2),this.m_gamePanel.removeChild(this.m_embedButton),this.m_pausePanel.removeChild(this.m_embedButton2);var e=new js.TextStyle;e.fontFamily=Sa.GLOBAL_FONT,e.fontSize=15,this.m_resetButton=new aa("Stop",700,35,85,45,this.cont.resetButton,aa.PLAY,e),this.m_gamePanel.addChild(this.m_resetButton),this.m_resetButton2=new aa("Stop",700,35,85,45,this.cont.resetButton,aa.PLAY,e),this.m_pausePanel.addChild(this.m_resetButton2),this.m_rewindButton=new aa("Restart",535,45,75,35,this.cont.rewindButton,aa.RED),this.m_gamePanel.addChild(this.m_rewindButton),this.m_rewindButton2=new aa("Restart",535,45,75,35,this.cont.rewindButton,aa.RED),this.m_pausePanel.addChild(this.m_rewindButton2),this.m_saveReplayButton=new aa("Save Replay",558,15,120,35,this.cont.saveReplayButton,aa.PURPLE),this.m_gamePanel.addChild(this.m_saveReplayButton),this.m_saveReplayButton2=new aa("Save Replay",558,15,120,35,this.cont.saveReplayButton,aa.PURPLE),this.m_pausePanel.addChild(this.m_saveReplayButton2),this.m_commentButton=new aa("Comment on this Robot",15,45,160,35,this.commentButton,aa.ORANGE),this.m_gamePanel.addChild(this.m_commentButton),this.m_commentButton2=new aa("Comment on this Robot",15,45,160,35,this.commentButton,aa.ORANGE),this.m_pausePanel.addChild(this.m_commentButton2),this.m_linkButton=new aa("Link to this Robot",165,45,140,35,this.linkButton,aa.ORANGE),this.m_gamePanel.addChild(this.m_linkButton),this.m_linkButton2=new aa("Link to this Robot",165,45,140,35,this.linkButton,aa.ORANGE),this.m_pausePanel.addChild(this.m_linkButton2),this.m_embedButton=new aa("Embed this Robot",295,45,140,35,this.embedButton,aa.ORANGE),this.m_gamePanel.addChild(this.m_embedButton),this.m_embedButton2=new aa("Embed this Robot",295,45,140,35,this.embedButton,aa.ORANGE),this.m_pausePanel.addChild(this.m_embedButton2)}}ShowGamePanel(){this.m_editPanel.visible=!1,this.m_gamePanel.visible=!0,this.m_pausePanel.visible=!1,this.ShowFeatureButton(),na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic?(this.m_rateButton.visible=!0,this.m_rateButton3.visible=!1,this.m_commentButton.visible=!0,this.m_commentButton3.visible=!1,this.m_linkButton.visible=!0,this.m_linkButton3.visible=!1,this.m_embedButton.visible=!0,this.m_embedButton3.visible=!1):""!=na.curChallengeID&&na.curChallengePublic?(this.m_rateButton.visible=!1,this.m_rateButton3.visible=!0,this.m_commentButton.visible=!1,this.m_commentButton3.visible=!0,this.m_linkButton.visible=!1,this.m_linkButton3.visible=!0,this.m_embedButton.visible=!1,this.m_embedButton3.visible=!0):(this.m_rateButton.visible=!0,this.m_rateButton3.visible=!1,this.m_commentButton.visible=!0,this.m_commentButton3.visible=!1,this.m_linkButton.visible=!0,this.m_linkButton3.visible=!1,this.m_embedButton.visible=!0,this.m_embedButton3.visible=!1)}ShowPausePanel(t){this.m_editPanel.visible=!1,this.m_gamePanel.visible=!1,this.m_pausePanel.visible=!0,this.ShowFeatureButton(),this.m_saveReplayButton&&(this.m_saveReplayButton.visible=t),na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic?(this.m_rateButton2.visible=!0,this.m_rateButton4.visible=!1,this.m_commentButton2.visible=!0,this.m_commentButton4.visible=!1,this.m_linkButton2.visible=!0,this.m_linkButton4.visible=!1,this.m_embedButton2.visible=!0,this.m_embedButton4.visible=!1):""!=na.curChallengeID&&na.curChallengePublic?(this.m_rateButton2.visible=!1,this.m_rateButton4.visible=!0,this.m_commentButton2.visible=!1,this.m_commentButton4.visible=!0,this.m_linkButton2.visible=!1,this.m_linkButton4.visible=!0,this.m_embedButton2.visible=!1,this.m_embedButton4.visible=!0):(this.m_rateButton2.visible=!0,this.m_rateButton4.visible=!1,this.m_commentButton2.visible=!0,this.m_commentButton4.visible=!1,this.m_linkButton2.visible=!0,this.m_linkButton4.visible=!1,this.m_embedButton2.visible=!0,this.m_embedButton4.visible=!1)}ShowFeatureButton(){this.m_featureButton.visible=Vs.ObjectInArray(na.userName,na.ADMIN_USERS),this.m_featureButton2.visible=Vs.ObjectInArray(na.userName,na.ADMIN_USERS)}static scrollbarField(){var t=new sa.cGuiScrollbarField;return t.smoothing=!0,t}static scrollbarBase(){var t=new sa.cGuiScrollbarBase;return t.smoothing=!0,t}static scrollbarRoll(){var t=new sa.cGuiScrollbarRoll;return t.smoothing=!0,t}static scrollbarClick(){var t=new sa.cGuiScrollbarClick;return t.smoothing=!0,t}static scrollbarTallBase(){var t=new sa.cGuiScrollbarTallBase;return t.smoothing=!0,t}static scrollbarTallRoll(){var t=new sa.cGuiScrollbarTallRoll;return t.smoothing=!0,t}static scrollbarTallClick(){var t=new sa.cGuiScrollbarTallClick;return t.smoothing=!0,t}static scrollbarButtonUpBase(){var t=new sa.cGuiScrollbarButtonUpBase;return t.smoothing=!0,t}static scrollbarButtonUpRoll(){var t=new sa.cGuiScrollbarButtonUpRoll;return t.smoothing=!0,t}static scrollbarButtonUpClick(){var t=new sa.cGuiScrollbarButtonUpClick;return t.smoothing=!0,t}static scrollbarButtonDownBase(){var t=new sa.cGuiScrollbarButtonDownBase;return t.smoothing=!0,t}static scrollbarButtonDownRoll(){var t=new sa.cGuiScrollbarButtonDownRoll;return t.smoothing=!0,t}static scrollbarButtonDownClick(){var t=new sa.cGuiScrollbarButtonDownClick;return t.smoothing=!0,t}}a("7qcjp");js=a("4Y6fG"),Qs=a("f6Kro");class Ba extends da{constructor(t){super(0,90,120,500),this.enteringInput=!1,this.sliderDown=!1,this.m_fixateBox2=null,this.cont=t,this.visible=!1,this.m_colourWindow=new Ia(this.cont,this),this.addChild(this.m_colourWindow),this.m_colourWindow.visible=!1,this.m_objectEditPanel=new Qs.Sprite,this.addChild(this.m_objectEditPanel),this.m_textEditPanel=new Qs.Sprite,this.addChild(this.m_textEditPanel),this.m_fixedJointPanel=new Qs.Sprite,this.addChild(this.m_fixedJointPanel),this.m_jointEditPanel=new Qs.Sprite,this.addChild(this.m_jointEditPanel),this.m_thrustersEditPanel=new Qs.Sprite,this.addChild(this.m_thrustersEditPanel),this.m_multiEditPanel=new Qs.Sprite,this.addChild(this.m_multiEditPanel),this.m_buildBoxPanel=new Qs.Sprite,this.addChild(this.m_buildBoxPanel),this.m_cannonPanel=new Qs.Sprite,this.addChild(this.m_cannonPanel);var e=new js.TextStyle;e.fontFamily=Sa.GLOBAL_FONT,e.align="center",e.fontSize=14,e.fill="#242930";var i=new js.TextStyle;i.fontFamily=Sa.GLOBAL_FONT,i.fontSize=9,i.fill="#666570",this.m_shapeHeader=new js.Text(""),this.m_shapeHeader.anchor.set(.5),this.m_shapeHeader.text="Circle",this.m_shapeHeader.x=60,this.m_shapeHeader.y=25,this.m_shapeHeader.style=e,this.m_objectEditPanel.addChild(this.m_shapeHeader),this.m_backButton=new aa("X",90,-5,35,35,(()=>this.backButton()),aa.X),this.m_objectEditPanel.addChild(this.m_backButton),this.m_deleteButton=new aa("Delete",10,30,100,35,(()=>this.cont.deleteButton()),aa.ORANGE),this.m_objectEditPanel.addChild(this.m_deleteButton),this.m_cutButton=new aa("Cut",10,60,100,35,(()=>this.cont.cutButton()),aa.ORANGE),this.m_objectEditPanel.addChild(this.m_cutButton),this.m_copyButton=new aa("Copy",10,90,100,35,(()=>this.cont.copyButton()),aa.ORANGE),this.m_objectEditPanel.addChild(this.m_copyButton),this.m_pasteButton=new aa("Paste",10,120,100,35,(()=>this.cont.pasteButton()),aa.ORANGE),this.m_objectEditPanel.addChild(this.m_pasteButton),this.m_rotateButton=new aa("Rotate",10,150,100,35,(()=>this.cont.rotateButton()),aa.BLUE),this.m_objectEditPanel.addChild(this.m_rotateButton),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fill="#242930",e.fontSize=12,this.m_densityLabel=new js.Text(""),this.m_densityLabel.text="Density",this.m_densityLabel.x=39,this.m_densityLabel.y=186,this.m_densityLabel.style=e,this.m_objectEditPanel.addChild(this.m_densityLabel),this.m_densitySlider=new la,this.m_densitySlider.x=20,this.m_densitySlider.y=205,this.m_densitySlider.minValue=1,this.m_densitySlider.maxValue=30,this.m_densitySlider.value=15,this.m_densitySlider.on("change",(t=>this.cont.densitySlider(t))),this.m_objectEditPanel.addChild(this.m_densitySlider),(e=new js.TextStyle).fontSize=9,this.m_densityArea=new ga(35,220,50,15,e),this.m_densityArea.text="10",this.m_densityArea.maxLength=5,this.m_densityArea.on("click",(t=>this.densityFocus(t))),this.m_densityArea.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_densityArea.on("change",(t=>this.cont.textEntered())),this.m_densityArea.on("blur",(t=>this.cont.densityText(t))),this.m_objectEditPanel.addChild(this.m_densityArea),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=9,e.fill=2369840,this.m_collisionBox=new ha(5,240,120),this.m_collisionBox.style=e,this.m_collisionBox.disabledStyle=i,this.m_collisionBox.label="Collides",this.m_collisionBox.selected=!0,this.m_collisionBox.on("change",(t=>this.cont.collisionBox(t))),this.m_objectEditPanel.addChild(this.m_collisionBox),this.m_cameraBox=new ha(5,260,120),this.m_cameraBox.style=e,this.m_cameraBox.disabledStyle=i,this.m_cameraBox.label="Camera Focus",this.m_cameraBox.selected=!1,this.m_cameraBox.on("change",(t=>this.cont.cameraBox(t))),this.m_objectEditPanel.addChild(this.m_cameraBox),this.m_fixateBox=new ha(5,300,120),this.m_fixateBox.style=e,this.m_fixateBox.disabledStyle=i,this.m_fixateBox.label="Fixate",this.m_fixateBox.selected=!1,this.m_fixateBox.on("change",(t=>this.cont.fixateBox(t))),this.m_objectEditPanel.addChild(this.m_fixateBox),this.m_colourButton=new aa("Change Color",5,320,110,35,(()=>this.colourButton()),aa.BLUE),this.m_objectEditPanel.addChild(this.m_colourButton),this.m_frontButton=new aa("Move to Front",5,350,110,35,(()=>this.cont.frontButton()),aa.PINK),this.m_objectEditPanel.addChild(this.m_frontButton),this.m_backButton=new aa("Move to Back",5,380,110,35,(()=>this.cont.backButton()),aa.PINK),this.m_objectEditPanel.addChild(this.m_backButton),this.m_outlineBox=new ha(5,415,120),this.m_outlineBox.style=e,this.m_outlineBox.disabledStyle=i,this.m_outlineBox.label="Show Outlines",this.m_outlineBox.selected=!1,this.m_outlineBox.on("change",(t=>this.cont.outlineBox(t))),this.m_objectEditPanel.addChild(this.m_outlineBox),this.m_terrainBox=new ha(5,435,120),this.m_terrainBox.style=e,this.m_terrainBox.disabledStyle=i,this.m_terrainBox.label="Outlines Behind",this.m_terrainBox.selected=!1,this.m_terrainBox.on("change",(t=>this.cont.terrainBox(t))),this.m_objectEditPanel.addChild(this.m_terrainBox),this.m_undragableBox=new ha(5,280,120),this.m_undragableBox.style=e,this.m_undragableBox.disabledStyle=i,this.m_undragableBox.label="Undraggable",this.m_undragableBox.selected=!1,this.m_undragableBox.on("change",(t=>this.cont.undragableBox(t))),this.m_objectEditPanel.addChild(this.m_undragableBox),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.align="center",e.fill="#242930",e.fontSize=14,this.m_cannonHeader=new js.Text(""),this.m_cannonHeader.text="Cannon",this.m_cannonHeader.anchor.set(.5),this.m_cannonHeader.x=60,this.m_cannonHeader.y=25,this.m_cannonHeader.style=e,this.m_cannonPanel.addChild(this.m_cannonHeader),this.m_backButton=new aa("X",90,-5,35,35,(()=>this.backButton()),aa.X),this.m_cannonPanel.addChild(this.m_backButton),this.m_deleteButton=new aa("Delete",10,30,100,35,(()=>this.cont.deleteButton()),aa.ORANGE),this.m_cannonPanel.addChild(this.m_deleteButton),this.m_cutButton=new aa("Cut",10,60,100,35,(()=>this.cont.cutButton()),aa.ORANGE),this.m_cannonPanel.addChild(this.m_cutButton),this.m_copyButton=new aa("Copy",10,90,100,35,(()=>this.cont.copyButton()),aa.ORANGE),this.m_cannonPanel.addChild(this.m_copyButton),this.m_rotateButton=new aa("Rotate",10,120,100,35,(()=>this.cont.rotateButton()),aa.BLUE),this.m_cannonPanel.addChild(this.m_rotateButton),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fill="#242930",e.fontSize=12,this.m_densityLabel=new js.Text(""),this.m_densityLabel.text="Density",this.m_densityLabel.x=39,this.m_densityLabel.y=156,this.m_densityLabel.style=e,this.m_cannonPanel.addChild(this.m_densityLabel),this.m_densitySlider7=new la,this.m_densitySlider7.x=20,this.m_densitySlider7.y=175,this.m_densitySlider7.minValue=1,this.m_densitySlider7.maxValue=30,this.m_densitySlider7.value=15,this.m_densitySlider7.on("change",(t=>this.cont.densitySlider(t))),this.m_cannonPanel.addChild(this.m_densitySlider7),(e=new js.TextStyle).fontSize=9,this.m_densityArea7=new ga(35,190,50,15,e),this.m_densityArea7.text="10",this.m_densityArea7.maxLength=5,this.m_densityArea7.on("click",(t=>this.densityFocus(t))),this.m_densityArea7.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_densityArea7.on("change",(t=>this.cont.textEntered())),this.m_densityArea7.on("blur",(t=>this.cont.densityText(t))),this.m_densityArea7.on("hide",(t=>this.cont.densityText(t))),this.m_cannonPanel.addChild(this.m_densityArea7),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=9,e.fill=2369840,this.m_collisionBox7=new ha(5,210,120),this.m_collisionBox7.style=e,this.m_collisionBox7.label="Collides",this.m_collisionBox7.selected=!0,this.m_collisionBox7.on("change",(t=>this.cont.collisionBox(t))),this.m_cannonPanel.addChild(this.m_collisionBox7),this.m_fixateBox7=new ha(5,250,120),this.m_fixateBox7.style=e,this.m_fixateBox7.disabledStyle=i,this.m_fixateBox7.label="Fixate",this.m_fixateBox7.selected=!1,this.m_fixateBox7.on("change",(t=>this.cont.fixateBox(t))),this.m_cannonPanel.addChild(this.m_fixateBox7),this.m_colourButton=new aa("Change Color",5,270,110,35,(()=>this.colourButton()),aa.BLUE),this.m_cannonPanel.addChild(this.m_colourButton),this.m_frontButton=new aa("Move to Front",5,300,110,35,(()=>this.cont.frontButton()),aa.PINK),this.m_cannonPanel.addChild(this.m_frontButton),this.m_backButton=new aa("Move to Back",5,330,110,35,(()=>this.cont.backButton()),aa.PINK),this.m_cannonPanel.addChild(this.m_backButton),this.m_outlineBox7=new ha(5,365,120),this.m_outlineBox7.style=e,this.m_outlineBox7.disabledStyle=i,this.m_outlineBox7.label="Show Outlines",this.m_outlineBox7.selected=!1,this.m_outlineBox7.on("change",(t=>this.cont.outlineBox(t))),this.m_cannonPanel.addChild(this.m_outlineBox7),this.m_terrainBox7=new ha(5,385,120),this.m_terrainBox7.style=e,this.m_terrainBox7.label="Outlines Behind",this.m_terrainBox7.selected=!1,this.m_terrainBox7.on("change",(t=>this.cont.terrainBox(t))),this.m_cannonPanel.addChild(this.m_terrainBox7),this.m_undragableBox7=new ha(5,230,120),this.m_undragableBox7.style=e,this.m_undragableBox7.disabledStyle=i,this.m_undragableBox7.label="Undraggable",this.m_undragableBox7.selected=!1,this.m_undragableBox7.on("change",(t=>this.cont.undragableBox(t))),this.m_cannonPanel.addChild(this.m_undragableBox7),(e=new js.TextStyle).fontSize=10,e.fontFamily=Sa.GLOBAL_FONT,e.fill=2369840,this.m_strengthLabel7=new js.Text(""),this.m_strengthLabel7.text="Cannon Strength",this.m_strengthLabel7.style=e,this.m_strengthLabel7.x=21,this.m_strengthLabel7.y=434,this.m_strengthLabel7.style=e,this.m_cannonPanel.addChild(this.m_strengthLabel7),this.m_strengthSlider7=new la,this.m_strengthSlider7.x=20,this.m_strengthSlider7.y=451,this.m_strengthSlider7.minValue=1,this.m_strengthSlider7.maxValue=30,this.m_strengthSlider7.value=15,this.m_strengthSlider7.on("change",(t=>this.cont.cannonSlider(t))),this.m_cannonPanel.addChild(this.m_strengthSlider7),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=10,this.m_strengthArea7=new ga(35,468,50,15,e),this.m_strengthArea7.text="15",this.m_strengthArea7.maxLength=5,this.m_strengthArea7.on("click",(t=>this.cannonFocus(t))),this.m_strengthArea7.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_strengthArea7.on("change",(t=>this.cont.textEntered())),this.m_strengthArea7.on("blur",(t=>this.cont.cannonText(t))),this.m_strengthArea7.on("hide",(t=>this.cont.cannonText(t))),this.m_cannonPanel.addChild(this.m_strengthArea7),this.m_fireKeyArea=new ga(60,412,37,15,e),this.m_fireKeyArea.editable=!0,this.m_fireKeyArea.on("click",(t=>this.cannonKeyFocus(t))),this.m_fireKeyArea.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_fireKeyArea.on("keyup",((t,e)=>this.cont.fireKeyText(t,e))),this.m_fireKeyArea.on("blur",(t=>this.TextAreaLostFocus(t))),this.m_fireKeyArea.on("hide",(t=>this.TextAreaLostFocus(t))),this.m_cannonPanel.addChild(this.m_fireKeyArea),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fill="#242930",e.align="right",e.fontSize=12,this.m_fireKeyLabel=new js.Text(""),this.m_fireKeyLabel.text="Fire:",this.m_fireKeyLabel.x=25,this.m_fireKeyLabel.y=412,this.m_fireKeyLabel.style=e,this.m_cannonPanel.addChild(this.m_fireKeyLabel),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.align="center",e.fontSize=14,e.fill="#242930",this.m_jointHeader=new js.Text(""),this.m_jointHeader.anchor.set(.5),this.m_jointHeader.text="Multiple Objects",this.m_jointHeader.x=60,this.m_jointHeader.y=25,this.m_jointHeader.style=e,this.m_multiEditPanel.addChild(this.m_jointHeader),this.m_backButton=new aa("X",90,-5,35,35,(()=>this.backButton()),aa.X),this.m_multiEditPanel.addChild(this.m_backButton),this.m_deleteButton=new aa("Delete",10,30,100,35,(()=>this.cont.multiDeleteButton()),aa.ORANGE),this.m_multiEditPanel.addChild(this.m_deleteButton),this.m_cutButton=new aa("Cut",10,60,100,35,(()=>this.cont.cutButton()),aa.ORANGE),this.m_multiEditPanel.addChild(this.m_cutButton),this.m_copyButton=new aa("Copy",10,90,100,35,(()=>this.cont.copyButton()),aa.ORANGE),this.m_multiEditPanel.addChild(this.m_copyButton),this.m_pasteButton=new aa("Paste",10,120,100,35,(()=>this.cont.pasteButton()),aa.ORANGE),this.m_multiEditPanel.addChild(this.m_pasteButton),this.m_rotateButton=new aa("Rotate",10,150,100,35,(()=>this.cont.rotateButton()),aa.BLUE),this.m_multiEditPanel.addChild(this.m_rotateButton),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=9,e.fill=2369840,this.m_outlineBox3=new ha(5,300,120),this.m_outlineBox3.style=e,this.m_outlineBox3.label="Show Outlines",this.m_outlineBox3.selected=!0,this.m_outlineBox3.on("change",(t=>this.cont.outlineBox(t))),this.m_multiEditPanel.addChild(this.m_outlineBox3),this.m_terrainBox3=new ha(5,320,120),this.m_terrainBox3.style=e,this.m_terrainBox3.label="Outlines Behind",this.m_terrainBox3.selected=!1,this.m_terrainBox3.on("change",(t=>this.cont.terrainBox(t))),this.m_multiEditPanel.addChild(this.m_terrainBox3),this.m_colourButton=new aa("Change Color",5,260,110,35,(()=>this.colourButton()),aa.BLUE),this.m_multiEditPanel.addChild(this.m_colourButton),this.m_collisionBox2=new ha(5,190,120),this.m_collisionBox2.style=e,this.m_collisionBox2.disabledStyle=i,this.m_collisionBox2.label="Collides",this.m_collisionBox2.selected=!1,this.m_collisionBox2.on("change",(t=>this.cont.collisionBox(t))),this.m_multiEditPanel.addChild(this.m_collisionBox2),this.m_fixateBox2=new ha(5,230,120),this.m_fixateBox2.style=e,this.m_fixateBox2.disabledStyle=i,this.m_fixateBox2.label="Fixate",this.m_fixateBox2.selected=!1,this.m_fixateBox2.on("change",(t=>this.cont.fixateBox(t))),this.m_multiEditPanel.addChild(this.m_fixateBox2),this.m_undragableBox2=new ha(5,210,120),this.m_undragableBox2.style=e,this.m_undragableBox2.disabledStyle=i,this.m_undragableBox2.label="Undraggable",this.m_undragableBox2.selected=!1,this.m_undragableBox2.on("click",(t=>this.cont.undragableBox(t))),this.m_multiEditPanel.addChild(this.m_undragableBox2),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.align="center",e.fontSize=14,e.fill="#242930",this.m_jointHeader=new js.Text(""),this.m_jointHeader.anchor.set(.5),this.m_jointHeader.text="Text",this.m_jointHeader.x=60,this.m_jointHeader.y=25,this.m_jointHeader.style=e,this.m_textEditPanel.addChild(this.m_jointHeader),this.m_backButton=new aa("X",90,-5,35,35,(()=>this.backButton()),aa.X),this.m_textEditPanel.addChild(this.m_backButton),this.m_deleteButton=new aa("Delete",10,30,100,35,(()=>this.cont.deleteButton()),aa.ORANGE),this.m_textEditPanel.addChild(this.m_deleteButton),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fill="#242930",e.fontSize=12,this.m_textLabel=new js.Text(""),this.m_textLabel.text="Text:",this.m_textLabel.x=45,this.m_textLabel.y=68,this.m_textLabel.style=e,this.m_textEditPanel.addChild(this.m_textLabel),this.m_textArea=new ba(15,85,90,70,e),this.m_textArea.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_textArea.on("focus",(t=>this.cont.textTextStart())),this.m_textArea.on("change",(t=>this.cont.textText(t))),this.m_textArea.on("blur",(t=>this.cont.textTextFinish())),this.m_textArea.on("blur",(t=>this.TextAreaLostFocus(t))),this.m_textArea.on("hide",(t=>this.TextAreaLostFocus(t))),this.m_textEditPanel.addChild(this.m_textArea),this.m_sizeLabel=new js.Text(""),this.m_sizeLabel.text="Text Size:",this.m_sizeLabel.x=15,this.m_sizeLabel.y=170,this.m_sizeLabel.style=e,this.m_textEditPanel.addChild(this.m_sizeLabel),(e=new js.TextStyle).fontSize=9,this.m_sizeArea=new ga(72,170,30,15,e),this.m_sizeArea.text="12",this.m_sizeArea.maxLength=4,this.m_sizeArea.on("click",(t=>this.sizeFocus(t))),this.m_sizeArea.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_sizeArea.on("change",(t=>this.cont.textEntered(t))),this.m_sizeArea.on("blur",(t=>this.cont.sizeText(this.m_sizeArea,t))),this.m_sizeArea.on("hide",(t=>this.cont.sizeText(this.m_sizeArea,t))),this.m_textEditPanel.addChild(this.m_sizeArea),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=9,e.fill=2369840,this.m_scaleWithZoomBox=new ha(2,195,120),this.m_scaleWithZoomBox.style=e,this.m_scaleWithZoomBox.label="Scale with Zoom",this.m_scaleWithZoomBox.selected=!0,this.m_scaleWithZoomBox.on("change",(t=>this.cont.scaleWithZoomBox(t))),this.m_textEditPanel.addChild(this.m_scaleWithZoomBox),this.m_alwaysVisibleBox=new ha(2,215,120),this.m_alwaysVisibleBox.style=e,this.m_alwaysVisibleBox.label="Always Display",this.m_alwaysVisibleBox.selected=!1,this.m_alwaysVisibleBox.on("change",(t=>this.cont.alwaysVisibleBox(t))),this.m_textEditPanel.addChild(this.m_alwaysVisibleBox),this.m_colourButton=new aa("Change Color",5,290,110,35,(()=>this.colourButton()),aa.BLUE),this.m_textEditPanel.addChild(this.m_colourButton),this.m_frontButton=new aa("Move to Front",5,320,110,35,(()=>this.cont.frontButton()),aa.PINK),this.m_textEditPanel.addChild(this.m_frontButton),this.m_backButton=new aa("Move to Back",5,350,110,35,(()=>this.cont.backButton()),aa.PINK),this.m_textEditPanel.addChild(this.m_backButton),(e=new js.TextStyle).fontSize=9,this.m_textKeyArea=new ga(45,268,30,15,e),this.m_textKeyArea.editable=!1,this.m_textKeyArea.on("click",(t=>this.controlKey1Focus(t))),this.m_textKeyArea.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_textKeyArea.on("keyup",((t,e)=>this.cont.textKeyBox(t,e))),this.m_textKeyArea.on("blur",(t=>this.TextAreaLostFocus(t))),this.m_textKeyArea.on("hide",(t=>this.TextAreaLostFocus(t))),this.m_textEditPanel.addChild(this.m_textKeyArea),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=10,e.fill=2369840,this.m_textKeyLabel=new js.Text(""),this.m_textKeyLabel.text="Display Text Key:",this.m_textKeyLabel.anchor.set(.5),this.m_textKeyLabel.x=63,this.m_textKeyLabel.y=260,this.m_textKeyLabel.style=e,this.m_textEditPanel.addChild(this.m_textKeyLabel),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.align="center",e.fontSize=14,e.fill="#242930",this.m_jointHeader=new js.Text(""),this.m_jointHeader.text="Fixed Joint",this.m_jointHeader.anchor.set(.5),this.m_jointHeader.x=60,this.m_jointHeader.y=25,this.m_jointHeader.style=e,this.m_fixedJointPanel.addChild(this.m_jointHeader),this.m_backButton=new aa("X",90,-5,35,35,(()=>this.backButton()),aa.X),this.m_fixedJointPanel.addChild(this.m_backButton),this.m_deleteButton=new aa("Delete",10,30,100,35,(()=>this.cont.deleteButton()),aa.ORANGE),this.m_fixedJointPanel.addChild(this.m_deleteButton),this.m_jointHeader=new js.Text(""),this.m_jointHeader.text="Build Box",this.m_jointHeader.anchor.set(.5),this.m_jointHeader.x=60,this.m_jointHeader.y=25,this.m_jointHeader.style=e,this.m_buildBoxPanel.addChild(this.m_jointHeader),this.m_backButton=new aa("X",90,-5,35,35,(()=>this.backButton()),aa.X),this.m_buildBoxPanel.addChild(this.m_backButton),this.m_deleteButton=new aa("Delete",10,30,100,35,(()=>this.cont.deleteBuildBoxButton()),aa.ORANGE),this.m_buildBoxPanel.addChild(this.m_deleteButton),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.align="center",e.fontSize=14,e.fill="#242930",this.m_thrustersHeader=new js.Text(""),this.m_thrustersHeader.text="Thrusters",this.m_thrustersHeader.anchor.set(.5),this.m_thrustersHeader.x=60,this.m_thrustersHeader.y=25,this.m_thrustersHeader.style=e,this.m_thrustersEditPanel.addChild(this.m_thrustersHeader),this.m_backButton=new aa("X",90,-5,35,35,(()=>this.backButton()),aa.X),this.m_thrustersEditPanel.addChild(this.m_backButton),this.m_deleteButton=new aa("Delete",10,30,100,35,(()=>this.cont.deleteButton()),aa.ORANGE),this.m_thrustersEditPanel.addChild(this.m_deleteButton),this.m_cutButton=new aa("Cut",10,60,100,35,(()=>this.cont.cutButton()),aa.ORANGE),this.m_thrustersEditPanel.addChild(this.m_cutButton),this.m_copyButton=new aa("Copy",10,90,100,35,(()=>this.cont.copyButton()),aa.ORANGE),this.m_thrustersEditPanel.addChild(this.m_copyButton),this.m_pasteButton=new aa("Paste",10,120,100,35,(()=>this.cont.pasteButton()),aa.ORANGE),this.m_thrustersEditPanel.addChild(this.m_pasteButton),this.m_rotateButton=new aa("Rotate",10,150,100,35,(()=>this.cont.rotateButton()),aa.BLUE),this.m_thrustersEditPanel.addChild(this.m_rotateButton),(e=new js.TextStyle).fontSize=10,e.fontFamily=Sa.GLOBAL_FONT,e.fill="#242930",this.m_thrustLabel=new js.Text(""),this.m_thrustLabel.text="Thruster Strength",this.m_thrustLabel.style=e,this.m_thrustLabel.anchor.set(0,.5),this.m_thrustLabel.x=21,this.m_thrustLabel.y=200,this.m_thrustLabel.style=e,this.m_thrustersEditPanel.addChild(this.m_thrustLabel),this.m_thrustSlider=new la,this.m_thrustSlider.x=20,this.m_thrustSlider.y=207,this.m_thrustSlider.minValue=1,this.m_thrustSlider.maxValue=30,this.m_thrustSlider.value=15,this.m_thrustSlider.on("change",(t=>this.cont.thrustSlider(t))),this.m_thrustersEditPanel.addChild(this.m_thrustSlider),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=10,this.m_thrustArea=new ga(35,224,50,15,e),this.m_thrustArea.text="10",this.m_thrustArea.maxLength=5,this.m_thrustArea.on("click",(t=>this.thrustFocus(t))),this.m_thrustArea.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_thrustArea.on("change",(t=>this.cont.textEntered(t))),this.m_thrustArea.on("blur",(t=>this.cont.thrustText(t))),this.m_thrustArea.on("hide",(t=>this.cont.thrustText(t))),this.m_thrustersEditPanel.addChild(this.m_thrustArea),this.m_thrustKeyArea=new ga(65,259,37,15,e),this.m_thrustKeyArea.editable=!0,this.m_thrustKeyArea.on("click",(t=>this.thrustKeyFocus(t))),this.m_thrustKeyArea.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_thrustKeyArea.on("keyup",((t,e)=>this.cont.thrustKeyText(t,e))),this.m_thrustKeyArea.on("blur",(t=>this.TextAreaLostFocus(t))),this.m_thrustKeyArea.on("hide",(t=>this.TextAreaLostFocus(t))),this.m_thrustersEditPanel.addChild(this.m_thrustKeyArea),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fill=2369840,e.align="right",e.fontSize=12,this.m_thrustKeyLabel=new js.Text(""),this.m_thrustKeyLabel.text="Activate:",this.m_thrustKeyLabel.anchor.set(.5),this.m_thrustKeyLabel.x=34.5,this.m_thrustKeyLabel.y=268,this.m_thrustKeyLabel.style=e,this.m_thrustersEditPanel.addChild(this.m_thrustKeyLabel),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=10,e.fill=2369840,this.m_autoBox3=new ha(5,290,120),this.m_autoBox3.style=e,this.m_autoBox3.disabledStyle=e,this.m_autoBox3.label="Auto-On",this.m_autoBox3.selected=!1,this.m_autoBox3.on("change",(t=>this.cont.autoBox1(t))),this.m_thrustersEditPanel.addChild(this.m_autoBox3),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.align="center",e.fontSize=14,this.m_jointHeader=new js.Text(""),this.m_jointHeader.text="Rotating Joint",this.m_jointHeader.anchor.set(.5),this.m_jointHeader.x=60,this.m_jointHeader.y=25,this.m_jointHeader.style=e,this.m_jointEditPanel.addChild(this.m_jointHeader),this.m_backButton=new aa("X",90,-5,35,35,(()=>this.backButton()),aa.X),this.m_jointEditPanel.addChild(this.m_backButton),this.m_deleteButton=new aa("Delete",10,30,100,35,(()=>this.cont.deleteButton()),aa.ORANGE),this.m_jointEditPanel.addChild(this.m_deleteButton),this.m_cutButton=new aa("Cut",10,60,100,35,(()=>this.cont.cutButton()),aa.ORANGE),this.m_jointEditPanel.addChild(this.m_cutButton),this.m_copyButton=new aa("Copy",10,90,100,35,(()=>this.cont.copyButton()),aa.ORANGE),this.m_jointEditPanel.addChild(this.m_copyButton),this.m_pasteButton=new aa("Paste",10,120,100,35,(()=>this.cont.pasteButton()),aa.ORANGE),this.m_jointEditPanel.addChild(this.m_pasteButton),(e=new js.TextStyle).fontSize=9,this.m_minDispArea=new ga(42,409,30,15,e),this.m_minDispArea.text="None",this.m_minDispArea.maxLength=4,this.m_minDispArea.on("click",(t=>this.minDispFocus(t))),this.m_minDispArea.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_minDispArea.on("change",(t=>this.cont.textEntered())),this.m_minDispArea.on("blur",(t=>this.cont.minLimitText(t))),this.m_minDispArea.on("hide",(t=>this.cont.minLimitText(t))),this.m_jointEditPanel.addChild(this.m_minDispArea),this.m_maxDispArea=new ga(42,444,30,15,e),this.m_maxDispArea.text="None",this.m_maxDispArea.maxLength=4,this.m_maxDispArea.on("click",(t=>this.maxDispFocus(t))),this.m_maxDispArea.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_maxDispArea.on("change",(t=>this.cont.textEntered())),this.m_maxDispArea.on("blur",(t=>this.cont.maxLimitText(t))),this.m_maxDispArea.on("hide",(t=>this.cont.maxLimitText(t))),this.m_jointEditPanel.addChild(this.m_maxDispArea),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=9,e.fill=2369840,this.m_enableMotorBox=new ha(5,152,120),this.m_enableMotorBox.style=e,this.m_enableMotorBox.label="Enable Motor",this.m_enableMotorBox.selected=!1,this.m_enableMotorBox.on("change",(t=>this.cont.motorBox(t))),this.m_jointEditPanel.addChild(this.m_enableMotorBox),this.m_rigidJointBox=new ha(5,284,120),this.m_rigidJointBox.style=e,this.m_rigidJointBox.disabledStyle=i,this.m_rigidJointBox.label="Floppy Joint",this.m_rigidJointBox.selected=!0,this.m_rigidJointBox.on("change",(t=>this.cont.rigidBox(t))),this.m_jointEditPanel.addChild(this.m_rigidJointBox),this.m_autoBox1=new ha(5,347,120),this.m_autoBox1.style=e,this.m_autoBox1.disabledStyle=i,this.m_autoBox1.label="Auto-On CW",this.m_autoBox1.selected=!1,this.m_autoBox1.on("change",(t=>this.cont.autoBox1(t))),this.m_jointEditPanel.addChild(this.m_autoBox1),this.m_autoBox2=new ha(5,367,120),this.m_autoBox2.style=e,this.m_autoBox2.disabledStyle=i,this.m_autoBox2.label="Auto-On CCW",this.m_autoBox2.selected=!1,this.m_autoBox2.on("change",(t=>this.cont.autoBox2(t))),this.m_jointEditPanel.addChild(this.m_autoBox2),this.m_outlineBox2=new ha(5,472,120),this.m_outlineBox2.style=e,this.m_outlineBox2.label="Show Outlines",this.m_outlineBox2.selected=!1,this.m_outlineBox2.on("change",(t=>this.cont.outlineBox(t))),this.m_jointEditPanel.addChild(this.m_outlineBox2),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fill=2369840,this.m_strengthLabel=new js.Text(""),this.m_strengthLabel.text="Motor Strength",this.m_strengthLabel.anchor.set(.5),this.m_strengthLabel.style=e,this.m_strengthLabel.x=60,this.m_strengthLabel.y=187,this.m_strengthLabel.style=e,this.m_jointEditPanel.addChild(this.m_strengthLabel),this.m_speedLabel=new js.Text(""),this.m_speedLabel.text="Motor Speed",this.m_speedLabel.style=e,this.m_speedLabel.anchor.set(.5),this.m_speedLabel.x=60,this.m_speedLabel.y=242,this.m_speedLabel.style=e,this.m_jointEditPanel.addChild(this.m_speedLabel),this.m_strengthSlider=new la,this.m_strengthSlider.x=20,this.m_strengthSlider.y=192,this.m_strengthSlider.minValue=1,this.m_strengthSlider.maxValue=30,this.m_strengthSlider.value=15,this.m_strengthSlider.on("change",(t=>this.cont.strengthSlider(t))),this.m_jointEditPanel.addChild(this.m_strengthSlider),this.m_speedSlider=new la,this.m_speedSlider.x=20,this.m_speedSlider.y=247,this.m_speedSlider.minValue=1,this.m_speedSlider.maxValue=30,this.m_speedSlider.value=15,this.m_speedSlider.on("change",(t=>this.cont.speedSlider(t))),this.m_jointEditPanel.addChild(this.m_speedSlider),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=9,this.m_strengthArea=new ga(35,209,50,15,e),this.m_strengthArea.text="10",this.m_strengthArea.maxLength=5,this.m_strengthArea.height=15,this.m_strengthArea.on("click",(t=>this.strengthFocus(t))),this.m_strengthArea.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_strengthArea.on("change",(t=>this.cont.textEntered(t))),this.m_strengthArea.on("blur",(t=>this.cont.strengthText(t))),this.m_strengthArea.on("hide",(t=>this.cont.strengthText(t))),this.m_jointEditPanel.addChild(this.m_strengthArea),this.m_speedArea=new ga(35,264,50,15,e),this.m_speedArea.text="10",this.m_speedArea.maxLength=5,this.m_speedArea.on("click",(t=>this.speedFocus(t))),this.m_speedArea.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_speedArea.on("change",(t=>this.cont.textEntered(t))),this.m_speedArea.on("blur",(t=>this.cont.speedText(t))),this.m_speedArea.on("hide",(t=>this.cont.speedText(t))),this.m_jointEditPanel.addChild(this.m_speedArea),this.m_controlKeyArea1=new ga(70,306,30,15,e),this.m_controlKeyArea1.editable=!1,this.m_controlKeyArea1.on("click",(t=>this.controlKey1Focus(t))),this.m_controlKeyArea1.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_controlKeyArea1.on("keyup",((t,e)=>this.cont.controlKeyText1(t,e))),this.m_controlKeyArea1.on("blur",(t=>this.TextAreaLostFocus(t))),this.m_controlKeyArea1.on("hide",(t=>this.TextAreaLostFocus(t))),this.m_jointEditPanel.addChild(this.m_controlKeyArea1),this.m_controlKeyArea2=new ga(70,326,30,15,e),this.m_controlKeyArea2.editable=!1,this.m_controlKeyArea2.on("click",(t=>this.controlKey2Focus(t))),this.m_controlKeyArea2.on("focus",(t=>this.TextAreaGotFocus(t))),this.m_controlKeyArea2.on("keyup",((t,e)=>this.cont.controlKeyText2(t,e))),this.m_controlKeyArea2.on("blur",(t=>this.TextAreaLostFocus(t))),this.m_controlKeyArea2.on("hide",(t=>this.TextAreaLostFocus(t))),this.m_jointEditPanel.addChild(this.m_controlKeyArea2),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=12,e.fill="#242930",this.m_limitLabel1=new js.Text(""),this.m_limitLabel1.text="Lower Limit (degrees)",this.m_limitLabel1.x=15,this.m_limitLabel1.y=395,this.m_limitLabel1.style=e,this.m_jointEditPanel.addChild(this.m_limitLabel1),this.m_limitLabel2=new js.Text(""),this.m_limitLabel2.text="Upper Limit (degrees)",this.m_limitLabel2.x=15,this.m_limitLabel2.y=430,this.m_limitLabel2.style=e,this.m_jointEditPanel.addChild(this.m_limitLabel2),this.m_inputLabel1=new js.Text(""),this.m_inputLabel1.text="Rotate CW:",this.m_inputLabel1.x=10,this.m_inputLabel1.y=307,this.m_inputLabel1.style=e,this.m_jointEditPanel.addChild(this.m_inputLabel1),this.m_inputLabel2=new js.Text(""),this.m_inputLabel2.text="Rotate CCW:",this.m_inputLabel2.x=10,this.m_inputLabel2.y=327,this.m_inputLabel2.style=e,this.m_jointEditPanel.addChild(this.m_inputLabel2),this.m_colourButton=new aa("Change Color",5,382,110,35,(()=>this.colourButton()),aa.BLUE),this.m_jointEditPanel.addChild(this.m_colourButton),this.m_frontButton=new aa("Move to Front",5,412,110,35,(()=>this.cont.frontButton()),aa.PINK),this.m_jointEditPanel.addChild(this.m_frontButton),this.m_backButton=new aa("Move to Back",5,442,110,35,(()=>this.cont.backButton()),aa.PINK),this.m_jointEditPanel.addChild(this.m_backButton),(e=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,e.fontSize=9,e.fill=2369840,this.m_collisionBox3=new ha(5,367,120),this.m_collisionBox3.style=e,this.m_collisionBox3.disabledStyle=i,this.m_collisionBox3.label="Collides",this.m_collisionBox3.selected=!0,this.m_collisionBox3.on("click",(t=>this.cont.collisionBox(t))),this.m_jointEditPanel.addChild(this.m_collisionBox3)}backButton(){this.visible=!1}colourButton(){this.m_colourWindow.visible=!0,this.m_colourWindow.SetVals()}DisableStuffForShapesLevel(){this.m_densitySlider.enabled=!1,this.m_densityArea.enabled=!1,this.m_densityArea.focusEnabled=!1,this.m_densityArea.editable=!1,this.m_collisionBox.enabled=!1,this.m_cameraBox.enabled=!1,this.m_undragableBox.enabled=!1,this.m_collisionBox2.enabled=!1,this.m_collisionBox3.enabled=!1,this.m_undragableBox2.enabled=!1}DisableStuffForCarLevel(){this.m_densitySlider.enabled=!1,this.m_densityArea.enabled=!1,this.m_densityArea.focusEnabled=!1,this.m_densityArea.editable=!1,this.m_collisionBox.enabled=!1,this.m_cameraBox.enabled=!1,this.m_undragableBox.enabled=!1,this.m_collisionBox2.enabled=!1,this.m_collisionBox3.enabled=!1,this.m_undragableBox2.enabled=!1,this.m_minDispArea.enabled=!1,this.m_minDispArea.focusEnabled=!1,this.m_minDispArea.editable=!1,this.m_maxDispArea.enabled=!1,this.m_maxDispArea.focusEnabled=!1,this.m_maxDispArea.editable=!1,this.m_rigidJointBox.enabled=!1,this.m_autoBox1.enabled=!1,this.m_autoBox2.enabled=!1,this.m_controlKeyArea1.enabled=!1,this.m_controlKeyArea1.focusEnabled=!1,this.m_controlKeyArea1.editable=!1,this.m_controlKeyArea2.enabled=!1,this.m_controlKeyArea2.focusEnabled=!1,this.m_controlKeyArea2.editable=!1,this.m_speedSlider.enabled=!1,this.m_strengthSlider.enabled=!1,this.m_speedArea.enabled=!1,this.m_speedArea.focusEnabled=!1,this.m_speedArea.editable=!1,this.m_strengthArea.enabled=!1,this.m_strengthArea.focusEnabled=!1,this.m_strengthArea.editable=!1}DisableStuffForJumpbotLevel(){this.m_collisionBox.enabled=!1,this.m_cameraBox.enabled=!1,this.m_undragableBox.enabled=!1,this.m_collisionBox2.enabled=!1,this.m_collisionBox3.enabled=!1,this.m_undragableBox2.enabled=!1,this.m_minDispArea.enabled=!1,this.m_minDispArea.focusEnabled=!1,this.m_minDispArea.editable=!1,this.m_maxDispArea.enabled=!1,this.m_maxDispArea.focusEnabled=!1,this.m_maxDispArea.editable=!1,this.m_rigidJointBox.enabled=!1,this.m_autoBox1.enabled=!1,this.m_autoBox2.enabled=!1,this.m_controlKeyArea1.enabled=!1,this.m_controlKeyArea1.focusEnabled=!1,this.m_controlKeyArea1.editable=!1,this.m_controlKeyArea2.enabled=!1,this.m_controlKeyArea2.focusEnabled=!1,this.m_controlKeyArea2.editable=!1}DisableStuffForDumpbotLevel(){this.m_collisionBox.enabled=!1,this.m_cameraBox.enabled=!1,this.m_undragableBox.enabled=!1,this.m_collisionBox2.enabled=!1,this.m_collisionBox3.enabled=!1,this.m_undragableBox2.enabled=!1,this.m_minDispArea.enabled=!1,this.m_minDispArea.focusEnabled=!1,this.m_minDispArea.editable=!1,this.m_maxDispArea.enabled=!1,this.m_maxDispArea.focusEnabled=!1,this.m_maxDispArea.editable=!1,this.m_autoBox1.enabled=!1,this.m_autoBox2.enabled=!1}DisableStuffForCatapultLevel(){this.m_collisionBox.enabled=!1,this.m_undragableBox.enabled=!1,this.m_collisionBox2.enabled=!1,this.m_collisionBox3.enabled=!1,this.m_undragableBox2.enabled=!1,this.m_autoBox1.enabled=!1,this.m_autoBox2.enabled=!1,this.m_controlKeyArea1.enabled=!1,this.m_controlKeyArea1.focusEnabled=!1,this.m_controlKeyArea1.editable=!1,this.m_controlKeyArea2.enabled=!1,this.m_controlKeyArea2.focusEnabled=!1,this.m_controlKeyArea2.editable=!1}DisableStuffForHomeMoviesLevel(){this.m_collisionBox.enabled=!1,this.m_undragableBox.enabled=!1,this.m_collisionBox2.enabled=!1,this.m_collisionBox3.enabled=!1,this.m_undragableBox2.enabled=!1,this.m_autoBox1.enabled=!1,this.m_autoBox2.enabled=!1}ShowObjectPanel(t){this.visible=!0,this.m_colourWindow.visible=!1,this.m_fixedJointPanel.visible=!1,this.m_jointEditPanel.visible=!1,this.m_objectEditPanel.visible=!0,this.m_textEditPanel.visible=!1,this.m_thrustersEditPanel.visible=!1,this.m_multiEditPanel.visible=!1,this.m_buildBoxPanel.visible=!1,this.m_cannonPanel.visible=!1,this.m_densitySlider.value=t.density,this.m_densitySlider.minValue=na.minDensity,this.m_densitySlider.maxValue=na.maxDensity,this.m_densityArea.text=t.density.toString(),this.m_collisionBox.selected=t.collide,this.m_collisionBox.visible="sandbox"===this.cont.controllerType||"challenge"===this.cont.controllerType&&(Ha.challenge.nonCollidingAllowed||!Ha.playChallengeMode),this.m_fixateBox.selected=t.isStatic,this.m_fixateBox.visible="sandbox"===this.cont.controllerType||"challenge"===this.cont.controllerType&&(Ha.challenge.fixateAllowed||!Ha.playChallengeMode),this.m_cameraBox.selected=t.isCameraFocus,this.m_outlineBox.selected=t.outline,this.m_terrainBox.selected=t.terrain,this.m_undragableBox.selected=t.undragable,t instanceof _h&&(this.m_shapeHeader.text="Circle"),t instanceof gh&&(this.m_shapeHeader.text="Rectangle"),t instanceof bh&&(this.m_shapeHeader.text="Triangle");var e=new js.TextStyle;e.fontFamily=Sa.GLOBAL_FONT,e.fontSize=14,e.align="center",this.m_shapeHeader.style=e}ShowCannonPanel(t){this.visible=!0,this.m_colourWindow.visible=!1,this.m_fixedJointPanel.visible=!1,this.m_jointEditPanel.visible=!1,this.m_objectEditPanel.visible=!1,this.m_textEditPanel.visible=!1,this.m_thrustersEditPanel.visible=!1,this.m_multiEditPanel.visible=!1,this.m_buildBoxPanel.visible=!1,this.m_cannonPanel.visible=!0,this.m_densitySlider7.value=t.density,this.m_densityArea7.text=t.density.toString(),this.m_collisionBox7.selected=t.collide,this.m_collisionBox7.visible="sandbox"===this.cont.controllerType&&!("challenge"===this.cont.controllerType)||"challenge"===this.cont.controllerType&&(Ha.challenge.nonCollidingAllowed||!Ha.playChallengeMode),this.m_fixateBox7.selected=t.isStatic,this.m_fixateBox7.visible="sandbox"===this.cont.controllerType&&!("challenge"===this.cont.controllerType)||"challenge"===this.cont.controllerType&&(Ha.challenge.fixateAllowed||!Ha.playChallengeMode),this.m_outlineBox7.selected=t.outline,this.m_terrainBox7.selected=t.terrain,this.m_undragableBox7.selected=t.undragable,this.m_cannonHeader.text="Cannon";var e=new js.TextStyle;e.fontFamily=Sa.GLOBAL_FONT,e.fontSize=14,e.align="center",this.m_cannonHeader.style=e,this.m_strengthSlider7.value=t.strength,this.m_strengthArea7.text=t.strength+"";var i=Us.getKeyString(t.fireKey);null==i&&(i="Unk: "+t.fireKey),this.m_fireKeyArea.text=i}ShowTextPanel(t){this.visible=!0,this.m_colourWindow.visible=!1,this.m_fixedJointPanel.visible=!1,this.m_jointEditPanel.visible=!1,this.m_objectEditPanel.visible=!1,this.m_thrustersEditPanel.visible=!1,this.m_multiEditPanel.visible=!1,this.m_textEditPanel.visible=!0,this.m_buildBoxPanel.visible=!1,this.m_cannonPanel.visible=!1,this.m_alwaysVisibleBox.selected=t.alwaysVisible,this.m_scaleWithZoomBox.selected=t.scaleWithZoom,this.m_textKeyArea.enabled=!t.alwaysVisible;var e=Us.getKeyString(t.displayKey);null==e&&(e="Unk: "+t.displayKey),this.m_textKeyArea.text=e,this.m_textArea.text=t.text,this.m_sizeArea.text=t.size+""}ShowMultiSelectPanel(t){this.visible=!0,this.m_colourWindow.visible=!1,this.m_fixedJointPanel.visible=!1,this.m_jointEditPanel.visible=!1,this.m_objectEditPanel.visible=!1,this.m_thrustersEditPanel.visible=!1,this.m_multiEditPanel.visible=!0,this.m_textEditPanel.visible=!1,this.m_cannonPanel.visible=!1,this.m_outlineBox3.selected=!0,this.m_terrainBox3.selected=!1,this.m_fixateBox2.selected=!1,this.m_undragableBox2.selected=!1,this.m_collisionBox2.selected=!0,this.m_collisionBox2.visible="sandbox"===this.cont.controllerType&&!("challenge"===this.cont.controllerType)||"challenge"===this.cont.controllerType&&(Ha.challenge.nonCollidingAllowed||!Ha.playChallengeMode),this.m_fixateBox2.visible="sandbox"===this.cont.controllerType&&!("challenge"===this.cont.controllerType)||"challenge"===this.cont.controllerType&&(Ha.challenge.fixateAllowed||!Ha.playChallengeMode),this.m_buildBoxPanel.visible=!1;for(var e=0;e<t.length;e++)(t[e]instanceof mh&&!t[e].outline||t[e]instanceof Sh&&!t[e].outline)&&(this.m_outlineBox3.selected=!1),t[e]instanceof mh&&t[e].terrain&&(this.m_terrainBox3.selected=!0),t[e]instanceof mh&&t[e].isStatic&&(this.m_fixateBox2.selected=!0),t[e]instanceof mh&&t[e].undragable&&(this.m_undragableBox2.selected=!0),t[e]instanceof mh&&!t[e].collide&&(this.m_collisionBox2.selected=!1)}ShowJointPanel(t){var e,i;if(this.visible=!0,this.m_colourWindow.visible=!1,this.m_objectEditPanel.visible=!1,this.m_fixedJointPanel.visible=!1,this.m_jointEditPanel.visible=!0,this.m_thrustersEditPanel.visible=!1,this.m_multiEditPanel.visible=!1,this.m_textEditPanel.visible=!1,this.m_buildBoxPanel.visible=!1,this.m_cannonPanel.visible=!1,t instanceof xh){var s=t;this.m_enableMotorBox.selected=s.enableMotor,this.m_rigidJointBox.selected=!s.isStiff,this.m_strengthLabel.text="Motor Strength",this.m_strengthSlider.value=s.motorStrength,this.m_strengthSlider.enabled=s.enableMotor,this.m_strengthSlider.maxValue=na.maxRJStrength,this.m_strengthArea.text=s.motorStrength+"",this.m_speedLabel.text="Motor Speed",this.m_speedSlider.value=s.motorSpeed,this.m_speedSlider.enabled=s.enableMotor,this.m_speedSlider.maxValue=na.maxRJSpeed,this.m_speedArea.text=s.motorSpeed+"",this.m_autoBox1.selected=s.autoCW,this.m_autoBox2.selected=s.autoCCW,this.m_limitLabel1.visible=!0,this.m_minDispArea.visible=!0,this.m_limitLabel2.visible=!0,this.m_maxDispArea.visible=!0,s.motorLowerLimit==-Number.MAX_VALUE?this.m_minDispArea.text="None":this.m_minDispArea.text=String(s.motorLowerLimit),s.motorUpperLimit==Number.MAX_VALUE?this.m_maxDispArea.text="None":this.m_maxDispArea.text=String(s.motorUpperLimit),this.m_inputLabel1.text="Rotate CW:",null==(e=Us.getKeyString(s.motorCWKey))&&(e="Unk: "+s.motorCWKey),this.m_controlKeyArea1.text=e,this.m_controlKeyArea1.enabled=s.enableMotor,this.m_controlKeyArea1.focusEnabled=s.enableMotor,this.m_inputLabel2.text="Rotate CCW:",null==(e=Us.getKeyString(s.motorCCWKey))&&(e="Unk: "+s.motorCCWKey),this.m_controlKeyArea2.text=e,this.m_controlKeyArea2.enabled=s.enableMotor,this.m_controlKeyArea2.focusEnabled=s.enableMotor,this.m_rigidJointBox.enabled=s.enableMotor,this.m_rigidJointBox.focusEnabled=s.enableMotor,this.m_strengthArea.enabled=s.enableMotor,this.m_strengthArea.editable=s.enableMotor,this.m_strengthArea.focusEnabled=s.enableMotor,this.m_speedArea.enabled=s.enableMotor,this.m_speedArea.focusEnabled=s.enableMotor,this.m_speedArea.editable=s.enableMotor,this.m_autoBox1.enabled=s.enableMotor,this.m_autoBox2.enabled=s.enableMotor,this.m_inputLabel1.x=10,this.m_inputLabel2.x=10,this.m_controlKeyArea1.x=70,this.m_controlKeyArea2.x=70,this.m_autoBox1.label="Auto-On CW",this.m_autoBox2.visible=!0,this.m_colourButton.visible=!1,this.m_frontButton.visible=!1,this.m_backButton.visible=!1,this.m_outlineBox2.visible=!1,this.m_collisionBox3.visible=!1,this.m_jointHeader.text="Rotating Joint",(i=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,i.fontSize=14,i.align="center",this.m_jointHeader.style=i}else if(t instanceof Sh){var r=t;this.m_enableMotorBox.selected=r.enablePiston,this.m_rigidJointBox.selected=!r.isStiff,this.m_strengthLabel.text="Piston Strength",this.m_strengthSlider.value=r.pistonStrength,this.m_strengthSlider.enabled=r.enablePiston,this.m_strengthSlider.maxValue=na.maxSJStrength,this.m_strengthArea.text=r.pistonStrength+"",this.m_speedLabel.text="Piston Speed",this.m_speedSlider.value=r.pistonSpeed,this.m_speedSlider.enabled=r.enablePiston,this.m_speedSlider.maxValue=na.maxSJSpeed,this.m_speedArea.text=r.pistonSpeed+"",this.m_autoBox1.selected=r.autoOscillate,this.m_outlineBox2.selected=r.outline,this.m_limitLabel1.visible=!1,this.m_minDispArea.visible=!1,this.m_limitLabel2.visible=!1,this.m_maxDispArea.visible=!1,this.m_inputLabel1.text="Expand:",null==(e=Us.getKeyString(r.pistonUpKey))&&(e="Unk: "+r.pistonUpKey),this.m_controlKeyArea1.text=e,this.m_controlKeyArea1.enabled=r.enablePiston,this.m_controlKeyArea1.focusEnabled=r.enablePiston,this.m_inputLabel2.text="Contract:",null==(e=Us.getKeyString(r.pistonDownKey))&&(e="Unk: "+r.pistonDownKey),this.m_controlKeyArea2.text=e,this.m_controlKeyArea2.enabled=r.enablePiston,this.m_controlKeyArea2.focusEnabled=r.enablePiston,this.m_rigidJointBox.enabled=r.enablePiston,this.m_rigidJointBox.focusEnabled=r.enablePiston,this.m_strengthArea.enabled=r.enablePiston,this.m_strengthArea.editable=r.enablePiston,this.m_strengthArea.focusEnabled=r.enablePiston,this.m_speedArea.enabled=r.enablePiston,this.m_speedArea.focusEnabled=r.enablePiston,this.m_speedArea.editable=r.enablePiston,this.m_autoBox1.enabled=r.enablePiston,this.m_inputLabel1.x=-3,this.m_inputLabel2.x=-3,this.m_controlKeyArea1.x=60,this.m_controlKeyArea2.x=60,this.m_autoBox1.label="Auto Oscillate",this.m_autoBox2.visible=!1,this.m_colourButton.visible=!0,this.m_frontButton.visible=!0,this.m_backButton.visible=!0,this.m_outlineBox2.visible=!0,this.m_collisionBox3.visible="sandbox"===this.cont.controllerType&&!("challenge"===this.cont.controllerType)||"challenge"===this.cont.controllerType&&(Ha.challenge.nonCollidingAllowed||!Ha.playChallengeMode),this.m_collisionBox3.selected=r.collide,this.m_jointHeader.text="Sliding Joint",(i=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,i.fontSize=14,i.align="center",this.m_jointHeader.style=i}else this.m_fixedJointPanel.visible=!0,this.m_jointEditPanel.visible=!1;(i=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,i.fontSize=9,i.fill="#242930",this.m_limitLabel1.style=i,this.m_limitLabel2.style=i,(i=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,i.fontSize=9,i.fill="#242930",i.align="right",this.m_inputLabel1.style=i,this.m_inputLabel2.style=i,(i=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,i.fontSize=9,i.fill="#242930",this.m_speedLabel.style=i,this.m_strengthLabel.style=i,this.m_inputLabel1.visible=!("challenge"===this.cont.controllerType)||!Ha.playChallengeMode||"challenge"===this.cont.controllerType&&Ha.challenge.botControlAllowed,this.m_inputLabel2.visible=!("challenge"===this.cont.controllerType)||!Ha.playChallengeMode||"challenge"===this.cont.controllerType&&Ha.challenge.botControlAllowed,this.m_controlKeyArea1.visible=!("challenge"===this.cont.controllerType)||!Ha.playChallengeMode||"challenge"===this.cont.controllerType&&Ha.challenge.botControlAllowed,this.m_controlKeyArea2.visible=!("challenge"===this.cont.controllerType)||!Ha.playChallengeMode||"challenge"===this.cont.controllerType&&Ha.challenge.botControlAllowed}ShowThrustersPanel(t){this.visible=!0,this.m_colourWindow.visible=!1,this.m_objectEditPanel.visible=!1,this.m_fixedJointPanel.visible=!1,this.m_jointEditPanel.visible=!1,this.m_thrustersEditPanel.visible=!0,this.m_multiEditPanel.visible=!1,this.m_textEditPanel.visible=!1,this.m_buildBoxPanel.visible=!1,this.m_cannonPanel.visible=!1,this.m_autoBox3.selected=t.autoOn,this.m_thrustSlider.value=t.strength,this.m_thrustSlider.maxValue=na.maxThrusterStrength,this.m_thrustArea.text=t.strength+"";var e=Us.getKeyString(t.thrustKey);null==e&&(e="Unk: "+t.thrustKey),this.m_thrustKeyArea.text=e,this.m_thrustKeyLabel.visible=!("challenge"===this.cont.controllerType)||!Ha.playChallengeMode||"challenge"===this.cont.controllerType&&Ha.challenge.botControlAllowed,this.m_thrustKeyArea.visible=!("challenge"===this.cont.controllerType)||!Ha.playChallengeMode||"challenge"===this.cont.controllerType&&Ha.challenge.botControlAllowed}ShowBuildBoxPanel(){this.visible=!0,this.m_colourWindow.visible=!1,this.m_objectEditPanel.visible=!1,this.m_fixedJointPanel.visible=!1,this.m_jointEditPanel.visible=!1,this.m_thrustersEditPanel.visible=!1,this.m_multiEditPanel.visible=!1,this.m_textEditPanel.visible=!1,this.m_buildBoxPanel.visible=!0,this.m_cannonPanel.visible=!1}TextAreaGotFocus(t=null){this.enteringInput=!0}TextAreaLostFocus(t=null){this.enteringInput=!1}sliderClicked(t){this.sliderDown=!0}sliderReleased(t){this.sliderDown=!1}EnteringInput(){return this.visible||(this.enteringInput=!1),this.enteringInput}SetDensity(t){this.m_densityArea.text=t.toString(),this.m_densitySlider.value=t,this.m_densityArea7.text=t.toString(),this.m_densitySlider7.value=t}SetStrength(t){this.m_strengthArea.text=t.toString(),this.m_strengthSlider.value=t}SetSpeed(t){this.m_speedArea.text=t.toString(),this.m_speedSlider.value=t}SetThrust(t){this.m_thrustArea.text=t.toString(),this.m_thrustSlider.value=t}SetCannon(t){this.m_strengthArea7.text=t.toString(),this.m_strengthSlider7.value=t}EnableMotorStuff(t){this.m_strengthSlider.enabled=t,this.m_speedSlider.enabled=t,this.m_controlKeyArea1.enabled=t,this.m_controlKeyArea2.enabled=t,this.m_rigidJointBox.enabled=t,this.m_strengthArea.enabled=t,this.m_strengthArea.editable=t,this.m_speedArea.enabled=t,this.m_speedArea.editable=t,this.m_autoBox1.enabled=t,this.m_autoBox2.enabled=t}EnableTextStuff(t){this.m_textKeyArea.enabled=t}deselectBox2(){this.m_autoBox2.selected=!1}deselectBox1(){this.m_autoBox1.selected=!1}sizeFocus(t){this.m_sizeArea.setSelection(0,4)}minDispFocus(t){this.m_minDispArea.enabled&&this.m_minDispArea.setSelection(0,10)}maxDispFocus(t){this.m_maxDispArea.enabled&&this.m_maxDispArea.setSelection(0,10)}densityFocus(t){this.m_densityArea.enabled&&this.m_densityArea.setSelection(0,10)}strengthFocus(t){this.m_strengthArea.enabled&&this.m_strengthArea.setSelection(0,10)}speedFocus(t){this.m_speedArea.enabled&&this.m_speedArea.setSelection(0,10)}thrustFocus(t){this.m_thrustArea.enabled&&this.m_thrustArea.setSelection(0,10)}cannonFocus(t){this.m_strengthArea7.enabled&&this.m_strengthArea7.setSelection(0,10)}controlKey1Focus(t){this.m_controlKeyArea1.enabled&&this.m_controlKeyArea1.setSelection(0,10)}controlKey2Focus(t){this.m_controlKeyArea2.enabled&&this.m_controlKeyArea2.setSelection(0,10)}thrustKeyFocus(t){this.m_thrustKeyArea.enabled&&this.m_thrustKeyArea.setSelection(0,10)}cannonKeyFocus(t){this.m_fireKeyArea.enabled&&this.m_fireKeyArea.setSelection(0,10)}ColourWindowShowing(){return this.visible&&this.m_colourWindow.visible}BuildWindowShowing(){return this.visible&&this.m_buildBoxPanel.visible}}a("7qcjp");$s=a("kpTES");var Da=a("5pLOZ");js=a("4Y6fG");class Ia extends da{constructor(t,e){super(119,0,120,260),this.sortableChildren=!0,this.cont=t,this.m_sidePanel=e,this.m_colourSelector=new $s.Graphics,this.addChild(this.m_colourSelector);var i=new js.TextStyle;i.fontFamily=Sa.GLOBAL_FONT,i.fill=2369840,i.fontSize=12,this.m_redLabel=new js.Text(""),this.m_redLabel.text="Red:",this.m_redLabel.x=18,this.m_redLabel.y=20,this.m_redLabel.style=i,this.addChild(this.m_redLabel),this.m_greenLabel=new js.Text(""),this.m_greenLabel.text="Green:",this.m_greenLabel.x=18,this.m_greenLabel.y=40,this.m_greenLabel.style=i,this.addChild(this.m_greenLabel),this.m_blueLabel=new js.Text(""),this.m_blueLabel.text="Blue:",this.m_blueLabel.x=18,this.m_blueLabel.y=60,this.m_blueLabel.style=i,this.addChild(this.m_blueLabel),this.m_opacityLabel=new js.Text(""),this.m_opacityLabel.text="Opacity:",this.m_opacityLabel.x=18,this.m_opacityLabel.y=80,this.m_opacityLabel.style=i,this.addChild(this.m_opacityLabel),(i=new js.TextStyle).fontSize=9,this.m_redArea=new ga(67,20,30,15,i),this.m_redArea.text="253",this.m_redArea.maxLength=3,this.m_redArea.on("click",(t=>this.redFocus(t))),this.m_redArea.on("focus",(t=>this.m_sidePanel.TextAreaGotFocus(t))),this.m_redArea.on("change",(t=>this.redText(t))),this.m_redArea.on("blur",(t=>this.focusOut(t))),this.addChild(this.m_redArea),this.m_greenArea=new ga(67,40,30,15,i),this.m_greenArea.text="136",this.m_greenArea.maxLength=3,this.m_greenArea.on("click",(t=>this.greenFocus(t))),this.m_greenArea.on("focus",(t=>this.m_sidePanel.TextAreaGotFocus(t))),this.m_greenArea.on("change",(t=>this.greenText(t))),this.m_greenArea.on("blur",(t=>this.focusOut(t))),this.addChild(this.m_greenArea),this.m_blueArea=new ga(67,60,30,15,i),this.m_blueArea.text="92",this.m_blueArea.maxLength=3,this.m_blueArea.on("click",(t=>this.blueFocus(t))),this.m_blueArea.on("focus",(t=>this.m_sidePanel.TextAreaGotFocus(t))),this.m_blueArea.on("change",(t=>this.blueText(t))),this.m_blueArea.on("blur",(t=>this.focusOut(t))),this.addChild(this.m_blueArea),this.m_opacityArea=new ga(67,80,30,15,i),this.m_opacityArea.text="210",this.m_opacityArea.maxLength=3,this.m_opacityArea.on("click",(t=>this.opacityFocus(t))),this.m_opacityArea.on("focus",(t=>this.m_sidePanel.TextAreaGotFocus(t))),this.m_opacityArea.on("change",(t=>this.opacityText(t))),this.m_opacityArea.on("blur",(t=>this.focusOut(t))),this.addChild(this.m_opacityArea),this.m_colourBox=new pa(10,95,100,30),this.m_colourBox.addItem({label:"  --"}),this.m_colourBox.addItem({label:"  Red"}),this.m_colourBox.addItem({label:"  Orange"}),this.m_colourBox.addItem({label:"  Yellow"}),this.m_colourBox.addItem({label:"  Green"}),this.m_colourBox.addItem({label:"  Turquoise"}),this.m_colourBox.addItem({label:"  Blue"}),this.m_colourBox.addItem({label:"  Purple"}),this.m_colourBox.addItem({label:"  Pink"}),this.m_colourBox.addItem({label:"  Beige"}),this.m_colourBox.addItem({label:"  Brown"}),this.m_colourBox.addItem({label:"  White"}),this.m_colourBox.addItem({label:"  Grey"}),this.m_colourBox.addItem({label:"  Black"}),this.m_colourBox.on("change",(t=>this.colourBox(t))),this.m_colourBox.on("close",(t=>this.colourBox(t))),(i=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,i.fontSize=10,i.fill=4996439,this.m_colourBox.label.style=i,this.addChild(this.m_colourBox),this.redrawBox(),(i=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,i.fontSize=10,i.fill=2369840,this.m_defaultBox=new ha(5,160,120),this.m_defaultBox.style=i,this.m_defaultBox.label="Make Default",this.m_defaultBox.selected=!1,this.addChild(this.m_defaultBox),this.m_okButton=new aa("OK",10,180,100,35,(t=>this.okButton(t)),aa.PURPLE),this.addChild(this.m_okButton),this.m_cancelButton=new aa("Cancel",10,210,100,35,(t=>this.cancelButton(t)),aa.PURPLE),this.addChild(this.m_cancelButton)}SetVals(){var t=this.cont.selectedParts[0];this.m_redArea.text=t.red+"",this.m_greenArea.text=t.green+"",this.m_blueArea.text=t.blue+"",this.m_opacityArea.text=t instanceof wh?"255":t.opacity+"",this.SetComboBoxIndex(),this.redrawBox()}SetComboBoxIndex(){var t=parseInt(this.m_redArea.text),e=parseInt(this.m_greenArea.text),i=parseInt(this.m_blueArea.text);this.m_colourBox.selectedIndex=253==t&&66==e&&42==i?1:253==t&&116==e&&10==i?2:251==t&&241==e&&56==i?3:80==t&&255==e&&72==i?4:52==t&&245==e&&227==i?5:54==t&&89==e&&255==i?6:189==t&&87==e&&255==i?7:255==t&&155==e&&152==i?8:255==t&&216==e&&136==i?9:151==t&&122==e&&46==i?10:253==t&&253==e&&253==i?11:160==t&&160==e&&160==i?12:24==t&&24==e&&24==i?13:0}cancelButton(t){this.visible=!1}redFocus(t){this.m_redArea.setSelection(0,3)}greenFocus(t){this.m_greenArea.setSelection(0,3)}blueFocus(t){this.m_blueArea.setSelection(0,3)}opacityFocus(t){this.m_opacityArea.setSelection(0,3)}focusOut(t){this.m_sidePanel.TextAreaLostFocus()}redText(t){var e=parseInt(t);e<0&&(e=0),e>255&&(e=255),isNaN(e)&&(e=0),t=e+"",this.SetComboBoxIndex(),this.redrawBox(),this.cont.textEntered()}greenText(t){var e=parseInt(t);e<0&&(e=0),e>255&&(e=255),isNaN(e)&&(e=0),t=e+"",this.SetComboBoxIndex(),this.redrawBox(),this.cont.textEntered()}blueText(t){var e=parseInt(t);e<0&&(e=0),e>255&&(e=255),isNaN(e)&&(e=0),t=e+"",this.SetComboBoxIndex(),this.redrawBox(),this.cont.textEntered()}opacityText(t){var e=parseInt(t);e<0&&(e=0),e>255&&(e=255),isNaN(e)&&(e=0),t=e+"",this.cont.textEntered()}colourBox(t){1==t?(this.m_redArea.text="253",this.m_greenArea.text="66",this.m_blueArea.text="42"):2==t?(this.m_redArea.text="253",this.m_greenArea.text="116",this.m_blueArea.text="10"):3==t?(this.m_redArea.text="251",this.m_greenArea.text="241",this.m_blueArea.text="56"):4==t?(this.m_redArea.text="80",this.m_greenArea.text="255",this.m_blueArea.text="72"):5==t?(this.m_redArea.text="52",this.m_greenArea.text="245",this.m_blueArea.text="227"):6==t?(this.m_redArea.text="54",this.m_greenArea.text="89",this.m_blueArea.text="255"):7==t?(this.m_redArea.text="189",this.m_greenArea.text="87",this.m_blueArea.text="255"):8==t?(this.m_redArea.text="255",this.m_greenArea.text="155",this.m_blueArea.text="152"):9==t?(this.m_redArea.text="255",this.m_greenArea.text="216",this.m_blueArea.text="136"):10==t?(this.m_redArea.text="151",this.m_greenArea.text="122",this.m_blueArea.text="46"):11==t?(this.m_redArea.text="253",this.m_greenArea.text="253",this.m_blueArea.text="253"):12==t?(this.m_redArea.text="160",this.m_greenArea.text="160",this.m_blueArea.text="160"):13==t&&(this.m_redArea.text="24",this.m_greenArea.text="24",this.m_blueArea.text="24"),this.redrawBox()}okButton(t){this.cancelButton(t),this.cont.colourButton(parseInt(this.m_redArea.text),parseInt(this.m_greenArea.text),parseInt(this.m_blueArea.text),parseInt(this.m_opacityArea.text),this.m_defaultBox.selected)}redrawBox(){this.m_colourSelector.clear(),this.m_colourSelector.beginFill(Da.rgb2hex([parseInt(this.m_redArea.text)/255,parseInt(this.m_greenArea.text)/255,parseInt(this.m_blueArea.text)/255]),1),this.m_colourSelector.lineStyle(1,2236962,1),this.m_colourSelector.drawRect(40,128,40,30),this.m_colourSelector.endFill()}}a("7qcjp");js=a("4Y6fG"),Qs=a("f6Kro");class Ma extends da{constructor(t,e){var i=40;if(t instanceof Za||t instanceof nh||t instanceof rh||t instanceof ah||t instanceof oh||(i=60),super(323,130,200,t instanceof Za||t instanceof nh||t instanceof rh||t instanceof ah?i+200:i+170),this.cont=t,this.m_header=new Qs.Sprite(sa.cCongrats),this.m_header.width=175,this.m_header.scale.y=this.m_header.scale.x,this.m_header.x=13,this.m_header.y=15,this.addChild(this.m_header),!(this.cont instanceof Za||this.cont instanceof nh||this.cont instanceof rh||this.cont instanceof ah||this.cont instanceof oh)){this.m_scoreField=new js.Text(""),this.m_scoreField.text="Your score is: "+e,this.m_scoreField.width=120,this.m_scoreField.height=20,this.m_scoreField.x=40,this.m_scoreField.y=44;var s=new js.TextStyle;s.align="center",s.fontFamily=Sa.GLOBAL_FONT,s.fill=2369840,this.m_scoreField.style=s,this.addChild(this.m_scoreField)}this.m_viewReplayButton=new aa(na.viewingUnsavedReplay?"View Again!":"View Replay",45,i,110,35,this.viewReplayButton.bind(this),aa.PURPLE),this.addChild(this.m_viewReplayButton),this.m_saveReplayButton=new aa("Save Replay",45,i+30,110,35,this.saveReplayButton.bind(this),aa.PURPLE),this.addChild(this.m_saveReplayButton),this.m_submitScoreButton=new aa("Submit Score",45,i+60,110,35,this.cont.submitButton.bind(this),aa.PURPLE),this.addChild(this.m_submitScoreButton),this.m_mainMenuButton=new aa("Main Menu",45,i+90,110,35,this.cont.newButton.bind(this),aa.PURPLE),this.addChild(this.m_mainMenuButton),this.m_cancelButton=new aa(this.cont instanceof nh||this.cont instanceof oh?"Close":"Retry",45,i+120,110,35,this.cancelButton.bind(this),aa.PURPLE),this.addChild(this.m_cancelButton),(this.cont instanceof Za||this.cont instanceof nh||this.cont instanceof rh||this.cont instanceof ah)&&(this.m_nextLevelButton=new aa("Next Level",45,i+150,110,35,this.nextButton.bind(this),aa.BLUE),this.addChild(this.m_nextLevelButton))}viewReplayButton(){this.cont.viewReplayButton()}saveReplayButton(){this.cont.saveReplayButton()}cancelButton(){this.visible=!1,this.cont.m_fader.visible=!1,this.cont instanceof nh||this.cont instanceof oh||this.cont.resetButton()}nextButton(){if(Sa.changeControllers=!0,Sa.nextControllerType++,Sa.nextControllerType>15){var t=new La(15,1,0,0,0);18==Sa.nextControllerType&&(t=new La(1,0,1,5,1)),19==Sa.nextControllerType&&(t=new La(15,0,2,0,5)),Ya.settings=t}na.playingReplay=!1,na.viewingUnsavedReplay=!1}}a("7qcjp");js=a("4Y6fG");class Oa extends da{constructor(t){super(323,130,154,""==na.curReplayID?210:240),this.cont=t,this.m_header=new js.Text(""),this.m_header.text="End of Replay",this.m_header.height=20,this.m_header.x=77,this.m_header.y=20,this.m_header.anchor.set(.5,0);var e=new js.TextStyle;e.align="center",e.fontFamily=Sa.GLOBAL_FONT,e.fontSize=14,e.fill=2369840,this.m_header.style=e,this.addChild(this.m_header),this.m_viewReplayButton=new aa("View Again!",22,45,110,35,this.viewReplayButton.bind(this),aa.PURPLE),this.addChild(this.m_viewReplayButton),this.m_loadReplayButton=new aa("Load Replay",22,75,110,35,this.loadReplayButton.bind(this),aa.PURPLE),this.addChild(this.m_loadReplayButton),this.m_stopButton=new aa("Stop Replay",22,105,110,35,this.rewindButton.bind(this),aa.PURPLE),this.addChild(this.m_stopButton),""!=na.curReplayID&&(this.m_rateButton=new aa("Rate this Replay",22,135,110,35,this.rateButton.bind(this),aa.PURPLE),this.addChild(this.m_rateButton)),this.m_mainMenuButton=new aa("Main Menu",22,""==na.curReplayID?135:165,110,35,this.mainMenuButton.bind(this),aa.PURPLE),this.addChild(this.m_mainMenuButton),this.m_closeButton=new aa("Close",22,""==na.curReplayID?165:195,110,35,this.cancelButton.bind(this),aa.PURPLE),this.addChild(this.m_closeButton)}rateButton(){this.ShowFader(),this.cont.rateReplayButton()}viewReplayButton(){this.visible=!1,this.cont.m_fader.visible=!1,this.cont.resetButton()}loadReplayButton(){this.visible=!1,this.cont.m_fader.visible=!1,this.cont.loadReplayButton()}rewindButton(){this.visible=!1,this.cont.m_fader.visible=!1,this.cont.rewindButton()}mainMenuButton(){this.visible=!1,this.cont.m_fader.visible=!1,this.cont.newButton()}cancelButton(){this.visible=!1,this.cont.m_fader.visible=!1}}class La{constructor(t,e,i,s,r,n=0,o=0,a=0){this.gravity=t,this.size=e,this.terrainType=i,this.terrainTheme=s,this.background=r,this.backgroundR=n,this.backgroundG=o,this.backgroundB=a}}La.SIZE_SMALL=0,La.SIZE_MEDIUM=1,La.SIZE_LARGE=2,La.TERRAIN_LAND=0,La.TERRAIN_BOX=1,La.TERRAIN_EMPTY=2,La.TERRAIN_GRASS=0,La.TERRAIN_DIRT=1,La.TERRAIN_SAND=2,La.TERRAIN_ROCK=3,La.TERRAIN_SNOW=4,La.TERRAIN_MOON=5,La.TERRAIN_MARS=6,La.BACKGROUND_SKY=0,La.BACKGROUND_SPACE=1,La.BACKGROUND_NIGHT=2,La.BACKGROUND_DUSK=3,La.BACKGROUND_MARS=4,La.BACKGROUND_SUNSET=5,La.BACKGROUND_SOLID_COLOUR=6;class Ga{constructor(t){this.allParts=new Array,this.circlesAllowed=!0,this.rectanglesAllowed=!0,this.trianglesAllowed=!0,this.fixedJointsAllowed=!0,this.rotatingJointsAllowed=!0,this.slidingJointsAllowed=!0,this.thrustersAllowed=!0,this.cannonsAllowed=!0,this.fixateAllowed=!1,this.nonCollidingAllowed=!0,this.mouseDragAllowed=!1,this.botControlAllowed=!0,this.showConditions=!1,this.minDensity=-Number.MAX_VALUE,this.maxDensity=Number.MAX_VALUE,this.maxRJStrength=Number.MAX_VALUE,this.maxRJSpeed=Number.MAX_VALUE,this.maxSJStrength=Number.MAX_VALUE,this.maxSJSpeed=Number.MAX_VALUE,this.maxThrusterStrength=Number.MAX_VALUE,this.cameraX=Number.MAX_VALUE,this.cameraY=Number.MAX_VALUE,this.zoomLevel=Number.MAX_VALUE,this.buildAreas=new Array,this.winConditions=new Array,this.lossConditions=new Array,this.winConditionsAnded=!0,this.settings=t}}class Fa{constructor(t,e=null,i=Number.MAX_VALUE,s=Number.MAX_VALUE,r=Number.MAX_VALUE){this.settings=null,this.challenge=null,this.cameraX=Number.MAX_VALUE,this.cameraY=Number.MAX_VALUE,this.zoomLevel=Number.MAX_VALUE,this.allParts=t,this.settings=e,this.cameraX=i,this.cameraY=s,this.zoomLevel=r}}class ka{constructor(t,e,i,s,r){this.cont=null,this.syncPointIndex=0,this.cameraMovementIndex=0,this.keyPressIndex=0,this.cameraMovements=t,this.syncPoints=e,this.keyPresses=i,this.numFrames=s,this.version=r}Update(t){for(;this.cameraMovementIndex<this.cameraMovements.length&&this.cameraMovements[this.cameraMovementIndex].frame==t;)this.cont&&this.cont.MoveCameraForReplay(this.cameraMovements[this.cameraMovementIndex]),this.cameraMovementIndex++;if(this.syncPointIndex<this.syncPoints.length)if(t>=this.syncPoints[this.syncPointIndex].frame){var e=this.syncPoints[this.syncPointIndex];this.cont&&this.cont.SyncReplay(e),this.syncPointIndex++}else{var i=this.syncPoints[this.syncPointIndex-1],s=this.syncPoints[this.syncPointIndex];this.cont&&this.cont.SyncReplay2(i,s)}for(;this.keyPressIndex<this.keyPresses.length&&this.keyPresses[this.keyPressIndex].frame==t;)this.cont&&this.cont.keyInput(this.keyPresses[this.keyPressIndex].key,!0),this.keyPressIndex++;return t>=this.numFrames}}class Na{constructor(){this.frame=0,this.positions=new Array,this.angles=new Array,this.cannonballPositions=new Array}}class Va{constructor(t,e,i,s){this.frame=t,this.x=e,this.y=i,this.scale=s}}a("7qcjp");Xs=a("8TYxR");class Ua extends Error{}class Wa extends Xs.Container{Update(){throw new Ua("abstract function Controller.Update() called")}ShowDialog(t){}ShowDialog2(t){}ShowDialog3(t){}ShowLinkDialog(t,e,i=!1,s="",r=!1){}HideDialog(){}HideLinkDialog(){}HideExportDialog(){}HideImportDialog(){}ShowImportWindow(t){}ShowConfirmDialog(t,e){}HideConfirmDialog(){}ConfirmDeleteRobot(){}ConfirmDeleteReplay(){}ConfirmDeleteChallenge(){}ConfirmLogout(){}DialogOK(){}finishGettingLoadRobotData(){}finishGettingLoadReplayData(){}finishGettingLoadChallengeData(){}finishGettingLoadChallengeForScoreData(){}finishGettingScoreData(){}finishLoading(){}finishLoadingReplay(){}finishLoadingChallenge(){}finishDeleting(){}finishDeletingReplay(){}finishDeletingChallenge(){}loginButton(t=!1,e=!1,i=!1){}finishLoggingIn(){}finishAddingUser(){}finishExporting(t,e){}commentButton(t="",e=!1){}linkButton(t="",e=!1){}embedButton(t="",e=!1){}commentReplayButton(t="",e=!1){}linkReplayButton(t="",e=!1){}embedReplayButton(t="",e=!1){}commentChallengeButton(t="",e=!1){}linkChallengeButton(t="",e=!1){}embedChallengeButton(t="",e=!1){}processLoadedRobot(t){}processLoadedReplay(t){}processLoadedChallenge(t){}GuiCallback(t){}IsPaused(){return!1}GetPhysScale(){return 30}GetMinX(){return-25}GetMaxX(){return 25}GetMinY(){return-25}GetMaxY(){return 25}World2ScreenX(t){return 40*t}World2ScreenY(t){return 40*t}keyInput(t,e){}SyncReplay(t){}SyncReplay2(t,e){}MoveCameraForReplay(t){}constructor(...t){super(...t),this.controllerType="controller"}}a("7qcjp");$s=a("kpTES"),js=a("4Y6fG"),ca=a("VYQOJ");class ja extends Wa{constructor(){super(),this.controllerType="game",this.m_world=null,this.m_groundBody=null,this.m_mouseJoint=null,this.m_iterations=10,this.m_timeStep=1/30,this.m_physScale=na.INIT_PHYS_SCALE,this.m_buildAreas=new Array,this.m_badBuildAreas=new Array,this.m_selectedBuildAreas=new Array,this.m_chooserWindow=null,this.m_loginWindow=null,this.m_newUserWindow=null,this.m_scoreWindow=null,this.m_progressDialog=null,this.m_linkDialog=null,this.m_tutorialDialog=null,this.m_postReplayWindow=null,this.m_rateDialog=null,this.m_restrictionsDialog=null,this.m_conditionsDialog=null,this.m_sandboxWindow=null,this.m_challengeWindow=null,this.m_reportWindow=null,this.m_loadWindow=null,this.m_exportDialog=null,this.m_importDialog=null,this.hasPanned=!0,this.hasZoomed=!0,this.redrawBuildArea=!0,this.redrawRobot=!0,this.paused=!0,this.simStarted=!1,this.wonChallenge=!1,this.canSaveReplay=!0,this.autoPanning=!0,this.cameraPart=null,this.curAction=-1,this.actionStep=0,this.lastAction=-1,this.partsFit=!0,this.draggingTutorial=!1,this.selectingCondition=!1,this.delayedSelection=!1,this.ignoreAClick=!1,this.backToSaveWindow=!1,this.clickedReport=!1,this.clickedSave=!1,this.clickedSaveReplay=!1,this.clickedSaveChallenge=!1,this.clickedSubmitScore=!1,this.redirectAfterRating=0,this.saveAfterRestrictions=!1,this.selectedParts=new Array,this.rotatingPart=null,this.rotatingParts=null,this.draggingPart=null,this.draggingParts=null,this.jointPart=null,this.lastSelectedShape=null,this.lastSelectedJoint=null,this.lastSelectedText=null,this.lastSelectedThrusters=null,this.copiedJoint=null,this.copiedThrusters=null,this.removedGraphics=new Array,this.oldText="",this.allParts=new Array,na.cannonballs=new Array,this.actions=new Array,Us.m_currController=this,Ph.m_controller=this,this.m_canvas=new $s.Graphics,this.m_guiPanel=new Ra(this),this.m_guiMenu=new wa(this),this.m_sidePanel=new Ba(this),this.m_fader=new $s.Graphics,this.m_fader.beginFill(0,.2),this.m_fader.lineStyle(0,0,.2),this.m_fader.moveTo(0,0),this.m_fader.lineTo(800,0),this.m_fader.lineTo(800,600),this.m_fader.lineTo(0,600),this.m_fader.lineTo(0,0),this.m_fader.endFill(),this.m_fader.visible=!1,this.uneditableText=new js.Text(""),this.uneditableText.x=0,this.uneditableText.y=102,this.uneditableText.width=800,this.uneditableText.text="The current robot is uneditable.  Some features, including saving and submitting scores, will be disabled.",this.uneditableText.visible=!1;var t=new js.TextStyle;t.align="center",t.fontFamily=Sa.GLOBAL_FONT,t.fontSize=12,this.uneditableText.style=t,this.rotatingText=new js.Text(""),this.rotatingText.x=0,this.rotatingText.y=102,this.rotatingText.width=800,this.rotatingText.text="Move the mouse around to rotate the shape, and click when you're done.",this.rotatingText.visible=!1,this.rotatingText.style=t,this.scalingText=new js.Text(""),this.scalingText.x=0,this.scalingText.y=102,this.scalingText.width=800,this.scalingText.text="Move the mouse to the right to increase the shape's size, and left to decrease it.",this.scalingText.visible=!1,this.scalingText.style=t,this.boxText=new js.Text(""),this.boxText.x=0,this.boxText.y=102,this.boxText.width=800,this.boxText.text="Use the mouse to click and drag a box for the given condition.  You can use the arrow keys to scroll.",this.boxText.visible=!1,this.boxText.style=t,this.horizLineText=new js.Text(""),this.horizLineText.x=0,this.horizLineText.y=102,this.horizLineText.width=800,this.horizLineText.text="Use the mouse to draw a horizontal line for the given condition.  You can use the arrow keys to scroll.",this.horizLineText.visible=!1,this.horizLineText.style=t,this.vertLineText=new js.Text(""),this.vertLineText.x=0,this.vertLineText.y=102,this.vertLineText.width=800,this.vertLineText.text="Use the mouse to draw a vertical line for the given condition.  You can use the arrow keys to scroll.",this.vertLineText.visible=!1,this.vertLineText.style=t,this.shapeText=new js.Text(""),this.shapeText.x=0,this.shapeText.y=102,this.shapeText.width=800,this.shapeText.text="Select a shape for the given condition.  You can use the arrow keys to scroll.",this.shapeText.visible=!1,this.shapeText.style=t,this.draw=new ra,this.draw.m_sprite=this.m_canvas,this.draw.m_drawScale=this.m_physScale,this.draw.m_drawYOff=-100,na.showColours?this.draw.m_fillAlpha=1:this.draw.m_fillAlpha=.5,this.draw.m_drawFlags=Zs.e_shapeBit|Zs.e_jointBit,na.playingReplay?na.replay.cont=this:na.viewingUnsavedReplay=!1,this.on("added",(t=>this.Init(t)))}Init(t){if(this.addChild(this.m_canvas),this.addChild(this.uneditableText),this.addChild(this.rotatingText),this.addChild(this.scalingText),this.addChild(this.boxText),this.addChild(this.horizLineText),this.addChild(this.vertLineText),this.addChild(this.shapeText),this.addChild(this.m_guiPanel),this.addChild(this.m_sidePanel),this.addChild(this.m_guiMenu),this.addChild(this.m_fader),na.playingReplay){this.allParts=this.allParts.concat(na.replayParts);for(var e=0;e<this.allParts.length;e++)if(this.allParts[e]instanceof wh){var i=new wh(this,this.allParts[e].x,this.allParts[e].y,this.allParts[e].w,this.allParts[e].h,this.allParts[e].text);i.alwaysVisible=this.allParts[e].alwaysVisible,i.displayKey=this.allParts[e].displayKey,i.red=this.allParts[e].red,i.green=this.allParts[e].green,i.blue=this.allParts[e].blue,i.size=this.allParts[e].size,this.allParts[e]=i}}if(na.loadedParts){if("challenge"===this.controllerType&&Ha.playChallengeMode&&!na.justLoadedRobotWithChallenge)for(e=0;e<na.loadedParts.length;e++)na.loadedParts[e].isEditable=!1;if(na.justLoadedRobotWithChallenge)for(this.allParts=this.allParts.concat(Ha.challenge.allParts),e=0;e<this.allParts.length;e++)this.allParts[e].isEditable=!1;for(na.justLoadedRobotWithChallenge=!1,this.allParts=this.allParts.concat(na.loadedParts),e=0;e<this.allParts.length;e++)this.allParts[e]instanceof wh&&((i=new wh(this,this.allParts[e].x,this.allParts[e].y,this.allParts[e].w,this.allParts[e].h,this.allParts[e].text)).alwaysVisible=this.allParts[e].alwaysVisible,i.displayKey=this.allParts[e].displayKey,i.red=this.allParts[e].red,i.green=this.allParts[e].green,i.blue=this.allParts[e].blue,i.size=this.allParts[e].size,this.allParts[e].isEditable||(i.isEditable=!1),this.allParts[e]=i);na.loadedParts=null,na.initX!=Number.MAX_VALUE?(this.draw.m_drawXOff=na.initX,this.draw.m_drawYOff=na.initY,this.m_physScale=na.initZoom):"challenge"!==this.controllerType&&this.CenterOnLoadedRobot()}else na.playingReplay||(na.curRobotID="",na.curRobotEditable=!0,na.curRobotPublic=!1);na.initX=Number.MAX_VALUE,na.initY=Number.MAX_VALUE,na.initZoom=Number.MAX_VALUE,"challenge"===this.controllerType?(na.minDensity=Ha.challenge.minDensity==-Number.MAX_VALUE?1:Ha.challenge.minDensity,na.maxDensity=Ha.challenge.maxDensity==Number.MAX_VALUE?30:Ha.challenge.maxDensity,na.maxRJStrength=Ha.challenge.maxRJStrength==Number.MAX_VALUE?30:Ha.challenge.maxRJStrength,na.maxRJSpeed=Ha.challenge.maxRJSpeed==Number.MAX_VALUE?30:Ha.challenge.maxRJSpeed,na.maxSJStrength=Ha.challenge.maxSJStrength==Number.MAX_VALUE?30:Ha.challenge.maxSJStrength,na.maxSJSpeed=Ha.challenge.maxSJSpeed==Number.MAX_VALUE?30:Ha.challenge.maxSJSpeed,na.maxThrusterStrength=Ha.challenge.maxThrusterStrength==Number.MAX_VALUE?30:Ha.challenge.maxThrusterStrength):(na.minDensity=1,na.maxDensity=30,na.maxRJStrength=30,na.maxRJSpeed=30,na.maxSJStrength=30,na.maxSJSpeed=30,na.maxThrusterStrength=30),Sh.jbTutorial=!1,Sa.inIFrame&&(na.curRobotEditable=!1,this.uneditableText.text="")}BuildBuildArea(){for(var t=0;t<this.m_buildAreas.length;t++)this.removeChild(this.m_buildAreas[t]),this.removeChild(this.m_badBuildAreas[t]),this.removeChild(this.m_selectedBuildAreas[t]);this.m_buildAreas=new Array,this.m_badBuildAreas=new Array,this.m_selectedBuildAreas=new Array;var e=this.sSky.lastCloudIndex+1;for(t=0;t<this.NumBuildingAreas();t++){var i=new $s.Graphics;i.lineStyle(6,14594141);var s=new ca.Matrix;i.beginTextureFill({texture:Ks.getLinearGradientTexture(["#ff8f17","#ffc150"]),matrix:s,alpha:.2}),i.drawRect(0,0,700,550),i.endFill(),this.addChildAt(i,e),this.m_buildAreas.push(i);var r=new $s.Graphics;r.lineStyle(6,14576221),s=new ca.Matrix,r.beginTextureFill({texture:Ks.getLinearGradientTexture(["#ff4d17","#ff8f50"]),matrix:s,alpha:.2}),r.drawRect(0,0,700,550),r.endFill(),this.addChildAt(r,e),this.m_badBuildAreas.push(r);var n=new $s.Graphics;n.lineStyle(6,16697949),s=new ca.Matrix,n.beginTextureFill({texture:Ks.getLinearGradientTexture(["#ff4d17","#ff8f50"]),matrix:s,alpha:.2}),n.drawRect(0,0,700,550),n.endFill(),this.addChildAt(n,e),this.m_selectedBuildAreas.push(n)}}PlayShapeSound(){if(Sa.enableSound){var t=Math.floor(Vs.RangedRandom(0,5));(0==t?na.shapeSound1:1==t?na.shapeSound2:2==t?na.shapeSound3:3==t?na.shapeSound4:na.shapeSound5).play()}}PlayJointSound(){if(Sa.enableSound){var t=Math.floor(Vs.RangedRandom(0,5));(0==t?na.jointSound1:1==t?na.jointSound2:2==t?na.jointSound3:3==t?na.jointSound4:na.jointSound5).play()}}GetPhysScale(){return this.m_physScale}GetMinX(){return-Number.MAX_VALUE}GetMaxX(){return Number.MAX_VALUE}GetMinY(){return-Number.MAX_VALUE}GetMaxY(){return Number.MAX_VALUE}Update(){if(!this.m_fader.visible){na.showColours?this.draw.m_fillAlpha=1:this.draw.m_fillAlpha=.5,na.playingReplay&&!this.simStarted&&this.playButton(new MouseEvent("")),na.mouseXWorldPhys=(Us.mouseX+this.draw.m_drawXOff)/this.m_physScale,na.mouseYWorldPhys=(Us.mouseY+this.draw.m_drawYOff)/this.m_physScale,na.prevMouseXWorld=na.mouseXWorld,na.prevMouseYWorld=na.mouseYWorld,na.mouseXWorld=Us.mouseX,na.mouseYWorld=Us.mouseY,Sa.ShowMouse(),!this.paused&&this.autoPanning&&this.HandleCamera(),this.MouseDrag(),this.HandleKey();for(var t=0;t<this.allParts.length;t++)(this.allParts[t]instanceof xh||this.allParts[t]instanceof Sh)&&this.allParts[t].CheckForBreakage(this.m_world);this.m_guiMenu.Update(),this.m_guiPanel.Update(this.curAction),this.uneditableText.visible=!na.curRobotEditable&&!na.playingReplay&&!this.simStarted,this.rotatingText.visible=this.curAction==na.ROTATE,this.scalingText.visible=this.curAction==na.RESIZING_SHAPES,this.newText&&this.lastSelectedText instanceof wh&&(this.lastSelectedText.text=this.newText.text,this.lastSelectedText.m_textField.text=this.newText.text,this.newText=null);var e=Date.now();this.paused||(na.playingReplay||(this.frameCounter%na.REPLAY_SYNC_FRAMES==0&&this.AddSyncPoint(),this.m_world.Step(1/60,{velocityIterations:5,positionIterations:5}),this.m_world.Step(1/60,{velocityIterations:this.m_iterations,positionIterations:this.m_iterations})),this.frameCounter++,this.m_guiPanel.SetTimer(this.frameCounter),(this.frameCounter>=9e3||na.cannonballs.length>500)&&(this.canSaveReplay=!1))}if(this.draw.m_drawScale=this.m_physScale,this.draw.drawColours=na.showColours,this.simStarted)for(t=0;t<this.m_buildAreas.length;t++)this.m_buildAreas[t].visible=!1,this.m_badBuildAreas[t].visible=!1,this.m_selectedBuildAreas[t].visible=!1;else{for(t=0;t<this.m_buildAreas.length;t++){var i=this.GetBuildingAreaNumber(t);(this.hasPanned||this.hasZoomed||this.redrawBuildArea)&&(this.m_buildAreas[t].x=this.World2ScreenX(i.lowerBound.x),this.m_buildAreas[t].y=this.World2ScreenY(i.lowerBound.y),this.m_badBuildAreas[t].x=this.World2ScreenX(i.lowerBound.x),this.m_badBuildAreas[t].y=this.World2ScreenY(i.lowerBound.y),this.m_selectedBuildAreas[t].x=this.World2ScreenX(i.lowerBound.x),this.m_selectedBuildAreas[t].y=this.World2ScreenY(i.lowerBound.y)),(this.hasZoomed||this.redrawBuildArea)&&(this.m_buildAreas[t].width=this.World2ScreenX(i.upperBound.x)-this.World2ScreenX(i.lowerBound.x),this.m_buildAreas[t].height=this.World2ScreenY(i.upperBound.y)-this.World2ScreenY(i.lowerBound.y),this.m_badBuildAreas[t].width=this.World2ScreenX(i.upperBound.x)-this.World2ScreenX(i.lowerBound.x),this.m_badBuildAreas[t].height=this.World2ScreenY(i.upperBound.y)-this.World2ScreenY(i.lowerBound.y),this.m_selectedBuildAreas[t].width=this.World2ScreenX(i.upperBound.x)-this.World2ScreenX(i.lowerBound.x),this.m_selectedBuildAreas[t].height=this.World2ScreenY(i.upperBound.y)-this.World2ScreenY(i.lowerBound.y)),this.m_selectedBuildAreas[t].visible=this.m_sidePanel.BuildWindowShowing()&&this.selectedBuildArea==Ha.challenge.buildAreas[t],this.m_buildAreas[t].visible=!this.m_selectedBuildAreas[t].visible&&this.partsFit,this.m_badBuildAreas[t].visible=!this.m_selectedBuildAreas[t].visible&&!this.partsFit}this.redrawBuildArea=!1}(this.hasPanned||this.hasZoomed||!this.paused||this.draggingPart||-1!=this.curAction||this.redrawRobot)&&(this.m_canvas.clear(),this.draw.DrawWorld(this.allParts,this.selectedParts,!this.simStarted,!1,na.showJoints,na.showOutlines,"ControllerChallenge"===this.constructor.name?Ha.challenge:void 0),this.redrawRobot=!1);var s=this.FindPartToSnapTo();if(this.simStarted||(na.snapToCenter&&s&&(this.curAction==na.NEW_FIXED_JOINT||this.curAction==na.NEW_REVOLUTE_JOINT||this.curAction==na.NEW_PRISMATIC_JOINT||this.curAction==na.NEW_THRUSTERS)?this.draw.DrawTempShape(this.curAction,this.actionStep,this.firstClickX,this.firstClickY,this.secondClickX,this.secondClickY,s.centerX,s.centerY):this.curAction==na.FINALIZING_JOINT&&this.candidateJointType==na.NEW_PRISMATIC_JOINT&&1==this.actionStep?this.draw.DrawTempShape(na.NEW_PRISMATIC_JOINT,this.actionStep,this.firstClickX,this.firstClickY,this.secondClickX,this.secondClickY,this.candidateJointX,this.candidateJointY):this.curAction==na.FINALIZING_JOINT&&this.candidateJointType==na.NEW_THRUSTERS?this.draw.DrawTempShape(na.NEW_THRUSTERS,this.actionStep,this.firstClickX,this.firstClickY,this.secondClickX,this.secondClickY,this.candidateJointX,this.candidateJointY):this.curAction==na.FINALIZING_JOINT?this.draw.DrawTempShape(this.curAction,this.actionStep,this.firstClickX,this.firstClickY,this.secondClickX,this.secondClickY,this.candidateJointX,this.candidateJointY):this.draw.DrawTempShape(this.curAction,this.actionStep,this.firstClickX,this.firstClickY,this.secondClickX,this.secondClickY,na.mouseXWorldPhys,na.mouseYWorldPhys)),Sa.m_fpsCounter.updatePhys(e),hh.errorOccurred&&(this.m_progressDialog.StopTimer(),this.m_progressDialog.SetMessage(hh.lastErrorMsg,!0),hh.errorOccurred=!1,hh.versionErrorOccurred?(hh.versionErrorOccurred=!1,this.m_progressDialog.ShowOKAndCancelButton(5)):this.m_progressDialog.ShowOKButton(),this.removeChild(this.m_progressDialog),this.addChild(this.m_progressDialog),Sa.ShowMouse()),!this.paused&&this.ChallengeOver()&&(this.wonChallenge=!0,this.pauseButton(),!na.playingReplay||na.viewingUnsavedReplay))if(this.m_fader.visible=!0,this instanceof Za||this.WonChallenge()){if(this.m_scoreWindow)try{this.removeChild(this.m_scoreWindow)}catch(t){}this.m_scoreWindow=new Ma(this,this.GetScore()),Sa.enableSound&&na.winSound.play(),this.addChild(this.m_scoreWindow),this instanceof Za?Ws.SetLevelDone(Sa.nextControllerType-10):(this instanceof ControllerMonkeyBars||this instanceof za||this instanceof ControllerRace||this instanceof ControllerSpaceship)&&Ws.SetLevelDone(Sa.nextControllerType+8)}else na.failedChallenge=!0,this.ShowDialog3("Sorry, you have failed this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer(),Sa.enableSound&&na.loseSound.play()}MoveCameraForReplay(t){if(t.x!=Number.POSITIVE_INFINITY){var e=this.draw.m_drawXOff,i=this.draw.m_drawYOff;this.draw.m_drawXOff=t.x,this.draw.m_drawYOff=t.y,this.autoPanning=!1,e==this.draw.m_drawXOff&&i==this.draw.m_drawYOff||(this.hasPanned=!0)}var s=this.m_physScale;this.m_physScale=t.scale,this.m_physScale!=s&&(this.hasZoomed=!0),this.autoPanning&&this.HandleCamera()}AddSyncPoint(){if(0==this.syncPoints.length||this.frameCounter!=this.syncPoints[this.syncPoints.length-1].frame){var t=new Array,e=new Na;e.frame=this.frameCounter;for(var i=0;i<this.allParts.length;i++)this.allParts[i]instanceof mh&&!this.allParts[i].isStatic&&!Vs.ObjectInArray(this.allParts[i].GetBody(),t)&&(e.positions.push(Vs.Vector(this.allParts[i].GetBody().GetPosition().x,this.allParts[i].GetBody().GetPosition().y)),e.angles.push(this.allParts[i].GetBody().GetAngle()),t.push(this.allParts[i].GetBody()));for(i=0;i<na.cannonballs.length;i++)e.cannonballPositions.push(Vs.Vector(na.cannonballs[i].GetPosition().x,na.cannonballs[i].GetPosition().y));this.syncPoints.push(e)}}ComputeReplaySplines(t){for(var e=new Array,i=new Array,s=0;s<na.replay.syncPoints.length-1;s++){e.push(na.replay.syncPoints[s+1].frame-na.replay.syncPoints[s].frame);for(var r=new Array,n=0;n<na.replay.syncPoints[0].positions.length;n++)if(0==t)r.push((na.replay.syncPoints[s+1].positions[n].x-na.replay.syncPoints[s].positions[n].x)/e[s]);else if(1==t)r.push((na.replay.syncPoints[s+1].positions[n].y-na.replay.syncPoints[s].positions[n].y)/e[s]);else{var o=na.replay.syncPoints[s+1].angles[n]-na.replay.syncPoints[s].angles[n];if(Math.abs(o)>20){var a=Vs.NormalizeAngle(na.replay.syncPoints[s].angles[n]),h=Vs.NormalizeAngle(na.replay.syncPoints[s+1].angles[n]);o=Math.abs(a-h)<Math.PI?h-a:a>h?h+2*Math.PI-a:h-(a+2*Math.PI)}r.push(o/e[s])}i.push(r)}var l=new Array,c=new Array;for(l.push(0),l.push(2*(e[0]+e[1])),r=new Array,n=0;n<na.replay.syncPoints[0].positions.length;n++)r.push(0);for(c.push(r),r=new Array,n=0;n<na.replay.syncPoints[0].positions.length;n++)i.length<2?r.push(0):r.push(6*(i[1][n]-i[0][n]));for(c.push(r),s=2;s<na.replay.syncPoints.length-1;s++){for(l.push(2*(e[s-1]+e[s])-e[s-1]*e[s-1]/l[s-1]),r=new Array,n=0;n<na.replay.syncPoints[0].positions.length;n++)r.push(6*(i[s][n]-i[s-1][n])-e[s-1]*c[s-1][n]/l[s-1]);c.push(r)}var d=new Array;for(r=new Array,n=0;n<na.replay.syncPoints[0].positions.length;n++)r.push(0);for(d[na.replay.syncPoints.length-1]=r,s=na.replay.syncPoints.length-2;s>0;s--){for(r=new Array,n=0;n<na.replay.syncPoints[0].positions.length;n++)r.push((c[s][n]-e[s]*d[s+1][n])/l[s]);d[s]=r}for(r=new Array,n=0;n<na.replay.syncPoints[0].positions.length;n++)r.push(0);d[0]=r;var u=new Array,p=new Array,m=new Array,f=new Array,_=new Array;for(s=0;s<na.replay.syncPoints.length-1;s++){var g=new Array,b=new Array,y=new Array,w=new Array;for(n=0;n<na.replay.syncPoints[0].positions.length;n++)g.push(0==t?na.replay.syncPoints[s].positions[n].x:1==t?na.replay.syncPoints[s].positions[n].y:na.replay.syncPoints[s].angles[n]),o=na.replay.syncPoints[s+1].angles[n]-na.replay.syncPoints[s].angles[n],Math.abs(o)>20&&(a=Vs.NormalizeAngle(na.replay.syncPoints[s].angles[n]),h=Vs.NormalizeAngle(na.replay.syncPoints[s+1].angles[n]),o=Math.abs(a-h)<Math.PI?h-a:a>h?h+2*Math.PI-a:h-(a+2*Math.PI)),b.push(-e[s]*d[s+1][n]/6-e[s]*d[s][n]/3+(0==t?na.replay.syncPoints[s+1].positions[n].x-g[n]:1==t?na.replay.syncPoints[s+1].positions[n].y-g[n]:o)/e[s]),y.push(d[s][n]/2),w.push((d[s+1][n]-d[s][n])/(6*e[s]));p.push(g),m.push(b),f.push(y),_.push(w)}return u.push(p),u.push(m),u.push(f),u.push(_),u}SyncReplay(t){for(var e=new Array,i=0,s=0;s<this.allParts.length;s++)this.allParts[s]instanceof mh&&!this.allParts[s].isStatic&&!Vs.ObjectInArray(this.allParts[s].GetBody(),e)&&(this.allParts[s].GetBody().SetTransform((new ps.b2Transform).SetPositionAngle(t.positions[i],t.angles[i])),i++,e.push(this.allParts[s].GetBody()));for(s=0;s<na.cannonballs.length;s++)na.cannonballs[s].SetTransform((new ps.b2Transform).SetPositionAngle(t.cannonballPositions[s],0))}SyncReplay2(t,e){for(var i=na.replay.syncPoints.indexOf(t),s=new Array,r=0,n=0;n<this.allParts.length;n++)if(this.allParts[n]instanceof mh&&!this.allParts[n].isStatic&&!Vs.ObjectInArray(this.allParts[n].GetBody(),s)){var o=this.replaySplineXs[0][i][r]+(this.frameCounter-t.frame)*(this.replaySplineXs[1][i][r]+(this.frameCounter-t.frame)*(this.replaySplineXs[2][i][r]+(this.frameCounter-t.frame)*this.replaySplineXs[3][i][r])),a=this.replaySplineYs[0][i][r]+(this.frameCounter-t.frame)*(this.replaySplineYs[1][i][r]+(this.frameCounter-t.frame)*(this.replaySplineYs[2][i][r]+(this.frameCounter-t.frame)*this.replaySplineYs[3][i][r])),h=this.replaySplineAngles[0][i][r]+(this.frameCounter-t.frame)*(this.replaySplineAngles[1][i][r]+(this.frameCounter-t.frame)*(this.replaySplineAngles[2][i][r]+(this.frameCounter-t.frame)*this.replaySplineAngles[3][i][r]));this.allParts[n].GetBody().SetTransform((new ps.b2Transform).SetPositionAngle(Vs.Vector(o,a),h)),r++,s.push(this.allParts[n].GetBody())}for(n=0;n<na.cannonballs.length;n++)if(t.cannonballPositions.length>n){var l=e.frame-t.frame,c=(t.cannonballPositions[n].x*(e.frame-this.frameCounter)+e.cannonballPositions[n].x*(this.frameCounter-t.frame))/l,d=(t.cannonballPositions[n].y*(e.frame-this.frameCounter)+e.cannonballPositions[n].y*(this.frameCounter-t.frame))/l;na.cannonballs[n].SetTransform((new ps.b2Transform).SetPositionAngle(Vs.Vector(c,d),0))}else na.cannonballs[n].SetTransform((new ps.b2Transform).SetPositionAngle(e.cannonballPositions[n],0))}IsPaused(){return this.paused}World2ScreenX(t){return t*this.m_physScale-this.draw.m_drawXOff}World2ScreenY(t){return t*this.m_physScale-this.draw.m_drawYOff}Screen2WorldX(t){return(t+this.draw.m_drawXOff)/this.m_physScale}Screen2WorldY(t){return(t+this.draw.m_drawYOff)/this.m_physScale}ChallengeOver(){throw new uh("abstract ControllerGameGlobals.ChallengeOver() called")}WonChallenge(){return!1}LostChallenge(){return!1}GetScore(){throw new uh("abstract ControllerGameGlobals.GetScore() called")}ContactAdded(t){}GetBuildingArea(){throw new uh("abstract ControllerGameGlobals.GetBuildingArea() called")}GetBuildingAreaNumber(t){return this.GetBuildingArea()}NumBuildingAreas(){return 1}GetBoxForConditions(){this.boxText.visible=!0,this.curAction=na.DRAWING_BOX,this.actionStep=0,this.selectingCondition=!0}GetHorizontalLineForConditions(){this.horizLineText.visible=!0,this.curAction=na.DRAWING_HORIZONTAL_LINE,this.actionStep=0,this.selectingCondition=!0}GetVerticalLineForConditions(){this.vertLineText.visible=!0,this.curAction=na.DRAWING_VERTICAL_LINE,this.actionStep=0,this.selectingCondition=!0}GetShapeForConditions(){this.m_conditionsDialog.shape1||(this.selectedParts=new Array),this.shapeText.visible=!0,this.curAction=na.SELECTING_SHAPE,this.selectingCondition=!0}CheckIfPartsFit(){var t=this.allParts.filter(this.PartIsEditable),e=this.NumBuildingAreas();if(this.partsFit=!0,"sandbox"!==this.controllerType&&("challenge"!==this.controllerType||Ha.playChallengeMode)&&0!=e)for(var i,s,r,n,o=0;o<t.length;o++){for(var a=!1,h=0;h<e;h++){var l=this.GetBuildingAreaNumber(h);if(t[o]instanceof _h)i=t[o].centerX-t[o].radius,s=t[o].centerX+t[o].radius,r=t[o].centerY-t[o].radius,n=t[o].centerY+t[o].radius;else if(t[o]instanceof gh||t[o]instanceof bh||t[o]instanceof yh){var c=t[o].GetVertices();i=Number.MAX_VALUE,r=Number.MAX_VALUE,s=-Number.MAX_VALUE,n=-Number.MAX_VALUE;for(var d=0;d<c.length;d++)i=Math.min(i,c[d].x),s=Math.max(s,c[d].x),r=Math.min(r,c[d].y),n=Math.max(n,c[d].y)}else i=Number.MAX_VALUE,r=Number.MAX_VALUE,s=-Number.MAX_VALUE,n=-Number.MAX_VALUE;if(i>=l.lowerBound.x&&r>=l.lowerBound.y&&s<l.upperBound.x&&n<l.upperBound.y){a=!0;break}}if(!a){this.partsFit=!1;break}}}HandleKey(){if(this.paused)this.simStarted||this.m_sidePanel.EnteringInput()||(Us.isKeyDown(37)&&(this.draw.m_drawXOff-=10,this.hasPanned=!0),Us.isKeyDown(39)&&(this.draw.m_drawXOff+=10,this.hasPanned=!0),Us.isKeyDown(38)&&(this.draw.m_drawYOff-=10,this.hasPanned=!0),Us.isKeyDown(40)&&(this.draw.m_drawYOff+=10,this.hasPanned=!0));else{na.playingReplay&&na.replay.Update(this.frameCounter)&&this.pauseButton();for(var t=0;t<this.allParts.length;t++)this.allParts[t].Update(this.m_world)}}CenterOnLoadedRobot(){for(var t=null,e=0;e<this.allParts.length;e++)this.allParts[e]instanceof mh&&this.allParts[e].isCameraFocus&&(t=this.allParts[e]);if(!t){for(e=0;e<this.allParts.length;e++)this.allParts[e].checkedCollisionGroup=!1;for(e=0;e<this.allParts.length;e++)this.allParts[e]instanceof mh&&this.allParts[e].SetCollisionGroup(-(e+1));t=this.FindCenterOfRobot()}if(t){var i=this.draw.m_drawXOff,s=this.draw.m_drawYOff;this.draw.m_drawXOff=t.centerX*this.m_physScale-na.ZOOM_FOCUS_X,this.draw.m_drawYOff=t.centerY*this.m_physScale-na.ZOOM_FOCUS_Y,i==this.draw.m_drawXOff&&s==this.draw.m_drawYOff||(this.hasPanned=!0)}}HandleCamera(){if(this.cameraPart){var t=this.draw.m_drawXOff,e=this.draw.m_drawYOff;this.draw.m_drawXOff=this.cameraPart.GetBody().GetWorldCenter().x*this.m_physScale-na.ZOOM_FOCUS_X,this.draw.m_drawYOff=this.cameraPart.GetBody().GetWorldCenter().y*this.m_physScale-na.ZOOM_FOCUS_Y,(isNaN(this.draw.m_drawXOff)||isNaN(this.draw.m_drawYOff))&&(this.draw.m_drawXOff=t,this.draw.m_drawYOff=e),t==this.draw.m_drawXOff&&e==this.draw.m_drawYOff||(this.hasPanned=!0)}}MouseDrag(){if(this.simStarted){if(!this.paused&&("sandbox"===this.controllerType&&"challenge"!==this.controllerType||"challenge"===this.controllerType&&Ha.challenge.mouseDragAllowed)){if(Us.mouseDown&&!this.m_mouseJoint){var t=this.GetBodyAtMouse();if(!na.playingReplay&&t){var e=new ps.b2MouseJointDef;e.bodyA=this.m_groundBody,e.bodyB=t,e.target.Set(na.mouseXWorldPhys,na.mouseYWorldPhys),e.maxForce=300*t.GetMass(),ps.b2LinearStiffness(e,5,.7,e.bodyA,e.bodyB),this.m_mouseJoint=this.m_world.CreateJoint(e),t.SetAwake(!0)}}if(this.m_mouseJoint){var i=new ps.b2Vec2(na.mouseXWorldPhys,na.mouseYWorldPhys);this.m_mouseJoint.SetTarget(i)}Us.mouseDown||this.m_mouseJoint&&(this.m_world.DestroyJoint(this.m_mouseJoint),this.m_mouseJoint=null)}}else{if(Us.mouseDown&&na.mouseYWorld>=100&&!this.m_sidePanel.sliderDown&&!this.m_guiMenu.MouseOverMenu(na.mouseXWorld,na.mouseYWorld)&&(na.mouseXWorld>=120||!this.m_sidePanel.visible)&&(na.mouseXWorld>=230||na.mouseYWorld>=600||!this.m_sidePanel.ColourWindowShowing())&&this.curAction!=na.BOX_SELECTING&&this.curAction!=na.DRAWING_BUILD_BOX&&this.curAction!=na.DRAWING_BOX&&this.curAction!=na.DRAWING_HORIZONTAL_LINE&&this.curAction!=na.DRAWING_VERTICAL_LINE&&(!this.m_tutorialDialog||!this.m_tutorialDialog.MouseOver(na.mouseXWorld,na.mouseYWorld))){var s=this.GetPartAtMouse();if(!na.wasMouseDown&&na.curRobotEditable&&s instanceof mh){var r=s;if(null==this.draggingPart&&(-1==this.curAction||this.curAction==na.SELECTING_SHAPE)){this.MouseOverSelectedPart()?this.delayedSelection=!0:(Vs.ObjectInArray(r,this.selectedParts)?Us.isKeyDown(16)&&(this.selectedParts=Vs.RemoveFromArray(r,this.selectedParts)):(Us.isKeyDown(16)||(this.selectedParts=new Array),this.selectedParts.push(r)),this.redrawRobot=!0),this.draggingPart=this.selectedParts[0],this.initDragX=na.mouseXWorldPhys,this.initDragY=na.mouseYWorldPhys,this.draggingParts=new Array;for(var n=0;n<this.selectedParts.length;n++)this.draggingParts=Vs.RemoveDuplicates(this.draggingParts.concat(this.selectedParts[n].GetAttachedParts()));for(n=0;n<this.draggingParts.length;n++)this.draggingParts[n]instanceof mh||this.draggingParts[n]instanceof Ah?(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].centerX,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].centerY):this.draggingParts[n]instanceof fh?(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].anchorX,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].anchorY):(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].x,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].y)}}else if(!na.wasMouseDown&&na.curRobotEditable&&s instanceof fh&&null==this.draggingPart&&(-1==this.curAction||this.curAction==na.SELECTING_SHAPE)){for(this.MouseOverSelectedPart()?this.delayedSelection=!0:(Vs.ObjectInArray(s,this.selectedParts)?Us.isKeyDown(16)&&(this.selectedParts=Vs.RemoveFromArray(s,this.selectedParts)):(Us.isKeyDown(16)||(this.selectedParts=new Array),this.selectedParts.push(s)),this.redrawRobot=!0),this.draggingPart=s,this.initDragX=na.mouseXWorldPhys,this.initDragY=na.mouseYWorldPhys,this.draggingParts=new Array,n=0;n<this.selectedParts.length;n++)this.draggingParts=Vs.RemoveDuplicates(this.draggingParts.concat(this.selectedParts[n].GetAttachedParts()));for(n=0;n<this.draggingParts.length;n++)this.draggingParts[n]instanceof mh||this.draggingParts[n]instanceof Ah?(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].centerX,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].centerY):this.draggingParts[n]instanceof fh?(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].anchorX,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].anchorY):(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].x,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].y)}else if(!na.wasMouseDown&&na.curRobotEditable&&s instanceof wh&&null==this.draggingPart&&(-1==this.curAction||this.curAction==na.SELECTING_SHAPE))if(this.MouseOverSelectedPart()?this.delayedSelection=!0:(Vs.ObjectInArray(s,this.selectedParts)?Us.isKeyDown(16)&&(this.selectedParts=Vs.RemoveFromArray(s,this.selectedParts)):(Us.isKeyDown(16)||(this.selectedParts=new Array),this.selectedParts.push(s)),this.redrawRobot=!0),this.draggingPart=s,this.initDragX=na.mouseXWorldPhys,this.initDragY=na.mouseYWorldPhys,s.InsideMoveBox(na.mouseXWorldPhys,na.mouseYWorldPhys,this.m_physScale,!0))this.curAction=na.RESIZING_TEXT;else{for(this.draggingParts=new Array,n=0;n<this.selectedParts.length;n++)this.draggingParts=Vs.RemoveDuplicates(this.draggingParts.concat(this.selectedParts[n].GetAttachedParts()));for(n=0;n<this.draggingParts.length;n++)this.draggingParts[n]instanceof mh||this.draggingParts[n]instanceof Ah?(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].centerX,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].centerY):this.draggingParts[n]instanceof fh?(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].anchorX,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].anchorY):(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].x,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].y)}else if(!na.wasMouseDown&&na.curRobotEditable&&s instanceof Ah&&null==this.draggingPart&&(-1==this.curAction||this.curAction==na.SELECTING_SHAPE)){for(this.MouseOverSelectedPart()?this.delayedSelection=!0:(Vs.ObjectInArray(s,this.selectedParts)?Us.isKeyDown(16)&&(this.selectedParts=Vs.RemoveFromArray(s,this.selectedParts)):(Us.isKeyDown(16)||(this.selectedParts=new Array),this.selectedParts.push(s)),this.redrawRobot=!0),this.draggingPart=s,this.initDragX=na.mouseXWorldPhys,this.initDragY=na.mouseYWorldPhys,this.draggingParts=new Array,n=0;n<this.selectedParts.length;n++)this.draggingParts=Vs.RemoveDuplicates(this.draggingParts.concat(this.selectedParts[n].GetAttachedParts()));for(n=0;n<this.draggingParts.length;n++)this.draggingParts[n]instanceof mh||this.draggingParts[n]instanceof Ah?(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].centerX,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].centerY):this.draggingParts[n]instanceof fh?(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].anchorX,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].anchorY):(this.draggingParts[n].dragXOff=na.mouseXWorldPhys-this.draggingParts[n].x,this.draggingParts[n].dragYOff=na.mouseYWorldPhys-this.draggingParts[n].y)}else if(null==this.draggingPart&&null==this.rotatingPart&&(-1==this.curAction||this.curAction==na.SELECTING_SHAPE)){if(Us.isKeyDown(16)&&na.curRobotEditable)this.curAction=na.BOX_SELECTING,this.firstClickX=na.mouseXWorldPhys,this.firstClickY=na.mouseYWorldPhys;else{var o=this.draw.m_drawXOff,a=this.draw.m_drawYOff;this.draw.m_drawXOff-=na.mouseXWorld-na.prevMouseXWorld,this.draw.m_drawYOff-=na.mouseYWorld-na.prevMouseYWorld,o==this.draw.m_drawXOff&&a==this.draw.m_drawYOff||(this.hasPanned=!0)}this.selectedParts=new Array,this.redrawRobot=!0}}if(Us.mouseDown&&!this.m_sidePanel.sliderDown&&!this.m_guiMenu.MouseOverMenu(na.mouseXWorld,na.mouseYWorld)&&na.mouseYWorld>=100&&(na.mouseXWorld>=120||!this.m_sidePanel.visible)&&(na.mouseXWorld>=230||na.mouseYWorld>=600||!this.m_sidePanel.ColourWindowShowing())&&this.curAction!=na.BOX_SELECTING&&(this.m_tutorialDialog&&this.m_tutorialDialog.MouseOver(na.mouseXWorld,na.mouseYWorld)||this.RefreshSidePanel()),Us.mouseDown||(this.draggingTutorial=!1),this.draggingTutorial&&(this.m_tutorialDialog.x=na.mouseXWorld-this.initDragX,this.m_tutorialDialog.y=na.mouseYWorld-this.initDragY),null!=this.draggingPart&&this.curAction!=na.RESIZING_TEXT){for(n=0;n<this.draggingParts.length;n++)this.draggingParts[n].Move(na.mouseXWorldPhys-this.draggingParts[n].dragXOff,na.mouseYWorldPhys-this.draggingParts[n].dragYOff);na.curRobotID=""}if(this.curAction==na.ROTATE&&null!=this.rotatingPart){var h=Math.atan2(na.mouseYWorldPhys-this.rotatingPart.centerY,na.mouseXWorldPhys-this.rotatingPart.centerX);for(n=0;n<this.rotatingParts.length;n++)this.rotatingParts[n].RotateAround(this.rotatingPart.centerX,this.rotatingPart.centerY,h-this.initRotatingAngle);na.curRobotID=""}if(this.curAction==na.SELECTING_SHAPE&&1==this.selectedParts.length&&this.selectedParts[0]instanceof mh&&this.selectedParts[0]!=this.m_conditionsDialog.shape1&&(this.m_conditionsDialog.visible=!0,this.m_fader.visible=!0,this.curAction=-1,this.m_sidePanel.visible=!1,this.shapeText.visible=!1,this.selectingCondition=!1,this.m_conditionsDialog.FinishSelectingForCondition(this.selectedParts[0])),this.curAction==na.RESIZING_SHAPES){var l=na.mouseXWorld-this.firstClickX;for(l>=0?(l/=75,l+=1):(l/=25,l=-1/(l-=1)),n=0;n<this.draggingParts.length;n++)if(this.draggingParts[n]instanceof _h)this.draggingParts[n].initRadius*l>_h.MAX_RADIUS&&(l=_h.MAX_RADIUS/this.draggingParts[n].initRadius),this.draggingParts[n].initRadius*l<_h.MIN_RADIUS&&(l=_h.MIN_RADIUS/this.draggingParts[n].initRadius);else if(this.draggingParts[n]instanceof gh)this.draggingParts[n].initW*l>gh.MAX_WIDTH&&(l=gh.MAX_WIDTH/this.draggingParts[n].initW),this.draggingParts[n].initW*l<gh.MIN_WIDTH&&(l=gh.MIN_WIDTH/this.draggingParts[n].initW),this.draggingParts[n].initH*l>gh.MAX_WIDTH&&(l=gh.MAX_WIDTH/this.draggingParts[n].initH),this.draggingParts[n].initH*l<gh.MIN_WIDTH&&(l=gh.MIN_WIDTH/this.draggingParts[n].initH);else if(this.draggingParts[n]instanceof bh){var c=Vs.GetDist(this.draggingParts[n].initX1,this.draggingParts[n].initY1,this.draggingParts[n].initX2,this.draggingParts[n].initY2);c*l>bh.MAX_SIDE_LENGTH&&(l=bh.MAX_SIDE_LENGTH/c),c*l<bh.MIN_SIDE_LENGTH&&(l=bh.MIN_SIDE_LENGTH/c);var d=Vs.GetDist(this.draggingParts[n].initX1,this.draggingParts[n].initY1,this.draggingParts[n].initX3,this.draggingParts[n].initY3);d*l>bh.MAX_SIDE_LENGTH&&(l=bh.MAX_SIDE_LENGTH/d),d*l<bh.MIN_SIDE_LENGTH&&(l=bh.MIN_SIDE_LENGTH/d);var u=Vs.GetDist(this.draggingParts[n].initX2,this.draggingParts[n].initY2,this.draggingParts[n].initX3,this.draggingParts[n].initY3);u*l>bh.MAX_SIDE_LENGTH&&(l=bh.MAX_SIDE_LENGTH/u),u*l<bh.MIN_SIDE_LENGTH&&(l=bh.MIN_SIDE_LENGTH/u)}else this.draggingParts[n]instanceof yh&&(this.draggingParts[n].initW*l>yh.MAX_WIDTH&&(l=yh.MAX_WIDTH/this.draggingParts[n].initW),this.draggingParts[n].initW*l<yh.MIN_WIDTH&&(l=yh.MIN_WIDTH/this.draggingParts[n].initW));for(n=0;n<this.draggingParts.length;n++)this.draggingParts[n]instanceof _h?(this.draggingParts[n].radius=this.draggingParts[n].initRadius*l,this.draggingParts[n].Move(this.initDragX+this.draggingParts[n].dragXOff*l,this.initDragY+this.draggingParts[n].dragYOff*l)):this.draggingParts[n]instanceof gh?(this.draggingParts[n].w=this.draggingParts[n].initW*l,this.draggingParts[n].h=this.draggingParts[n].initH*l,this.draggingParts[n].Move(this.initDragX+this.draggingParts[n].dragXOff*l,this.initDragY+this.draggingParts[n].dragYOff*l)):this.draggingParts[n]instanceof bh?(this.draggingParts[n].centerX=this.initDragX+this.draggingParts[n].dragXOff*l,this.draggingParts[n].centerY=this.initDragY+this.draggingParts[n].dragYOff*l,this.draggingParts[n].x1=this.draggingParts[n].centerX+this.draggingParts[n].initX1*l,this.draggingParts[n].y1=this.draggingParts[n].centerY+this.draggingParts[n].initY1*l,this.draggingParts[n].x2=this.draggingParts[n].centerX+this.draggingParts[n].initX2*l,this.draggingParts[n].y2=this.draggingParts[n].centerY+this.draggingParts[n].initY2*l,this.draggingParts[n].x3=this.draggingParts[n].centerX+this.draggingParts[n].initX3*l,this.draggingParts[n].y3=this.draggingParts[n].centerY+this.draggingParts[n].initY3*l):this.draggingParts[n]instanceof yh?(this.draggingParts[n].w=this.draggingParts[n].initW*l,this.draggingParts[n].Move(this.initDragX+this.draggingParts[n].dragXOff*l,this.initDragY+this.draggingParts[n].dragYOff*l)):this.draggingParts[n]instanceof fh?(this.draggingParts[n].Move(this.initDragX+this.draggingParts[n].dragXOff*l,this.initDragY+this.draggingParts[n].dragYOff*l),this.draggingParts[n]instanceof Sh&&(this.draggingParts[n].initLength=this.draggingParts[n].initInitLength*l)):this.draggingParts[n]instanceof wh?(this.draggingParts[n].w=this.draggingParts[n].initW*l,this.draggingParts[n].h=this.draggingParts[n].initH*l,this.draggingParts[n].x=this.initDragX+this.draggingParts[n].dragXOff*l-this.draggingParts[n].w/2,this.draggingParts[n].y=this.initDragY+this.draggingParts[n].dragYOff*l-this.draggingParts[n].h/2):this.draggingParts[n]instanceof Ah&&this.draggingParts[n].Move(this.initDragX+this.draggingParts[n].dragXOff*l,this.initDragY+this.draggingParts[n].dragYOff*l);this.mostRecentScaleFactor=l}if(this.curAction==na.FINALIZING_JOINT&&Vs.GetDist(this.candidateJointX,this.candidateJointY,na.mouseXWorldPhys,na.mouseYWorldPhys)>15/this.m_physScale)if(this.candidateJointType==na.NEW_REVOLUTE_JOINT){var p=new xh(this.potentialJointPart1,this.potentialJointPart2,this.candidateJointX,this.candidateJointY);this.copiedJoint instanceof xh&&p.SetJointProperties(this.copiedJoint),this.allParts.push(p),this.AddAction(new Ch(p)),this.m_sidePanel.ShowJointPanel(p),this.selectedParts=new Array,this.selectedParts.push(p),this.curAction=-1,this.potentialJointPart1.highlightForJoint=!1,this.potentialJointPart2.highlightForJoint=!1,na.curRobotID="",na.centerOnSelected&&this.CenterOnSelected(),this.redrawRobot=!0,this.PlayJointSound()}else if(this.candidateJointType==na.NEW_FIXED_JOINT){var m=new vh(this.potentialJointPart1,this.potentialJointPart2,this.candidateJointX,this.candidateJointY);this.allParts.push(m),this.AddAction(new Ch(m)),this.m_sidePanel.ShowJointPanel(m),this.selectedParts=new Array,this.selectedParts.push(m),this.curAction=-1,this.potentialJointPart1.highlightForJoint=!1,this.potentialJointPart2.highlightForJoint=!1,na.curRobotID="",na.centerOnSelected&&this.CenterOnSelected(),this.redrawRobot=!0,this.PlayJointSound()}else if(this.candidateJointType==na.NEW_THRUSTERS){var f=new Ah(this.potentialJointPart1,this.candidateJointX,this.candidateJointY);this.copiedThrusters&&(f.strength=this.copiedThrusters.strength,f.angle=this.copiedThrusters.angle,f.thrustKey=this.copiedThrusters.thrustKey,f.autoOn=this.copiedThrusters.autoOn),this.allParts.push(f),this.AddAction(new Ch(f)),this.m_sidePanel.ShowThrustersPanel(f),this.selectedParts=new Array,this.selectedParts.push(f),this.curAction=-1,this.potentialJointPart1.highlightForJoint=!1,na.curRobotID="",na.centerOnSelected&&this.CenterOnSelected(),this.redrawRobot=!0,this.PlayJointSound()}else if(this.candidateJointType==na.NEW_PRISMATIC_JOINT&&0==this.actionStep)this.jointPart=this.potentialJointPart1,this.firstClickX=this.candidateJointX,this.firstClickY=this.candidateJointY,this.curAction=na.NEW_PRISMATIC_JOINT,this.actionStep++,this.PlayJointSound();else if(this.candidateJointType==na.NEW_PRISMATIC_JOINT){var _=new Sh(this.jointPart,this.potentialJointPart1,this.firstClickX,this.firstClickY,this.candidateJointX,this.candidateJointY);this.copiedJoint instanceof Sh&&_.SetJointProperties(this.copiedJoint),this.allParts.push(_),this.AddAction(new Ch(_)),this.m_sidePanel.ShowJointPanel(_),this.selectedParts=new Array,this.selectedParts.push(_),this.curAction=-1,this.jointPart.highlightForJoint=!1,this.potentialJointPart1.highlightForJoint=!1,na.curRobotID="",na.centerOnSelected&&this.CenterOnSelected(),this.redrawRobot=!0,this.PlayJointSound()}this.curAction==na.RESIZING_TEXT&&(this.draggingPart.Resize(na.mouseXWorldPhys-this.initDragX,na.mouseYWorldPhys-this.initDragY),this.redrawRobot=!0)}if(this.simStarted&&Us.mouseDown&&!this.m_guiMenu.MouseOverMenu(na.mouseXWorld,na.mouseYWorld)&&na.mouseYWorld>=100&&(na.mouseXWorld>=120||!this.m_sidePanel.visible)&&(na.mouseXWorld>=230||na.mouseYWorld>=600||!this.m_sidePanel.ColourWindowShowing())&&this.curAction!=na.BOX_SELECTING&&!this.m_mouseJoint&&!(this.m_tutorialDialog&&this.m_tutorialDialog.MouseOver(na.mouseXWorld,na.mouseYWorld)||this.draggingTutorial)){var g=na.mouseXWorld!=na.prevMouseXWorld||na.mouseYWorld!=na.prevMouseYWorld;this.draw.m_drawXOff-=na.mouseXWorld-na.prevMouseXWorld,this.draw.m_drawYOff-=na.mouseYWorld-na.prevMouseYWorld,this.autoPanning=!1,g&&(this.hasPanned=!0,this.cameraMovements.push(new Va(this.frameCounter,this.draw.m_drawXOff,this.draw.m_drawYOff,this.m_physScale)))}var b=this.Screen2WorldY(85),y=this.Screen2WorldY(600);b<this.GetMinY()?this.draw.m_drawYOff+=this.World2ScreenY(this.GetMinY())-this.World2ScreenY(b):y>this.GetMaxY()&&(this.draw.m_drawYOff-=this.World2ScreenY(y)-this.World2ScreenY(this.GetMaxY()));var w=this.Screen2WorldX(0),v=this.Screen2WorldX(800);w<this.GetMinX()?(this.draw.m_drawXOff+=this.World2ScreenX(this.GetMinX())-this.World2ScreenX(w),this.hasPanned=!0):v>this.GetMaxX()&&(this.draw.m_drawXOff-=this.World2ScreenX(v)-this.World2ScreenX(this.GetMaxX()),this.hasPanned=!0),na.wasMouseDown=Us.mouseDown}keyInput(t,e){for(var i=!1,s=0;s<this.allParts.length;s++)this.allParts[s].KeyInput(t,e,na.playingReplay),!i&&e&&!na.playingReplay&&(this.allParts[s]instanceof wh&&t==this.allParts[s].displayKey||this.allParts[s]instanceof yh&&t==this.allParts[s].fireKey)&&(i=!0,this.keyPresses.push(new Js(this.frameCounter,t)))}keyPress(t,e){this.paused||na.playingReplay||this.keyInput(t,e),this.simStarted||this.m_sidePanel.EnteringInput()||this.m_fader.visible||(e&&49==t?this.circleButton():e&&50==t?this.rectButton():e&&51==t?this.triangleButton():e&&52==t?this.fjButton():e&&53==t?this.rjButton():e&&54==t?this.pjButton():e&&55==t?this.textButton():e&&82==t?this.rotateButton():e&&88==t?this.cutButton():e&&67==t?this.copyButton():e&&86==t?this.pasteButton():!e||8!=t&&46!=t?e&&89==t?this.redoButton():e&&90==t?this.undoButton():!e||107!=t&&187!=t?!e||109!=t&&189!=t?e&&80==t&&this.playButton():this.zoomOutButton():this.zoomInButton():1==this.selectedParts.length&&!this.selectedParts[0]instanceof wh?this.deleteButton():this.multiDeleteButton()),e&&27==t&&(this.m_chooserWindow&&this.m_chooserWindow.visible&&!this.m_chooserWindow.fader.visible&&(this.m_chooserWindow.visible=!1,this.m_fader.visible=!1),this.m_challengeWindow&&this.m_challengeWindow.visible&&!this.m_challengeWindow.fader.visible&&(this.m_challengeWindow.visible=!1,this.m_fader.visible=!1),this.m_sidePanel.visible&&!this.m_fader.visible&&(this.m_sidePanel.visible=!1),this.m_scoreWindow&&this.m_scoreWindow.visible&&(this.m_scoreWindow.visible=!1,this.m_fader.visible=!1),this.m_progressDialog&&this.m_progressDialog.visible&&(this.m_progressDialog.visible=!1,this.m_chooserWindow&&this.m_chooserWindow.visible?this.m_chooserWindow.HideFader():this.m_challengeWindow&&this.m_challengeWindow.visible?this.m_challengeWindow.HideFader():this.m_loginWindow&&this.m_loginWindow.visible?this.m_loginWindow.HideFader():this.m_newUserWindow&&this.m_newUserWindow.visible?this.m_newUserWindow.HideFader():this.m_fader.visible=!1),this.m_tutorialDialog&&this.m_tutorialDialog.visible&&this.m_tutorialDialog.closeWindow(new MouseEvent("")),this.m_linkDialog&&this.m_linkDialog.visible&&(this.m_linkDialog.visible=!1,this.m_chooserWindow&&this.m_chooserWindow.visible?this.m_chooserWindow.HideFader():this.m_fader.visible=!1),this.m_loginWindow&&this.m_loginWindow.visible&&!this.m_loginWindow.fader.visible&&this.m_loginWindow.cancelButtonPressed(new MouseEvent("")),this.m_newUserWindow&&this.m_newUserWindow.visible&&this.m_newUserWindow.cancelButtonPressed(new MouseEvent("")))}mouseMove(t,e){}mouseClick(t){if(this.m_guiMenu.MouseClick(t,na.mouseXWorld,na.mouseYWorld),t&&this.delayedSelection&&(this.delayedSelection=!1,na.mouseXWorldPhys==this.initDragX&&na.mouseYWorldPhys==this.initDragY)){var e=this.GetPartAtMouse();Vs.ObjectInArray(e,this.selectedParts)?Us.isKeyDown(16)&&(this.selectedParts=Vs.RemoveFromArray(e,this.selectedParts)):(Us.isKeyDown(16)||(this.selectedParts=new Array),this.selectedParts.push(e)),this.redrawRobot=!0,this.RefreshSidePanel()}if(t&&null!=this.rotatingPart)this.curAction=-1,this.AddAction(new Rh(this.rotatingPart,this.rotatingParts,Vs.NormalizeAngle(Math.atan2(na.mouseYWorldPhys-this.rotatingPart.centerY,na.mouseXWorldPhys-this.rotatingPart.centerX)-this.initRotatingAngle))),this.CheckIfPartsFit(),this.rotatingPart=null;else if(t&&null!=this.draggingPart)if(this.ignoreAClick)this.ignoreAClick=!1;else{if(this.curAction==na.PASTE||this.curAction==na.RESIZING_TEXT||na.mouseXWorldPhys==this.initDragX&&na.mouseYWorldPhys==this.initDragY||this.AddAction(new Th(this.draggingPart,this.draggingParts,na.mouseXWorldPhys-this.initDragX,na.mouseYWorldPhys-this.initDragY)),this.curAction==na.RESIZING_TEXT){var i=this.draggingPart;this.AddAction(new Uh(i,i.x-i.initX,i.y-i.initY,i.w-i.initW,i.h-i.initH))}if(this.CheckIfPartsFit(),this.curAction==na.PASTE){for(var s=!1,r=0;r<this.draggingParts.length;r++)if(this.draggingParts[r]instanceof mh){s=!0;break}s&&this.PlayShapeSound()}this.curAction<14&&(this.curAction=-1),this.draggingPart=null}else if(t||this.curAction!=na.RESIZING_SHAPES)if(t||this.curAction!=na.DRAWING_BUILD_BOX&&this.curAction!=na.DRAWING_BOX&&this.curAction!=na.DRAWING_HORIZONTAL_LINE&&this.curAction!=na.DRAWING_VERTICAL_LINE||0!=this.actionStep||!(na.mouseYWorld>100)||this.m_guiMenu.MouseOverMenu(na.mouseXWorld,na.mouseYWorld)||this.m_tutorialDialog&&this.m_tutorialDialog.MouseOver(na.mouseXWorld,na.mouseYWorld))if(this.curAction!=na.DRAWING_BOX&&this.curAction!=na.DRAWING_HORIZONTAL_LINE&&this.curAction!=na.DRAWING_VERTICAL_LINE||1!=this.actionStep){if(this.curAction==na.DRAWING_BUILD_BOX&&1==this.actionStep&&(Math.abs(this.firstClickX-na.mouseXWorldPhys)>.5||Math.abs(this.firstClickY-na.mouseYWorldPhys)>.5)){this.curAction=-1;var n=new ps.b2AABB;n.lowerBound=Vs.Vector(Math.min(this.firstClickX,na.mouseXWorldPhys),Math.min(this.firstClickY,na.mouseYWorldPhys)),n.upperBound=Vs.Vector(Math.max(this.firstClickX,na.mouseXWorldPhys),Math.max(this.firstClickY,na.mouseYWorldPhys)),Ha.challenge.buildAreas.push(n),this.selectedBuildArea=Ha.challenge.buildAreas[Ha.challenge.buildAreas.length-1],this.m_sidePanel.ShowBuildBoxPanel(),this.BuildBuildArea(),this.redrawRobot=!0,this.redrawBuildArea=!0}}else(Math.abs(this.firstClickX-na.mouseXWorldPhys)>.1||Math.abs(this.firstClickY-na.mouseYWorldPhys)>.1)&&(this.curAction=-1,this.m_conditionsDialog.visible=!0,this.m_fader.visible=!0,this.selectingCondition=!1,this.m_conditionsDialog.FinishDrawingCondition(this.firstClickX,this.firstClickY,na.mouseXWorldPhys,na.mouseYWorldPhys),this.boxText.visible=!1,this.horizLineText.visible=!1,this.vertLineText.visible=!1,this.redrawRobot=!0);else this.firstClickX=na.mouseXWorldPhys,this.firstClickY=na.mouseYWorldPhys,this.actionStep++;else this.ignoreAClick?this.ignoreAClick=!1:(this.curAction=-1,this.AddAction(new Bh(this.draggingParts,this.mostRecentScaleFactor)),this.draggingParts=new Array,this.CheckIfPartsFit());if(!t&&!this.draggingTutorial&&this.m_tutorialDialog&&this.m_tutorialDialog.MouseOver(na.mouseXWorld,na.mouseYWorld))return this.draggingTutorial=!0,this.initDragX=na.mouseXWorld-this.m_tutorialDialog.x,void(this.initDragY=na.mouseYWorld-this.m_tutorialDialog.y);if(!(!na.curRobotEditable||na.mouseYWorld<100||na.mouseXWorld<120&&this.m_sidePanel.visible||this.m_guiMenu.MouseOverMenu(na.mouseXWorld,na.mouseYWorld)||na.mouseXWorld<230&&na.mouseYWorld<340&&this.m_sidePanel.ColourWindowShowing()||this.m_tutorialDialog&&this.m_tutorialDialog.MouseOver(na.mouseXWorld,na.mouseYWorld))){if(t&&1==this.selectedParts.length&&na.centerOnSelected)this.CenterOnSelected();else if(0==this.selectedParts.length&&-1==this.curAction&&"challenge"===this.controllerType&&!Ha.playChallengeMode)for(r=0;r<Ha.challenge.buildAreas.length;r++)if(na.mouseXWorldPhys>Ha.challenge.buildAreas[r].lowerBound.x&&na.mouseXWorldPhys<Ha.challenge.buildAreas[r].upperBound.x&&na.mouseYWorldPhys>Ha.challenge.buildAreas[r].lowerBound.y&&na.mouseYWorldPhys<Ha.challenge.buildAreas[r].upperBound.y){this.selectedBuildArea=Ha.challenge.buildAreas[r],this.m_sidePanel.ShowBuildBoxPanel();break}if(this.curAction==na.NEW_CIRCLE)if(t||0!=this.actionStep){if(t&&1==this.actionStep){var o=Vs.GetDist(this.firstClickX,this.firstClickY,na.mouseXWorldPhys,na.mouseYWorldPhys);if(o>0){this.curAction=-1;var a=new _h(this.firstClickX,this.firstClickY,o);this.allParts.push(a),this.selectedParts=new Array,this.selectedParts.push(a),this.AddAction(new Ch(a)),this.CheckIfPartsFit(),this.m_sidePanel.ShowObjectPanel(a),na.curRobotID="",na.centerOnSelected&&this.CenterOnSelected(),this.redrawRobot=!0,this.PlayShapeSound()}}}else this.firstClickX=na.mouseXWorldPhys,this.firstClickY=na.mouseYWorldPhys,this.actionStep++;else if(this.curAction==na.NEW_RECT)if(t||0!=this.actionStep){if(t&&1==this.actionStep&&(na.mouseXWorldPhys!=this.firstClickX||na.mouseYWorldPhys!=this.firstClickY)){this.curAction=-1;var h=new gh(this.firstClickX,this.firstClickY,na.mouseXWorldPhys-this.firstClickX,na.mouseYWorldPhys-this.firstClickY);this.allParts.push(h),this.selectedParts=new Array,this.selectedParts.push(h),this.AddAction(new Ch(h)),this.CheckIfPartsFit(),this.m_sidePanel.ShowObjectPanel(h),na.curRobotID="",na.centerOnSelected&&this.CenterOnSelected(),this.redrawRobot=!0,this.PlayShapeSound()}}else this.firstClickX=na.mouseXWorldPhys,this.firstClickY=na.mouseYWorldPhys,this.actionStep++;else if(this.curAction==na.NEW_CANNON)if(t||0!=this.actionStep){if(t&&1==this.actionStep&&(na.mouseXWorldPhys!=this.firstClickX||na.mouseYWorldPhys!=this.firstClickY)){this.curAction=-1;var l=na.mouseXWorldPhys>=this.firstClickX||na.mouseYWorldPhys>=this.firstClickY?Math.max(na.mouseXWorldPhys-this.firstClickX,2*(na.mouseYWorldPhys-this.firstClickY)):Math.min(na.mouseXWorldPhys-this.firstClickX,2*(na.mouseYWorldPhys-this.firstClickY)),c=new yh(this.firstClickX,this.firstClickY,l);this.allParts.push(c),this.selectedParts=new Array,this.selectedParts.push(c),this.AddAction(new Ch(c)),this.CheckIfPartsFit(),this.m_sidePanel.ShowCannonPanel(c),na.curRobotID="",na.centerOnSelected&&this.CenterOnSelected(),this.redrawRobot=!0,this.PlayShapeSound()}}else this.firstClickX=na.mouseXWorldPhys,this.firstClickY=na.mouseYWorldPhys,this.actionStep++;else if(this.curAction==na.NEW_TRIANGLE)if(t||0!=this.actionStep){if(t&&1==this.actionStep){if(na.mouseXWorldPhys!=this.firstClickX||na.mouseYWorldPhys!=this.firstClickY){var d,u=na.mouseXWorldPhys,p=na.mouseYWorldPhys,m=Vs.GetDist(this.firstClickX,this.firstClickY,na.mouseXWorldPhys,na.mouseYWorldPhys);m<bh.MIN_SIDE_LENGTH?(d=Math.atan2(this.firstClickY-na.mouseYWorldPhys,na.mouseXWorldPhys-this.firstClickX),u=this.firstClickX+bh.MIN_SIDE_LENGTH*Math.cos(d),p=this.firstClickY-bh.MIN_SIDE_LENGTH*Math.sin(d)):m>bh.MAX_SIDE_LENGTH&&(d=Math.atan2(this.firstClickY-na.mouseYWorldPhys,na.mouseXWorldPhys-this.firstClickX),u=this.firstClickX+bh.MAX_SIDE_LENGTH*Math.cos(d),p=this.firstClickY-bh.MAX_SIDE_LENGTH*Math.sin(d)),this.secondClickX=u,this.secondClickY=p,this.actionStep++,this.PlayShapeSound()}}else if(t&&2==this.actionStep&&!(na.mouseXWorldPhys==this.firstClickX&&na.mouseYWorldPhys==this.firstClickY||na.mouseXWorldPhys==this.secondClickX&&na.mouseYWorldPhys==this.secondClickY)){var f=Vs.GetDist(this.firstClickX,this.firstClickY,na.mouseXWorldPhys,na.mouseYWorldPhys),_=Vs.GetDist(this.secondClickX,this.secondClickY,na.mouseXWorldPhys,na.mouseYWorldPhys),g=Vs.GetDist(this.firstClickX,this.firstClickY,this.secondClickX,this.secondClickY),b=Vs.NormalizeAngle(Math.acos((g*g+f*f-_*_)/(2*g*f))),y=Vs.NormalizeAngle(Math.acos((g*g+_*_-f*f)/(2*g*_))),w=Vs.NormalizeAngle(Math.acos((f*f+_*_-g*g)/(2*f*_)));if(f<=bh.MAX_SIDE_LENGTH&&f>=bh.MIN_SIDE_LENGTH&&_<=bh.MAX_SIDE_LENGTH&&_>=bh.MIN_SIDE_LENGTH&&b>=bh.MIN_TRIANGLE_ANGLE&&y>=bh.MIN_TRIANGLE_ANGLE&&w>=bh.MIN_TRIANGLE_ANGLE){this.curAction=-1;var v=new bh(this.firstClickX,this.firstClickY,this.secondClickX,this.secondClickY,na.mouseXWorldPhys,na.mouseYWorldPhys);this.allParts.push(v),this.selectedParts=new Array,this.selectedParts.push(v),this.AddAction(new Ch(v)),this.CheckIfPartsFit(),this.m_sidePanel.ShowObjectPanel(v),na.curRobotID="",na.centerOnSelected&&this.CenterOnSelected(),this.redrawRobot=!0,this.PlayShapeSound()}}}else this.firstClickX=na.mouseXWorldPhys,this.firstClickY=na.mouseYWorldPhys,this.actionStep++;else if(t&&0==this.actionStep&&this.curAction==na.NEW_PRISMATIC_JOINT)this.MaybeStartCreatingPrismaticJoint();else if(t&&1==this.actionStep&&this.curAction==na.NEW_PRISMATIC_JOINT)Vs.GetDist(this.firstClickX,this.firstClickY,na.mouseXWorldPhys,na.mouseYWorldPhys)>.3&&this.MaybeFinishCreatingPrismaticJoint();else if(!t||0!=this.actionStep||this.curAction!=na.NEW_REVOLUTE_JOINT&&this.curAction!=na.NEW_FIXED_JOINT)if(t&&this.curAction==na.BOX_SELECTING){for(this.selectedParts=new Array,r=0;r<this.allParts.length;r++)this.allParts[r].isEditable&&this.allParts[r].IntersectsBox(Math.min(this.firstClickX,na.mouseXWorldPhys),Math.min(this.firstClickY,na.mouseYWorldPhys),Math.abs(this.firstClickX-na.mouseXWorldPhys),Math.abs(this.firstClickY-na.mouseYWorldPhys))&&this.selectedParts.push(this.allParts[r]);0==this.selectedParts.length?this.m_sidePanel.visible=!1:1==this.selectedParts.length&&this.selectedParts[0]instanceof yh?this.m_sidePanel.ShowCannonPanel(this.selectedParts[0]):1==this.selectedParts.length&&this.selectedParts[0]instanceof mh?this.m_sidePanel.ShowObjectPanel(this.selectedParts[0]):1==this.selectedParts.length&&this.selectedParts[0]instanceof fh?this.m_sidePanel.ShowJointPanel(this.selectedParts[0]):1==this.selectedParts.length&&this.selectedParts[0]instanceof wh?this.m_sidePanel.ShowTextPanel(this.selectedParts[0]):1==this.selectedParts.length&&this.selectedParts[0]instanceof Ah?this.m_sidePanel.ShowThrustersPanel(this.selectedParts[0]):this.m_sidePanel.ShowMultiSelectPanel(this.selectedParts),this.curAction=-1,this.redrawRobot=!0}else if(t&&this.curAction==na.FINALIZING_JOINT)if(this.candidateJointType==na.NEW_PRISMATIC_JOINT||this.candidateJointType==na.NEW_THRUSTERS){this.potentialJointPart1.highlightForJoint=!1;var x=-1;for(r=0;r<this.candidateJointParts.length;r++)this.potentialJointPart1==this.candidateJointParts[r]&&(x=r);++x==this.candidateJointParts.length&&(x=0),this.potentialJointPart1=this.candidateJointParts[x],this.potentialJointPart1.highlightForJoint=!0}else{this.potentialJointPart1.highlightForJoint=!1,this.potentialJointPart2.highlightForJoint=!1;var S=-1,A=-1;for(r=0;r<this.candidateJointParts.length;r++)this.potentialJointPart1==this.candidateJointParts[r]&&(S=r),this.potentialJointPart2==this.candidateJointParts[r]&&(A=r);S==this.candidateJointParts.length-2&&A==this.candidateJointParts.length-1?(S=0,A=1):++A==this.candidateJointParts.length&&(A=++S+1),this.potentialJointPart1=this.candidateJointParts[S],this.potentialJointPart2=this.candidateJointParts[A],this.potentialJointPart1.highlightForJoint=!0,this.potentialJointPart2.highlightForJoint=!0}else if(t||this.curAction!=na.NEW_TEXT||0!=this.actionStep)if(t&&this.curAction==na.NEW_TEXT&&1==this.actionStep){var P=na.mouseXWorldPhys,C=na.mouseYWorldPhys;if(Math.abs(P-this.firstClickX)<1||Math.abs(C-this.firstClickY)<.5){var T=(this.firstClickX+P)/2,E=(this.firstClickY+C)/2;this.firstClickX=T-2,this.firstClickY=E-1,P=T+2,C=E+1}var R=new wh(this,Math.min(this.firstClickX,P),Math.min(this.firstClickY,C),Math.max(this.firstClickX,P)-Math.min(this.firstClickX,P),Math.max(this.firstClickY,C)-Math.min(this.firstClickY,C),"New Text");this.selectedParts.push(R),this.allParts.push(R),this.AddAction(new Ch(R)),this.curAction=-1,na.curRobotID="",this.m_sidePanel.ShowTextPanel(R),this.redrawRobot=!0}else t&&this.curAction==na.NEW_THRUSTERS?this.MaybeCreateThrusters():t&&this.curAction==na.RESIZING_TEXT&&(this.curAction=-1);else this.firstClickX=na.mouseXWorldPhys,this.firstClickY=na.mouseYWorldPhys,this.actionStep++;else this.MaybeCreateJoint()}}RefreshSidePanel(){0==this.selectedParts.length||this.selectingCondition?this.m_sidePanel.visible=!1:1==this.selectedParts.length&&this.selectedParts[0]instanceof yh?(this.m_sidePanel.ShowCannonPanel(this.selectedParts[0]),this.lastSelectedShape=null):1==this.selectedParts.length&&this.selectedParts[0]instanceof mh?(this.m_sidePanel.ShowObjectPanel(this.selectedParts[0]),this.lastSelectedShape=null):1==this.selectedParts.length&&this.selectedParts[0]instanceof wh?(this.m_sidePanel.ShowTextPanel(this.selectedParts[0]),this.lastSelectedText=null):1==this.selectedParts.length&&this.selectedParts[0]instanceof fh?(this.m_sidePanel.ShowJointPanel(this.selectedParts[0]),this.lastSelectedJoint=null):1==this.selectedParts.length&&this.selectedParts[0]instanceof Ah?(this.m_sidePanel.ShowThrustersPanel(this.selectedParts[0]),this.lastSelectedThrusters=null):this.m_sidePanel.ShowMultiSelectPanel(this.selectedParts)}AddAction(t){for(;this.lastAction+1!=this.actions.length;)this.actions.pop();this.lastAction=this.actions.length,this.actions.push(t)}CenterOnSelected(){if(1==this.selectedParts.length){var t,e;this.selectedParts[0]instanceof mh||this.selectedParts[0]instanceof Ah?(t=this.selectedParts[0].centerX,e=this.selectedParts[0].centerY):this.selectedParts[0]instanceof fh?(t=this.selectedParts[0].anchorX,e=this.selectedParts[0].anchorY):this.selectedParts[0]instanceof wh&&(t=this.selectedParts[0].x+this.selectedParts[0].w/2,e=this.selectedParts[0].y+this.selectedParts[0].h/2);var i=this.draw.m_drawXOff,s=this.draw.m_drawYOff;this.draw.m_drawXOff+=this.World2ScreenX(t)-na.ZOOM_FOCUS_X,this.draw.m_drawYOff+=this.World2ScreenY(e)-na.ZOOM_FOCUS_Y,i==this.draw.m_drawXOff&&s==this.draw.m_drawYOff||(this.hasPanned=!0)}}circleButton(){na.curRobotEditable&&!this.selectingCondition&&(this.curAction==na.NEW_CIRCLE?(this.curAction=-1,this.redrawRobot=!0):(this.curAction=na.NEW_CIRCLE,this.actionStep=0,this.selectedParts=new Array,this.m_sidePanel.visible=!1))}rectButton(){na.curRobotEditable&&!this.selectingCondition&&(this.curAction==na.NEW_RECT?(this.curAction=-1,this.redrawRobot=!0):(this.curAction=na.NEW_RECT,this.actionStep=0,this.selectedParts=new Array,this.m_sidePanel.visible=!1))}triangleButton(){na.curRobotEditable&&!this.selectingCondition&&(this.curAction==na.NEW_TRIANGLE?(this.curAction=-1,this.redrawRobot=!0):(this.curAction=na.NEW_TRIANGLE,this.actionStep=0,this.selectedParts=new Array,this.m_sidePanel.visible=!1))}fjButton(){na.curRobotEditable&&!this.selectingCondition&&(this.curAction==na.NEW_FIXED_JOINT?(this.curAction=-1,this.redrawRobot=!0):(this.curAction=na.NEW_FIXED_JOINT,this.actionStep=0,this.selectedParts=new Array,this.m_sidePanel.visible=!1,this.potentialJointPart1=null,this.potentialJointPart2=null,this.copiedJoint=null))}rjButton(){na.curRobotEditable&&!this.selectingCondition&&(this.curAction==na.NEW_REVOLUTE_JOINT?(this.curAction=-1,this.redrawRobot=!0):(this.curAction=na.NEW_REVOLUTE_JOINT,this.actionStep=0,this.selectedParts=new Array,this.m_sidePanel.visible=!1,this.potentialJointPart1=null,this.potentialJointPart2=null,this.copiedJoint=null))}pjButton(){na.curRobotEditable&&!this.selectingCondition&&(this.curAction==na.NEW_PRISMATIC_JOINT?(this.curAction=-1,this.redrawRobot=!0):(this.curAction=na.NEW_PRISMATIC_JOINT,this.actionStep=0,this.selectedParts=new Array,this.m_sidePanel.visible=!1,this.potentialJointPart1=null,this.potentialJointPart2=null,this.copiedJoint=null))}textButton(){na.curRobotEditable&&!this.selectingCondition&&(this.curAction==na.NEW_TEXT?(this.curAction=-1,this.redrawRobot=!0):(this.curAction=na.NEW_TEXT,this.actionStep=0,this.selectedParts=new Array,this.m_sidePanel.visible=!1))}thrustersButton(){na.curRobotEditable&&!this.selectingCondition&&(this.curAction=na.NEW_THRUSTERS,this.actionStep=0,this.selectedParts=new Array,this.m_sidePanel.visible=!1,this.copiedThrusters=null)}cannonButton(){na.curRobotEditable&&!this.selectingCondition&&(this.curAction=na.NEW_CANNON,this.actionStep=0,this.selectedParts=new Array,this.m_sidePanel.visible=!1)}mochiAdStarted(){na.adStarted=!0}mochiAdFinished(){na.adStarted=!1,this.playButton(!1)}playButton(t=!0){if(!this.selectingCondition&&!na.adStarted){this.CheckIfPartsFit();var e=this.TooManyShapes();if(this.partsFit&&!e||na.playingReplay){if(this.m_guiPanel.ShowGamePanel(),this.m_sidePanel.visible=!1,this.selectedParts=new Array,this.curAction=-1,this.paused=!1,!this.simStarted){this.frameCounter=0,this.m_guiPanel.SetTimer(this.frameCounter),this.cameraMovements=new Array,this.cameraMovements.push(new Va(0,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,this.m_physScale)),this.keyPresses=new Array,this.syncPoints=new Array,na.cannonballs=new Array,na.playingReplay&&(na.replay.syncPointIndex=0,na.replay.cameraMovementIndex=0,na.replay.keyPressIndex=0,na.replay.syncPoints.length>0&&(this.replaySplineXs=this.ComputeReplaySplines(0),this.replaySplineYs=this.ComputeReplaySplines(1),this.replaySplineAngles=this.ComputeReplaySplines(2))),this.simStarted=!0,this.autoPanning=!0,this.canSaveReplay=!0;for(var i=0;i<this.allParts.length;i++)this.allParts[i].checkedCollisionGroup=!1;for(i=0;i<this.allParts.length;i++)this.allParts[i]instanceof mh&&this.allParts[i].SetCollisionGroup(-(i+1));for(this.CreateWorld(),i=this.allParts.length;i>=0;i--)(this.allParts[i]instanceof mh||this.allParts[i]instanceof wh)&&this.allParts[i].Init(this.m_world);for(na.collisionGroup=1,i=0;i<this.allParts.length;i++)this.allParts[i]instanceof Sh&&(na.collisionGroup*=2),(this.allParts[i]instanceof fh||this.allParts[i]instanceof Ah)&&this.allParts[i].Init(this.m_world);for(this.cameraPart=null,i=0;i<this.allParts.length;i++)this.allParts[i]instanceof mh&&this.allParts[i].isCameraFocus&&this.allParts[i].isEnabled&&(this.cameraPart=this.allParts[i]);this.cameraPart||(this.cameraPart=this.FindCenterOfRobot()),this.savedDrawXOff=this.Screen2WorldX(na.ZOOM_FOCUS_X),this.savedDrawYOff=this.Screen2WorldY(na.ZOOM_FOCUS_Y)}}else this.m_fader.visible=!0,this.partsFit?e&&this.ShowDialog3("Your robot contains too many shapes!  (Limit 500)"):this.ShowDialog3("You must fit your robot inside the starting box first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()}}editButton(t=!1){}pauseButton(){na.playingReplay&&na.replay.Update(this.frameCounter)&&this.ShowPostReplayWindow(),this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0}resetButton(t=!0){if(na.playingReplay){for(var e=0;e<this.allParts.length;e++)this.allParts[e].UnInit(this.m_world);this.simStarted=!1,this.playButton(!1)}else{for(this.m_guiPanel.ShowEditPanel(),this.paused=!0,this.simStarted=!1,na.playingReplay=!1,e=0;e<this.allParts.length;e++)this.allParts[e].UnInit(this.m_world);this.draw.m_drawXOff=this.savedDrawXOff*this.m_physScale-na.ZOOM_FOCUS_X,this.draw.m_drawYOff=this.savedDrawYOff*this.m_physScale-na.ZOOM_FOCUS_Y,this.hasPanned=!0,t&&(""==na.curChallengeID||!na.curChallengePublic||na.ratedCurChallenge||Ws.HasRatedChallenge(na.curChallengeID)?""==na.curRobotID||!na.curRobotPublic||na.ratedCurRobot||Ws.HasRatedRobot(na.curRobotID)||(na.ratedCurRobot=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,0,0,!0),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.paused=!0):(na.ratedCurChallenge=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,2,0,!0),this.addChild(this.m_rateDialog),this.m_fader.visible=!0))}this.wonChallenge=!1,this.redrawBuildArea=!0}rewindButton(t=!0){if(na.playingReplay)if(na.viewingUnsavedReplay){this.paused=!0,this.simStarted=!1,na.playingReplay=!1,this.wonChallenge=!1,na.viewingUnsavedReplay=!1,this.m_guiPanel.ShowEditPanel(!0);for(var e=0;e<this.allParts.length;e++)this.allParts[e].UnInit(this.m_world);this.draw.m_drawXOff=this.savedDrawXOff*this.m_physScale-na.ZOOM_FOCUS_X,this.draw.m_drawYOff=this.savedDrawYOff*this.m_physScale-na.ZOOM_FOCUS_Y,this.hasPanned=!0,this.redrawBuildArea=!0}else t&&""!=na.curReplayID&&!na.ratedCurReplay&&na.curReplayPublic&&!Ws.HasRatedReplay(na.curReplayID)?(na.ratedCurReplay=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,1,5),this.addChild(this.m_rateDialog),this.m_fader.visible=!0):(Sa.changeControllers=!0,na.playingReplay=!1,na.showTutorial=!1,na.replayParts=new Array,na.curRobotID="",na.curRobotEditable=!0,na.curReplayID="");else this.resetButton(!1),this.playButton()}reportButton(){this.selectingCondition||(na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic?"_Public"==na.userName?(this.clickedReport=!0,this.loginButton(!0,!1)):(this.m_reportWindow&&this.removeChild(this.m_reportWindow),this.m_reportWindow=new ReportWindow(this,1,na.curReplayID),this.addChild(this.m_reportWindow),this.m_fader.visible=!0,this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0):""!=na.curChallengeID&&na.curChallengePublic?"_Public"==na.userName?(this.clickedReport=!0,this.loginButton(e,!0,!1)):(this.m_reportWindow&&this.removeChild(this.m_reportWindow),this.m_reportWindow=new ReportWindow(this,2,na.curChallengeID),this.addChild(this.m_reportWindow),this.m_fader.visible=!0,this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0):""!=na.curRobotID&&na.curRobotPublic?"_Public"==na.userName?(this.clickedReport=!0,this.loginButton(!0,!1)):(this.m_reportWindow&&this.removeChild(this.m_reportWindow),this.m_reportWindow=new ReportWindow(this,0,na.curRobotID),this.addChild(this.m_reportWindow),this.m_fader.visible=!0,this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0):(this.m_fader.visible=!0,this.ShowDialog3("You can only report publicly saved robots."),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}finishReporting(){-1!=hh.FinishReporting(e)&&(this.ShowDialog3("Thank you, the moderators have been notified."),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer(),Sa.ShowMouse())}featureButton(){this.selectingCondition||(na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic?(hh.FeatureReplay(na.curReplayID,!na.curReplayFeatured,this.finishFeaturing),this.m_fader.visible=!0,this.ShowDialog("Featuring..."),Sa.ShowHourglass()):""!=na.curChallengeID&&na.curChallengePublic?(hh.FeatureChallenge(na.curChallengeID,!na.curChallengeFeatured,this.finishFeaturing),this.m_fader.visible=!0,this.ShowDialog("Featuring..."),Sa.ShowHourglass()):""!=na.curRobotID&&na.curRobotPublic?(hh.FeatureRobot(na.curRobotID,!na.curRobotFeatured,this.finishFeaturing),this.m_fader.visible=!0,this.ShowDialog("Featuring..."),Sa.ShowHourglass()):(this.m_fader.visible=!0,this.ShowDialog3("You can only feature publicly saved robots."),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}finishFeaturing(){hh.FinishFeaturing(e)&&(this.m_progressDialog.SetMessage("Success!"),this.m_progressDialog.HideInXSeconds(1),this.m_fader.visible=!1,Sa.ShowMouse(),na.playingReplay?na.curReplayFeatured=!na.curReplayFeatured:""!=na.curChallengeID?na.curChallengeFeatured=!na.curChallengeFeatured:na.curRobotFeatured=!na.curRobotFeatured)}rateButton(){this.selectingCondition||(""!=na.curRobotID&&na.curRobotPublic&&!Ws.HasRatedRobot(na.curRobotID)?(this.m_fader.visible=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,0),this.addChild(this.m_rateDialog)):""!=na.curRobotID&&na.curRobotPublic?(this.m_fader.visible=!0,this.ShowDialog3("You've already rated this robot!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your robot publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}rateWindowClosed(t,e){this.m_rateDialog.visible=!1,na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic?hh.RateReplay(na.curReplayID,t,this.finishRatingReplay):""!=na.curChallengeID&&na.curChallengePublic?hh.RateChallenge(na.curChallengeID,t,this.finishRatingChallenge):hh.RateRobot(na.curRobotID,t,this.finishRatingRobot),this.redirectAfterRating=e,this.m_fader.visible=!0,this.ShowDialog("Rating..."),Sa.ShowHourglass(),this.curAction=-1}conditionsButton(){this.curAction=-1,this.boxText.visible=!1,this.horizLineText.visible=!1,this.vertLineText.visible=!1,this.shapeText.visible=!1,this.m_sidePanel.visible=!1,this.m_conditionsDialog&&this.removeChild(this.m_conditionsDialog),this.m_conditionsDialog=new ConditionsWindow(this),this.addChild(this.m_conditionsDialog),this.m_fader.visible=!0}restrictionsButton(){this.selectingCondition||(this.m_sidePanel.visible=!1,this.m_restrictionsDialog&&this.removeChild(this.m_restrictionsDialog),this.m_restrictionsDialog=new RestrictionsWindow(this),this.addChild(this.m_restrictionsDialog),this.m_fader.visible=!0,this.saveAfterRestrictions=!1)}buildBoxButton(){this.selectingCondition||(this.curAction=na.DRAWING_BUILD_BOX,this.actionStep=0)}sandboxSettingsButton(){na.curRobotEditable&&!this.selectingCondition&&(this.simStarted||("sandbox"!==this.controllerType||"challenge"===this.controllerType&&Ha.playOnlyMode?(this.m_fader.visible=!0,this.ShowDialog3("That feature instanceof only available in Sandbox mode!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):(this.m_sandboxWindow=new Ca(this,Ya.settings),this.m_fader.visible=!0,this.addChild(this.m_sandboxWindow))))}commentButton(t="",e=!1){this.selectingCondition||(""==t&&(t=na.curRobotID,e=na.curRobotPublic),""!=t&&e?(hh.CommentOnRobot(t,this.finishCommenting),this.m_fader.visible=!0,this.ShowDialog("Connecting to forum..."),Sa.ShowHourglass(),this.curAction=-1):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your robot publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}finishCommenting(){if(hh.waitingForResponse&&(hh.curTransactionType==hh.ACTION_COMMENT_ROBOT||hh.curTransactionType==hh.ACTION_COMMENT_REPLAY)){var t=hh.FinishCommenting();-1!=t&&(this.m_chooserWindow&&this.m_chooserWindow.visible?this.m_chooserWindow.HideFader():this.m_fader.visible=!1,this.m_progressDialog.visible=!1,Sa.BrowserRedirect("http://www.incredibots.com/forums/posting.php?mode=reply&t="+t+("_Public"==na.userName?"":"&sid="+na.sessionID),!0),Sa.ShowMouse())}}finishRatingRobot(){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_RATE_ROBOT&&(hh.FinishRating()&&(Ws.SetRobotRated(na.curRobotID),this.m_progressDialog.SetMessage("Success!"),this.m_progressDialog.HideInXSeconds(1),this.m_postReplayWindow&&this.m_postReplayWindow.visible?this.m_postReplayWindow.HideFader():this.m_fader.visible=!1,this.m_rateDialog.visible=!1,Sa.ShowMouse()),1==this.redirectAfterRating?this.loadButton():2==this.redirectAfterRating?this.loadRobotButton():3==this.redirectAfterRating?this.loadReplayButton():4==this.redirectAfterRating?this.loadChallengeButton():5==this.redirectAfterRating&&this.rewindButton(),this.redirectAfterRating=0)}finishRatingReplay(){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_RATE_REPLAY&&(hh.FinishRating(e)&&(Ws.SetReplayRated(na.curReplayID),this.m_progressDialog.SetMessage("Success!"),this.m_progressDialog.HideInXSeconds(1),this.m_postReplayWindow&&this.m_postReplayWindow.visible?this.m_postReplayWindow.HideFader():this.m_fader.visible=!1,this.m_rateDialog.visible=!1,Sa.ShowMouse()),1==this.redirectAfterRating?this.loadButton():2==this.redirectAfterRating?this.loadRobotButton():3==this.redirectAfterRating?this.loadReplayButton():4==this.redirectAfterRating?this.loadChallengeButton():5==this.redirectAfterRating&&this.rewindButton(),this.redirectAfterRating=0)}finishRatingChallenge(){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_RATE_CHALLENGE&&(hh.FinishRating()&&(Ws.SetChallengeRated(na.curChallengeID),this.m_progressDialog.SetMessage("Success!"),this.m_progressDialog.HideInXSeconds(1),this.m_postReplayWindow&&this.m_postReplayWindow.visible?this.m_postReplayWindow.HideFader():this.m_fader.visible=!1,this.m_rateDialog.visible=!1,Sa.ShowMouse()),1==this.redirectAfterRating?this.loadButton():2==this.redirectAfterRating?this.loadRobotButton():3==this.redirectAfterRating?this.loadReplayButton():4==this.redirectAfterRating?this.loadChallengeButton():5==this.redirectAfterRating&&this.rewindButton(),this.redirectAfterRating=0)}embedButton(t="",e=!1){this.selectingCondition||(""==t&&(t=na.curRobotID,e=na.curRobotPublic),""!=t&&e?(this.m_fader.visible=!0,this.ShowLinkDialog("Copy the HTML below into your\n  website to embed this robot.",null,!1,t)):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your robot publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}linkButton(t="",e=!1){this.selectingCondition||(""==t&&(t=na.curRobotID,e=na.curRobotPublic),""!=t&&e?(this.m_fader.visible=!0,this.ShowLinkDialog("     Use the link below to\n        link to this robot.","http://incredibots2.com/?robotID="+t)):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your robot publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}rateReplayButton(){this.selectingCondition||(""!=na.curReplayID&&na.curReplayPublic&&!Ws.HasRatedReplay(na.curReplayID)?(this.m_fader.visible=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,1),this.addChild(this.m_rateDialog)):""!=na.curReplayID&&na.curReplayPublic?(this.m_fader.visible=!0,this.ShowDialog3("You've already rated this replay!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your replay publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}commentReplayButton(t="",e=!1){""==t&&(t=na.curReplayID,e=na.curReplayPublic),""!=t&&e?(hh.CommentOnReplay(t,this.finishCommenting),this.m_fader.visible=!0,this.ShowDialog("Connecting to forum..."),Sa.ShowHourglass(),this.curAction=-1):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your replay publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}embedReplayButton(t="",e=!1){""==t&&(t=na.curReplayID,e=na.curReplayPublic),""!=t&&e?(this.m_fader.visible=!0,this.ShowLinkDialog("Copy the HTML below into your\n  website to embed this replay.",null,!0,t)):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your replay publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}linkReplayButton(t="",e=!1){""==t&&(t=na.curReplayID,e=na.curReplayPublic),""!=t&&e?(this.m_fader.visible=!0,this.ShowLinkDialog("     Use the link below to\n       link to this replay.","http://incredibots2.com/?replayID="+t)):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your replay publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}rateChallengeButton(){this.selectingCondition||(""!=na.curChallengeID&&na.curChallengePublic&&!Ws.HasRatedChallenge(na.curChallengeID)?(this.m_fader.visible=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,2),this.addChild(this.m_rateDialog)):""!=na.curChallengeID&&na.curChallengePublic?(this.m_fader.visible=!0,this.ShowDialog3("You've already rated this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your challenge publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}commentChallengeButton(t="",e=!1){this.selectingCondition||(""==t&&(t=na.curChallengeID,e=na.curChallengePublic),""!=t&&e?(hh.CommentOnChallenge(t,this.finishCommenting),this.m_fader.visible=!0,this.ShowDialog("Connecting to forum..."),Sa.ShowHourglass(),this.curAction=-1):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your challenge publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}embedChallengeButton(t="",e=!1){this.selectingCondition||(""==t&&(t=na.curChallengeID,e=na.curChallengePublic),""!=t&&e?(this.m_fader.visible=!0,this.ShowLinkDialog("Copy the HTML below into your\n  website to embed this challenge.",null,!1,t,!0)):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your challenge publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}linkChallengeButton(t="",e=!1){this.selectingCondition||(""==t&&(t=na.curChallengeID,e=na.curChallengePublic),""!=t&&e?(this.m_fader.visible=!0,this.ShowLinkDialog("     Use the link below to\n       link to this challenge.","http://incredibots2.com/?challengeID="+t)):(this.m_fader.visible=!0,this.ShowDialog3("You need to save your challenge publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}tutorialButton(){this.m_tutorialDialog&&(this.m_tutorialDialog.visible=!0,this.m_tutorialDialog.ResetPosition())}rotateButton(){if(na.curRobotEditable){for(var t=this.selectedParts.length-1;t>=0;t--)this.selectedParts[t]instanceof wh&&(this.selectedParts=Vs.RemoveFromArray(this.selectedParts[t],this.selectedParts));if(0!=this.selectedParts.length){for(this.curAction=na.ROTATE,this.rotatingPart=null,t=0;t<this.selectedParts.length;t++)(this.selectedParts[t]instanceof mh&&(!this.rotatingPart||this.rotatingPart instanceof Ah||this.selectedParts[t].GetMass()>this.rotatingPart.GetMass())||this.selectedParts[t]instanceof Ah&&!this.rotatingPart)&&(this.rotatingPart=this.selectedParts[t]);if(null!=this.rotatingPart){if(this.rotatingParts=new Array,1==this.selectedParts.length&&this.rotatingPart instanceof Ah)this.rotatingParts.push(this.rotatingPart);else{for(t=0;t<this.selectedParts.length;t++)this.rotatingParts=this.rotatingParts.concat(this.selectedParts[t].GetAttachedParts());this.rotatingParts=Vs.RemoveDuplicates(this.rotatingParts)}for(t=0;t<this.rotatingParts.length;t++)this.rotatingParts[t]instanceof mh||this.rotatingParts[t]instanceof Ah?(this.rotatingParts[t].rotateAngle=Math.atan2(this.rotatingParts[t].centerY-this.rotatingPart.centerY,this.rotatingParts[t].centerX-this.rotatingPart.centerX),this.rotatingParts[t].rotateOrientation=this.rotatingParts[t].angle):(this.rotatingParts[t].rotateAngle=Math.atan2(this.rotatingParts[t].anchorY-this.rotatingPart.centerY,this.rotatingParts[t].anchorX-this.rotatingPart.centerX),this.rotatingParts[t]instanceof Sh&&(this.rotatingParts[t].rotateOrientation=Vs.GetAngle(this.rotatingParts[t].axis)));this.initRotatingAngle=Math.atan2(na.mouseYWorldPhys-this.rotatingPart.centerY,na.mouseXWorldPhys-this.rotatingPart.centerX)}}}}mirrorHorizontal(){if(na.curRobotEditable&&!this.selectingCondition&&!this.simStarted&&0!=this.selectedParts.length){for(var t=new Array,e=this.selectedParts[0]instanceof fh?this.selectedParts[0].anchorX:this.selectedParts[0]instanceof wh?this.selectedParts[0].x+this.selectedParts[0].w/2:this.selectedParts[0].centerX,i=this.selectedParts[0]instanceof fh?this.selectedParts[0].anchorY:this.selectedParts[0]instanceof wh?this.selectedParts[0].y+this.selectedParts[0].h/2:this.selectedParts[0].centerY,s=new Array,r=0;r<this.selectedParts.length;r++)if(this.selectedParts[r]instanceof _h){var n=new _h(e-(this.selectedParts[r].centerX-e),this.selectedParts[r].centerY,this.selectedParts[r].radius);n.angle=Math.PI-this.selectedParts[r].angle,n.isStatic=this.selectedParts[r].isStatic,n.density=this.selectedParts[r].density,n.collide=this.selectedParts[r].collide,n.red=this.selectedParts[r].red,n.green=this.selectedParts[r].green,n.blue=this.selectedParts[r].blue,n.opacity=this.selectedParts[r].opacity,n.outline=this.selectedParts[r].outline,n.terrain=this.selectedParts[r].terrain,n.undragable=this.selectedParts[r].undragable,t.push(n),s.push(n)}else if(this.selectedParts[r]instanceof gh){var o=new gh(e-(this.selectedParts[r].x-e),this.selectedParts[r].y,-this.selectedParts[r].w,this.selectedParts[r].h);o.angle=Math.PI-this.selectedParts[r].angle,o.isStatic=this.selectedParts[r].isStatic,o.density=this.selectedParts[r].density,o.collide=this.selectedParts[r].collide,o.red=this.selectedParts[r].red,o.green=this.selectedParts[r].green,o.blue=this.selectedParts[r].blue,o.opacity=this.selectedParts[r].opacity,o.outline=this.selectedParts[r].outline,o.terrain=this.selectedParts[r].terrain,o.undragable=this.selectedParts[r].undragable,t.push(o),s.push(o)}else if(this.selectedParts[r]instanceof bh){var a=this.selectedParts[r].GetVertices(),h=new bh(e-(a[0].x-e),a[0].y,e-(a[1].x-e),a[1].y,e-(a[2].x-e),a[2].y);h.isStatic=this.selectedParts[r].isStatic,h.density=this.selectedParts[r].density,h.collide=this.selectedParts[r].collide,h.red=this.selectedParts[r].red,h.green=this.selectedParts[r].green,h.blue=this.selectedParts[r].blue,h.opacity=this.selectedParts[r].opacity,h.outline=this.selectedParts[r].outline,h.terrain=this.selectedParts[r].terrain,h.undragable=this.selectedParts[r].undragable,t.push(h),s.push(h)}else if(this.selectedParts[r]instanceof yh){var l=new yh(e-(this.selectedParts[r].x-e)-this.selectedParts[r].w,this.selectedParts[r].y,this.selectedParts[r].w);l.angle=Math.PI-this.selectedParts[r].angle,l.isStatic=this.selectedParts[r].isStatic,l.density=this.selectedParts[r].density,l.collide=this.selectedParts[r].collide,l.red=this.selectedParts[r].red,l.green=this.selectedParts[r].green,l.blue=this.selectedParts[r].blue,l.opacity=this.selectedParts[r].opacity,l.outline=this.selectedParts[r].outline,l.terrain=this.selectedParts[r].terrain,l.undragable=this.selectedParts[r].undragable,l.fireKey=this.selectedParts[r].fireKey,l.strength=this.selectedParts[r].strength,t.push(l),s.push(l)}else if(this.selectedParts[r]instanceof wh){var c=new wh(this,e-(this.selectedParts[r].x+this.selectedParts[r].w/2-e),this.selectedParts[r].y,this.selectedParts[r].w,this.selectedParts[r].h,this.selectedParts[r].text,this.selectedParts[r].inFront);c.red=this.selectedParts[r].red,c.green=this.selectedParts[r].green,c.blue=this.selectedParts[r].blue,c.size=this.selectedParts[r].size,c.alwaysVisible=this.selectedParts[r].alwaysVisible,c.inFront=this.selectedParts[r].inFront,c.scaleWithZoom=this.selectedParts[r].scaleWithZoom,c.displayKey=this.selectedParts[r].displayKey,t.push(c),s.push(-1)}else(this.selectedParts[r]instanceof fh||this.selectedParts[r]instanceof Ah)&&s.push(-1);for(r=0;r<this.selectedParts.length;r++){var d=-1,u=-1;if(this.selectedParts[r]instanceof fh){for(var p=0;p<this.selectedParts.length;p++)this.selectedParts[p]==this.selectedParts[r].part1&&(d=p),this.selectedParts[p]==this.selectedParts[r].part2&&(u=p);if(-1==d||-1==u)continue}else if(this.selectedParts[r]instanceof Ah){for(p=0;p<this.selectedParts.length;p++)this.selectedParts[p]==this.selectedParts[r].shape&&(d=p);if(-1==d)continue}if(this.selectedParts[r]instanceof vh){var m=new vh(s[d],s[u],e-(this.selectedParts[r].anchorX-e),this.selectedParts[r].anchorY);t.push(m)}else if(this.selectedParts[r]instanceof xh){var f=new xh(s[d],s[u],e-(this.selectedParts[r].anchorX-e),this.selectedParts[r].anchorY);f.enableMotor=this.selectedParts[r].enableMotor,f.motorCWKey=this.selectedParts[r].motorCCWKey,f.motorCCWKey=this.selectedParts[r].motorCWKey,f.motorStrength=this.selectedParts[r].motorStrength,f.motorSpeed=this.selectedParts[r].motorSpeed,f.motorLowerLimit=-this.selectedParts[r].motorUpperLimit,f.motorUpperLimit=-this.selectedParts[r].motorLowerLimit,f.isStiff=this.selectedParts[r].isStiff,f.autoCW=this.selectedParts[r].autoCCW,f.autoCCW=this.selectedParts[r].autoCW,t.push(f)}else if(this.selectedParts[r]instanceof Sh){var _=new Sh(s[d],s[u],0,0,1,1);_.anchorX=e-(this.selectedParts[r].anchorX-e),_.anchorY=this.selectedParts[r].anchorY;var g=Math.atan2(this.selectedParts[r].axis.y,this.selectedParts[r].axis.x);g=Vs.NormalizeAngle(Math.PI-g),_.axis=new ps.b2Vec2(Math.cos(g),Math.sin(g)),_.axis.Normalize(),_.initLength=this.selectedParts[r].initLength,_.enablePiston=this.selectedParts[r].enablePiston,_.pistonUpKey=this.selectedParts[r].pistonUpKey,_.pistonDownKey=this.selectedParts[r].pistonDownKey,_.pistonStrength=this.selectedParts[r].pistonStrength,_.pistonSpeed=this.selectedParts[r].pistonSpeed,_.isStiff=this.selectedParts[r].isStiff,_.autoOscillate=this.selectedParts[r].autoOscillate,_.red=this.selectedParts[r].red,_.green=this.selectedParts[r].green,_.blue=this.selectedParts[r].blue,_.opacity=this.selectedParts[r].opacity,_.outline=this.selectedParts[r].outline,_.collide=this.selectedParts[r].collide,t.push(_)}else if(this.selectedParts[r]instanceof Ah){var b=new Ah(s[d],e-(this.selectedParts[r].centerX-e),this.selectedParts[r].centerY);b.angle=Math.PI-this.selectedParts[r].angle,b.strength=this.selectedParts[r].strength,b.thrustKey=this.selectedParts[r].thrustKey,b.autoOn=this.selectedParts[r].autoOn,t.push(b)}}if(t.length>0){for(this.selectedParts=new Array,this.draggingParts=new Array,r=0;r<t.length;r++)t[r].dragXOff=e-(t[r]instanceof fh?t[r].anchorX:t[r]instanceof wh?t[r].x-t[r].w/2:t[r].centerX),t[r].dragYOff=i-(t[r]instanceof fh?t[r].anchorY:t[r]instanceof wh?t[r].y-t[r].h/2:t[r].centerY),this.selectedParts.push(t[r]),this.draggingParts.push(t[r]),this.allParts.push(t[r]);this.initDragX=na.mouseXWorldPhys,this.initDragY=na.mouseYWorldPhys,this.draggingPart=this.selectedParts[0],this.draggingPart.Move(na.mouseXWorldPhys,na.mouseYWorldPhys),this.RefreshSidePanel(),this.AddAction(new Nh(this.selectedParts)),this.curAction=na.PASTE,na.curRobotID=""}}}mirrorVertical(){if(na.curRobotEditable&&!this.selectingCondition&&!this.simStarted&&0!=this.selectedParts.length){for(var t=new Array,e=this.selectedParts[0]instanceof fh?this.selectedParts[0].anchorX:this.selectedParts[0]instanceof wh?this.selectedParts[0].x+this.selectedParts[0].w/2:this.selectedParts[0].centerX,i=this.selectedParts[0]instanceof fh?this.selectedParts[0].anchorY:this.selectedParts[0]instanceof wh?this.selectedParts[0].y+this.selectedParts[0].h/2:this.selectedParts[0].centerY,s=new Array,r=0;r<this.selectedParts.length;r++)if(this.selectedParts[r]instanceof _h){var n=new _h(this.selectedParts[r].centerX,i-(this.selectedParts[r].centerY-i),this.selectedParts[r].radius);n.angle=2*Math.PI-this.selectedParts[r].angle,n.isStatic=this.selectedParts[r].isStatic,n.density=this.selectedParts[r].density,n.collide=this.selectedParts[r].collide,n.red=this.selectedParts[r].red,n.green=this.selectedParts[r].green,n.blue=this.selectedParts[r].blue,n.opacity=this.selectedParts[r].opacity,n.outline=this.selectedParts[r].outline,n.terrain=this.selectedParts[r].terrain,n.undragable=this.selectedParts[r].undragable,t.push(n),s.push(n)}else if(this.selectedParts[r]instanceof gh){var o=new gh(this.selectedParts[r].x,i-(this.selectedParts[r].y-i),this.selectedParts[r].w,-this.selectedParts[r].h);o.angle=2*Math.PI-this.selectedParts[r].angle,o.isStatic=this.selectedParts[r].isStatic,o.density=this.selectedParts[r].density,o.collide=this.selectedParts[r].collide,o.red=this.selectedParts[r].red,o.green=this.selectedParts[r].green,o.blue=this.selectedParts[r].blue,o.opacity=this.selectedParts[r].opacity,o.outline=this.selectedParts[r].outline,o.terrain=this.selectedParts[r].terrain,o.undragable=this.selectedParts[r].undragable,t.push(o),s.push(o)}else if(this.selectedParts[r]instanceof bh){var a=this.selectedParts[r].GetVertices(),h=new bh(a[0].x,i-(a[0].y-i),a[1].x,i-(a[1].y-i),a[2].x,i-(a[2].y-i));h.isStatic=this.selectedParts[r].isStatic,h.density=this.selectedParts[r].density,h.collide=this.selectedParts[r].collide,h.red=this.selectedParts[r].red,h.green=this.selectedParts[r].green,h.blue=this.selectedParts[r].blue,h.opacity=this.selectedParts[r].opacity,h.outline=this.selectedParts[r].outline,h.terrain=this.selectedParts[r].terrain,h.undragable=this.selectedParts[r].undragable,t.push(h),s.push(h)}else if(this.selectedParts[r]instanceof yh){var l=new yh(this.selectedParts[r].x,i-(this.selectedParts[r].y-i)-this.selectedParts[r].w/2,this.selectedParts[r].w);l.angle=2*Math.PI-this.selectedParts[r].angle,l.isStatic=this.selectedParts[r].isStatic,l.density=this.selectedParts[r].density,l.collide=this.selectedParts[r].collide,l.red=this.selectedParts[r].red,l.green=this.selectedParts[r].green,l.blue=this.selectedParts[r].blue,l.opacity=this.selectedParts[r].opacity,l.outline=this.selectedParts[r].outline,l.terrain=this.selectedParts[r].terrain,l.undragable=this.selectedParts[r].undragable,l.fireKey=this.selectedParts[r].fireKey,l.strength=this.selectedParts[r].strength,t.push(l),s.push(l)}else if(this.selectedParts[r]instanceof wh){var c=new wh(this,this.selectedParts[r].x,i-(this.selectedParts[r].y+this.selectedParts[r].h/2-i),this.selectedParts[r].w,this.selectedParts[r].h,this.selectedParts[r].text,this.selectedParts[r].inFront);c.red=this.selectedParts[r].red,c.green=this.selectedParts[r].green,c.blue=this.selectedParts[r].blue,c.size=this.selectedParts[r].size,c.alwaysVisible=this.selectedParts[r].alwaysVisible,c.inFront=this.selectedParts[r].inFront,c.scaleWithZoom=this.selectedParts[r].scaleWithZoom,c.displayKey=this.selectedParts[r].displayKey,t.push(c),s.push(-1)}else(this.selectedParts[r]instanceof fh||this.selectedParts[r]instanceof Ah)&&s.push(-1);for(r=0;r<this.selectedParts.length;r++){var d=-1,u=-1;if(this.selectedParts[r]instanceof fh){for(var p=0;p<this.selectedParts.length;p++)this.selectedParts[p]==this.selectedParts[r].part1&&(d=p),this.selectedParts[p]==this.selectedParts[r].part2&&(u=p);if(-1==d||-1==u)continue}else if(this.selectedParts[r]instanceof Ah){for(p=0;p<this.selectedParts.length;p++)this.selectedParts[p]==this.selectedParts[r].shape&&(d=p);if(-1==d)continue}if(this.selectedParts[r]instanceof vh){var m=new vh(s[d],s[u],this.selectedParts[r].anchorX,i-(this.selectedParts[r].anchorY-i));t.push(m)}else if(this.selectedParts[r]instanceof xh){var f=new xh(s[d],s[u],this.selectedParts[r].anchorX,i-(this.selectedParts[r].anchorY-i));f.enableMotor=this.selectedParts[r].enableMotor,f.motorCWKey=this.selectedParts[r].motorCCWKey,f.motorCCWKey=this.selectedParts[r].motorCWKey,f.motorStrength=this.selectedParts[r].motorStrength,f.motorSpeed=this.selectedParts[r].motorSpeed,f.motorLowerLimit=-this.selectedParts[r].motorUpperLimit,f.motorUpperLimit=-this.selectedParts[r].motorLowerLimit,f.isStiff=this.selectedParts[r].isStiff,f.autoCW=this.selectedParts[r].autoCCW,f.autoCCW=this.selectedParts[r].autoCW,t.push(f)}else if(this.selectedParts[r]instanceof Sh){var _=new Sh(s[d],s[u],0,0,1,1);_.anchorX=this.selectedParts[r].anchorX,_.anchorY=i-(this.selectedParts[r].anchorY-i);var g=Math.atan2(this.selectedParts[r].axis.y,this.selectedParts[r].axis.x);g=Vs.NormalizeAngle(2*Math.PI-g),_.axis=new ps.b2Vec2(Math.cos(g),Math.sin(g)),_.axis.Normalize(),_.initLength=this.selectedParts[r].initLength,_.enablePiston=this.selectedParts[r].enablePiston,_.pistonUpKey=this.selectedParts[r].pistonUpKey,_.pistonDownKey=this.selectedParts[r].pistonDownKey,_.pistonStrength=this.selectedParts[r].pistonStrength,_.pistonSpeed=this.selectedParts[r].pistonSpeed,_.isStiff=this.selectedParts[r].isStiff,_.autoOscillate=this.selectedParts[r].autoOscillate,_.red=this.selectedParts[r].red,_.green=this.selectedParts[r].green,_.blue=this.selectedParts[r].blue,_.opacity=this.selectedParts[r].opacity,_.outline=this.selectedParts[r].outline,_.collide=this.selectedParts[r].collide,t.push(_)}else if(this.selectedParts[r]instanceof Ah){var b=new Ah(s[d],this.selectedParts[r].centerX,i-(this.selectedParts[r].centerY-i));b.angle=2*Math.PI-this.selectedParts[r].angle,b.strength=this.selectedParts[r].strength,b.thrustKey=this.selectedParts[r].thrustKey,b.autoOn=this.selectedParts[r].autoOn,t.push(b)}}if(t.length>0){for(this.selectedParts=new Array,this.draggingParts=new Array,r=0;r<t.length;r++)t[r].dragXOff=e-(t[r]instanceof fh?t[r].anchorX:t[r]instanceof wh?t[r].x-t[r].w/2:t[r].centerX),t[r].dragYOff=i-(t[r]instanceof fh?t[r].anchorY:t[r]instanceof wh?t[r].y-t[r].h/2:t[r].centerY),this.selectedParts.push(t[r]),this.draggingParts.push(t[r]),this.allParts.push(t[r]);this.initDragX=na.mouseXWorldPhys,this.initDragY=na.mouseYWorldPhys,this.draggingPart=this.selectedParts[0],this.draggingPart.Move(na.mouseXWorldPhys,na.mouseYWorldPhys),this.RefreshSidePanel(),this.AddAction(new Nh(this.selectedParts)),this.curAction=na.PASTE,na.curRobotID=""}}}scaleButton(){if(na.curRobotEditable&&!this.selectingCondition&&!this.simStarted&&0!=this.selectedParts.length){this.initDragX=this.selectedParts[0]instanceof fh?this.selectedParts[0].anchorX:this.selectedParts[0]instanceof wh?this.selectedParts[0].x+this.selectedParts[0].w/2:this.selectedParts[0].centerX,this.initDragY=this.selectedParts[0]instanceof fh?this.selectedParts[0].anchorY:this.selectedParts[0]instanceof wh?this.selectedParts[0].y+this.selectedParts[0].h/2:this.selectedParts[0].centerY,this.firstClickX=na.mouseXWorld,this.firstClickY=na.mouseYWorld,this.draggingParts=new Array;for(var t=0;t<this.selectedParts.length;t++)this.draggingParts=Vs.RemoveDuplicates(this.draggingParts.concat(this.selectedParts[t].GetAttachedParts()));for(t=0;t<this.draggingParts.length;t++)this.draggingParts[t].dragXOff=(this.draggingParts[t]instanceof fh?this.draggingParts[t].anchorX:this.draggingParts[t]instanceof wh?this.draggingParts[t].x+this.draggingParts[t].w/2:this.draggingParts[t].centerX)-this.initDragX,this.draggingParts[t].dragYOff=(this.draggingParts[t]instanceof fh?this.draggingParts[t].anchorY:this.draggingParts[t]instanceof wh?this.draggingParts[t].y+this.draggingParts[t].h/2:this.draggingParts[t].centerY)-this.initDragY,this.draggingParts[t].PrepareForResizing();this.curAction=na.RESIZING_SHAPES}}deleteButton(){na.curRobotEditable&&(this.simStarted||1==this.selectedParts.length&&(this.DeletePart(this.selectedParts[0]),this.curAction=-1,this.m_sidePanel.visible=!1,na.curRobotID="",this.redrawRobot=!0))}deleteBuildBoxButton(){na.curRobotEditable&&(this.simStarted||(this.selectedBuildArea&&(Ha.challenge.buildAreas=Vs.RemoveFromArray(this.selectedBuildArea,Ha.challenge.buildAreas),this.BuildBuildArea(),this.redrawBuildArea=!0),this.m_sidePanel.visible=!1))}multiDeleteButton(){if(na.curRobotEditable&&!this.simStarted){for(var t=new Array,e=0;e<this.selectedParts.length;e++)this.selectedParts[e]instanceof mh&&(t=(t=t.concat(this.selectedParts[e].GetActiveJoints())).concat(this.selectedParts[e].GetActiveThrusters())),this.DeletePart(this.selectedParts[e],!1,!1);if(0!=this.selectedParts.length){var i=Vs.RemoveDuplicates(this.selectedParts.concat(t));for(this.AddAction(new Ih(i)),e=0;e<i.length;e++)this.selectedParts=Vs.RemoveFromArray(i[e],this.selectedParts);this.CheckIfPartsFit(),this.m_sidePanel.visible=!1,na.curRobotID="",this.redrawRobot=!0}}}densitySlider(t){if(1==this.selectedParts.length&&this.selectedParts[0]instanceof mh){var e=this.selectedParts[0].density;this.selectedParts[0].density=t,na.curRobotID="",this.m_sidePanel.SetDensity(t),e!=t&&this.AddAction(new Gh(this.selectedParts[0],Gh.DENSITY_TYPE,t-e))}}densityText(t){if(this.lastSelectedShape instanceof mh){var e=this.lastSelectedShape.density,i=parseInt(t);i<na.minDensity&&(i=na.minDensity),i>na.maxDensity&&(i=na.maxDensity),isNaN(i)&&(i=na.minDensity>15?na.minDensity:na.maxDensity<15?na.maxDensity:15),this.lastSelectedShape.density=i,na.curRobotID="",this.m_sidePanel.SetDensity(i),e!=i&&this.AddAction(new Gh(this.selectedParts[0],Gh.DENSITY_TYPE,i-e))}this.m_sidePanel.TextAreaLostFocus()}strengthText(t){if(this.lastSelectedJoint instanceof fh){var e;this.lastSelectedJoint instanceof xh&&(e=this.lastSelectedJoint.motorStrength),this.lastSelectedJoint instanceof Sh&&(e=this.lastSelectedJoint.pistonStrength);var i=parseInt(t);this.lastSelectedJoint instanceof xh&&(i<1&&(i=1),i>na.maxRJStrength&&(i=na.maxRJStrength),isNaN(i)&&(i=Math.min(15,na.maxRJStrength))),this.lastSelectedJoint instanceof Sh&&(i<1&&(i=1),i>na.maxSJStrength&&(i=na.maxSJStrength),isNaN(i)&&(i=Math.min(15,na.maxSJStrength))),this.lastSelectedJoint instanceof xh&&(this.lastSelectedJoint.motorStrength=i),this.lastSelectedJoint instanceof Sh&&(this.lastSelectedJoint.pistonStrength=i),na.curRobotID="",this.m_sidePanel.SetStrength(i),e!=i&&this.AddAction(new Gh(this.lastSelectedJoint,Gh.STRENGTH_TYPE,i-e))}this.m_sidePanel.TextAreaLostFocus()}speedText(t){if(this.lastSelectedJoint instanceof fh){var e;this.lastSelectedJoint instanceof xh&&(e=this.lastSelectedJoint.motorSpeed),this.lastSelectedJoint instanceof Sh&&(e=this.lastSelectedJoint.pistonSpeed);var i=parseInt(t);this.lastSelectedJoint instanceof xh&&(i<1&&(i=1),i>na.maxRJSpeed&&(i=na.maxRJSpeed),isNaN(i)&&(i=Math.min(15,na.maxRJSpeed))),this.lastSelectedJoint instanceof Sh&&(i<1&&(i=1),i>na.maxSJSpeed&&(i=na.maxSJSpeed),isNaN(i)&&(i=Math.min(15,na.maxSJSpeed))),this.lastSelectedJoint instanceof xh&&(this.lastSelectedJoint.motorSpeed=i),this.lastSelectedJoint instanceof Sh&&(this.lastSelectedJoint.pistonSpeed=i),na.curRobotID="",this.m_sidePanel.SetSpeed(i),e!=i&&this.AddAction(new Gh(this.lastSelectedJoint,Gh.SPEED_TYPE,i-e))}this.m_sidePanel.TextAreaLostFocus()}thrustText(t){if(this.lastSelectedThrusters instanceof Ah){var e;e=this.lastSelectedThrusters.strength;var i=parseInt(t);i<1&&(i=1),i>na.maxThrusterStrength&&(i=na.maxThrusterStrength),isNaN(i)&&(i=Math.min(15,na.maxThrusterStrength)),this.lastSelectedThrusters.strength=i,na.curRobotID="",this.m_sidePanel.SetThrust(i),e!=i&&this.AddAction(new Gh(this.lastSelectedThrusters,Gh.SPEED_TYPE,i-e))}this.m_sidePanel.TextAreaLostFocus()}cannonText(t){if(this.lastSelectedShape instanceof yh){var e;e=this.lastSelectedShape.strength;var i=parseInt(t);i<1&&(i=1),i>30&&(i=30),isNaN(i)&&(i=15),this.lastSelectedShape.strength=i,na.curRobotID="",this.m_sidePanel.SetCannon(i),e!=i&&this.AddAction(new Gh(this.lastSelectedShape,Gh.STRENGTH_TYPE,i-e))}this.m_sidePanel.TextAreaLostFocus()}cameraBox(t){if(1==this.selectedParts.length&&this.selectedParts[0]instanceof mh){this.selectedParts[0].isCameraFocus=t,na.curRobotID="";var e=null;if(t)for(var i=0;i<this.allParts.length;i++)this.allParts[i]instanceof mh&&this.allParts[i]!=this.selectedParts[0]&&this.allParts[i].isCameraFocus&&(this.allParts[i].isCameraFocus=!1,e=this.allParts[i]);this.AddAction(new Lh(this.selectedParts[0],t,e))}}collisionBox(t){if(1==this.selectedParts.length&&this.selectedParts[0]instanceof mh)this.selectedParts[0].collide=t,na.curRobotID="",this.AddAction(new jh(this.selectedParts[0],jh.COLLIDE_TYPE,t));else if(1==this.selectedParts.length&&this.selectedParts[0]instanceof Sh)this.selectedParts[0].collide=t,na.curRobotID="",this.AddAction(new jh(this.selectedParts[0],jh.COLLIDE_TYPE,t));else if(this.selectedParts.length>1){for(var e=new Array,i=0;i<this.selectedParts.length;i++)(this.selectedParts[i]instanceof mh||this.selectedParts[i]instanceof Sh)&&this.selectedParts[i].collide!=t&&(this.selectedParts[i].collide=t,e.push(this.selectedParts[i]));e.length>0&&(na.curRobotID="",this.redrawRobot=!0,this.AddAction(new Hh(e,t)))}}fixateBox(t){if(1==this.selectedParts.length&&this.selectedParts[0]instanceof mh)this.selectedParts[0].isStatic=t,na.curRobotID="",this.redrawRobot=!0,this.AddAction(new jh(this.selectedParts[0],jh.FIXATE_TYPE,t));else if(this.selectedParts.length>1){for(var e=new Array,i=0;i<this.selectedParts.length;i++)this.selectedParts[i]instanceof mh&&this.selectedParts[i].isStatic!=t&&(this.selectedParts[i].isStatic=t,e.push(this.selectedParts[i]));e.length>0&&(na.curRobotID="",this.redrawRobot=!0,this.AddAction(new qh(e,t)))}}outlineBox(t){if(1==this.selectedParts.length&&(this.selectedParts[0]instanceof mh||this.selectedParts[0]instanceof Sh))this.selectedParts[0].outline=t,na.curRobotID="",this.redrawRobot=!0,this.AddAction(new jh(this.selectedParts[0],jh.OUTLINE_TYPE,t));else if(this.selectedParts.length>1){for(var e=new Array,i=0;i<this.selectedParts.length;i++)(this.selectedParts[i]instanceof mh||this.selectedParts[i]instanceof Sh)&&this.selectedParts[i].outline!=t&&(this.selectedParts[i].outline=t,e.push(this.selectedParts[i]));e.length>0&&(na.curRobotID="",this.redrawRobot=!0,this.AddAction(new zh(e,t)))}}terrainBox(t){if(1==this.selectedParts.length&&this.selectedParts[0]instanceof mh)this.selectedParts[0].terrain=t,na.curRobotID="",this.redrawRobot=!0,this.AddAction(new jh(this.selectedParts[0],jh.TERRAIN_TYPE,t));else if(this.selectedParts.length>1){for(var e=new Array,i=0;i<this.selectedParts.length;i++)this.selectedParts[i]instanceof mh&&this.selectedParts[i].terrain!=t&&(this.selectedParts[i].terrain=t,e.push(this.selectedParts[i]));e.length>0&&(na.curRobotID="",this.redrawRobot=!0,this.AddAction(new Kh(e,t)))}}undragableBox(t){if(1==this.selectedParts.length&&this.selectedParts[0]instanceof mh)this.selectedParts[0].undragable=t,na.curRobotID="",this.AddAction(new jh(this.selectedParts[0],jh.UNDRAGABLE_TYPE,t));else if(this.selectedParts.length>1){for(var e=new Array,i=0;i<this.selectedParts.length;i++)this.selectedParts[i]instanceof mh&&this.selectedParts[i].undragable!=t&&(this.selectedParts[i].undragable=t,e.push(this.selectedParts[i]));e.length>0&&(na.curRobotID="",this.redrawRobot=!0,this.AddAction(new Jh(e,t)))}}frontButton(){if(!this.simStarted){if(1==this.selectedParts.length&&(this.selectedParts[0]instanceof mh||this.selectedParts[0]instanceof Sh)){for(var t=-1,e=0;e<this.allParts.length;e++)this.allParts[e]==this.selectedParts[0]&&(t=e);this.allParts=Vs.RemoveFromArray(this.selectedParts[0],this.allParts),this.allParts.push(this.selectedParts[0]),na.curRobotID="",this.AddAction(new Eh(this.selectedParts[0],Eh.FRONT_TYPE,t))}else 1==this.selectedParts.length&&this.selectedParts[0]instanceof wh&&(this.selectedParts[0].inFront||(this.selectedParts[0].inFront=!0,this.removeChild(this.selectedParts[0].m_textField),this.addChildAt(this.selectedParts[0].m_textField,this.getChildIndex(this.m_canvas)+1),this.AddAction(new Eh(this.selectedParts[0],Eh.FRONT_TYPE))));this.redrawRobot=!0}}backButton(){if(!this.simStarted){if(1==this.selectedParts.length&&(this.selectedParts[0]instanceof mh||this.selectedParts[0]instanceof Sh)){for(var t=-1,e=!1,i=this.allParts.length-1;i>0;i--)if(this.allParts[i]==this.selectedParts[0]&&(t=i,e=!0),e){if(!this.allParts[i-1].isEditable)break;this.allParts[i]=this.allParts[i-1]}this.allParts[i]=this.selectedParts[0],na.curRobotID="",this.AddAction(new Eh(this.selectedParts[0],Eh.BACK_TYPE,t))}else 1==this.selectedParts.length&&this.selectedParts[0]instanceof wh&&this.selectedParts[0].inFront&&(this.selectedParts[0].inFront=!1,this.removeChild(this.selectedParts[0].m_textField),this.addChildAt(this.selectedParts[0].m_textField,this.getChildIndex(this.m_canvas)),this.AddAction(new Eh(this.selectedParts[0],Eh.BACK_TYPE)));this.redrawRobot=!0}}scaleWithZoomBox(t){1==this.selectedParts.length&&this.selectedParts[0]instanceof wh&&(this.selectedParts[0].scaleWithZoom=t,na.curRobotID="",this.AddAction(new kh(this.selectedParts[0],kh.SCALE_TYPE,t)))}alwaysVisibleBox(t){1==this.selectedParts.length&&this.selectedParts[0]instanceof wh&&(this.selectedParts[0].alwaysVisible=t,na.curRobotID="",this.m_sidePanel.EnableTextStuff(!t),this.AddAction(new kh(this.selectedParts[0],kh.DISPLAY_TYPE,t)))}textKeyBox(t,e){if(t.enabled){var i;if(this.selectedParts[0]instanceof wh){var s=this.selectedParts[0].displayKey;this.selectedParts[0].displayKey=e,s!=e&&this.AddAction(new Oh(this.selectedParts[0],Oh.TEXT_TYPE,s,e))}null==(i=Us.getKeyString(e))&&(i="Unk: "+e),t.text=i,t.setSelection(0,10),na.curRobotID=""}}textEntered(){this.selectedParts[0]instanceof mh?this.lastSelectedShape=this.selectedParts[0]:this.selectedParts[0]instanceof fh?this.lastSelectedJoint=this.selectedParts[0]:this.selectedParts[0]instanceof wh?this.lastSelectedText=this.selectedParts[0]:this.selectedParts[0]instanceof Ah&&(this.lastSelectedThrusters=this.selectedParts[0])}colourButton(t,e,i,s,r){var n,o,a,h;if(r&&(na.defaultR=t,na.defaultG=e,na.defaultB=i,na.defaultO=s),1==this.selectedParts.length)(this.selectedParts[0]instanceof mh||this.selectedParts[0]instanceof Sh||this.selectedParts[0]instanceof wh)&&(n=this.selectedParts[0].red,o=this.selectedParts[0].green,a=this.selectedParts[0].blue,this.selectedParts[0].red=t,this.selectedParts[0].green=e,this.selectedParts[0].blue=i,this.selectedParts[0]instanceof wh||(h=this.selectedParts[0].opacity,this.selectedParts[0].opacity=s),n==this.selectedParts[0].red&&o==this.selectedParts[0].green&&a==this.selectedParts[0].blue&&(this.selectedParts[0]instanceof wh||h==this.selectedParts[0].opacity)||(this.AddAction(new Wh(this.selectedParts[0],this.selectedParts[0].red-n,this.selectedParts[0].green-o,this.selectedParts[0].blue-a,this.selectedParts[0]instanceof wh?0:this.selectedParts[0].opacity-h)),na.curRobotID="",this.redrawRobot=!0));else if(this.selectedParts.length>1){for(var l=new Array,c=new Array,d=new Array,u=new Array,p=new Array,m=0;m<this.selectedParts.length;m++)(this.selectedParts[m]instanceof mh||this.selectedParts[m]instanceof Sh||this.selectedParts[m]instanceof wh)&&(this.selectedParts[m].red==t&&this.selectedParts[m].green==e&&this.selectedParts[m].blue==i&&(this.selectedParts[m]instanceof wh||this.selectedParts[m].opacity==s)||(c.push(this.selectedParts[m].red),d.push(this.selectedParts[m].green),u.push(this.selectedParts[m].blue),p.push(this.selectedParts[m]instanceof wh?0:this.selectedParts[m].opacity),this.selectedParts[m].red=t,this.selectedParts[m].green=e,this.selectedParts[m].blue=i,this.selectedParts[m]instanceof wh||(this.selectedParts[m].opacity=s),l.push(this.selectedParts[m])));l.length>0&&(na.curRobotID="",this.redrawRobot=!0,this.AddAction(new Yh(l,t,e,i,s,c,d,u,p)))}}textTextStart(){1==this.selectedParts.length&&this.selectedParts[0]instanceof wh&&(this.oldText=this.selectedParts[0].text)}textText(t){this.textEntered(),this.lastSelectedText instanceof wh&&(this.lastSelectedText.text=t,this.newText=this.lastSelectedText,na.curRobotID="",this.redrawRobot=!0)}textTextFinish(){this.lastSelectedText instanceof wh&&this.AddAction(new Xh(this.lastSelectedText,this.oldText,this.lastSelectedText.text))}sizeText(t,e){if(this.lastSelectedText instanceof wh){var i=this.lastSelectedText.size;this.lastSelectedText.size=parseInt(e),this.lastSelectedText.size<4&&(this.lastSelectedText.size=4),this.lastSelectedText.size>36&&(this.lastSelectedText.size=36),t.text=this.lastSelectedText.size+"",na.curRobotID="",this.redrawRobot=!0,i!=this.lastSelectedText.size&&this.AddAction(new Fh(this.lastSelectedText,this.lastSelectedText.size-i))}this.m_sidePanel.TextAreaLostFocus()}minLimitText(t){var e=Number(t.replace("\n",""));if(""==t&&(e=NaN),this.lastSelectedJoint instanceof xh){isNaN(e)?(e=-Number.MAX_VALUE,t="None"):e>=0&&(e=0,t="0");var i=this.lastSelectedJoint.motorLowerLimit;this.lastSelectedJoint.motorLowerLimit=e,e!=i&&this.AddAction(new Mh(this.lastSelectedJoint,Mh.MIN_TYPE,i,e))}this.m_sidePanel.TextAreaLostFocus(),na.curRobotID=""}maxLimitText(t){var e=Number(t.replace("\n",""));if(""==t&&(e=NaN),this.lastSelectedJoint instanceof xh){isNaN(e)?(e=Number.MAX_VALUE,t="None"):e<=0&&(e=0,t="0");var i=this.lastSelectedJoint.motorUpperLimit;this.lastSelectedJoint.motorUpperLimit=e,e!=i&&this.AddAction(new Mh(this.lastSelectedJoint,Mh.MAX_TYPE,i,e))}this.m_sidePanel.TextAreaLostFocus(),na.curRobotID=""}controlKeyText1(t,e){var i,s;t.enabled&&(this.selectedParts[0]instanceof xh&&null!=e?(s=this.selectedParts[0].motorCWKey,this.selectedParts[0].motorCWKey=e,s!=e&&this.AddAction(new Oh(this.selectedParts[0],Oh.CW_TYPE,s,e))):null!=e&&(s=this.selectedParts[0].pistonUpKey,this.selectedParts[0].pistonUpKey=e,s!=e&&this.AddAction(new Oh(this.selectedParts[0],Oh.EXPAND_TYPE,s,e))),i=null==e?"Unk: "+e:Us.getKeyString(e),t.text=i,t.setSelection(0,10),na.curRobotID="")}controlKeyText2(t,e){var i,s;t.enabled&&(this.selectedParts[0]instanceof xh&&null!=e?(s=this.selectedParts[0].motorCCWKey,this.selectedParts[0].motorCCWKey=e,s!=e&&this.AddAction(new Oh(this.selectedParts[0],Oh.CCW_TYPE,s,e))):null!=e&&(s=this.selectedParts[0].pistonDownKey,this.selectedParts[0].pistonDownKey=e,s!=e&&this.AddAction(new Oh(this.selectedParts[0],Oh.CONTRACT_TYPE,s,e))),i=null==e?"Unk: "+e:Us.getKeyString(e),t.text=i,t.setSelection(0,10),na.curRobotID="")}thrustKeyText(t,e){if(t.enabled){var i,s;const e=Us.getKeyNumber(t.text);this.selectedParts[0]instanceof Ah&&null!=e&&(s=this.selectedParts[0].thrustKey,this.selectedParts[0].thrustKey=e,s!=e&&this.AddAction(new Oh(this.selectedParts[0],Oh.THRUSTERS_TYPE,s,e))),i=null==e?"Unk: "+e:Us.getKeyString(e),t.text=i,t.setSelection(0,10),na.curRobotID=""}}fireKeyText(t,e){if(t.enabled){var i,s;const e=Us.getKeyNumber(t.text);this.selectedParts[0]instanceof yh&&null!=e&&(s=this.selectedParts[0].fireKey,this.selectedParts[0].fireKey=e,s!=e&&this.AddAction(new Oh(this.selectedParts[0],Oh.CANNON_TYPE,s,e))),i=null==e?"Unk: "+e:Us.getKeyString(e),t.text=i,t.setSelection(0,10),na.curRobotID=""}}autoBox1(t){if(this.selectedParts[0]instanceof xh){var e=t&&this.selectedParts[0].autoCCW;this.selectedParts[0].autoCW=t,t&&(this.selectedParts[0].autoCCW=!1,this.m_sidePanel.deselectBox2()),this.AddAction(new Vh(this.selectedParts[0],Vh.AUTO_CW_TYPE,t,e))}else this.selectedParts[0]instanceof Sh?(this.selectedParts[0].autoOscillate=t,this.AddAction(new Vh(this.selectedParts[0],Vh.AUTO_OSCILLATE_TYPE,t))):this.selectedParts[0]instanceof Ah&&(this.selectedParts[0].autoOn=t,this.AddAction(new Vh(this.selectedParts[0],Vh.AUTO_ON_TYPE,t)));na.curRobotID=""}autoBox2(t){if(this.selectedParts[0]instanceof xh){var e=t&&this.selectedParts[0].autoCW;this.selectedParts[0].autoCCW=t,t&&(this.selectedParts[0].autoCW=!1,this.m_sidePanel.deselectBox1()),this.AddAction(new Vh(this.selectedParts[0],Vh.AUTO_CCW_TYPE,t,e))}na.curRobotID=""}motorBox(t){this.selectedParts[0]instanceof xh?this.selectedParts[0].enableMotor=t:this.selectedParts[0]instanceof Sh&&(this.selectedParts[0].enablePiston=t),this.m_sidePanel.EnableMotorStuff(t),na.curRobotID="",this.AddAction(new Vh(this.selectedParts[0],Vh.ENABLE_TYPE,t))}rigidBox(t){(this.selectedParts[0]instanceof xh||this.selectedParts[0]instanceof Sh)&&(this.selectedParts[0].isStiff=!t),na.curRobotID="",this.AddAction(new Vh(this.selectedParts[0],Vh.RIGID_TYPE,t))}strengthSlider(t){var e;this.selectedParts[0]instanceof xh?(e=this.selectedParts[0].motorStrength,this.selectedParts[0].motorStrength=t,e!=t&&this.AddAction(new Gh(this.selectedParts[0],Gh.STRENGTH_TYPE,t-e))):this.selectedParts[0]instanceof Sh&&(e=this.selectedParts[0].pistonStrength,this.selectedParts[0].pistonStrength=t,e!=t&&this.AddAction(new Gh(this.selectedParts[0],Gh.STRENGTH_TYPE,t-e))),na.curRobotID="",this.m_sidePanel.SetStrength(t)}speedSlider(t){var e;this.selectedParts[0]instanceof xh?(e=this.selectedParts[0].motorSpeed,this.selectedParts[0].motorSpeed=t,e!=t&&this.AddAction(new Gh(this.selectedParts[0],Gh.SPEED_TYPE,t-e))):this.selectedParts[0]instanceof Sh&&(e=this.selectedParts[0].pistonSpeed,this.selectedParts[0].pistonSpeed=t,e!=t&&this.AddAction(new Gh(this.selectedParts[0],Gh.SPEED_TYPE,this.m_checkBoxRoll-e))),na.curRobotID="",this.m_sidePanel.SetSpeed(t)}thrustSlider(t){var e;this.selectedParts[0]instanceof Ah&&(e=this.selectedParts[0].strength,this.selectedParts[0].strength=t,e!=t&&this.AddAction(new Gh(this.selectedParts[0],Gh.STRENGTH_TYPE,t-e))),na.curRobotID="",this.m_sidePanel.SetThrust(t)}cannonSlider(t){var e;this.selectedParts[0]instanceof yh&&(e=this.selectedParts[0].strength,this.selectedParts[0].strength=t,e!=t&&this.AddAction(new Gh(this.selectedParts[0],Gh.STRENGTH_TYPE,t-e))),na.curRobotID="",this.m_sidePanel.SetCannon(t)}zoomInButton(){this.Zoom(!0)}zoomOutButton(){this.Zoom(!1)}clearButton(){if(!this.simStarted&&!this.selectingCondition){for(var t=this.allParts.filter(this.PartIsEditable),e=0;e<t.length;e++)(t[e]instanceof mh||t[e]instanceof wh)&&this.DeletePart(t[e],!1);0!=t.length&&(na.curRobotEditable&&this.AddAction(new Ih(t)),this.CheckIfPartsFit(),na.curRobotID="",this.redrawRobot=!0),na.curRobotEditable||(na.curRobotEditable=!0),this.m_sidePanel&&this.m_sidePanel.visible&&(this.m_sidePanel.visible=!1)}}undoButton(){this.selectingCondition||na.curRobotEditable&&-1!=this.lastAction&&!this.simStarted&&(this.actions[this.lastAction].UndoAction(),this.lastAction--,this.curAction=-1,na.curRobotID="",this.CheckIfPartsFit(),0==this.selectedParts.length&&(this.m_sidePanel.visible=!1),this.RefreshSidePanel(),this.redrawRobot=!0)}redoButton(){this.selectingCondition||na.curRobotEditable&&this.lastAction<this.actions.length-1&&!this.simStarted&&(this.actions[this.lastAction+1].RedoAction(),this.lastAction++,this.curAction=-1,na.curRobotID="",this.CheckIfPartsFit(),0==this.selectedParts.length&&(this.m_sidePanel.visible=!1),this.RefreshSidePanel(),this.redrawRobot=!0)}cutButton(){if(!this.selectingCondition&&!this.simStarted)if(this.copiedJoint=null,this.copiedThrusters=null,1==this.selectedParts.length)na.clipboardParts=new Array,this.selectedParts[0]instanceof mh||this.selectedParts[0]instanceof wh?na.clipboardParts.push(this.selectedParts[0].MakeCopy()):this.selectedParts[0]instanceof fh?this.copiedJoint=this.selectedParts[0]:this.selectedParts[0]instanceof Ah&&(this.copiedThrusters=this.selectedParts[0]),this.DeletePart(this.selectedParts[0]),this.m_sidePanel.visible=!1,this.curAction=-1,na.curRobotID="",this.redrawRobot=!0;else if(this.selectedParts.length>1){na.clipboardParts=new Array;for(var t=new Array,e=new Array,i=0;i<this.selectedParts.length;i++)if(this.selectedParts[i]instanceof mh){var s=this.selectedParts[i].MakeCopy();na.clipboardParts.push(s),t.push(s),e=e.concat(this.selectedParts[i].GetActiveJoints()),this.DeletePart(this.selectedParts[i],!1,!1)}else this.selectedParts[i]instanceof wh?(na.clipboardParts.push(this.selectedParts[i].MakeCopy()),t.push(-1),this.DeletePart(this.selectedParts[i],!1,!1)):t.push(-1);for(i=0;i<this.selectedParts.length;i++)if(this.selectedParts[i]instanceof fh){for(var r=-1,n=-1,o=0;o<this.selectedParts.length;o++)this.selectedParts[o]==this.selectedParts[i].part1&&(r=o),this.selectedParts[o]==this.selectedParts[i].part2&&(n=o);-1!=r&&-1!=n&&na.clipboardParts.push(this.selectedParts[i].MakeCopy(t[r],t[n])),this.DeletePart(this.selectedParts[i],!1,!1)}else if(this.selectedParts[i]instanceof Ah){for(r=-1,o=0;o<this.selectedParts.length;o++)this.selectedParts[o]==this.selectedParts[i].shape&&(r=o);-1!=r&&na.clipboardParts.push(this.selectedParts[i].MakeCopy(t[r])),this.DeletePart(this.selectedParts[i],!1,!1)}var a=Vs.RemoveDuplicates(this.selectedParts.concat(e));this.AddAction(new Ih(a)),this.selectedParts=new Array,this.m_sidePanel.visible=!1,this.CheckIfPartsFit(),this.curAction=-1,na.curRobotID="",this.redrawRobot=!0}}copyButton(){if(!this.selectingCondition&&!this.simStarted)if(this.copiedJoint=null,this.copiedThrusters=null,1==this.selectedParts.length)na.clipboardParts=new Array,this.selectedParts[0]instanceof mh||this.selectedParts[0]instanceof wh?na.clipboardParts.push(this.selectedParts[0].MakeCopy()):this.selectedParts[0]instanceof fh?this.copiedJoint=this.selectedParts[0]:this.selectedParts[0]instanceof Ah&&(this.copiedThrusters=this.selectedParts[0]),this.curAction=-1;else if(this.selectedParts.length>1){na.clipboardParts=new Array;for(var t=new Array,e=0;e<this.selectedParts.length;e++)if(this.selectedParts[e]instanceof mh){var i=this.selectedParts[e].MakeCopy();na.clipboardParts.push(i),t.push(i)}else this.selectedParts[e]instanceof wh?(na.clipboardParts.push(this.selectedParts[e].MakeCopy()),t.push(-1)):t.push(-1);for(e=0;e<this.selectedParts.length;e++)if(this.selectedParts[e]instanceof fh){for(var s=-1,r=-1,n=0;n<this.selectedParts.length;n++)this.selectedParts[n]==this.selectedParts[e].part1&&(s=n),this.selectedParts[n]==this.selectedParts[e].part2&&(r=n);-1!=s&&-1!=r&&na.clipboardParts.push(this.selectedParts[e].MakeCopy(t[s],t[r]))}else if(this.selectedParts[e]instanceof Ah){for(s=-1,n=0;n<this.selectedParts.length;n++)this.selectedParts[n]==this.selectedParts[e].shape&&(s=n);-1!=s&&na.clipboardParts.push(this.selectedParts[e].MakeCopy(t[s]))}this.curAction=-1}}pasteButton(){if(!this.selectingCondition&&na.curRobotEditable&&!this.simStarted){for(var t=!1,e=!1,i=!1,s=!1,r=!1,n=!1,o=!1,a=!1,h=!1,l=0;l<na.clipboardParts.length;l++)na.clipboardParts[l].isStatic&&(h=!0),na.clipboardParts[l]instanceof _h&&(t=!0),na.clipboardParts[l]instanceof gh&&(e=!0),na.clipboardParts[l]instanceof bh&&(i=!0),na.clipboardParts[l]instanceof vh&&(s=!0),na.clipboardParts[l]instanceof xh&&(r=!0),na.clipboardParts[l]instanceof Sh&&(n=!0),na.clipboardParts[l]instanceof Ah&&(o=!0),na.clipboardParts[l]instanceof yh&&(a=!0);if("challenge"===this.controllerType&&Ha.playChallengeMode&&(h&&!Ha.challenge.fixateAllowed||t&&!Ha.challenge.circlesAllowed||e&&!Ha.challenge.rectanglesAllowed||i&&!Ha.challenge.trianglesAllowed||s&&!Ha.challenge.fixedJointsAllowed||r&&!Ha.challenge.rotatingJointsAllowed||n&&!Ha.challenge.slidingJointsAllowed||o&&!Ha.challenge.thrustersAllowed||a&&!Ha.challenge.cannonsAllowed))return this.m_fader.visible=!0,this.ShowDialog3("Sorry, some of the copied parts are not allowed in this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer(),void Sa.ShowMouse();if(1==na.clipboardParts.length&&na.clipboardParts[0]instanceof mh)na.clipboardParts[0].Move(na.mouseXWorldPhys,na.mouseYWorldPhys),this.allParts.push(na.clipboardParts[0]),this.selectedParts=new Array,this.selectedParts.push(na.clipboardParts[0]),this.draggingPart=na.clipboardParts[0],this.initDragX=na.mouseXWorldPhys,this.initDragY=na.mouseYWorldPhys,this.draggingParts=this.draggingPart.GetAttachedParts(),this.draggingPart.dragXOff=0,this.draggingPart.dragYOff=0,na.clipboardParts[0]instanceof yh?this.m_sidePanel.ShowCannonPanel(na.clipboardParts[0]):this.m_sidePanel.ShowObjectPanel(na.clipboardParts[0]),this.AddAction(new Ch(na.clipboardParts[0])),na.clipboardParts[0]=na.clipboardParts[0].MakeCopy(),this.curAction=na.PASTE,na.curRobotID="";else if(this.copiedJoint)this.copiedJoint instanceof vh?this.curAction=na.NEW_FIXED_JOINT:this.copiedJoint instanceof xh?this.curAction=na.NEW_REVOLUTE_JOINT:this.curAction=na.NEW_PRISMATIC_JOINT,this.actionStep=0;else if(this.copiedThrusters)this.curAction=na.NEW_THRUSTERS;else{for(this.draggingPart=null,this.m_sidePanel.visible=!1,this.selectedParts=new Array,this.draggingParts=new Array,l=0;l<na.clipboardParts.length;l++)na.clipboardParts[l]instanceof mh?(!this.draggingPart||this.draggingPart instanceof wh||na.clipboardParts[l].GetMass()>this.draggingPart.GetMass())&&(this.draggingPart=na.clipboardParts[l]):na.clipboardParts[l]instanceof wh&&!this.draggingPart&&(this.draggingPart=na.clipboardParts[l]);var c=new Array;for(l=0;l<na.clipboardParts.length;l++)c.push(na.clipboardParts[l]);for(l=0;l<na.clipboardParts.length;l++)na.clipboardParts[l]instanceof mh?(na.clipboardParts[l].dragXOff=this.draggingPart.centerX-na.clipboardParts[l].centerX,na.clipboardParts[l].dragYOff=this.draggingPart.centerY-na.clipboardParts[l].centerY,this.allParts.push(na.clipboardParts[l]),this.selectedParts.push(na.clipboardParts[l]),this.draggingParts=Vs.RemoveDuplicates(this.draggingParts.concat(na.clipboardParts[l].GetAttachedParts())),na.clipboardParts[l]=na.clipboardParts[l].MakeCopy(),c[l]!=this.draggingPart&&c[l].Move(c[l].centerX-this.draggingPart.centerX+na.mouseXWorldPhys,c[l].centerY-this.draggingPart.centerY+na.mouseYWorldPhys)):na.clipboardParts[l]instanceof wh&&(this.draggingPart instanceof mh?(na.clipboardParts[l].dragXOff=this.draggingPart.centerX-na.clipboardParts[l].x,na.clipboardParts[l].dragYOff=this.draggingPart.centerY-na.clipboardParts[l].y):(na.clipboardParts[l].dragXOff=this.draggingPart.x-na.clipboardParts[l].x,na.clipboardParts[l].dragYOff=this.draggingPart.y-na.clipboardParts[l].y),this.allParts.push(na.clipboardParts[l]),this.selectedParts.push(na.clipboardParts[l]),this.draggingParts=this.draggingParts.concat(na.clipboardParts[l].GetAttachedParts()),na.clipboardParts[l]=na.clipboardParts[l].MakeCopy(),c[l]!=this.draggingPart&&(this.draggingPart instanceof mh?c[l].Move(c[l].x-this.draggingPart.centerX+na.mouseXWorldPhys,c[l].y-this.draggingPart.centerY+na.mouseYWorldPhys):c[l].Move(c[l].x-this.draggingPart.x+na.mouseXWorldPhys,c[l].y-this.draggingPart.y+na.mouseYWorldPhys)));for(l=0;l<na.clipboardParts.length;l++)if(na.clipboardParts[l]instanceof fh){na.clipboardParts[l].dragXOff=this.draggingPart.centerX-na.clipboardParts[l].anchorX,na.clipboardParts[l].dragYOff=this.draggingPart.centerY-na.clipboardParts[l].anchorY,this.allParts.push(na.clipboardParts[l]),this.selectedParts.push(na.clipboardParts[l]);for(var d=-1,u=-1,p=0;p<c.length;p++)c[p]==na.clipboardParts[l].part1&&(d=p),c[p]==na.clipboardParts[l].part2&&(u=p);na.clipboardParts[l]=na.clipboardParts[l].MakeCopy(na.clipboardParts[d],na.clipboardParts[u]),c[l].Move(c[l].anchorX-this.draggingPart.centerX+na.mouseXWorldPhys,c[l].anchorY-this.draggingPart.centerY+na.mouseYWorldPhys)}else if(na.clipboardParts[l]instanceof Ah){for(na.clipboardParts[l].dragXOff=this.draggingPart.centerX-na.clipboardParts[l].centerX,na.clipboardParts[l].dragYOff=this.draggingPart.centerY-na.clipboardParts[l].centerY,this.allParts.push(na.clipboardParts[l]),this.selectedParts.push(na.clipboardParts[l]),d=-1,p=0;p<c.length;p++)c[p]==na.clipboardParts[l].shape&&(d=p);na.clipboardParts[l]=na.clipboardParts[l].MakeCopy(na.clipboardParts[d]),c[l].Move(c[l].centerX-this.draggingPart.centerX+na.mouseXWorldPhys,c[l].centerY-this.draggingPart.centerY+na.mouseYWorldPhys)}this.draggingPart&&(this.initDragX=na.mouseXWorldPhys,this.initDragY=na.mouseYWorldPhys,this.draggingPart.Move(na.mouseXWorldPhys,na.mouseYWorldPhys),this.m_sidePanel.ShowMultiSelectPanel(this.selectedParts),this.AddAction(new Nh(this.selectedParts)),this.curAction=na.PASTE,na.curRobotID="")}}}centerBox(){na.snapToCenter=!na.snapToCenter}jointBox(){na.showJoints=!na.showJoints,this.redrawRobot=!0}globalOutlineBox(){na.showOutlines=!na.showOutlines,this.redrawRobot=!0}colourBox(){na.showColours=!na.showColours,na.showColours?this.draw.m_fillAlpha=1:this.draw.m_fillAlpha=.5,this.redrawRobot=!0}centerOnSelectedBox(){na.centerOnSelected=!na.centerOnSelected,na.centerOnSelected&&1==this.selectedParts.length&&this.CenterOnSelected()}ConfirmNewRobot(){Sa.changeControllers=!0,Sa.nextControllerType=-1,na.playingReplay=!1,na.viewingUnsavedReplay=!1}loginButton(t=!1,e=!1,i=!1){this.selectingCondition||(Sa.inIFrame?(this.m_fader.visible=!0,this.ShowConfirmDialog("Redirect to incredibots2.com?",7)):(this.m_fader.visible=!0,this.m_loginWindow&&this.removeChild(this.m_loginWindow),this.m_loginWindow=new LoginWindow(this),t&&this.m_loginWindow.displayMessage(),this.addChild(this.m_loginWindow),this.backToSaveWindow=e))}logoutButton(){this.m_fader.visible=!0,this.ShowConfirmDialog("Are you sure you want to log "+na.userName+" out?",12)}ConfirmLogout(t){Sa.premiumMode=!1,na.userName="_Public",this.m_guiPanel.ShowLogin(),this.ShowDialog3("You are now logged out."),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer(),this.m_fader.visible=!0}loginHidden(t,e){this.clickedSave?(this.clickedSave=!1,this.saveButton()):this.clickedSaveReplay?(this.clickedSaveReplay=!1,this.saveReplayButton()):this.clickedSaveChallenge?(this.clickedSaveChallenge=!1,this.saveButton()):this.clickedSubmitScore?(this.AddSyncPoint(),na.viewingUnsavedReplay?hh.SaveReplay(na.userName,na.password,na.replay,"_ScoreReplay","This replay instanceof saved for a score",na.curRobotID,new Fa(this.allParts,Ya.settings),Ha.ChallengeOver()?this.GetScore():-1,na.curChallengeID,1,this.finishSavingReplay):hh.SaveReplay(na.userName,na.password,new ka(this.cameraMovements,this.syncPoints,this.keyPresses,this.frameCounter,hh.VERSION_STRING_FOR_REPLAYS),"_ScoreReplay","This replay instanceof saved for a score",na.curRobotID,new Fa(this.allParts,Ya.settings),Ha.ChallengeOver()?this.GetScore():-1,na.curChallengeID,1,this.finishSavingReplay),this.m_scoreWindow.ShowFader(),this.ShowDialog("Submitting score..."),Sa.ShowHourglass()):this.clickedReport?(this.clickedReport=!1,this.reportButton()):this.backToSaveWindow&&(this.m_fader.visible=!0,this.m_chooserWindow.visible?e?this.m_chooserWindow.reportClicked():this.m_chooserWindow.HideFader():(this.m_chooserWindow.visible=!0,this.m_chooserWindow.dataType==SaveLoadWindow.HIGH_SCORE_TYPE?(hh.GetScoreData(na.userName,na.password,hh.highScoresChallenge,1==this.m_chooserWindow.m_scoreTypeBox.selectedIndex,2==this.m_chooserWindow.m_scoreTypeBox.selectedIndex,e&&2==this.m_chooserWindow.m_scoreTypeBox.selectedIndex?hh.SORT_BY_SCORE:hh.highScoresSortType,e&&2==this.m_chooserWindow.m_scoreTypeBox.selectedIndex?1:hh.curScorePage,e&&this.m_chooserWindow.m_scoreTypeBox&&2==this.m_chooserWindow.m_scoreTypeBox.selectedIndex?"":hh.curSearch,this.finishGettingScoreData),this.ShowDialog("Getting scores...")):this.m_chooserWindow.dataType==SaveLoadWindow.LOAD_ROBOT_TYPE?(hh.GetRobotData(na.userName,na.password,!this.m_chooserWindow.yourRobotsBox.selected,e&&this.m_chooserWindow.yourRobotsBox.selected?hh.SORT_BY_EDIT_TIME:hh.curSortType,e&&this.m_chooserWindow.yourRobotsBox.selected?hh.SORT_PERIOD_ALLTIME:hh.curSortPeriod,e&&this.m_chooserWindow.yourRobotsBox.selected?1:hh.curRobotPage,e&&this.m_chooserWindow.m_scoreTypeBox&&2==this.m_chooserWindow.m_scoreTypeBox.selectedIndex?"":hh.curSearch,this.finishGettingLoadRobotData),this.ShowDialog("Getting robots...")):this.m_chooserWindow.dataType==SaveLoadWindow.LOAD_CHALLENGE_TYPE?(hh.curSortPeriod==hh.SORT_PERIOD_PROP&&(hh.curSortPeriod=hh.SORT_PERIOD_ALLTIME),hh.GetChallengeData(na.userName,na.password,!this.m_chooserWindow.yourRobotsBox.selected,e&&this.m_chooserWindow.yourRobotsBox.selected?hh.SORT_BY_EDIT_TIME:hh.curSortType,e&&this.m_chooserWindow.yourRobotsBox.selected?hh.SORT_PERIOD_ALLTIME:hh.curSortPeriod,e&&this.m_chooserWindow.yourRobotsBox.selected?1:hh.curReplayPage,e&&this.m_chooserWindow.m_scoreTypeBox&&2==this.m_chooserWindow.m_scoreTypeBox.selectedIndex?"":hh.curSearch,this.finishGettingLoadChallengeData),this.ShowDialog("Getting challenges...")):(hh.curSortPeriod==hh.SORT_PERIOD_PROP&&(hh.curSortPeriod=hh.SORT_PERIOD_ALLTIME),hh.GetReplayData(na.userName,na.password,!this.m_chooserWindow.yourRobotsBox.selected,e&&this.m_chooserWindow.yourRobotsBox.selected?hh.SORT_BY_EDIT_TIME:hh.curSortType,e&&this.m_chooserWindow.yourRobotsBox.selected?hh.SORT_PERIOD_ALLTIME:hh.curSortPeriod,e&&this.m_chooserWindow.yourRobotsBox.selected?1:hh.curReplayPage,e&&this.m_chooserWindow.m_scoreTypeBox&&2==this.m_chooserWindow.m_scoreTypeBox.selectedIndex?"":hh.curSearch,this.finishGettingLoadReplayData),this.ShowDialog("Getting replays...")),this.m_chooserWindow.ShowFader(),Sa.ShowHourglass()))}viewReplayButton(){na.viewingUnsavedReplay?(this.m_fader.visible=!1,this.m_scoreWindow.visible=!1,this.resetButton()):(this.resetButton(),na.replay=new ka(this.cameraMovements,this.syncPoints,this.keyPresses,this.frameCounter,hh.VERSION_STRING_FOR_REPLAYS),na.replayParts=this.allParts.filter(this.IsPartOfRobot),na.playingReplay=!0,Sa.changeControllers=!0,na.viewingUnsavedReplay=!0)}newButton(){if(Sa.inIFrame)this.m_fader.visible=!0,this.ShowConfirmDialog("Redirect to incredibots2.com?",7);else{for(var t=!1,e=0;e<this.allParts.length;e++)if(this.allParts[e].isEditable){t=!0;break}this instanceof Za||this instanceof nh||this instanceof rh||this instanceof ah||this instanceof oh||""!=na.curRobotID&&("challenge"!==this.controllerType||""!=na.curChallengeID)||!t&&"challenge"!==this.controllerType?this.ConfirmNewRobot():(this.m_fader.visible=!0,this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader(),this.ShowConfirmDialog("Exit to main menu?     (Unsaved changes will be lost)",4))}}saveButton(){if(!this.selectingCondition)if(Sa.inIFrame)this.m_fader.visible=!0,this.ShowConfirmDialog("Redirect to incredibots2.com?",7);else{if(!na.curRobotEditable||na.playingReplay)return;"challenge"!==this.controllerType||Ha.playChallengeMode?hh.ExportRobot(new Fa(this.allParts.filter(this.PartIsEditable),Ya.settings,this.draw.m_drawXOff,this.draw.m_drawYOff,this.m_physScale),"","",1,1,0,((...t)=>this.finishExporting(...t))):(this.m_restrictionsDialog&&this.removeChild(this.m_restrictionsDialog),this.m_restrictionsDialog=new RestrictionsWindow(this),this.addChild(this.m_restrictionsDialog),this.saveAfterRestrictions=!0),this.m_fader.visible=!0,this.curAction=-1}}loadAndInsertButton(){!na.curRobotEditable||this.selectingCondition||na.playingReplay||(na.loadAndInsert=!0,this.loadRobotButton())}loadButton(t=!0){this.selectingCondition||(Sa.inIFrame?(this.m_fader.visible=!0,this.ShowConfirmDialog("Redirect to incredibots2.com?",7)):t&&na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic&&!na.ratedCurReplay&&!Ws.HasRatedReplay(na.curReplayID)?(na.ratedCurReplay=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,1,1),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0):!t||na.playingReplay||""==na.curChallengeID||!na.curChallengePublic||na.ratedCurChallenge||Ws.HasRatedChallenge(na.curChallengeID)?!t||na.playingReplay||""==na.curRobotID||!na.curRobotPublic||na.ratedCurRobot||Ws.HasRatedRobot(na.curRobotID)?(this.m_fader.visible=!0,this.m_loadWindow&&this.removeChild(this.m_loadWindow),this.m_loadWindow=new LoadWindow(this),this.addChild(this.m_loadWindow)):(na.ratedCurRobot=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,0,1),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.simStarted&&(this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0)):(na.ratedCurChallenge=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,2,1),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.simStarted&&(this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0)))}loadRobotButton(t=!0){this.selectingCondition||(Sa.inIFrame?(this.m_fader.visible=!0,this.ShowConfirmDialog("Redirect to incredibots2.com?",7)):t&&na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic&&!na.ratedCurReplay&&!Ws.HasRatedReplay(na.curReplayID)?(na.ratedCurReplay=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,1,2),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0):!t||na.playingReplay||""==na.curChallengeID||!na.curChallengePublic||na.ratedCurChallenge||Ws.HasRatedChallenge(na.curChallengeID)?!t||na.playingReplay||""==na.curRobotID||!na.curRobotPublic||na.ratedCurRobot||Ws.HasRatedRobot(na.curRobotID)?(hh.GetRobotData(na.userName,na.password,hh.curShared,hh.curSortType,hh.curSortPeriod,hh.curShared?hh.curRobotPage:1,"",this.finishGettingLoadRobotData),this.m_fader.visible=!0,this.ShowDialog("Getting robots..."),Sa.ShowHourglass(),this.curAction=-1):(na.ratedCurRobot=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,0,2),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0):(na.ratedCurChallenge=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,2,2),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.simStarted&&(this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0)))}finishSaving(){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_SAVE_ROBOT){var t=hh.FinishSavingRobot(e);""!=t&&(na.curRobotID=t,na.ratedCurRobot=!0,na.curRobotPublic=na.potentialRobotPublic,na.curRobotFeatured=na.potentialRobotFeatured,this.m_progressDialog.SetMessage("Save successful!"),this.m_progressDialog.HideInXSeconds(1),this.m_chooserWindow.visible=!1,this.removeChild(this.m_chooserWindow),this.m_chooserWindow=null,this.m_fader.visible=!1)}}finishGettingSaveRobotData(){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_ROBOT_DATA&&hh.FinishGettingRobotData()&&(this.m_progressDialog.visible=!1,this.m_chooserWindow&&this.removeChild(this.m_chooserWindow),this.m_chooserWindow=new SaveLoadWindow(this,SaveLoadWindow.SAVE_ROBOT_TYPE),this.addChild(this.m_chooserWindow))}finishGettingLoadRobotData(){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_ROBOT_DATA&&hh.FinishGettingRobotData()&&(this.m_progressDialog.visible=!1,this.m_chooserWindow&&this.removeChild(this.m_chooserWindow),this.m_chooserWindow=new SaveLoadWindow(this,SaveLoadWindow.LOAD_ROBOT_TYPE),this.addChild(this.m_chooserWindow))}finishLoading(){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_LOAD_ROBOT){var t=hh.FinishLoadingRobot(e);this.processLoadedRobot(t)}}processLoadedRobot(t){if(t){var e=t.allParts;if(na.loadAndInsert){na.loadAndInsert=!1;for(var i=!1,s=!1,r=!1,n=!1,o=!1,a=!1,h=!1,l=!1,c=!1,d=0;d<e.length;d++)e[d].isStatic&&(c=!0),e[d]instanceof _h&&(i=!0),e[d]instanceof gh&&(s=!0),e[d]instanceof bh&&(r=!0),e[d]instanceof vh&&(n=!0),e[d]instanceof xh&&(o=!0),e[d]instanceof Sh&&(a=!0),e[d]instanceof Ah&&(h=!0),e[d]instanceof yh&&(l=!0);if("challenge"===this.controllerType&&(c&&!Ha.challenge.fixateAllowed||i&&!Ha.challenge.circlesAllowed||s&&!Ha.challenge.rectanglesAllowed||r&&!Ha.challenge.trianglesAllowed||n&&!Ha.challenge.fixedJointsAllowed||o&&!Ha.challenge.rotatingJointsAllowed||a&&!Ha.challenge.slidingJointsAllowed||h&&!Ha.challenge.thrustersAllowed||l&&!Ha.challenge.cannonsAllowed))return this.m_fader.visible=!0,na.loadAndInsert=!0,this.ShowDialog3("Sorry, that robot contains parts that are not allowed in this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer(),void Sa.ShowMouse();na.curRobotID="",this.allParts=this.allParts.concat(e),this.CheckIfPartsFit(),this.m_progressDialog.SetMessage("Load successful!"),this.m_progressDialog.HideInXSeconds(1),this.m_chooserWindow&&(this.m_chooserWindow.visible=!1,this.removeChild(this.m_chooserWindow),this.m_chooserWindow=null),this.m_fader.visible=!1,na.curRobotEditable=na.potentialRobotEditable,na.curRobotPublic=!1,na.curRobotFeatured=!1,this.redrawRobot=!0,this.CenterOnLoadedRobot()}else na.curRobotID=na.potentialRobotID,na.ratedCurRobot=!1,na.curRobotEditable=na.potentialRobotEditable,na.curRobotPublic=na.potentialRobotPublic,na.curRobotFeatured=na.potentialRobotFeatured,na.curReplayID="",na.loadedParts=e,Sa.changeControllers=!0,na.playingReplay=!1,na.initX=t.cameraX,na.initY=t.cameraY,na.initZoom=t.zoomLevel,t.challenge?(Sa.nextControllerType=1,Ha.challenge=t.challenge,Ha.playChallengeMode=!0,Ha.playOnlyMode=!0,Ya.settings=t.challenge.settings,na.curChallengeID=na.potentialChallengeID,na.ratedCurChallenge=!1,na.curChallengePublic=!1,na.curChallengeFeatured=!1,na.justLoadedRobotWithChallenge=!0):(Sa.nextControllerType=0,Ya.settings=t.settings,na.curChallengeID="")}}finishDeleting(){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_DELETE_ROBOT){var t=hh.FinishDeletingRobot(e);if(""!=t){na.curRobotID==t&&(na.curRobotID=""),this.m_progressDialog.SetMessage("Delete successful!"),this.m_progressDialog.HideInXSeconds(1);var i=this.m_chooserWindow.dataType;this.removeChild(this.m_chooserWindow),this.m_chooserWindow=new SaveLoadWindow(this,i),this.addChild(this.m_chooserWindow),this.removeChild(this.m_progressDialog),this.addChild(this.m_progressDialog)}}}finishExporting(t,e){this.m_chooserWindow&&(this.m_chooserWindow.visible=!1),this.m_exportDialog&&this.removeChild(this.m_exportDialog),this.m_exportDialog=new Ea(this,t,e),this.m_fader.visible=!0,this.addChild(this.m_exportDialog)}saveReplayButton(){Sa.inIFrame?(this.m_fader.visible=!0,this.ShowConfirmDialog("Redirect to incredibots2.com?",7)):(this.pauseButton(e),this.canSaveReplay?(this.AddSyncPoint(),na.viewingUnsavedReplay?hh.ExportReplay(na.replay,"","",na.curRobotID,new Fa(this.allParts,Ya.settings),-1,"",1,this.finishExporting):hh.ExportReplay(new ka(this.cameraMovements,this.syncPoints,this.keyPresses,this.frameCounter,hh.VERSION_STRING_FOR_REPLAYS),"","",na.curRobotID,new Fa(this.allParts,Ya.settings),-1,"",1,this.finishExporting)):(this.m_fader.visible=!0,this.frameCounter>=9e3?this.ShowDialog3("Sorry, you can only save replays that are under 5 minutes in length."):this.ShowDialog3("Sorry, you can only save replays that contain 500 or fewer cannonballs."),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()))}loadReplayButton(t=!0){this.selectingCondition||(Sa.inIFrame?(this.m_fader.visible=!0,this.ShowConfirmDialog("Redirect to incredibots2.com?",7)):t&&na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic&&!na.ratedCurReplay&&!Ws.HasRatedReplay(na.curReplayID)?(na.ratedCurReplay=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,1,3),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0):!t||na.playingReplay||""==na.curChallengeID||!na.curChallengePublic||na.ratedCurChallenge||Ws.HasRatedChallenge(na.curChallengeID)?!t||na.playingReplay||""==na.curRobotID||!na.curRobotPublic||na.ratedCurRobot||Ws.HasRatedRobot(na.curRobotID)?(hh.curSortPeriod==hh.SORT_PERIOD_PROP&&(hh.curSortPeriod=hh.SORT_PERIOD_ALLTIME),hh.GetReplayData(na.userName,na.password,hh.curShared,hh.curSortType,hh.curSortPeriod,hh.curShared?hh.curReplayPage:1,"",this.finishGettingLoadReplayData),this.ShowDialog("Getting replays..."),Sa.ShowHourglass(),this.m_fader.visible=!0,this.curAction=-1):(na.ratedCurRobot=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,0,3),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0):(na.ratedCurChallenge=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,2,3),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.simStarted&&(this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0)))}loadChallengeButton(t=!0){this.selectingCondition||(Sa.inIFrame?(this.m_fader.visible=!0,this.ShowConfirmDialog("Redirect to incredibots2.com?",7)):t&&na.playingReplay&&""!=na.curReplayID&&na.curReplayPublic&&!na.ratedCurReplay&&!Ws.HasRatedReplay(na.curReplayID)?(na.ratedCurReplay=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,1,4),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0):!t||na.playingReplay||""==na.curChallengeID||!na.curChallengePublic||na.ratedCurChallenge||Ws.HasRatedChallenge(na.curChallengeID)?!t||na.playingReplay||""==na.curRobotID||!na.curRobotPublic||na.ratedCurRobot||Ws.HasRatedRobot(na.curRobotID)?(hh.curSortPeriod==hh.SORT_PERIOD_PROP&&(hh.curSortPeriod=hh.SORT_PERIOD_ALLTIME),hh.GetChallengeData(na.userName,na.password,hh.curShared,hh.curSortType,hh.curSortPeriod,hh.curShared?hh.curReplayPage:1,"",this.finishGettingLoadChallengeData),this.ShowDialog("Getting challenges..."),Sa.ShowHourglass(),this.m_fader.visible=!0,this.curAction=-1):(na.ratedCurRobot=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,0,4),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0):(na.ratedCurChallenge=!0,this.m_rateDialog&&this.removeChild(this.m_rateDialog),this.m_rateDialog=new RateWindow(this,2,4),this.addChild(this.m_rateDialog),this.m_fader.visible=!0,this.simStarted&&(this.m_guiPanel.ShowPausePanel(!na.playingReplay),this.paused=!0)))}LoadReplayNow(t){hh.LoadReplayByID(t,this.finishLoadingReplay),this.ShowDialog("Loading Replay..."),this.m_fader.visible=!0}LoadRobotNow(t){hh.LoadRobotByID(t,this.finishLoading),this.ShowDialog("Loading Robot..."),this.m_fader.visible=!0}LoadChallengeNow(t){hh.LoadChallengeByID(t,this.finishLoadingChallenge),this.ShowDialog("Loading Challenge..."),this.m_fader.visible=!0}highScoresButton(){this.selectingCondition||(Sa.inIFrame?(this.m_fader.visible=!0,this.ShowConfirmDialog("Redirect to incredibots2.com?",7)):(""==na.curChallengeID?(hh.GetChallengeData(na.userName,na.password,!0,hh.curSortType,hh.curSortPeriod,hh.curChallengePage,"",this.finishGettingLoadChallengeForScoreData),this.ShowDialog("Getting challenges...")):(hh.GetScoreData(na.userName,na.password,na.curChallengeID,hh.highScoresDaily,hh.highScoresPersonal,hh.highScoresSortType,hh.curScorePage,"",this.finishGettingScoreData),this.ShowDialog("Getting high scores...")),Sa.ShowHourglass(),this.m_fader.visible=!0,this.curAction=-1))}submitButton(){if(Sa.inIFrame)this.m_fader.visible=!0,this.ShowConfirmDialog("Redirect to incredibots2.com?",7);else{if(!na.curRobotEditable)return;"_Public"!=na.userName?(this.AddSyncPoint(),na.viewingUnsavedReplay?hh.SaveReplay(na.userName,na.password,na.replay,"_ScoreReplay","This replay instanceof saved for a score",na.curRobotID,new Fa(this.allParts,Ya.settings),Ha.ChallengeOver()?this.GetScore():-1,na.curChallengeID,1,this.finishSavingReplay):hh.SaveReplay(na.userName,na.password,new ka(this.cameraMovements,this.syncPoints,this.keyPresses,this.frameCounter,hh.VERSION_STRING_FOR_REPLAYS),"_ScoreReplay","This replay instanceof saved for a score",na.curRobotID,new Fa(this.allParts,Ya.settings),Ha.ChallengeOver()?this.GetScore():-1,na.curChallengeID,1,this.finishSavingReplay),this.m_scoreWindow.ShowFader(),this.ShowDialog("Submitting score..."),this.clickedSubmitScore=!0):(this.clickedSubmitScore=!0,this.loginButton(!0,!1))}}finishAddingUser(){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_ADD_USER){var t=hh.FinishAddingUser(e);""!=t&&(this.m_progressDialog.SetMessage("Success!"),this.m_progressDialog.HideInXSeconds(1),this.m_loginWindow&&(this.m_loginWindow.visible=!1),this.m_newUserWindow.visible=!1,this.m_scoreWindow&&this.m_scoreWindow.visible||(this.m_fader.visible=!1),Sa.premiumMode=!1,na.userName=t.substring(t.indexOf("user: ")+6,t.indexOf("password: ")-1),na.password=t.substring(t.indexOf("password: ")+10,t.indexOf("session: ")-1),na.sessionID=t.substr(t.indexOf("session: ")+9),this.m_guiPanel.ShowLogout(),this.loginHidden(!0))}}finishLoggingIn(){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_LOGIN){var t=hh.FinishLoggingIn(e);""!=t&&(this.m_progressDialog.SetMessage("Success!"),this.m_progressDialog.HideInXSeconds(1),this.m_loginWindow.visible=!1,this.m_scoreWindow&&this.m_scoreWindow.visible||(this.m_fader.visible=!1),0==t.indexOf("premium")?Sa.premiumMode=!0:Sa.premiumMode=!1,na.userName=t.substring(t.indexOf("user: ")+6,t.indexOf("password: ")-1),na.password=t.substring(t.indexOf("password: ")+10,t.indexOf("session: ")-1),na.sessionID=t.substr(t.indexOf("session: ")+9),this.m_guiPanel.ShowLogout(),this.loginHidden(!0)),Sa.ShowMouse()}}finishSavingReplay(){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_SAVE_REPLAY){var t=hh.FinishSavingReplay(e);""!=t&&(na.curRobotID=t,na.ratedCurRobot=!0,na.curRobotPublic=!1,this.m_progressDialog.SetMessage("Save successful!"),this.m_progressDialog.HideInXSeconds(1),this.m_chooserWindow&&(this.m_chooserWindow.visible=!1,this.removeChild(this.m_chooserWindow),this.m_chooserWindow=null),this.m_scoreWindow&&this.m_scoreWindow.visible?this.clickedSubmitScore?(this.clickedSubmitScore=!1,this.m_progressDialog.visible=!1,this.highScoresButton(new MouseEvent(""))):(this.m_scoreWindow.HideFader(),Sa.ShowMouse()):this.m_fader.visible=!1)}}finishGettingSaveReplayData(){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_REPLAY_DATA&&hh.FinishGettingReplayData()&&(this.m_progressDialog.visible=!1,this.m_chooserWindow&&this.removeChild(this.m_chooserWindow),this.m_chooserWindow=new SaveLoadWindow(this,SaveLoadWindow.SAVE_REPLAY_TYPE),this.addChild(this.m_chooserWindow),this.m_fader.visible=!0)}finishGettingLoadReplayData(){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_REPLAY_DATA&&hh.FinishGettingReplayData()&&(this.m_progressDialog.visible=!1,this.m_chooserWindow&&this.removeChild(this.m_chooserWindow),this.m_chooserWindow=new SaveLoadWindow(this,SaveLoadWindow.LOAD_REPLAY_TYPE),this.addChild(this.m_chooserWindow),this.m_fader.visible=!0)}finishLoadingReplay(){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_LOAD_REPLAY){var t=hh.FinishLoadingReplay(e);this.processLoadedReplay(t)}}processLoadedReplay(t){if(t)if(na.replay=t[0],na.replay.version!=hh.VERSION_STRING_FOR_REPLAYS)na.replayDirectlyLinked?Sa.inIFrame?Sa.BrowserRedirect("http://incredibots.com/old/"+na.replay.version+"/incredibots.php?replayID="+na.potentialReplayID):Sa.BrowserRedirect("http://incredibots.com/old/"+na.replay.version+"/?replayID="+na.potentialReplayID):(this.ShowConfirmDialog("This replay was saved using an older version of IncrediBots.  Redirect there now?",6),Sa.ShowMouse());else{var e=t[1];na.replayParts=e.allParts,Ya.settings=e.settings,na.playingReplay=!0,na.viewingUnsavedReplay=!1,Sa.changeControllers=!0,Sa.nextControllerType=0,na.curRobotID=na.potentialRobotID,na.ratedCurReplay=!0,na.curReplayID=na.potentialReplayID,na.ratedCurReplay=!1,na.curReplayPublic=na.potentialReplayPublic,na.curReplayFeatured=na.potentialReplayFeatured,na.curChallengeID="",na.curChallengePublic=!1,na.curChallengeFeatured=!1}}finishDeletingReplay(){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_DELETE_REPLAY&&hh.FinishDeletingReplay()){this.m_progressDialog.SetMessage("Delete successful!"),this.m_progressDialog.HideInXSeconds(1);var t=this.m_chooserWindow.dataType;this.removeChild(this.m_chooserWindow),this.m_chooserWindow=new SaveLoadWindow(this,t),this.addChild(this.m_chooserWindow),this.removeChild(this.m_progressDialog),this.addChild(this.m_progressDialog)}}finishSavingChallenge(){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_SAVE_CHALLENGE){var t=hh.FinishSavingChallenge();""!=t&&(na.curChallengeID=t,na.ratedCurChallenge=!0,na.curChallengePublic=!1,na.curChallengeFeatured=!1,this.m_progressDialog.SetMessage("Save successful!"),this.m_progressDialog.HideInXSeconds(1),this.m_chooserWindow&&(this.m_chooserWindow.visible=!1,this.removeChild(this.m_chooserWindow),this.m_chooserWindow=null),this.m_scoreWindow&&this.m_scoreWindow.visible?(this.m_scoreWindow.HideFader(),Sa.ShowMouse()):this.m_fader.visible=!1)}}finishLoadingChallenge(){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_LOAD_CHALLENGE){var t=hh.FinishLoadingChallenge();this.processLoadedChallenge(t)}}processLoadedChallenge(t){t&&(Sa.changeControllers=!0,Sa.nextControllerType=1,na.playingReplay=!1,Ha.challenge=t,Ha.playChallengeMode=!na.potentialChallengeEditable,Ha.playOnlyMode=!na.potentialChallengeEditable,Ya.settings=t.settings,na.curChallengeID=na.potentialChallengeID,na.ratedCurChallenge=!1,na.curChallengePublic=na.potentialChallengePublic,na.curChallengeFeatured=na.potentialChallengeFeatured,na.curRobotID="",na.curReplayID="",na.loadedParts=t.allParts,na.initX=t.cameraX,na.initY=t.cameraY,na.initZoom=t.zoomLevel)}finishGettingSaveChallengeData(){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_CHALLENGE_DATA&&hh.FinishGettingChallengeData()&&(this.m_progressDialog.visible=!1,this.m_chooserWindow&&this.removeChild(this.m_chooserWindow),this.m_chooserWindow=new SaveLoadWindow(this,SaveLoadWindow.SAVE_CHALLENGE_TYPE),this.addChild(this.m_chooserWindow),this.m_fader.visible=!0)}finishGettingLoadChallengeData(){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_CHALLENGE_DATA&&hh.FinishGettingChallengeData()&&(this.m_progressDialog.visible=!1,this.m_chooserWindow&&this.removeChild(this.m_chooserWindow),this.m_chooserWindow=new SaveLoadWindow(this,SaveLoadWindow.LOAD_CHALLENGE_TYPE),this.addChild(this.m_chooserWindow),this.m_fader.visible=!0)}finishGettingLoadChallengeForScoreData(){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_CHALLENGE_DATA&&hh.FinishGettingChallengeData()&&(this.m_progressDialog.visible=!1,this.m_challengeWindow&&this.removeChild(this.m_challengeWindow),this.m_challengeWindow=new ChooseChallengeWindow(this),this.addChild(this.m_challengeWindow),this.m_fader.visible=!0)}finishDeletingChallenge(){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_DELETE_CHALLENGE&&hh.FinishDeletingChallenge()){this.m_progressDialog.SetMessage("Delete successful!"),this.m_progressDialog.HideInXSeconds(1);var t=this.m_chooserWindow.dataType;this.removeChild(this.m_chooserWindow),this.m_chooserWindow=new SaveLoadWindow(this,t),this.addChild(this.m_chooserWindow),this.removeChild(this.m_progressDialog),this.addChild(this.m_progressDialog)}}finishGettingScoreData(){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_SCORE_DATA&&hh.FinishGettingScoreData()&&(this.m_progressDialog.visible=!1,this.m_chooserWindow&&this.removeChild(this.m_chooserWindow),this.m_chooserWindow=new SaveLoadWindow(this,SaveLoadWindow.HIGH_SCORE_TYPE),this.addChild(this.m_chooserWindow),this.m_fader.visible=!0)}ConfirmSaveRobot(){this.m_chooserWindow.saveRobotButtonPressed(!0)}ConfirmSaveReplay(){this.m_chooserWindow.saveReplayButtonPressed(!0)}ConfirmSaveChallenge(){this.m_chooserWindow.saveChallengeButtonPressed(!0)}ConfirmDeleteRobot(){this.m_chooserWindow.deleteRobotButtonPressed(!0)}ConfirmDeleteReplay(){this.m_chooserWindow.deleteReplayButtonPressed(!0)}ConfirmDeleteChallenge(){this.m_chooserWindow.deleteChallengeButtonPressed(!0)}ShowImportWindow(t){this.m_importDialog&&this.removeChild(this.m_importDialog),this.m_importDialog=new Ta(this,t),this.m_fader.visible=!0,this.addChild(this.m_importDialog)}ShowConfirmDialog(t,e){this.m_progressDialog&&this.removeChild(this.m_progressDialog),this.m_progressDialog=new xa(this,t,!0,!1,8==e),this.addChild(this.m_progressDialog),this.m_progressDialog.ShowOKAndCancelButton(e)}ShowDisabledDialog(){this.m_fader.visible=!0,this.m_progressDialog&&this.removeChild(this.m_progressDialog),this.m_progressDialog=new xa(this,"That feature has been disabled for this level.",!0),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer(),this.addChild(this.m_progressDialog)}ShowDialog(t){this.m_progressDialog&&this.removeChild(this.m_progressDialog),this.m_progressDialog=new xa(this,t),this.addChild(this.m_progressDialog)}ShowDialog2(t){this.m_progressDialog&&this.removeChild(this.m_progressDialog),this.m_progressDialog=new xa(this,t,!0,!0),this.addChild(this.m_progressDialog)}ShowDialog3(t){this.m_progressDialog&&this.removeChild(this.m_progressDialog),this.m_progressDialog=new xa(this,t,!0),this.addChild(this.m_progressDialog)}ShowTutorialWindow(t,e,i,s=!1){this.m_tutorialDialog&&this.removeChild(this.m_tutorialDialog),this.m_tutorialDialog=new Pa(this,e,i,t,s),this.addChild(this.m_tutorialDialog)}CloseTutorialDialog(t){this.m_tutorialDialog.visible=!1}ShowLinkDialog(t,e,i=!1,s="",r=!1){this.m_linkDialog&&this.removeChild(this.m_linkDialog),this.m_linkDialog=new LinkWindow(this,t,e,i,s,r),this.addChild(this.m_linkDialog)}DialogOK(){this.m_progressDialog.visible=!1,this.m_chooserWindow&&this.m_chooserWindow.visible&&this.m_chooserWindow.HideFader(),this.m_challengeWindow&&this.m_challengeWindow.visible&&this.m_challengeWindow.HideFader(),this.m_newUserWindow&&this.m_newUserWindow.visible&&this.m_newUserWindow.HideFader(),this.m_loginWindow&&this.m_loginWindow.visible&&this.m_loginWindow.HideFader(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.HideFader(),this.m_restrictionsDialog&&this.m_restrictionsDialog.visible&&this.m_restrictionsDialog.HideFader(),this.m_conditionsDialog&&this.m_conditionsDialog.visible&&this.m_conditionsDialog.HideFader()}HideDialog(){hh.nonfatalErrorOccurred?(hh.nonfatalErrorOccurred=!1,this.m_chooserWindow&&this.m_chooserWindow.HideFader(),this.m_challengeWindow&&this.m_challengeWindow.HideFader(),this.m_newUserWindow&&this.m_newUserWindow.visible?this.m_newUserWindow.HideFader():this.m_loginWindow&&this.m_loginWindow.HideFader()):(this.m_fader.visible=!1,this.m_chooserWindow&&this.m_chooserWindow.visible&&(this.m_fader.visible=!0,this.m_chooserWindow.HideFader()),this.m_challengeWindow&&this.m_challengeWindow.visible&&(this.m_fader.visible=!0,this.m_challengeWindow.HideFader()),this.m_newUserWindow&&this.m_newUserWindow.visible?this.m_newUserWindow.visible=!1:this.m_loginWindow&&this.m_loginWindow.visible?this.m_loginWindow.visible=!1:this.m_scoreWindow&&this.m_scoreWindow.visible?(this.m_fader.visible=!0,this.m_scoreWindow.HideFader()):this.m_postReplayWindow&&this.m_postReplayWindow.visible&&(this.m_fader.visible=!0,this.m_postReplayWindow.HideFader())),this.m_progressDialog.visible=!1,na.failedChallenge&&this.resetButton(new MouseEvent("")),na.failedChallenge=!1}HideLinkDialog(){this.m_linkDialog.visible=!1,this.m_chooserWindow&&this.m_chooserWindow.visible?this.m_chooserWindow.HideFader():this.m_fader.visible=!1}HideExportDialog(){this.m_exportDialog.visible=!1,this.m_chooserWindow&&this.m_chooserWindow.visible&&this.m_chooserWindow.HideFader(),this.m_fader.visible=!1}HideImportDialog(){this.m_importDialog.visible=!1,this.m_fader.visible=!1}HideConfirmDialog(){this.m_progressDialog.visible=!1,this.m_chooserWindow&&this.m_chooserWindow.visible?this.m_chooserWindow.HideFader():this.m_scoreWindow&&this.m_scoreWindow.visible?this.m_scoreWindow.HideFader():this.m_fader.visible=!1}ShowPostReplayWindow(){this.m_postReplayWindow&&this.removeChild(this.m_postReplayWindow),this.m_postReplayWindow=new Oa(this),this.addChild(this.m_postReplayWindow),this.m_fader.visible=!0}DeletePart(t,e=!0,i=!0){this.allParts=Vs.RemoveFromArray(t,this.allParts),i&&(this.selectedParts=Vs.RemoveFromArray(t,this.selectedParts)),t.isEnabled=!1;var s,r=new Array;if(t instanceof mh)do{s=!1;for(var n=0;n<this.allParts.length;n++)if(s)n!=this.allParts.length-1&&(this.allParts[n]=this.allParts[n+1]);else if(this.allParts[n]instanceof fh){var o=this.allParts[n];o.part1!=t&&o.part2!=t||(s=!0,r.push(o),o.isEnabled=!1,i&&(this.selectedParts=Vs.RemoveFromArray(o,this.selectedParts)),n!=this.allParts.length-1&&(this.allParts[n]=this.allParts[n+1]))}else if(this.allParts[n]instanceof Ah){var a=this.allParts[n];a.shape==t&&(s=!0,r.push(a),a.isEnabled=!1,i&&(this.selectedParts=Vs.RemoveFromArray(a,this.selectedParts)),n!=this.allParts.length-1&&(this.allParts[n]=this.allParts[n+1]))}s&&this.allParts.pop()}while(s);else t instanceof wh&&(t.m_textField.visible=!1);e&&this.AddAction(new Dh(t,r)),this.CheckIfPartsFit(),na.curRobotID=""}CreateWorld(){var t=new ps.b2AABB;t.lowerBound.Set(-300,-200),t.upperBound.Set(300,200),this.m_world=ps.b2World.Create(this.GetGravity()),this.m_groundBody=this.m_world.CreateBody(),this.m_groundBody.SetUserData({groundBody:!0});var e=new zs;this.m_world.SetContactFilter(e);var i=new Hs(this);this.m_world.SetContactListener(i)}GetGravity(){return new ps.b2Vec2(0,15)}TooManyShapes(){return this.allParts.filter(this.PartIsPhysical).length>500}IsPartOfRobot(t,e,i){return t.drawAnyway}PartIsEditable(t,e,i){return t.isEditable}PartIsShape(t,e,i){return t instanceof mh}PartIsPhysical(t,e,i){return t instanceof mh||t instanceof Sh}FindCenterOfRobot(){for(var t=null,e=0,i=0;i<this.allParts.length;i++)if(this.allParts[i].isEditable&&this.allParts[i]instanceof mh&&this.allParts[i].isEnabled&&this.allParts[i].m_collisionGroup==-(i+1)){for(var s=this.allParts[i].GetAttachedParts().filter(this.PartIsShape),r=0,n=new Array,o=new Array,a=0;a<s.length;a++)Vs.ObjectInArray(s[a].GetBody(),n)||(r+=s[a].GetMass(),n.push(s[a].GetBody()),o.push(s[a]));r>e&&(e=r,t=o)}if(!t)return null;var h=-1,l=0;for(i=0;i<t.length;i++){var c=t[i].GetMass();c>l&&(l=c,h=i)}return-1==h?null:t[h]}Zoom(t){var e=this.m_physScale,i=(na.ZOOM_FOCUS_X+this.draw.m_drawXOff)/this.m_physScale,s=(na.ZOOM_FOCUS_Y+this.draw.m_drawYOff)/this.m_physScale;t?(this.m_physScale*=4/3,this.m_physScale>na.MAX_ZOOM_VAL&&(this.m_physScale=na.MAX_ZOOM_VAL)):(this.m_physScale*=.75,this.m_physScale<na.MIN_ZOOM_VAL&&(this.m_physScale=na.MIN_ZOOM_VAL)),this.draw.m_drawXOff=i*this.m_physScale-na.ZOOM_FOCUS_X,this.draw.m_drawYOff=s*this.m_physScale-na.ZOOM_FOCUS_Y,e!=this.m_physScale&&(this.hasZoomed=!0),this.simStarted&&this.cameraMovements.push(new Va(this.frameCounter,this.autoPanning?Number.POSITIVE_INFINITY:this.draw.m_drawXOff,this.autoPanning?Number.POSITIVE_INFINITY:this.draw.m_drawYOff,this.m_physScale))}MaybeCreateJoint(){var t=new Array,e=na.mouseXWorldPhys,i=na.mouseYWorldPhys,s=this.FindPartToSnapTo();na.snapToCenter&&s&&(e=s.centerX,i=s.centerY);for(var r=this.allParts.length-1;r>=0;r--)if(this.allParts[r]instanceof mh&&this.allParts[r].isEditable&&this.allParts[r].isEnabled){var n=this.allParts[r];n.InsideShape(e,i,this.m_physScale)&&t.push(n)}if(2==t.length){if(this.curAction==na.NEW_REVOLUTE_JOINT){var o=new xh(t[0],t[1],e,i);this.copiedJoint instanceof xh&&o.SetJointProperties(this.copiedJoint),this.allParts.push(o),this.AddAction(new Ch(o)),this.m_sidePanel.ShowJointPanel(o),this.selectedParts=new Array,this.selectedParts.push(o),this.curAction=-1,na.centerOnSelected&&this.CenterOnSelected(),this.PlayJointSound()}else if(this.curAction==na.NEW_FIXED_JOINT){var a=new vh(t[0],t[1],e,i);this.allParts.push(a),this.AddAction(new Ch(a)),this.m_sidePanel.ShowJointPanel(a),this.selectedParts=new Array,this.selectedParts.push(a),this.curAction=-1,na.centerOnSelected&&this.CenterOnSelected(),this.PlayJointSound()}na.curRobotID="",this.redrawRobot=!0}else t.length>2?(this.potentialJointPart1=t[0],this.potentialJointPart2=t[1],this.potentialJointPart1.highlightForJoint=!0,this.potentialJointPart2.highlightForJoint=!0,this.candidateJointX=e,this.candidateJointY=i,this.candidateJointType=this.curAction,this.candidateJointParts=t,this.curAction=na.FINALIZING_JOINT):(this.curAction=-1,this.redrawRobot=!0)}MaybeCreateThrusters(){var t=new Array,e=na.mouseXWorldPhys,i=na.mouseYWorldPhys,s=this.FindPartToSnapTo();na.snapToCenter&&s&&(e=s.centerX,i=s.centerY);for(var r=this.allParts.length-1;r>=0;r--)if(this.allParts[r]instanceof mh&&this.allParts[r].isEditable&&this.allParts[r].isEnabled){var n=this.allParts[r];n.InsideShape(e,i,this.m_physScale)&&t.push(n)}if(1==t.length){var o=new Ah(t[0],e,i);this.copiedThrusters&&(o.strength=this.copiedThrusters.strength,o.angle=this.copiedThrusters.angle,o.thrustKey=this.copiedThrusters.thrustKey,o.autoOn=this.copiedThrusters.autoOn),this.allParts.push(o),this.AddAction(new Ch(o)),this.m_sidePanel.ShowThrustersPanel(o),this.selectedParts=new Array,this.selectedParts.push(o),this.curAction=-1,na.centerOnSelected&&this.CenterOnSelected(),na.curRobotID="",this.redrawRobot=!0,this.PlayJointSound()}else t.length>1?(this.potentialJointPart1=t[0],this.potentialJointPart1.highlightForJoint=!0,this.candidateJointX=e,this.candidateJointY=i,this.candidateJointType=this.curAction,this.candidateJointParts=t,this.curAction=na.FINALIZING_JOINT):(this.curAction=-1,this.redrawRobot=!0)}MaybeStartCreatingPrismaticJoint(){var t=new Array,e=na.mouseXWorldPhys,i=na.mouseYWorldPhys,s=this.FindPartToSnapTo();na.snapToCenter&&s&&(e=s.centerX,i=s.centerY);for(var r=this.allParts.length-1;r>=0;r--)if(this.allParts[r]instanceof mh&&this.allParts[r].isEditable&&this.allParts[r].isEnabled){var n=this.allParts[r];n.InsideShape(e,i,this.m_physScale)&&t.push(n)}0==t.length?(this.curAction=-1,this.redrawRobot=!0):1==t.length?(this.jointPart=t[0],this.firstClickX=e,this.firstClickY=i,this.actionStep++,this.PlayJointSound()):(this.potentialJointPart1=t[0],this.potentialJointPart1.highlightForJoint=!0,this.candidateJointX=e,this.candidateJointY=i,this.candidateJointType=this.curAction,this.candidateJointParts=t,this.curAction=na.FINALIZING_JOINT)}MaybeFinishCreatingPrismaticJoint(){var t=new Array,e=na.mouseXWorldPhys,i=na.mouseYWorldPhys,s=this.FindPartToSnapTo();na.snapToCenter&&s&&(e=s.centerX,i=s.centerY);for(var r=this.allParts.length-1;r>=0;r--)if(this.allParts[r]instanceof mh&&this.allParts[r].isEditable&&this.allParts[r]!=this.jointPart){var n=this.allParts[r];n.InsideShape(e,i,this.m_physScale)&&t.push(n)}if(1==t.length){var o=new Sh(this.jointPart,t[0],this.firstClickX,this.firstClickY,e,i);this.copiedJoint instanceof Sh&&o.SetJointProperties(this.copiedJoint),this.allParts.push(o),this.AddAction(new Ch(o)),this.m_sidePanel.ShowJointPanel(o),this.selectedParts=new Array,this.selectedParts.push(o),this.curAction=-1,this.jointPart.highlightForJoint=!1,na.curRobotID="",na.centerOnSelected&&this.CenterOnSelected(),this.redrawRobot=!0,this.PlayJointSound()}else t.length>1?(this.potentialJointPart1=t[0],this.potentialJointPart1.highlightForJoint=!0,this.candidateJointX=e,this.candidateJointY=i,this.candidateJointType=this.curAction,this.candidateJointParts=t,this.curAction=na.FINALIZING_JOINT):0==t.length&&(this.curAction=-1,this.redrawRobot=!0)}FindPartToSnapTo(t=null){for(var e=null,i=Number.MAX_VALUE,s=0;s<this.allParts.length;s++)if(this.allParts[s]instanceof mh&&this.allParts[s]!=t&&this.allParts[s].isEditable){var r=this.allParts[s],n=Vs.GetDist(na.mouseXWorldPhys,na.mouseYWorldPhys,r.centerX,r.centerY);n<i&&(i=n,e=r)}return i<12/this.m_physScale?e:null}GetBodyAtMouse(){var t=new ps.b2Vec2(na.mouseXWorldPhys,na.mouseYWorldPhys),e=new ps.b2AABB;e.lowerBound.Set(na.mouseXWorldPhys-.001,na.mouseYWorldPhys-.001),e.upperBound.Set(na.mouseXWorldPhys+.001,na.mouseYWorldPhys+.001);for(var i=this.m_world.QueryAllAABB(e),s=null,r=0;r<i.length;++r)if(i[r].m_body.GetType()!=ps.b2BodyType.b2_staticBody&&!i[r].m_body.GetUserData().undragable&&-1==i[r].m_body.GetUserData().isPiston){var n=i[r];if(n.TestPoint(t)){s=n.GetBody();break}}return s}MouseOverSelectedPart(){for(var t=0;t<this.selectedParts.length;t++)if(this.selectedParts[t].InsideShape(na.mouseXWorldPhys,na.mouseYWorldPhys,this.m_physScale))return!0;return!1}GetPartAtMouse(){for(var t=0;t<this.allParts.length;t++)if(this.allParts[t].isEditable&&this.allParts[t]instanceof wh&&this.allParts[t].InsideMoveBox(na.mouseXWorldPhys,na.mouseYWorldPhys,this.m_physScale))return this.allParts[t];for(var e=new Array,i=-1,s=!0,r=!0,n=this.allParts.length-1;n>=0;n--)this.allParts[n].isEditable&&this.allParts[n].InsideShape(na.mouseXWorldPhys,na.mouseYWorldPhys,this.m_physScale)&&(Vs.ObjectInArray(this.allParts[n],this.selectedParts)?(r=!1,-1==i&&(i=e.length)):s=!1,e.push(this.allParts[n]));if(0==e.length)return null;if(1==e.length||s||r)return e[0];for(n=(i+1)%e.length;n!=i;n=(n+1)%e.length)if(!Vs.ObjectInArray(e[n],this.selectedParts))return e[n];return null}}a("7qcjp");Qs=a("f6Kro"),$s=a("kpTES"),js=a("4Y6fG"),ca=a("VYQOJ");class Xa extends Wa{constructor(t=!1){super(),this.frameCounter=0,this.m_physScale=30,this.gamesButton=null,this.subscribeButton=null,this.logoFrame=0,this.startHereText=null,this.startHereArrow=null,this.arrowVel=0,this.arrowAccel=0,this.logoShrinking=!1,this.m_progressDialog=null,this.m_linkDialog=null,this.m_exportDialog=null,this.m_importDialog=null,this.m_loadWindow=null,this.m_loginWindow=null,this.m_newUserWindow=null,this.m_goldLoginWindow=null,this.m_sandboxWindow=null,this.m_tutorialWindow=null,this.m_challengeWindow=null,this.backToSaveWindow=!1,this.draw=new ra,this.allParts=new Array,this.sSky=new tr(this,1),Xa.cannonballs=new Array,Sa.enableSound&&(na.introVolume=t?.4:.5,Xa.introSong.volume=na.introVolume,Xa.introSong.play()),this.sGround=new $s.Graphics,this.DrawGroundOutlineCircle(0,0,150),this.DrawGroundOutlineCircle(4e3,0,150);const e=Ks.getLinearGradientTexture([Vs.HexColourString(177,102,46),Vs.HexColourString(171,59,34)]),i=Ks.getLinearGradientTexture([Vs.HexColourString(249,172,101),Vs.HexColourString(240,70,45)]);this.sGround.beginTextureFill({texture:e}),this.sGround.drawRect(144,-6,4012,312),this.sGround.endFill(),this.sGround.beginTextureFill({texture:i}),this.sGround.drawRect(150,0,4e3,300),this.sGround.endFill(),this.addChild(this.sGround),this.DrawGroundCircle(0,0,150),this.DrawGroundCircle(4e3,0,150),this.DrawRock(0,169,200,40),this.DrawRock(0,318,44,48),this.DrawRock(2,795,195,28),this.DrawRock(0,1110,120,40),this.DrawRock(2,1440,121,69),this.DrawRock(0,1762,68,57),this.DrawRock(1,2082,11,68),this.DrawRock(0,2395,192,51),this.DrawRock(0,2727,152,39),this.DrawRock(0,3032,74,61),this.DrawRock(1,3196,18,46),this.DrawRock(0,3527,197,28),this.DrawRock(0,3842,168,18),this.addChild(this.sGround),this.sGround.width=this.World2ScreenX(85)-this.World2ScreenX(0),this.sGround.scale.y=this.sGround.scale.x,this.sCanvas=new $s.Graphics,this.draw.m_sprite=this.sCanvas,this.addChild(this.sCanvas);var s=new js.TextStyle({fontFamily:Sa.GLOBAL_FONT,fontSize:11,align:"right",fill:"#ffffff"});this.versionText=new js.Text("Version "+Sa.VERSION_STRING),this.versionText.x=700,this.versionText.y=580,this.versionText.style=s,this.addChild(this.versionText),this.fader=new $s.Graphics,this.fader.beginFill(0,.2),this.fader.lineStyle(0,0,.2),this.fader.moveTo(0,0),this.fader.lineTo(800,0),this.fader.lineTo(800,600),this.fader.lineTo(0,600),this.fader.lineTo(0,0),this.fader.endFill(),this.fader.visible=t||Sa.premiumMode,this.addChild(this.fader),this.sLogo=new Qs.Sprite(sa.cMainMenuLogo),this.sLogo.smoothing=!0,t&&(this.sLogo.width=.6*this.sLogo.measuredWidth,this.sLogo.height=.6*this.sLogo.measuredHeight,this.sLogo.x=215,this.sLogo.y=10),this.addChild(this.sLogo),t||((s=new js.TextStyle).fontSize=24,this.playButton=new aa("Play!",320,184,160,70,this.playButtonPressed.bind(this),aa.PLAY,s),this.addChild(this.playButton)),Sa.premiumMode&&Xa.firstLoad&&(this.m_goldLoginWindow=new GoldLoginWindow(this),this.addChild(this.m_goldLoginWindow),this.playButton.visible=!1),Xa.firstLoad=!1,this.levelSelectGui=new Qs.Sprite,this.levelSelectGui.visible=t;var r=new Qs.Sprite(sa.cLevelSelectBox1L);r.x=210,r.y=105,this.levelSelectGui.addChild(r),(r=new Qs.Sprite(sa.cLevelSelectBox1R)).x=576,r.y=105,this.levelSelectGui.addChild(r);var n=new $s.Graphics;this.levelSelectGui.addChild(n);let o=new ca.Matrix;o.translate(0,105),n.beginTextureFill({texture:sa.cLevelSelectBox1M,matrix:o}),n.drawRect(234,105,342,135),(r=new Qs.Sprite(sa.cLevelSelectBox2L)).x=315,r.y=260,this.levelSelectGui.addChild(r),(r=new Qs.Sprite(sa.cLevelSelectBox2R)).x=472,r.y=260,this.levelSelectGui.addChild(r),o=new ca.Matrix,o.translate(0,260),n.beginTextureFill({texture:sa.cLevelSelectBox2M,matrix:o}),n.drawRect(339,260,133,194),(r=new Qs.Sprite(sa.cLevelSelectOtherBoxL)).x=617,r.y=449,this.levelSelectGui.addChild(r),(r=new Qs.Sprite(sa.cLevelSelectOtherBoxR)).x=763,r.y=449,this.levelSelectGui.addChild(r),o=new ca.Matrix,o.translate(0,449),n.beginTextureFill({texture:sa.cLevelSelectOtherBoxM,matrix:o}),n.drawRect(641,449,122,144),(s=new js.TextStyle).fontSize=17;var a=new aa("Tutorial Levels",210,109,200,65,this.tutorialButton.bind(this),aa.PINK,s);this.levelSelectGui.addChild(a),a=new aa("Sandbox Mode",390,109,200,65,this.sandboxButton.bind(this),aa.PINK,s),this.levelSelectGui.addChild(a),a=new aa("Challenge Editor",210,158,200,65,this.editorButton.bind(this),aa.PINK,s),this.levelSelectGui.addChild(a),a=new aa(" Advanced Sandbox ",390,158,200,65,this.advancedButton.bind(this),aa.PINK,s),this.levelSelectGui.addChild(a),this.logInButton=new aa("Log In",675,-5,120,60,this.loginButton.bind(this),aa.BLUE,s),this.logInButton.disabled=!0,this.logInButton.visible="_Public"==na.userName,this.levelSelectGui.addChild(this.logInButton),this.logOutButton=new aa("Log Out",675,-5,120,60,this.logout.bind(this),aa.BLUE,s),this.logOutButton.disabled=!0,this.logOutButton.visible="_Public"!=na.userName,this.levelSelectGui.addChild(this.logOutButton),this.enableSoundButton=new aa("Enable Sound",5,535,150,60,this.enableSoundButtonPressed.bind(this),aa.BLUE,s),this.enableSoundButton.visible=!Sa.enableSound,this.disableSoundButton=new aa("Disable Sound",5,535,150,60,this.disableSoundButtonPressed.bind(this),aa.BLUE,s),this.disableSoundButton.visible=Sa.enableSound,t?(this.levelSelectGui.addChild(this.enableSoundButton),this.levelSelectGui.addChild(this.disableSoundButton)):(this.addChild(this.enableSoundButton),this.addChild(this.disableSoundButton)),(a=new aa("Load Challenge",315,263,171,59,this.loadChallengeButton,aa.BLUE,s)).disabled=!0,this.levelSelectGui.addChild(a),(a=new aa("Load Replay",315,303,171,59,this.loadReplayButton,aa.BLUE,s)).disabled=!0,this.levelSelectGui.addChild(a),(a=new aa("Load Bot",315,343,171,59,this.loadRobotButton,aa.BLUE,s)).disabled=!0,this.levelSelectGui.addChild(a),(a=new aa("High Scores",315,383,171,59,this.highScoresButton,aa.RED,s)).disabled=!0,this.levelSelectGui.addChild(a),(a=new aa("Import Challenge",145,263,171,59,this.importChallengeButton.bind(this),aa.ORANGE,s)).disabled=!0,this.levelSelectGui.addChild(a),(a=new aa("Import Replay",145,303,171,59,this.importReplayButton.bind(this),aa.ORANGE,s)).disabled=!0,this.levelSelectGui.addChild(a),a=new aa("Import Bot",145,343,171,59,(t=>this.importRobotButton(t)),aa.ORANGE,s),this.levelSelectGui.addChild(a),(a=new aa("Instructions",620,454,153,50,this.instructionsButton,aa.BLUE,s)).disabled=!0,this.levelSelectGui.addChild(a),(a=new aa("Credits",620,489,153,50,this.creditsButton,aa.BLUE,s)).disabled=!0,this.levelSelectGui.addChild(a),(a=new aa("Suggestions?",620,524,153,50,this.suggestionsButton,aa.BLUE,s)).disabled=!0,this.levelSelectGui.addChild(a),(s=new js.TextStyle).fontFamily=Sa.GLOBAL_FONT,s.fontSize=12,s.fill="#FFFFFF",this.userText=new js.Text("Welcome, "+("_Public"==na.userName?"Guest":na.userName)),this.userText.x=10,this.userText.y=20,this.userText.style=s,this.levelSelectGui.addChild(this.userText),Ws.IsAnythingDone()||(this.startHereArrow=new Qs.Sprite(sa.cLevelSelectStartHereArrow),this.startHereArrow.smoothing=!0,this.startHereArrow.x=130,this.startHereArrow.y=117,this.levelSelectGui.addChild(this.startHereArrow),this.arrowX=130,this.startHereText=new Qs.Sprite(sa.cLevelSelectStartHereText),this.startHereText.smoothing=!0,this.startHereText.x=75,this.startHereText.y=145,this.levelSelectGui.addChild(this.startHereText)),this.addChild(this.levelSelectGui),this.fader2=new $s.Graphics,this.fader2.beginFill(0,.2),this.fader2.lineStyle(0,0,.2),this.fader2.moveTo(0,0),this.fader2.lineTo(800,0),this.fader2.lineTo(800,600),this.fader2.lineTo(0,600),this.fader2.lineTo(0,0),this.fader2.endFill(),this.fader2.visible=!1,this.addChild(this.fader2),this.draw.m_drawScale=23.73;var h=new ps.b2AABB;h.lowerBound.Set(-100,-100),h.upperBound.Set(100,100),this.world=ps.b2World.Create(new ps.b2Vec2(0,15));var l=new zs;this.world.SetContactFilter(l),this.LoadReplay().then((()=>{for(var t=0;t<this.allParts.length;t++)this.allParts[t]instanceof mh&&this.allParts[t].isCameraFocus&&(this.cameraPart=this.allParts[t]);for(t=0;t<this.allParts.length;t++)this.allParts[t].checkedCollisionGroup=!1;for(t=0;t<this.allParts.length;t++)this.allParts[t]instanceof mh&&this.allParts[t].SetCollisionGroup(-(t+1));for(t=this.allParts.length;t>=0;t--)this.allParts[t]instanceof mh&&this.allParts[t].Init(this.world);for(t=0;t<this.allParts.length;t++)(this.allParts[t]instanceof fh||this.allParts[t]instanceof Ah)&&this.allParts[t].Init(this.world);na.curRobotID="",na.curReplayID="",na.curChallengeID="",this.Update()}))}async LoadReplay(){const t=await sa.cReplay.arrayBuffer();var e=new cs(t);await e.uncompress(),this.replay=await hh.ExtractReplayFromByteArray(e),this.replay.cont=this;const i=await sa.cRobot.arrayBuffer();e=new cs(new Uint8Array(i)),await e.uncompress();var s=hh.ExtractRobotFromByteArray(e);this.allParts=s.allParts,this.replaySplineXs=this.ComputeReplaySplines(0),this.replaySplineYs=this.ComputeReplaySplines(1),this.replaySplineAngles=this.ComputeReplaySplines(2)}DrawGroundOutlineCircle(t,e,i){const s=new ca.Matrix;s.translate(0,e);const r=Ks.getLinearGradientTexture([Vs.HexColourString(177,102,46),Vs.HexColourString(171,59,34)],2*i);this.sGround.beginTextureFill({texture:r,matrix:s}),this.sGround.drawCircle(t+i,e+i,i+6),this.sGround.endFill()}DrawGroundCircle(t,e,i){const s=new ca.Matrix;s.translate(0,e);const r=Ks.getLinearGradientTexture([Vs.HexColourString(249,172,101),Vs.HexColourString(240,70,45)],2*i);this.sGround.beginTextureFill({texture:r,matrix:s}),this.sGround.drawCircle(t+i,e+i,i),this.sGround.endFill()}DrawRock(t,e,i,s,r=6){const n=new ca.Matrix;n.translate(0,i),this.sGround.lineStyle(r,12215357);const o=Ks.getLinearGradientTexture(0==t?[Vs.HexColourString(194,130,87),Vs.HexColourString(172,114,77)]:1==t?[Vs.HexColourString(197,115,66),Vs.HexColourString(175,103,58)]:[Vs.HexColourString(198,121,69),Vs.HexColourString(179,105,57)],2*s);this.sGround.beginTextureFill({texture:o,matrix:n}),this.sGround.drawCircle(e+s,i+s,s),this.sGround.endFill()}loadRobotButton(t){hh.GetRobotData(na.userName,na.password,hh.curShared,hh.curSortType,hh.curSortPeriod,hh.curShared?hh.curRobotPage:1,"",this.finishGettingLoadRobotData),this.ShowDialog("Getting robots..."),Sa.ShowHourglass(),this.fader2.visible=!0}loadReplayButton(t){hh.curSortPeriod==hh.SORT_PERIOD_PROP&&(hh.curSortPeriod=hh.SORT_PERIOD_ALLTIME),hh.GetReplayData(na.userName,na.password,hh.curShared,hh.curSortType,hh.curSortPeriod,hh.curShared?hh.curReplayPage:1,"",this.finishGettingLoadReplayData),this.ShowDialog("Getting replays..."),Sa.ShowHourglass(),this.fader2.visible=!0}loadChallengeButton(t){hh.curSortPeriod==hh.SORT_PERIOD_PROP&&(hh.curSortPeriod=hh.SORT_PERIOD_ALLTIME),hh.GetChallengeData(na.userName,na.password,hh.curShared,hh.curSortType,hh.curSortPeriod,hh.curShared?hh.curChallengePage:1,"",this.finishGettingLoadChallengeData),this.ShowDialog("Getting challenges..."),Sa.ShowHourglass(),this.fader2.visible=!0}importRobotButton(t){this.ShowImportWindow(Ta.TYPE_ROBOT)}importReplayButton(t){this.ShowImportWindow(Ta.TYPE_REPLAY)}importChallengeButton(t){this.ShowImportWindow(Ta.TYPE_CHALLENGE)}highScoresButton(t){hh.GetChallengeData(na.userName,na.password,!0,hh.curSortType,hh.curSortPeriod,hh.curChallengePage,"",this.finishGettingLoadChallengeForScoreData),this.ShowDialog("Getting challenges..."),Sa.ShowHourglass(),this.fader2.visible=!0}finishGettingLoadRobotData(t){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_ROBOT_DATA&&hh.FinishGettingRobotData(t)&&(this.m_progressDialog.visible=!1,this.m_loadWindow&&this.removeChild(this.m_loadWindow),this.m_loadWindow=new SaveLoadWindow(this,SaveLoadWindow.LOAD_ROBOT_TYPE),this.addChild(this.m_loadWindow))}finishGettingLoadReplayData(t){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_REPLAY_DATA&&hh.FinishGettingReplayData(t)&&(this.m_progressDialog.visible=!1,this.m_loadWindow&&this.removeChild(this.m_loadWindow),this.m_loadWindow=new SaveLoadWindow(this,SaveLoadWindow.LOAD_REPLAY_TYPE),this.addChild(this.m_loadWindow))}finishGettingLoadChallengeData(t){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_CHALLENGE_DATA&&hh.FinishGettingChallengeData(t)&&(this.m_progressDialog.visible=!1,this.m_loadWindow&&this.removeChild(this.m_loadWindow),this.m_loadWindow=new SaveLoadWindow(this,SaveLoadWindow.LOAD_CHALLENGE_TYPE),this.addChild(this.m_loadWindow))}finishGettingLoadChallengeForScoreData(t){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_CHALLENGE_DATA&&hh.FinishGettingChallengeData(t)&&(this.m_progressDialog.visible=!1,this.m_challengeWindow&&this.removeChild(this.m_challengeWindow),this.m_challengeWindow=new ChooseChallengeWindow(this),this.addChild(this.m_challengeWindow))}finishGettingScoreData(t){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_GET_SCORE_DATA&&hh.FinishGettingScoreData(t)&&(this.m_progressDialog.visible=!1,this.m_loadWindow&&this.removeChild(this.m_loadWindow),this.m_loadWindow=new SaveLoadWindow(this,SaveLoadWindow.HIGH_SCORE_TYPE),this.addChild(this.m_loadWindow))}processLoadedRobot(t){for(var e=t.allParts,i=0;i<e.length;i++)(e[i]instanceof Ah||e[i]instanceof yh)&&!0;na.loadedParts=e,na.curRobotID=na.potentialRobotID,na.ratedCurRobot=!1,na.curRobotEditable=na.potentialRobotEditable,na.curRobotPublic=na.potentialRobotPublic,na.curRobotFeatured=na.potentialRobotFeatured,na.curReplayID="",na.initX=t.cameraX,na.initY=t.cameraY,na.initZoom=t.zoomLevel,Sa.changeControllers=!0,t.challenge?(Sa.nextControllerType=1,Ha.challenge=t.challenge,Ha.playChallengeMode=!0,Ha.playOnlyMode=!0,Ya.settings=t.challenge.settings,na.curChallengeID=na.potentialChallengeID,na.ratedCurChallenge=!1,na.curChallengePublic=!1,na.curChallengeFeatured=!1,na.justLoadedRobotWithChallenge=!0):(Sa.nextControllerType=0,Ya.settings=t.settings,na.curChallengeID="")}finishLoading(t){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_LOAD_ROBOT){var e=hh.FinishLoadingRobot(t);if(e){for(var i=e.allParts,s=0;s<i.length;s++)(i[s]instanceof Ah||i[s]instanceof yh)&&!0;na.loadedParts=i,na.curRobotID=na.potentialRobotID,na.ratedCurRobot=!1,na.curRobotEditable=na.potentialRobotEditable,na.curRobotPublic=na.potentialRobotPublic,na.curRobotFeatured=na.potentialRobotFeatured,na.curReplayID="",na.initX=e.cameraX,na.initY=e.cameraY,na.initZoom=e.zoomLevel,Sa.changeControllers=!0,e.challenge?(Sa.nextControllerType=1,Ha.challenge=e.challenge,Ha.playChallengeMode=!0,Ha.playOnlyMode=!0,Ya.settings=e.challenge.settings,na.curChallengeID=na.potentialChallengeID,na.ratedCurChallenge=!1,na.curChallengePublic=!1,na.curChallengeFeatured=!1,na.justLoadedRobotWithChallenge=!0):(Sa.nextControllerType=0,Ya.settings=e.settings,na.curChallengeID="")}}}finishLoadingReplay(t){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_LOAD_REPLAY){var e=hh.FinishLoadingReplay(t);if(e)if(na.replay=e[0],na.replay.version!=hh.VERSION_STRING_FOR_REPLAYS)this.ShowConfirmDialog("This replay was saved using an older version of IncrediBots.  Redirect there now?",6),Sa.ShowMouse();else{var i=e[1];na.replayParts=i.allParts,Ya.settings=i.settings,na.playingReplay=!0,Sa.changeControllers=!0,Sa.nextControllerType=0,na.curRobotID=na.potentialRobotID,na.ratedCurRobot=!1,na.curReplayID=na.potentialReplayID,na.ratedCurReplay=!1,na.curReplayPublic=na.potentialReplayPublic,na.curReplayFeatured=na.potentialReplayFeatured,na.curChallengeID="",na.curChallengePublic=!1,na.curChallengeFeatured=!1}}}processLoadedReplay(t){if(na.replay=t[0],na.replay.version!=hh.VERSION_STRING_FOR_REPLAYS)this.ShowConfirmDialog("This replay was saved using an older version of IncrediBots.  Redirect there now?",6),Sa.ShowMouse();else{var e=t[1];na.replayParts=e.allParts,Ya.settings=e.settings,na.playingReplay=!0,Sa.changeControllers=!0,Sa.nextControllerType=0,na.curRobotID=na.potentialRobotID,na.ratedCurRobot=!1,na.curReplayID=na.potentialReplayID,na.ratedCurReplay=!1,na.curReplayPublic=na.potentialReplayPublic,na.curReplayFeatured=na.potentialReplayFeatured,na.curChallengeID="",na.curChallengePublic=!1,na.curChallengeFeatured=!1}}processLoadedChallenge(t){Sa.changeControllers=!0,Sa.nextControllerType=1,Ha.challenge=t,Ha.playChallengeMode=!na.potentialChallengeEditable,Ha.playOnlyMode=!na.potentialChallengeEditable,Ya.settings=t.settings,na.curChallengeID=na.potentialChallengeID,na.ratedCurChallenge=!1,na.curChallengePublic=na.potentialChallengePublic,na.curChallengeFeatured=na.potentialChallengeFeatured,na.curRobotID="",na.curReplayID="",na.loadedParts=t.allParts,na.initX=t.cameraX,na.initY=t.cameraY,na.initZoom=t.zoomLevel}finishLoadingChallenge(t){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_LOAD_CHALLENGE){var e=hh.FinishLoadingChallenge(t);e&&(Sa.changeControllers=!0,Sa.nextControllerType=1,Ha.challenge=e,Ha.playChallengeMode=!na.potentialChallengeEditable,Ha.playOnlyMode=!na.potentialChallengeEditable,Ya.settings=e.settings,na.curChallengeID=na.potentialChallengeID,na.ratedCurChallenge=!1,na.curChallengePublic=na.potentialChallengePublic,na.curChallengeFeatured=na.potentialChallengeFeatured,na.curRobotID="",na.curReplayID="",na.loadedParts=e.allParts,na.initX=e.cameraX,na.initY=e.cameraY,na.initZoom=e.zoomLevel)}}finishDeleting(t){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_DELETE_ROBOT&&(""!=hh.FinishDeletingRobot(t)&&(this.m_progressDialog.SetMessage("Delete successful!"),this.m_progressDialog.HideInXSeconds(1),this.removeChild(this.m_loadWindow),this.m_loadWindow=new SaveLoadWindow(this,SaveLoadWindow.LOAD_ROBOT_TYPE),this.addChild(this.m_loadWindow),this.removeChild(this.m_progressDialog),this.addChild(this.m_progressDialog)))}finishDeletingReplay(t){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_DELETE_REPLAY&&hh.FinishDeletingReplay(t)&&(this.m_progressDialog.SetMessage("Delete successful!"),this.m_progressDialog.HideInXSeconds(1),this.removeChild(this.m_loadWindow),this.m_loadWindow=new SaveLoadWindow(this,SaveLoadWindow.LOAD_REPLAY_TYPE),this.addChild(this.m_loadWindow),this.removeChild(this.m_progressDialog),this.addChild(this.m_progressDialog))}finishDeletingChallenge(t){hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_DELETE_CHALLENGE&&hh.FinishDeletingChallenge(t)&&(this.m_progressDialog.SetMessage("Delete successful!"),this.m_progressDialog.HideInXSeconds(1),this.removeChild(this.m_loadWindow),this.m_loadWindow=new SaveLoadWindow(this,SaveLoadWindow.LOAD_CHALLENGE_TYPE),this.addChild(this.m_loadWindow),this.removeChild(this.m_progressDialog),this.addChild(this.m_progressDialog))}enableSoundButtonPressed(t){Sa.enableSound=!0,this.enableSoundButton.visible=!1,this.disableSoundButton.visible=!0,Xa.introSong.resume()}disableSoundButtonPressed(t){Sa.enableSound=!1,Xa.introSong.pause(),this.enableSoundButton.visible=!0,this.disableSoundButton.visible=!1}loginButton(t,e=!1,i=!1,s=!1){this.saveLoadOpen=s,this.m_loginWindow&&this.removeChild(this.m_loginWindow),this.m_loginWindow=new LoginWindow(this),e&&this.m_loginWindow.displayMessage(),this.addChild(this.m_loginWindow),this.fader2.visible=!0,this.backToSaveWindow=i}finishLoggingInGold(t){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_LOGIN_GOLD){var e=hh.FinishLoggingIn(t);""!=e&&(this.m_progressDialog.SetMessage("Success!"),this.m_progressDialog.HideInXSeconds(1),this.m_goldLoginWindow.visible=!1,na.userName=e.substring(e.indexOf("user: ")+6,e.indexOf("password: ")-1),na.password=e.substring(e.indexOf("password: ")+10,e.indexOf("session: ")-1),na.sessionID=e.substr(e.indexOf("session: ")+9),this.fader.visible=!1,this.playButton.visible=!0,this.logInButton.visible=!1,this.logOutButton.visible=!0),Sa.ShowMouse();var i=new TextFormat;i.font=Sa.GLOBAL_FONT,i.color=16777215,this.userText.text="Welcome, "+("_Public"==na.userName?"Guest":na.userName),this.userText.setTextFormat(i)}}finishLoggingIn(t){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_LOGIN){var e=hh.FinishLoggingIn(t);""!=e&&(this.m_progressDialog.SetMessage("Success!"),this.m_progressDialog.HideInXSeconds(1),this.m_loginWindow&&(this.m_loginWindow.visible=!1),0==e.indexOf("premium")?Sa.premiumMode=!0:Sa.premiumMode=!1,na.userName=e.substring(e.indexOf("user: ")+6,e.indexOf("password: ")-1),na.password=e.substring(e.indexOf("password: ")+10,e.indexOf("session: ")-1),na.sessionID=e.substr(e.indexOf("session: ")+9),this.m_loadWindow&&this.m_loadWindow.visible&&(this.m_loadWindow.HideFader(),this.m_loadWindow.reportClicked(new MouseEvent(""))),this.saveLoadOpen?this.ReloadLoadWindow():this.fader2.visible=!1,this.logInButton.visible=!1,this.logOutButton.visible=!0),Sa.ShowMouse();var i=new TextFormat;i.font=Sa.GLOBAL_FONT,i.color=16777215,this.userText.text="Welcome, "+("_Public"==na.userName?"Guest":na.userName),this.userText.setTextFormat(i)}}finishAddingUser(t){if(hh.waitingForResponse&&hh.curTransactionType==hh.ACTION_ADD_USER){var e=hh.FinishAddingUser(t);""!=e&&(this.m_progressDialog.SetMessage("Success!"),this.m_progressDialog.HideInXSeconds(1),this.m_loginWindow&&(this.m_loginWindow.visible=!1),this.m_newUserWindow.visible=!1,Sa.premiumMode=!1,na.userName=e.substring(e.indexOf("user: ")+6,e.indexOf("password: ")-1),na.password=e.substring(e.indexOf("password: ")+10,e.indexOf("session: ")-1),na.sessionID=e.substr(e.indexOf("session: ")+9),this.m_loadWindow&&this.m_loadWindow.visible&&(this.m_loadWindow.HideFader(),this.m_loadWindow.reportClicked(new MouseEvent(""))),this.saveLoadOpen?this.ReloadLoadWindow():this.fader2.visible=!1,this.logInButton.visible=!1,this.logOutButton.visible=!0);var i=new TextFormat;i.font=Sa.GLOBAL_FONT,i.color=16777215,this.userText.text="Welcome, "+("_Public"==na.userName?"Guest":na.userName),this.userText.setTextFormat(i)}}ReloadLoadWindow(){this.m_loadWindow.visible=!0,this.m_loadWindow.dataType!=SaveLoadWindow.HIGH_SCORE_TYPE&&this.m_loadWindow.yourRobotsBox.selected?(this.m_loadWindow.dataType==SaveLoadWindow.LOAD_ROBOT_TYPE?(hh.GetRobotData(na.userName,na.password,!1,hh.SORT_BY_EDIT_TIME,hh.SORT_PERIOD_ALLTIME,1,"",this.finishGettingLoadRobotData),this.ShowDialog("Getting robots...")):this.m_loadWindow.dataType==SaveLoadWindow.LOAD_REPLAY_TYPE?(hh.GetReplayData(na.userName,na.password,!1,hh.SORT_BY_EDIT_TIME,hh.SORT_PERIOD_ALLTIME,1,"",this.finishGettingLoadReplayData),this.ShowDialog("Getting replays...")):(hh.GetChallengeData(na.userName,na.password,!1,hh.SORT_BY_EDIT_TIME,hh.SORT_PERIOD_ALLTIME,1,"",this.finishGettingLoadChallengeData),this.ShowDialog("Getting challenges...")),this.m_loadWindow.ShowFader(),Sa.ShowHourglass()):this.m_loadWindow.dataType==SaveLoadWindow.HIGH_SCORE_TYPE&&(hh.GetScoreData(na.userName,na.password,hh.highScoresChallenge,1==this.m_loadWindow.m_scoreTypeBox.selectedIndex,2==this.m_loadWindow.m_scoreTypeBox.selectedIndex,hh.SORT_BY_SCORE,1,"",this.finishGettingScoreData),this.ShowDialog("Getting high scores..."),this.m_loadWindow.ShowFader(),Sa.ShowHourglass())}commentButton(t,e="",i=!1){i?(hh.CommentOnRobot(e,this.finishCommenting),this.ShowDialog("Connecting to forum..."),Sa.ShowHourglass()):(this.ShowDialog3("You need to save your robot publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}finishCommenting(t){if(hh.waitingForResponse&&(hh.curTransactionType==hh.ACTION_COMMENT_ROBOT||hh.curTransactionType==hh.ACTION_COMMENT_REPLAY||hh.curTransactionType==hh.ACTION_COMMENT_CHALLENGE)){var e=hh.FinishCommenting(t);-1!=e&&(this.m_loadWindow.HideFader(),this.m_progressDialog.visible=!1,Sa.BrowserRedirect("http://incredibots.com/forums/posting.php?mode=reply&t="+e+("_Public"==na.userName?"":"&sid="+na.sessionID),!0),Sa.ShowMouse())}}finishExporting(t,e){this.m_loadWindow.visible=!1,this.m_exportDialog&&this.removeChild(this.m_exportDialog),this.m_exportDialog=new ExportWindow(this,t,e),this.fader2.visible=!0,this.addChild(this.m_exportDialog)}linkButton(t,e="",i=!1){i?this.ShowLinkDialog("     Use the link below to\n        link to this robot.","http://incredibots2.com/?robotID="+e):(this.ShowDialog3("You need to save your robot publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}embedButton(t,e="",i=!1){i?this.ShowLinkDialog("Copy the HTML below into your\n  website to embed this robot.",null,!1,e):(this.ShowDialog3("You need to save your robot publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}commentReplayButton(t,e="",i=!1){i?(hh.CommentOnReplay(e,this.finishCommenting),this.ShowDialog("Connecting to forum..."),Sa.ShowHourglass()):(this.ShowDialog3("You need to save your replay publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}linkReplayButton(t,e="",i=!1){i?this.ShowLinkDialog("     Use the link below to\n       link to this replay.","http://incredibots2.com/?replayID="+e):(this.ShowDialog3("You need to save your replay publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}embedReplayButton(t,e="",i=!1){i?this.ShowLinkDialog("Copy the HTML below into your\n  website to embed this replay.",null,!1,e,!0):(this.ShowDialog3("You need to save your replay publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}commentChallengeButton(t,e="",i=!1){i?(hh.CommentOnChallenge(e,this.finishCommenting),this.ShowDialog("Connecting to forum..."),Sa.ShowHourglass()):(this.ShowDialog3("You need to save your challenge publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}linkChallengeButton(t,e="",i=!1){i?this.ShowLinkDialog("     Use the link below to\n       link to this challenge.","http://incredibots2.com/?challengeID="+e):(this.ShowDialog3("You need to save your challenge publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}embedChallengeButton(t,e="",i=!1){i?this.ShowLinkDialog("Copy the HTML below into your\n  website to embed this challenge.",null,!0,e):(this.ShowDialog3("You need to save your challenge publicly first!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer())}ShowDialog(t){this.m_progressDialog&&this.removeChild(this.m_progressDialog),this.m_progressDialog=new DialogWindow(this,t),this.addChild(this.m_progressDialog)}ShowDialog2(t){this.m_progressDialog&&this.removeChild(this.m_progressDialog),this.m_progressDialog=new DialogWindow(this,t,!0,!0),this.addChild(this.m_progressDialog)}ShowDialog3(t){this.m_progressDialog&&this.removeChild(this.m_progressDialog),this.m_progressDialog=new DialogWindow(this,t,!0),this.addChild(this.m_progressDialog)}ShowLinkDialog(t,e,i=!1,s="",r=!1){this.m_linkDialog&&this.removeChild(this.m_linkDialog),this.m_linkDialog=new LinkWindow(this,t,e,i,s,r),this.addChild(this.m_linkDialog)}HideDialog(t){hh.nonfatalErrorOccurred=!1,this.m_loadWindow&&this.m_loadWindow.HideFader(),this.m_challengeWindow&&this.m_challengeWindow.HideFader(),this.m_newUserWindow&&this.m_newUserWindow.visible?this.m_newUserWindow.HideFader():this.m_loginWindow?this.m_loginWindow.HideFader():this.m_goldLoginWindow&&this.m_goldLoginWindow.HideFader(),this.m_progressDialog.visible=!1,this.m_loadWindow&&this.m_loadWindow.visible||this.m_newUserWindow&&this.m_newUserWindow.visible||this.m_loginWindow&&this.m_loginWindow.visible||this.m_challengeWindow&&this.m_challengeWindow.visible||(this.fader2.visible=!1)}HideLinkDialog(t){this.m_linkDialog.visible=!1,this.m_loadWindow.HideFader()}HideExportDialog(t){this.m_exportDialog.visible=!1,this.m_loadWindow&&this.m_loadWindow.visible&&this.m_loadWindow.HideFader(),this.fader2.visible=!1}HideImportDialog(t){this.m_importDialog.visible=!1,this.fader2.visible=!1}ShowImportWindow(t){this.m_importDialog&&this.removeChild(this.m_importDialog),this.m_importDialog=new Ta(this,t),this.fader2.visible=!0,this.addChild(this.m_importDialog)}ShowConfirmDialog(t,e){this.m_progressDialog&&this.removeChild(this.m_progressDialog),this.m_progressDialog=new DialogWindow(this,t,!0),this.addChild(this.m_progressDialog),this.m_progressDialog.ShowOKAndCancelButton(e)}HideConfirmDialog(t){this.m_progressDialog.visible=!1,this.m_loadWindow?this.m_loadWindow.HideFader():this.fader2.visible=!1}DialogOK(t){this.m_progressDialog.visible=!1,this.m_loadWindow&&this.m_loadWindow.visible&&this.m_loadWindow.HideFader(),this.m_challengeWindow&&this.m_challengeWindow.visible&&this.m_challengeWindow.HideFader(),this.m_loginWindow&&this.m_loginWindow.visible&&this.m_loginWindow.HideFader(),this.m_goldLoginWindow&&this.m_goldLoginWindow.visible&&this.m_goldLoginWindow.HideFader(),this.m_newUserWindow&&this.m_newUserWindow.visible&&this.m_newUserWindow.HideFader()}ConfirmDeleteRobot(t){this.m_loadWindow.deleteRobotButtonPressed(t,!0)}ConfirmDeleteReplay(t){this.m_loadWindow.deleteReplayButtonPressed(t,!0)}ConfirmDeleteChallenge(t){this.m_loadWindow.deleteChallengeButtonPressed(t,!0)}playButtonPressed(t){Sa.premiumMode&&""==na.userName||(this.playButton.visible=!1,this.fader.visible=!0,this.levelSelectGui.visible=!0,this.logoShrinking=!0,this.subscribeButton&&(this.subscribeButton.visible=!1),this.gamesButton&&(this.gamesButton.visible=!1),this.removeChild(this.enableSoundButton),this.removeChild(this.disableSoundButton),this.levelSelectGui.addChild(this.enableSoundButton),this.levelSelectGui.addChild(this.disableSoundButton))}contestButtonPressed(t){Sa.BrowserRedirect("http://incredibots.com/forums/viewtopic.php?t=119105",!0)}forumPostButtonPressed(t){Sa.BrowserRedirect("http://incredibots.com/forums/viewtopic.php?p=1269792",!0)}tankButton(t){Sa.changeControllers=!0,Sa.nextControllerType=10}shapeButton(t){Sa.changeControllers=!0,Sa.nextControllerType=11}carButton(t){Sa.changeControllers=!0,Sa.nextControllerType=12}jumpBotButton(t){Sa.changeControllers=!0,Sa.nextControllerType=13}dumpBotButton(t){Sa.changeControllers=!0,Sa.nextControllerType=14}catapultButton(t){Sa.changeControllers=!0,Sa.nextControllerType=15}homeMovieButton(t){Sa.changeControllers=!0,Sa.nextControllerType=16}rubeGoldbergButton(t){Sa.changeControllers=!0,Sa.nextControllerType=17}tutorialButton(t){this.m_tutorialWindow&&this.removeChild(this.m_tutorialWindow),this.m_tutorialWindow=new Aa(this),this.fader2.visible=!0,this.addChild(this.m_tutorialWindow)}sandboxButton(t){var e=new La(15,1,0,0,0);Ya.settings=e,Sa.changeControllers=!0,Sa.nextControllerType=0}advancedButton(t){Sa.nextControllerType=0,this.m_sandboxWindow=new Ca(this),this.fader2.visible=!0,this.addChild(this.m_sandboxWindow)}editorButton(t){Ha.challenge=null,Ha.playChallengeMode=!1,Ha.playOnlyMode=!1,Sa.nextControllerType=1,this.m_sandboxWindow=new Ca(this),this.fader2.visible=!0,this.addChild(this.m_sandboxWindow)}logout(t){this.fader2.visible=!0,this.ShowConfirmDialog("Are you sure you want to log "+na.userName+" out?",12)}ConfirmLogout(t){Sa.premiumMode=!1,na.userName="_Public",this.logInButton.visible=!0,this.logOutButton.visible=!1,this.ShowDialog3("You are now logged out."),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer(),this.fader2.visible=!0;var e=new TextFormat;e.font=Sa.GLOBAL_FONT,e.color=16777215,this.userText.text="Welcome, Guest",this.userText.setTextFormat(e)}instructionsButton(t){Sa.BrowserRedirect("http://www.incredifriends.com/",!0)}creditsButton(t){Sa.BrowserRedirect("http://www.incredifriends.com/",!0)}suggestionsButton(t){Sa.BrowserRedirect("http://www.incredifriends.com/",!0)}Update(){if(Xa.channel&&!Sa.enableSound){na.introVolume-=.01;var t=new SoundTransform(na.introVolume);Xa.channel.soundTransform=t,na.introVolume<=0&&(Xa.channel.stop(),Xa.channel=null)}var e=window.performance.now();this.HandleCamera();for(var i=0;i<this.allParts.length;i++)this.allParts[i].Update(this.world);if(this.replay&&this.replay.Update(this.frameCounter)){for(this.frameCounter=0,this.replay.syncPointIndex=0,this.replay.cameraMovementIndex=0,this.replay.keyPressIndex=0,Xa.cannonballs=new Array,i=0;i<this.allParts.length;i++)this.allParts[i].UnInit(this.world);for(i=this.allParts.length;i>=0;i--)this.allParts[i]instanceof mh&&this.allParts[i].Init(this.world);for(i=0;i<this.allParts.length;i++)(this.allParts[i]instanceof fh||this.allParts[i]instanceof Ah)&&this.allParts[i].Init(this.world)}else this.frameCounter++;this.draw.DrawWorld(this.allParts,new Array,!1,!1,!1,!0),this.sSky.Update(!1,this.hasPanned),Sa.m_fpsCounter.updatePhys(e),this.levelSelectGui.visible?(this.logoShrinking&&(this.logoShrinking=!1,this.sLogo.scale.x!=this.sLogo.scale.y?(this.sLogo.scale.x=Math.min(this.sLogo.scale.x,this.sLogo.scale.y),this.sLogo.scale.y=this.sLogo.scale.x,this.logoShrinking=!0):this.sLogo.scale.x>.6&&(this.sLogo.width-=25,this.sLogo.scale.x<.6&&(this.sLogo.scale.x=.6),this.sLogo.scale.y=this.sLogo.scale.x,this.logoShrinking=!0),this.sLogo.x<215&&(this.sLogo.x+=11.7,this.sLogo.x>215&&(this.sLogo.x=215),this.logoShrinking=!0),this.sLogo.y>10&&(this.sLogo.y-=2,this.sLogo.y<10&&(this.sLogo.y=10),this.logoShrinking=!0)),this.startHereArrow&&(this.arrowAccel=.12*(118-this.arrowX),this.arrowVel+=this.arrowAccel,this.arrowX+=this.arrowVel,this.startHereArrow.x=this.arrowX)):(this.sLogo.width=this.sLogo.texture.width*Xa.LOGO_STRETCH_WIDTHS[this.logoFrame]/100,this.sLogo.height=this.sLogo.texture.height*Xa.LOGO_STRETCH_HEIGHTS[this.logoFrame]/100,this.sLogo.x=400-this.sLogo.width/2,this.sLogo.y=92.5-this.sLogo.height/2,this.logoFrame=(this.logoFrame+1)%48),hh.errorOccurred&&(this.m_progressDialog.StopTimer(),this.m_progressDialog.SetMessage(hh.lastErrorMsg,!0),hh.errorOccurred=!1,hh.versionErrorOccurred?(hh.versionErrorOccurred=!1,this.m_progressDialog.ShowOKAndCancelButton(5)):this.m_progressDialog.ShowOKButton(),this.removeChild(this.m_progressDialog),this.addChild(this.m_progressDialog),Sa.ShowMouse())}keyInput(t,e){for(var i=0;i<this.allParts.length;i++)this.allParts[i].KeyInput(t,e,!0)}SyncReplay(t){for(var e=new Array,i=0,s=0;s<this.allParts.length;s++)this.allParts[s]instanceof mh&&!this.allParts[s].isStatic&&!Vs.ObjectInArray(this.allParts[s].GetBody(),e)&&(this.allParts[s].GetBody().SetTransform((new ps.b2Transform).SetPositionAngle(Vs.Vector(t.positions[i].x,t.positions[i].y),t.angles[i])),i++,e.push(this.allParts[s].GetBody()));for(s=0;s<Xa.cannonballs.length;s++)Xa.cannonballs[s].SetTransform((new ps.b2Transform).SetPositionAngle(t.cannonballPositions[s],0))}SyncReplay2(t,e){for(var i=this.replay.syncPoints.indexOf(t),s=new Array,r=0,n=0;n<this.allParts.length;n++)this.allParts[n]instanceof mh&&!this.allParts[n].isStatic&&!Vs.ObjectInArray(this.allParts[n].GetBody(),s)&&(this.allParts[n].GetBody().SetTransform((new ps.b2Transform).SetPositionAngle(Vs.Vector(this.replaySplineXs[0][i][r]+(this.frameCounter-t.frame)*(this.replaySplineXs[1][i][r]+(this.frameCounter-t.frame)*(this.replaySplineXs[2][i][r]+(this.frameCounter-t.frame)*this.replaySplineXs[3][i][r])),this.replaySplineYs[0][i][r]+(this.frameCounter-t.frame)*(this.replaySplineYs[1][i][r]+(this.frameCounter-t.frame)*(this.replaySplineYs[2][i][r]+(this.frameCounter-t.frame)*this.replaySplineYs[3][i][r]))),this.replaySplineAngles[0][i][r]+(this.frameCounter-t.frame)*(this.replaySplineAngles[1][i][r]+(this.frameCounter-t.frame)*(this.replaySplineAngles[2][i][r]+(this.frameCounter-t.frame)*this.replaySplineAngles[3][i][r])))),r++,s.push(this.allParts[n].GetBody()));for(n=0;n<Xa.cannonballs.length;n++)if(t.cannonballPositions.length>n){var o=e.frame-t.frame,a=(t.cannonballPositions[n].x*(e.frame-this.frameCounter)+e.cannonballPositions[n].x*(this.frameCounter-t.frame))/o,h=(t.cannonballPositions[n].y*(e.frame-this.frameCounter)+e.cannonballPositions[n].y*(this.frameCounter-t.frame))/o;Xa.cannonballs[n].SetTransform((new ps.b2Transform).SetPositionAngle(Vs.Vector(a,h),0))}else Xa.cannonballs[n].SetTransform((new ps.b2Transform).SetPositionAngle(e.cannonballPositions[n],0))}MoveCameraForReplay(t){}World2ScreenX(t){return t*this.m_physScale-this.draw.m_drawXOff}World2ScreenY(t){return t*this.m_physScale-this.draw.m_drawYOff}HandleCamera(){if(this.cameraPart){var t=this.draw.m_drawXOff,e=this.draw.m_drawYOff;this.draw.m_drawXOff=this.cameraPart.GetBody().GetWorldCenter().x*this.m_physScale-Xa.ZOOM_FOCUS_X,this.draw.m_drawYOff=this.cameraPart.GetBody().GetWorldCenter().y*this.m_physScale-Xa.ZOOM_FOCUS_Y,this.draw.m_drawYOff<-760&&(this.draw.m_drawYOff=-760),t==this.draw.m_drawXOff&&e==this.draw.m_drawYOff||(this.hasPanned=!0,this.sGround.x=this.World2ScreenX(-42.36),this.sGround.y=this.World2ScreenY(9.55))}}ComputeReplaySplines(t){for(var e=new Array,i=new Array,s=0;s<this.replay.syncPoints.length-1;s++){e.push(this.replay.syncPoints[s+1].frame-this.replay.syncPoints[s].frame);for(var r=new Array,n=0;n<this.replay.syncPoints[0].positions.length;n++)if(0==t)r.push((this.replay.syncPoints[s+1].positions[n].x-this.replay.syncPoints[s].positions[n].x)/e[s]);else if(1==t)r.push((this.replay.syncPoints[s+1].positions[n].y-this.replay.syncPoints[s].positions[n].y)/e[s]);else{var o=this.replay.syncPoints[s+1].angles[n]-this.replay.syncPoints[s].angles[n];if(Math.abs(o)>300){var a=Vs.NormalizeAngle(this.replay.syncPoints[s].angles[n]),h=Vs.NormalizeAngle(this.replay.syncPoints[s+1].angles[n]);o=Math.abs(a-h)<Math.PI?h-a:a>h?h+2*Math.PI-a:h-(a+2*Math.PI)}r.push(o/e[s])}i.push(r)}var l=new Array,c=new Array;for(l.push(0),l.push(2*(e[0]+e[1])),r=new Array,n=0;n<this.replay.syncPoints[0].positions.length;n++)r.push(0);for(c.push(r),r=new Array,n=0;n<this.replay.syncPoints[0].positions.length;n++)r.push(6*(i[1][n]-i[0][n]));for(c.push(r),s=2;s<this.replay.syncPoints.length-1;s++){for(l.push(2*(e[s-1]+e[s])-e[s-1]*e[s-1]/l[s-1]),r=new Array,n=0;n<this.replay.syncPoints[0].positions.length;n++)r.push(6*(i[s][n]-i[s-1][n])-e[s-1]*c[s-1][n]/l[s-1]);c.push(r)}var d=new Array;for(r=new Array,n=0;n<this.replay.syncPoints[0].positions.length;n++)r.push(0);for(d[this.replay.syncPoints.length-1]=r,s=this.replay.syncPoints.length-2;s>0;s--){for(r=new Array,n=0;n<this.replay.syncPoints[0].positions.length;n++)r.push((c[s][n]-e[s]*d[s+1][n])/l[s]);d[s]=r}for(r=new Array,n=0;n<this.replay.syncPoints[0].positions.length;n++)r.push(0);d[0]=r;var u=new Array,p=new Array,m=new Array,f=new Array,_=new Array;for(s=0;s<this.replay.syncPoints.length-1;s++){var g=new Array,b=new Array,y=new Array,w=new Array;for(n=0;n<this.replay.syncPoints[0].positions.length;n++)g.push(0==t?this.replay.syncPoints[s].positions[n].x:1==t?this.replay.syncPoints[s].positions[n].y:this.replay.syncPoints[s].angles[n]),o=this.replay.syncPoints[s+1].angles[n]-this.replay.syncPoints[s].angles[n],Math.abs(o)>300&&(a=Vs.NormalizeAngle(this.replay.syncPoints[s].angles[n]),h=Vs.NormalizeAngle(this.replay.syncPoints[s+1].angles[n]),o=Math.abs(a-h)<Math.PI?h-a:a>h?h+2*Math.PI-a:h-(a+2*Math.PI)),b.push(-e[s]*d[s+1][n]/6-e[s]*d[s][n]/3+(0==t?this.replay.syncPoints[s+1].positions[n].x-g[n]:1==t?this.replay.syncPoints[s+1].positions[n].y-g[n]:o)/e[s]),y.push(d[s][n]/2),w.push((d[s+1][n]-d[s][n])/(6*e[s]));p.push(g),m.push(b),f.push(y),_.push(w)}return u.push(p),u.push(m),u.push(f),u.push(_),u}}Xa.LOGO_STRETCH_WIDTHS=[101.2,101,100.7,100.5,100.2,100,99.7,99.4,99.1,98.9,98.6,98.4,98.2,98,97.8,97.7,97.5,97.5,97.4,97.4,97.4,97.5,97.6,97.8,98.1,98.3,98.6,99,99.3,99.6,100,100.3,100.7,101,101.3,101.6,101.8,102,102.1,102.2,102.3,102.2,102.2,102.1,102,101.8,101.6,101.4],Xa.LOGO_STRETCH_HEIGHTS=[97.7,97.6,97.7,97.7,97.7,97.8,97.9,98,98.2,98.4,98.7,99,99.3,99.6,100,100.3,100.6,100.9,101.2,101.5,101.7,101.8,101.9,102,102,101.9,101.8,101.7,101.5,101.3,101.1,100.8,100.6,100.3,100.1,99.8,99.5,99.3,99,98.8,98.5,98.4,98.2,98,97.9,97.8,97.8,97.7],Xa.ZOOM_FOCUS_X=440,Xa.ZOOM_FOCUS_Y=280,Xa.firstLoad=!0,Xa.introSong=sa.cIntro,Xa.cannonballs=new Array,a("7qcjp");ca=a("VYQOJ"),js=a("4Y6fG"),$s=a("kpTES");class Ya extends ja{constructor(){super(),this.controllerType="sandbox",this.sGround=new $s.Graphics,this.groundParts=new Array,this.BuildGround(!0)}BuildGround(t=!1){var e;if(this.sSky=new tr(this,Ya.settings.background,Ya.settings.backgroundR,Ya.settings.backgroundG,Ya.settings.backgroundB),Ya.settings.terrainType==La.TERRAIN_LAND?Ya.settings.size==La.SIZE_LARGE?((e=new gh(-247.7,12,495.4,12.5,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new _h(-247.4,18.25,6.25,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new _h(247.4,18.25,6.25,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e)):Ya.settings.size==La.SIZE_MEDIUM?((e=new gh(-119.5,12,239,9,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new _h(-119,16.5,4.5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new _h(119,16.5,4.5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e)):((e=new gh(-39.7,12,79.4,6,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new _h(-39.4,15,3)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new _h(39.4,15,3)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e)):Ya.settings.terrainType==La.TERRAIN_BOX&&(Ya.settings.size==La.SIZE_LARGE?((e=new gh(-300,-180,600,40,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new gh(-300,-180,40,230,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new gh(260,-180,40,230,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new gh(-300,10,600,40,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e)):Ya.settings.size==La.SIZE_MEDIUM?((e=new gh(-170,-120,340,40,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new gh(-170,-120,40,170,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new gh(130,-120,40,170,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new gh(-170,10,340,40,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e)):((e=new gh(-60,-45,120,20,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new gh(-60,-40,20,80,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new gh(40,-40,20,80,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e),(e=new gh(-60,10,120,20,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,e.isSandbox=!0,this.allParts.push(e),this.groundParts.push(e))),Ya.settings.terrainType==La.TERRAIN_LAND)if(Ya.settings.size==La.SIZE_LARGE){this.DrawGroundOutlineCircle(0,0,150),this.DrawGroundOutlineCircle(12e3,0,150);var i=new ca.Matrix;this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]],312),matrix:i}),this.sGround.drawRect(144,-6,12012,312),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]],300),matrix:i}),this.sGround.drawRect(150,0,12e3,300),this.sGround.endFill(),this.DrawGroundCircle(0,0,150),this.DrawGroundCircle(12e3,0,150),this.DrawRock(0,169,200,40),this.DrawRock(0,318,44,48),this.DrawRock(2,795,195,28),this.DrawRock(0,1110,120,40),this.DrawRock(2,1440,121,69),this.DrawRock(0,1762,68,57),this.DrawRock(1,2082,11,68),this.DrawRock(0,2395,192,51),this.DrawRock(0,2727,152,39),this.DrawRock(0,3032,74,61),this.DrawRock(1,3196,18,46),this.DrawRock(0,3527,197,28),this.DrawRock(0,3842,168,18),this.DrawRock(1,4003,108,23),this.DrawRock(2,4325,47,68),this.DrawRock(0,4641,109,50),this.DrawRock(1,4806,164,27),this.DrawRock(2,5110,138,16),this.DrawRock(2,5287,199,45),this.DrawRock(2,5447,40,68),this.DrawRock(1,5605,142,22),this.DrawRock(2,5769,173,54),this.DrawRock(0,6075,169,15),this.DrawRock(1,6401,24,41),this.DrawRock(0,6569,86,59),this.DrawRock(0,6885,74,29),this.DrawRock(2,7200,153,15),this.DrawRock(0,7354,121,32),this.DrawRock(2,7722,89,61),this.DrawRock(1,7946,66,19),this.DrawRock(2,8325,47,68),this.DrawRock(0,8641,109,50),this.DrawRock(1,8806,164,27),this.DrawRock(2,9110,138,16),this.DrawRock(2,9287,199,45),this.DrawRock(2,9447,40,68),this.DrawRock(1,9605,142,22),this.DrawRock(2,9769,173,54),this.DrawRock(0,10075,169,15),this.DrawRock(1,10401,24,41),this.DrawRock(0,10569,86,59),this.DrawRock(0,10885,74,29),this.DrawRock(2,11200,153,15),this.DrawRock(0,11354,121,32),this.DrawRock(2,11722,89,61),this.DrawRock(1,11946,66,19)}else Ya.settings.size==La.SIZE_MEDIUM?(this.DrawGroundOutlineCircle(0,0,150),this.DrawGroundOutlineCircle(8e3,0,150),i=new ca.Matrix,this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]],312),matrix:i}),this.sGround.drawRect(144,-6,8012,312),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]],300),matrix:i}),this.sGround.drawRect(150,0,8e3,300),this.sGround.endFill(),this.DrawGroundCircle(0,0,150),this.DrawGroundCircle(8e3,0,150),this.DrawRock(0,169,200,40),this.DrawRock(0,318,44,48),this.DrawRock(2,795,195,28),this.DrawRock(0,1110,120,40),this.DrawRock(2,1440,121,69),this.DrawRock(0,1762,68,57),this.DrawRock(1,2082,11,68),this.DrawRock(0,2395,192,51),this.DrawRock(0,2727,152,39),this.DrawRock(0,3032,74,61),this.DrawRock(1,3196,18,46),this.DrawRock(0,3527,197,28),this.DrawRock(0,3842,168,18),this.DrawRock(1,4003,108,23),this.DrawRock(2,4325,47,68),this.DrawRock(0,4641,109,50),this.DrawRock(1,4806,164,27),this.DrawRock(2,5110,138,16),this.DrawRock(2,5287,199,45),this.DrawRock(2,5447,40,68),this.DrawRock(1,5605,142,22),this.DrawRock(2,5769,173,54),this.DrawRock(0,6075,169,15),this.DrawRock(1,6401,24,41),this.DrawRock(0,6569,86,59),this.DrawRock(0,6885,74,29),this.DrawRock(2,7200,153,15),this.DrawRock(0,7354,121,32),this.DrawRock(2,7722,89,61),this.DrawRock(1,7946,66,19)):(this.DrawGroundOutlineCircle(0,0,150),this.DrawGroundOutlineCircle(4e3,0,150),i=new ca.Matrix,this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]],312),matrix:i}),this.sGround.drawRect(144,-6,4012,312),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]],300),matrix:i}),this.sGround.drawRect(150,0,4e3,300),this.sGround.endFill(),this.DrawGroundCircle(0,0,150),this.DrawGroundCircle(4e3,0,150),this.DrawRock(0,169,200,40),this.DrawRock(0,318,44,48),this.DrawRock(2,795,195,28),this.DrawRock(0,1110,120,40),this.DrawRock(2,1440,121,69),this.DrawRock(0,1762,68,57),this.DrawRock(1,2082,11,68),this.DrawRock(0,2395,192,51),this.DrawRock(0,2727,152,39),this.DrawRock(0,3032,74,61),this.DrawRock(1,3196,18,46),this.DrawRock(0,3527,197,28),this.DrawRock(0,3842,168,18));else Ya.settings.terrainType==La.TERRAIN_BOX&&(Ya.settings.size==La.SIZE_LARGE?(i=new ca.Matrix,this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,500,1264),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(3500,0,500,1264),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,4e3,200),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,1064,4e3,200),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,498.5,1264),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(3501.5,0,498.5,1264),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,4e3,198.5),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,1065.5,4e3,198.5),this.sGround.endFill(),this.DrawRocksForBox(4e3,1264,500,200,1.5)):Ya.settings.size==La.SIZE_MEDIUM?(i=new ca.Matrix,this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,400,615),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(1600,0,400,615),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,2e3,100),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,515,2e3,100),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,399,615),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(1601,0,399,615),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,2e3,99),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,516,2e3,99),this.sGround.endFill(),this.DrawRocksForBox(2e3,615,400,100,1)):(i=new ca.Matrix,this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,200,339),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(800,0,200,339),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,1e3,39),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,300,1e3,39),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,198,339),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(802,0,198,339),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,0,1e3,37),this.sGround.endFill(),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]]),matrix:i}),this.sGround.drawRect(0,302,1e3,37),this.sGround.endFill(),this.DrawRocksForBox(1e3,339,200,39,2)));this.addChild(this.sGround)}RefreshSandboxSettings(){for(var t=0;t<this.groundParts.length;t++)this.allParts=Vs.RemoveFromArray(this.groundParts[t],this.allParts);for(t=0;t<this.allParts.length;t++)if(this.allParts[t]instanceof js.Text)try{this.removeChild(this.allParts[t].m_textField)}catch(t){}for(this.groundParts=new Array,this.removeChild(this.sGround),this.sSky.Delete(),this.removeChild(this.m_canvas),this.removeChild(this.uneditableText),this.removeChild(this.rotatingText),this.removeChild(this.scalingText),this.removeChild(this.boxText),this.removeChild(this.horizLineText),this.removeChild(this.vertLineText),this.removeChild(this.shapeText),this.removeChild(this.m_guiPanel),this.removeChild(this.m_sidePanel),this.removeChild(this.m_guiMenu),this.removeChild(this.m_fader),t=0;t<this.m_buildAreas.length;t++)this.removeChild(this.m_buildAreas[t]),this.removeChild(this.m_badBuildAreas[t]),this.removeChild(this.m_selectedBuildAreas[t]);for(this.m_chooserWindow&&(this.removeChild(this.m_chooserWindow),this.m_chooserWindow=null),this.m_loginWindow&&(this.removeChild(this.m_loginWindow),this.m_loginWindow=null),this.m_newUserWindow&&(this.removeChild(this.m_newUserWindow),this.m_newUserWindow=null),this.m_scoreWindow&&(this.removeChild(this.m_scoreWindow),this.m_scoreWindow=null),this.m_progressDialog&&(this.removeChild(this.m_progressDialog),this.m_progressDialog=null),this.m_linkDialog&&(this.removeChild(this.m_linkDialog),this.m_linkDialog=null),this.m_tutorialDialog&&(this.removeChild(this.m_tutorialDialog),this.m_tutorialDialog=null),this.m_postReplayWindow&&(this.removeChild(this.m_postReplayWindow),this.m_postReplayWindow=null),this.m_rateDialog&&(this.removeChild(this.m_rateDialog),this.m_rateDialog=null),this.m_restrictionsDialog&&(this.removeChild(this.m_restrictionsDialog),this.m_restrictionsDialog=null),this.m_conditionsDialog&&(this.removeChild(this.m_conditionsDialog),this.m_conditionsDialog=null),this.m_sandboxWindow&&(this.removeChild(this.m_sandboxWindow),this.m_sandboxWindow=null),this.m_challengeWindow&&(this.removeChild(this.m_challengeWindow),this.m_challengeWindow=null),this.m_reportWindow&&(this.removeChild(this.m_reportWindow),this.m_reportWindow=null),this.m_loadWindow&&(this.removeChild(this.m_loadWindow),this.m_loadWindow=null),this.m_buildAreas=new Array,this.m_badBuildAreas=new Array,this.m_selectedBuildAreas=new Array,this.BuildGround(),this.addChild(this.m_canvas),this.addChild(this.uneditableText),this.addChild(this.rotatingText),this.addChild(this.scalingText),this.addChild(this.boxText),this.addChild(this.horizLineText),this.addChild(this.vertLineText),this.addChild(this.shapeText),this.addChild(this.m_guiPanel),this.addChild(this.m_sidePanel),this.addChild(this.m_guiMenu),this.addChild(this.m_fader),t=0;t<this.allParts.length;t++)this.allParts[t]instanceof wh&&(this.allParts[t].inFront?this.addChildAt(this.allParts[t].m_textField,this.getChildIndex(this.m_canvas)+1):this.addChildAt(this.allParts[t].m_textField,this.getChildIndex(this.m_canvas)));this.BuildBuildArea(),this.redrawRobot=!0,this.hasZoomed=!0}GetMinX(){return Ya.settings.size==La.SIZE_LARGE?-280:Ya.settings.size==La.SIZE_MEDIUM?-150:-50}GetMaxX(){return Ya.settings.size==La.SIZE_LARGE?280:Ya.settings.size==La.SIZE_MEDIUM?150:50}GetMinY(){return Ya.settings.size==La.SIZE_LARGE?-160:Ya.settings.size==La.SIZE_MEDIUM?-100:-30}GetMaxY(){return Ya.settings.terrainType==La.TERRAIN_BOX?Ya.settings.size==La.SIZE_SMALL?15:30:Ya.settings.size==La.SIZE_LARGE?160:Ya.settings.size==La.SIZE_MEDIUM?100:40}GetGravity(){return new ps.b2Vec2(0,Ya.settings.gravity)}DrawGroundOutlineCircle(t,e,i){var s=new ca.Matrix;s.translate(0,e),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopOutlines[Ya.settings.terrainTheme],Ya.terrainBottomOutlines[Ya.settings.terrainTheme]],2*i),matrix:s}),this.sGround.drawCircle(t+i,e+i,i+6),this.sGround.endFill()}DrawGroundCircle(t,e,i){var s=new ca.Matrix;s.translate(0,e),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture([Ya.terrainTopColours[Ya.settings.terrainTheme],Ya.terrainBottomColours[Ya.settings.terrainTheme]],2*i),matrix:s}),this.sGround.drawCircle(t+i,e+i,i),this.sGround.endFill()}DrawRock(t,e,i,s,r=6){this.sGround.lineStyle(r,Ya.rockOutlines[Ya.settings.terrainTheme]);var n=new ca.Matrix;n.translate(0,i),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture(0==t?[Ya.rock1TopColours[Ya.settings.terrainTheme],Ya.rock1BottomColours[Ya.settings.terrainTheme]]:1==t?[Ya.rock2TopColours[Ya.settings.terrainTheme],Ya.rock2BottomColours[Ya.settings.terrainTheme]]:[Ya.rock3TopColours[Ya.settings.terrainTheme],Ya.rock3BottomColours[Ya.settings.terrainTheme]],2*s),matrix:n}),this.sGround.drawCircle(e+s,i+s,s),this.sGround.endFill()}DrawRocksForBox(t,e,i,s,r){for(var n=1e3==t?60:2e3==t?200:500,o=new Array,a=0;a<n;a++){var h,l;do{if(l=!1,(h=Vs.Vector(Vs.RangedRandom(0,t),Vs.RangedRandom(0,e))).x>i-32&&h.x<t-i+2&&h.y>s-32&&h.y<e-s+2||h.x>t-32||h.y>e-32)l=!0;else for(var c=0;c<o.length;c++)if(Vs.GetDist(h.x,h.y,o[c].x,o[c].y)<32){l=!0;break}}while(l);o.push(h),this.DrawRock(Vs.RangedRandom(0,3),h.x,h.y,Vs.RangedRandom(5,15),r)}}Update(){super.Update(),this.sSky.Update(this.hasZoomed,this.hasPanned),Ya.settings.terrainType==La.TERRAIN_LAND?Ya.settings.size==La.SIZE_LARGE?(this.hasZoomed&&(this.sGround.width=this.World2ScreenX(507.7)-this.World2ScreenX(0),this.sGround.scale.y=this.sGround.scale.x),(this.hasZoomed||this.hasPanned)&&(this.sGround.x=this.World2ScreenX(-253.55),this.sGround.y=this.World2ScreenY(12.06))):Ya.settings.size==La.SIZE_MEDIUM?(this.hasZoomed&&(this.sGround.width=this.World2ScreenX(247.2)-this.World2ScreenX(0),this.sGround.scale.y=this.sGround.scale.x),(this.hasZoomed||this.hasPanned)&&(this.sGround.x=this.World2ScreenX(-123.45),this.sGround.y=this.World2ScreenY(12.06))):(this.hasZoomed&&(this.sGround.width=this.World2ScreenX(85)-this.World2ScreenX(0),this.sGround.scale.y=this.sGround.scale.x),(this.hasZoomed||this.hasPanned)&&(this.sGround.x=this.World2ScreenX(-42.36),this.sGround.y=this.World2ScreenY(12.06))):Ya.settings.terrainType==La.TERRAIN_BOX&&(Ya.settings.size==La.SIZE_LARGE?(this.hasZoomed&&(this.sGround.width=this.World2ScreenX(693)-this.World2ScreenX(0),this.sGround.scale.y=this.sGround.scale.x),(this.hasZoomed||this.hasPanned)&&(this.sGround.x=this.World2ScreenX(-346.5),this.sGround.y=this.World2ScreenY(-174.5))):Ya.settings.size==La.SIZE_MEDIUM?(this.hasZoomed&&(this.sGround.width=this.World2ScreenX(432.5)-this.World2ScreenX(0),this.sGround.scale.y=this.sGround.scale.x),(this.hasZoomed||this.hasPanned)&&(this.sGround.x=this.World2ScreenX(-216.25),this.sGround.y=this.World2ScreenY(-101.45))):(this.hasZoomed&&(this.sGround.width=this.World2ScreenX(132.85)-this.World2ScreenX(0),this.sGround.scale.y=this.sGround.scale.x),(this.hasZoomed||this.hasPanned)&&(this.sGround.x=this.World2ScreenX(-66.42),this.sGround.y=this.World2ScreenY(-30)))),["ControllerMonkeyBars","ControllerClimb","ControllerRace","ControllerSpaceship"].includes(this.constructor.name)||(this.hasPanned=!1,this.hasZoomed=!1)}GetBuildingArea(){var t=new b2AABB;return t.lowerBound.Set(-300,-200),t.upperBound.Set(300,200),t}NumBuildingAreas(){return 0}ChallengeOver(){return!1}GetScore(){return 1e4}submitButton(){this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader(),this.ShowDisabledDialog()}}Ya.terrainTopColours=["#65CD4E",Vs.HexColourString(191,131,83),Vs.HexColourString(214,189,100),Vs.HexColourString(181,197,201),Vs.HexColourString(224,238,253),Vs.HexColourString(198,196,205),Vs.HexColourString(249,172,101)],Ya.terrainBottomColours=["#5AC043",Vs.HexColourString(155,89,38),Vs.HexColourString(187,163,78),Vs.HexColourString(156,171,175),Vs.HexColourString(159,196,239),Vs.HexColourString(160,158,171),Vs.HexColourString(240,70,45)],Ya.terrainTopOutlines=["#2DA12E",Vs.HexColourString(144,99,62),Vs.HexColourString(185,163,86),Vs.HexColourString(153,166,169),Vs.HexColourString(247,251,255),Vs.HexColourString(139,138,144),Vs.HexColourString(177,102,46)],Ya.terrainBottomOutlines=["#2DA12E",Vs.HexColourString(117,67,29),Vs.HexColourString(161,141,67),Vs.HexColourString(132,144,148),Vs.HexColourString(247,251,255),Vs.HexColourString(115,114,122),Vs.HexColourString(171,59,34)],Ya.rock1TopColours=["#8EDB82",Vs.HexColourString(210,157,111),Vs.HexColourString(219,206,135),Vs.HexColourString(178,187,191),Vs.HexColourString(217,230,245),Vs.HexColourString(180,180,189),Vs.HexColourString(194,130,87)],Ya.rock1BottomColours=["#7FBF72",Vs.HexColourString(183,133,96),Vs.HexColourString(190,176,119),Vs.HexColourString(164,173,174),Vs.HexColourString(201,210,225),Vs.HexColourString(158,158,167),Vs.HexColourString(172,114,77)],Ya.rock2TopColours=["#80D970",Vs.HexColourString(206,148,90),Vs.HexColourString(215,202,116),Vs.HexColourString(169,177,182),Vs.HexColourString(204,217,236),Vs.HexColourString(170,165,179),Vs.HexColourString(197,115,66)],Ya.rock2BottomColours=["#6DBE5D",Vs.HexColourString(183,122,72),Vs.HexColourString(188,175,97),Vs.HexColourString(153,162,166),Vs.HexColourString(183,196,217),Vs.HexColourString(149,145,154),Vs.HexColourString(175,103,58)],Ya.rock3TopColours=["#70C160",Vs.HexColourString(207,150,92),Vs.HexColourString(216,203,117),Vs.HexColourString(173,182,186),Vs.HexColourString(205,217,237),Vs.HexColourString(172,168,181),Vs.HexColourString(198,121,69)],Ya.rock3BottomColours=["#63AB52",Vs.HexColourString(184,123,76),Vs.HexColourString(189,176,98),Vs.HexColourString(157,166,170),Vs.HexColourString(186,198,218),Vs.HexColourString(148,148,157),Vs.HexColourString(179,105,57)],Ya.rockOutlines=[7057498,10906450,11640920,10003624,12438487,9737117,12215357];class Ha extends Ya{constructor(){super(),this.controllerType="challenge",Ha.challenge||(Ha.challenge=new Ga),this.BuildBuildArea()}Update(){if(super.Update(),this.simStarted&&!this.paused){for(var t=0;t<Ha.challenge.winConditions.length;t++)Ha.challenge.winConditions[t].Update(this.allParts,na.cannonballs);for(t=0;t<Ha.challenge.lossConditions.length;t++)Ha.challenge.lossConditions[t].Update(this.allParts,na.cannonballs)}Ha.playChallengeMode?this.m_guiPanel.ShowEditButton():this.m_guiPanel.HideEditButton()}playButton(t=!0){if(Ha.playChallengeMode){if(!this.simStarted){for(e=0;e<Ha.challenge.winConditions.length;e++)Ha.challenge.winConditions[e].isSatisfied=!1;for(e=0;e<Ha.challenge.lossConditions.length;e++)Ha.challenge.lossConditions[e].isSatisfied=!1}super.playButton(t)}else{Ha.challenge.allParts=this.allParts.filter(this.PartIsEditable),Ha.playChallengeMode=!0;for(var e=0;e<Ha.challenge.allParts.length;e++)Ha.challenge.allParts[e].isEditable=!1;this.m_sidePanel.visible=!1,this.CheckIfPartsFit(),this.selectedParts=new Array,this.actions=new Array,this.lastAction=-1}}editButton(t=!1){if(t){this.m_fader.visible=!1,this.m_progressDialog.visible=!1,Ha.playChallengeMode=!1,this.allParts=new Array,this.RefreshSandboxSettings();for(var e=0;e<Ha.challenge.allParts.length;e++)this.allParts.push(Ha.challenge.allParts[e]),Ha.challenge.allParts[e].isEditable=!0,Ha.challenge.allParts[e]instanceof wh&&(Ha.challenge.allParts[e].inFront?this.addChildAt(Ha.challenge.allParts[e].m_textField,this.getChildIndex(this.m_canvas)+1):this.addChildAt(Ha.challenge.allParts[e].m_textField,this.getChildIndex(this.m_canvas)))}else this.m_fader.visible=!0,Ha.playOnlyMode?(this.ShowDialog3("This challenge is uneditable!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):this.ShowConfirmDialog("Are you sure you want to edit this challenge?          (Your current robot will be lost)",11)}circleButton(){Ha.playChallengeMode&&!Ha.challenge.circlesAllowed?(this.m_fader.visible=!0,this.ShowDialog3("Circles are not allowed in this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):super.circleButton()}rectButton(){Ha.playChallengeMode&&!Ha.challenge.rectanglesAllowed?(this.m_fader.visible=!0,this.ShowDialog3("Rectangles are not allowed in this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):super.rectButton()}triangleButton(){Ha.playChallengeMode&&!Ha.challenge.trianglesAllowed?(this.m_fader.visible=!0,this.ShowDialog3("Triangles are not allowed in this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):super.triangleButton()}fjButton(){Ha.playChallengeMode&&!Ha.challenge.fixedJointsAllowed?(this.m_fader.visible=!0,this.ShowDialog3("Fixed Joints are not allowed in this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):super.fjButton()}rjButton(){Ha.playChallengeMode&&!Ha.challenge.rotatingJointsAllowed?(this.m_fader.visible=!0,this.ShowDialog3("Rotating Joints are not allowed in this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):super.rjButton()}pjButton(){Ha.playChallengeMode&&!Ha.challenge.slidingJointsAllowed?(this.m_fader.visible=!0,this.ShowDialog3("Sliding Joints are not allowed in this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):super.pjButton()}thrustersButton(){Ha.playChallengeMode&&!Ha.challenge.thrustersAllowed?(this.m_fader.visible=!0,this.ShowDialog3("Thrusters are not allowed in this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):super.thrustersButton()}cannonButton(){Ha.playChallengeMode&&!Ha.challenge.cannonsAllowed?(this.m_fader.visible=!0,this.ShowDialog3("Cannons are not allowed in this challenge!"),this.m_progressDialog.ShowOKButton(),this.m_progressDialog.StopTimer()):super.cannonButton()}GetBuildingArea(){return Ha.challenge.buildAreas[0]}GetBuildingAreaNumber(t){return Ha.challenge.buildAreas[t]}NumBuildingAreas(){return Ha.challenge.buildAreas.length}DeleteBuildBoxes(t){this.m_fader.visible=!1,this.m_progressDialog.visible=!1;for(var e=0;e<this.m_buildAreas.length;e++)this.removeChild(this.m_buildAreas[e]),this.removeChild(this.m_badBuildAreas[e]),this.removeChild(this.m_selectedBuildAreas[e]);this.m_buildAreas=new Array,this.m_badBuildAreas=new Array,this.m_selectedBuildAreas=new Array,Ha.challenge.buildAreas=new Array,this.redrawBuildArea=!0}ContactAdded(t){for(var e=0;e<Ha.challenge.winConditions.length;e++)Ha.challenge.winConditions[e].ContactAdded(t,this.allParts,na.cannonballs);for(e=0;e<Ha.challenge.lossConditions.length;e++)Ha.challenge.lossConditions[e].ContactAdded(t,this.allParts,na.cannonballs)}ChallengeOver(){return this.WonChallenge()||this.LostChallenge()}WonChallenge(){if(0==Ha.challenge.winConditions.length)return!1;for(var t=0;t<Ha.challenge.lossConditions.length;t++)if(Ha.challenge.lossConditions[t].isSatisfied)return!1;if(Ha.challenge.winConditionsAnded){for(t=0;t<Ha.challenge.winConditions.length;t++)if(!Ha.challenge.winConditions[t].isSatisfied)return!1;return!0}for(t=0;t<Ha.challenge.winConditions.length;t++)if(Ha.challenge.winConditions[t].isSatisfied)return!0;return!1}LostChallenge(){for(var t=0;t<Ha.challenge.lossConditions.length;t++)if(Ha.challenge.lossConditions[t].isSatisfied&&Ha.challenge.lossConditions[t].immediate)return!0;return!1}GetScore(){return 1e4-this.frameCounter}submitButton(t){if(Sa.inIFrame)this.m_fader.visible=!0,this.ShowConfirmDialog("Redirect to incredibots2.com?",7);else{if(!curRobotEditable)return;""==curChallengeID?(this.m_scoreWindow.ShowFader(),this.ShowDialog2("You must save your challenge publicly first!")):"_Public"!=userName?(this.AddSyncPoint(),na.viewingUnsavedReplay?hh.SaveReplay(userName,password,replay,"_ScoreReplay","This replay is saved for a score",curRobotID,new Fa(this.allParts,Ya.settings),this.ChallengeOver()?this.GetScore():-1,curChallengeID,1,this.finishSavingReplay):hh.SaveReplay(userName,password,new ka(this.cameraMovements,this.syncPoints,this.keyPresses,this.frameCounter,hh.VERSION_STRING_FOR_REPLAYS),"_ScoreReplay","This replay is saved for a score",curRobotID,new Fa(this.allParts,Ya.settings),this.ChallengeOver()?this.GetScore():-1,curChallengeID,1,this.finishSavingReplay),this.m_scoreWindow.ShowFader(),this.ShowDialog("Submitting score..."),this.clickedSubmitScore=!0):(this.clickedSubmitScore=!0,this.loginButton(!0,!1))}}}Ha.playChallengeMode=!1,Ha.playOnlyMode=!1,a("7qcjp");ca=a("VYQOJ"),$s=a("kpTES");class za extends Ha{constructor(){super(),Ha.playChallengeMode=!0,Ha.playOnlyMode=!0;var t=new dh("Cond",2,1);t.minY=-10.5,t.maxY=-10.5,za.challenge.winConditions.push(t),(t=new dh("Cond",2,4)).minX=45,t.maxX=45,za.challenge.winConditions.push(t),za.challenge.cannonsAllowed=!1,za.challenge.thrustersAllowed=!1,za.challenge.mouseDragAllowed=!1,za.challenge.winConditionsAnded=!0;var e,i=new ps.b2AABB;i.lowerBound.Set(1,1),i.upperBound.Set(15,11.1),za.challenge.buildAreas.push(i),this.BuildBuildArea(),this.draw.m_drawXOff=0,this.draw.m_drawYOff=-150,(e=new gh(1,11,49.4,1,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),this.groundTex=Ks.getLinearGradientTexture(["#6BD354","#54BA3D"],255),this.removeChild(this.sGround),this.sGround=new $s.Graphics,this.sGround.beginFill(29536),this.sGround.drawCircle(266,1640,195),this.sGround.drawCircle(932,1881,195),this.sGround.endFill(),this.sGround.beginFill(29536),this.sGround.drawCircle(608,1811,258),this.sGround.endFill(),this.sGround.beginFill(3451263),this.sGround.drawCircle(266,1640,189),this.sGround.drawCircle(932,1881,189),this.sGround.endFill(),this.sGround.beginFill(3451263),this.sGround.drawCircle(608,1811,252),this.sGround.endFill(),this.sGround.beginFill(31303),this.sGround.drawCircle(1166,1853,129),this.sGround.drawCircle(1979,1721,258),this.sGround.endFill(),this.sGround.beginFill(31303),this.sGround.drawCircle(1435,1871,195),this.sGround.endFill(),this.sGround.beginFill(3583590),this.sGround.drawCircle(1166,1853,123),this.sGround.drawCircle(1979,1721,252),this.sGround.endFill(),this.sGround.beginFill(3583590),this.sGround.drawCircle(1435,1871,189),this.sGround.endFill(),this.sGround.beginFill(34348),this.sGround.drawCircle(750,1756,195),this.sGround.drawCircle(1745,1871,195),this.sGround.drawCircle(2210,1676,195),this.sGround.drawCircle(2432,1267,195),this.sGround.endFill(),this.sGround.beginFill(34348),this.sGround.drawCircle(1431,1615,337),this.sGround.endFill(),this.sGround.beginFill(4110928),this.sGround.drawCircle(750,1756,189),this.sGround.drawCircle(1745,1871,189),this.sGround.drawCircle(2210,1676,189),this.sGround.drawCircle(2432,1267,189),this.sGround.endFill(),this.sGround.beginFill(4110928),this.sGround.drawCircle(1431,1615,331),this.sGround.endFill(),this.sGround.beginFill(2990382);for(var s=0;s<29;s++)this.sGround.drawRect(1989-47.45*s,301+35.6*s,378+47.45*s,35.6);for(this.sGround.endFill(),this.sGround.beginFill(2990382),this.sGround.drawRect(-6,1333.4,2405,238.6),this.sGround.endFill(),this.sGround.beginFill(2990382),this.sGround.drawCircle(237,1560,86),this.sGround.drawCircle(2430,801,195),this.sGround.endFill(),this.sGround.beginFill(2990382),this.sGround.drawCircle(415,1600,129),this.sGround.drawCircle(2548,1005,195),this.sGround.endFill(),this.sGround.beginFill(2990382),this.sGround.drawCircle(1557,1599,144),this.sGround.drawCircle(0,1527,195),this.sGround.drawCircle(2330,1531,195),this.sGround.endFill(),this.sGround.beginFill(2990382),this.sGround.drawCircle(630,1647,195),this.sGround.drawCircle(1292,1587,195),this.sGround.drawCircle(2336,493,195),this.sGround.drawCircle(2356,1217,195),this.sGround.endFill(),this.sGround.beginFill(2990382),this.sGround.drawCircle(947,1683,258),this.sGround.drawCircle(1927,1560,337),this.sGround.endFill(),s=0;s<29;s++){var r=new ca.Matrix;r.scale(1,2e3/255),this.sGround.beginTextureFill({texture:this.groundTex,matrix:r}),(e=new gh(28-s+15,.75*(s+1)-11.5,s+7.1,.75,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),this.sGround.drawRect(1995-47.45*s,307+35.6*s,378+47.45*s,35.6)}this.sGround.drawRect(0,1339.4,2393,226.6),this.sGround.endFill(),(e=new _h(1,15.02,4.02,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new _h(50.3,-6.8,4,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),this.DrawGroundCircle(237,1560,80),this.DrawGroundCircle(2430,801,189),this.DrawGroundCircle(415,1600,123),this.DrawGroundCircle(2548,1005,189),this.DrawGroundCircle(1557,1599,138),this.DrawGroundCircle(0,1527,189),this.DrawGroundCircle(2330,1531,189),this.DrawGroundCircle(630,1647,189),this.DrawGroundCircle(1292,1587,189),this.DrawGroundCircle(2336,493,189),this.DrawGroundCircle(2356,1217,189),this.DrawGroundCircle(947,1683,252),this.DrawGroundCircle(1927,1560,331),this.DrawRock(0,166,1420,52),this.DrawRock(1,485,1482,52),this.DrawRock(2,748,1624,35),this.DrawRock(1,890,1392,86),this.DrawRock(1,1157,1489,52),this.DrawRock(2,1195,1287,35),this.DrawRock(1,1407,1031,35),this.DrawRock(1,1470,1302,86),this.DrawRock(1,1601,1017,52),this.DrawRock(1,1785,1457,52),this.DrawRock(2,1855,1231,35),this.DrawRock(0,1822,898,86),this.DrawRock(1,1985,705,52),this.DrawRock(1,2029,1069,52),this.DrawRock(1,2152,1604,52),this.DrawRock(2,2244,426,35),this.DrawRock(1,2265,669,52),this.DrawRock(0,2288,1034,137.5),this.DrawRock(1,2389,526,43.5),this.DrawRock(2,2480,681,86),this.DrawRock(0,2638,401,35),this.sGround.lineStyle(6,10324289),this.sGround.beginFill(13546582),this.sGround.drawRect(25,1336,445,56),this.sGround.drawRect(1992,303,309,56),this.sGround.endFill(),this.sGround.cacheAsBitmap=!0,this.addChild(this.sGround)}Init(t){super.Init(t),na.viewingUnsavedReplay||this.ShowTutorialDialog(107,!0)}CloseTutorialDialog(t){107==t?this.ShowTutorialDialog(66):super.CloseTutorialDialog(t)}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,276,130,e)}DrawGroundCircle(t,e,i){var s=new ca.Matrix;s.scale(1,2e3/255),this.sGround.beginTextureFill({texture:this.groundTex,matrix:s}),this.sGround.drawCircle(t,e,i),this.sGround.endFill()}DrawRock(t,e,i,s){this.sGround.lineStyle(6,7057498);var r=new ca.Matrix;r.translate(0,i),this.sGround.beginTextureFill({texture:Ks.getLinearGradientTexture(0==t?["#8EDB82","#7FBF72"]:1==t?["#80D970","#6DBE5D"]:["#70C160","#63AB52"],2*s),matrix:r}),this.sGround.drawCircle(e-270+s,i+s,s),this.sGround.endFill()}GetMinX(){return-9}GetMaxX(){return 62}GetMinY(){return-22}GetMaxY(){return 28}Update(){super.Update(),this.hasZoomed&&(this.sGround.width=this.World2ScreenX(61.9)-this.World2ScreenX(0),this.sGround.scale.y=this.sGround.scale.x),(this.hasPanned||this.hasZoomed)&&(this.sGround.x=this.World2ScreenX(1.02),this.sGround.y=this.World2ScreenY(-17.15)),this.hasPanned=!1,this.hasZoomed=!1}saveButton(){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}submitButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}class Ja extends Ha{constructor(t){if(super(),Ha.playChallengeMode=!0,Ha.playOnlyMode=!0,!na.playingReplay&&t){t.uncompress();const e=hh.ExtractChallengeFromByteArray(t);Ja.challenge=e,na.loadedParts=Ja.challenge.allParts,Ya.settings=Ja.challenge.settings}this.draw.m_drawXOff=-1e4,this.draw.m_drawYOff=50,this.m_physScale=24}Init(t){super.Init(t),na.viewingUnsavedReplay||this.ShowTutorialDialog(107,!0)}CloseTutorialDialog(t){107==t?this.ShowTutorialDialog(68):super.CloseTutorialDialog(t)}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,276,130,e)}saveButton(){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}submitButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}class qa extends Ha{constructor(t){if(super(),Ha.playChallengeMode=!0,Ha.playOnlyMode=!0,!na.playingReplay&&t){t.uncompress();const e=hh.ExtractChallengeFromByteArray(t);qa.challenge=e,na.loadedParts=qa.challenge.allParts,Ya.settings=qa.challenge.settings}this.draw.m_drawXOff=-1e4,this.draw.m_drawYOff=-1e4,na.initZoom=qa.challenge.zoomLevel,this.m_physScale=qa.challenge.zoomLevel}Init(t){super.Init(t),na.viewingUnsavedReplay||this.ShowTutorialDialog(107,!0)}CloseTutorialDialog(t){107==t?this.ShowTutorialDialog(67):super.CloseTutorialDialog(t)}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,276,130,e)}saveButton(){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}submitButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}a("7qcjp");ca=a("VYQOJ"),$s=a("kpTES");class Ka extends Ha{constructor(){super(),this.draw.m_drawXOff=0,this.draw.m_drawYOff=-190,Ha.playChallengeMode=!0,Ha.playOnlyMode=!0;var t=new dh("Cond",2,1);t.minY=11,t.maxY=11,Ha.challenge.winConditions.push(t),(t=new dh("Cond",2,4)).minX=44,t.maxX=44,Ha.challenge.winConditions.push(t),Ha.challenge.cannonsAllowed=!1,Ha.challenge.thrustersAllowed=!1,Ha.challenge.mouseDragAllowed=!1,Ha.challenge.winConditionsAnded=!0;var e,i=new ps.b2AABB;i.lowerBound.Set(1,1),i.upperBound.Set(15,11.1),Ha.challenge.buildAreas.push(i),this.BuildBuildArea(),(e=new gh(1,11,14.02,1,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new gh(40.65,11,20,1,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e);for(var s=0;s<9;s++)(e=new _h(15.52+2.955*s,5.27,.15,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e);(e=new _h(15.65,12.47,1.35,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new _h(13.95,13.54,1.8,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new _h(11.6,15.5,2.85,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new _h(40.11,12.27,1.35,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new _h(43,14.75,2.85,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(1.51,11.5,-.51,10.15,-5,10)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(-.51,10.15,-1.54,8.36,-5,10)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(-1.54,8.36,-1.51,6.08,-5,10)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(-1.51,6.08,-3.16,4.18,-5,10)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(-3.16,4.18,-2.06,1.55,-5,-2)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(-2.06,1.55,-.25,.91,-5,-2)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(-.25,.91,1.02,-.26,-5,-2)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(1.02,-.26,1.39,-2.05,-5,-2)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(1.39,-2.05,3.63,-2.58,5,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(3.63,-2.58,4.56,-2.15,5,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(4.56,-2.15,4.87,-1.35,5,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(4.87,-1.35,5.3,-1.08,5,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(5.3,-1.08,5.69,-1.45,5,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(5.69,-1.45,5.88,-2.19,5,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(5.88,-2.19,6.41,-2.83,5,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(6.41,-2.83,7.62,-2.52,10,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(7.62,-2.52,8.32,-1.53,10,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(8.32,-1.53,8.76,0,10,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(8.76,0,9.19,-.32,10,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(9.19,-.32,9.56,-1.68,10,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(9.56,-1.68,10.54,-2.17,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(10.54,-2.17,11.9,-1.41,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(11.9,-1.41,12.36,-.26,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(12.36,-.26,13.75,.57,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(13.75,.57,14.78,1.6,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(14.78,1.6,14.68,2.61,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(14.68,2.61,15.4,3.72,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(15.4,3.72,15.98,3.78,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(15.98,3.78,16.37,3.18,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(16.37,3.18,16.84,2.07,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(16.84,2.07,17.02,-.07,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(17.02,-.07,16.65,-1.88,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(16.65,-1.88,17.13,-4.02,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(17.13,-4.02,17.7,-5.09,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(17.7,-5.09,17.58,-6.9,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(17.58,-6.9,16.65,-7.9,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(16.65,-7.9,16,-9.65,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(16,-9.65,14.1,-10.95,14,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(45.5,1.95,44.57,1.43,42,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(44.57,1.43,43.81,.2,42,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(43.81,.2,43.19,.57,42,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(43.19,.57,42.1,.18,42,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(42.1,.18,41.4,-1.53,42,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(41.4,-1.53,40.74,-2.21,42,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(40.74,-2.21,40.31,-5.11,42,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(40.31,-5.11,41.28,-6.61,42,-5)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(41.28,-6.61,40.91,-7.91,44,-10)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(40.91,-7.91,40.24,-8.75,44,-10)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(40.24,-8.75,40.94,-10.15,44,-10)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new bh(40.94,-10.15,41.14,-11.15,44,-10)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(e=new gh(41.14,-31,1,20,!1)).isStatic=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),this.sGround1=new $s.Graphics,this.sGround2=new $s.Graphics,this.sGround1.lineStyle(6,8951192,1);var r=new ca.Matrix;for(this.sGround1.beginTextureFill({texture:Ks.getLinearGradientTexture(["#B6C6CA","#9AA9AD"],1500),matrix:r}),this.sGround1.moveTo(1101,1364),this.sGround1.lineTo(1085,1294),this.sGround1.lineTo(1035,1207),this.sGround1.lineTo(1011,1049),this.sGround1.lineTo(981,971),this.sGround1.lineTo(1014,845),this.sGround1.lineTo(1058,770),this.sGround1.lineTo(1050,663),this.sGround1.lineTo(1077,614),this.sGround1.lineTo(1184,544),this.sGround1.lineTo(1202,506),this.sGround1.lineTo(1269,500),this.sGround1.lineTo(1356,398),this.sGround1.lineTo(1554,347),this.sGround1.lineTo(1746,372),this.sGround1.lineTo(1926,353),this.sGround1.lineTo(2062,296),this.sGround1.lineTo(2193,305),this.sGround1.lineTo(2281,365),this.sGround1.lineTo(2310,449),this.sGround1.lineTo(2352,495),this.sGround1.lineTo(2358,583),this.sGround1.lineTo(2330,635),this.sGround1.lineTo(2307,739),this.sGround1.lineTo(2325,827),this.sGround1.lineTo(2316,931),this.sGround1.lineTo(2293,985),this.sGround1.lineTo(2274,1014),this.sGround1.lineTo(2246,1011),this.sGround1.lineTo(2211,957),this.sGround1.lineTo(2216,908),this.sGround1.lineTo(2166,858),this.sGround1.lineTo(2098,818),this.sGround1.lineTo(2076,762),this.sGround1.lineTo(2010,725),this.sGround1.lineTo(1962,749),this.sGround1.lineTo(1944,815),this.sGround1.lineTo(1923,831),this.sGround1.lineTo(1902,756),this.sGround1.lineTo(1868,708),this.sGround1.lineTo(1809,693),this.sGround1.lineTo(1783,724),this.sGround1.lineTo(1774,760),this.sGround1.lineTo(1755,778),this.sGround1.lineTo(1734,765),this.sGround1.lineTo(1719,726),this.sGround1.lineTo(1674,705),this.sGround1.lineTo(1566,731),this.sGround1.lineTo(1548,818),this.sGround1.lineTo(1486,875),this.sGround1.lineTo(1398,906),this.sGround1.lineTo(1345,1034),this.sGround1.lineTo(1425,1126),this.sGround1.lineTo(1424,1237),this.sGround1.lineTo(1473,1324),this.sGround1.lineTo(1571,1389),this.sGround1.lineTo(1300,1500),this.sGround1.lineTo(1101,1364),this.sGround1.endFill(),this.sGround2.lineStyle(6,8951192,1),this.sGround2.beginTextureFill({texture:Ks.getLinearGradientTexture(["#B6C6CA","#9AA9AD"],1500),matrix:r}),this.sGround2.moveTo(4167,1380),this.sGround2.lineTo(4293,1324),this.sGround2.lineTo(4322,1252),this.sGround2.lineTo(4374,1198),this.sGround2.lineTo(4421,1184),this.sGround2.lineTo(4344,1127),this.sGround2.lineTo(4349,1026),this.sGround2.lineTo(4293,901),this.sGround2.lineTo(4216,855),this.sGround2.lineTo(4172,769),this.sGround2.lineTo(4104,765),this.sGround2.lineTo(4068,746),this.sGround2.lineTo(3993,744),this.sGround2.lineTo(3963,726),this.sGround2.lineTo(3919,761),this.sGround2.lineTo(3871,847),this.sGround2.lineTo(3834,863),this.sGround2.lineTo(3807,818),this.sGround2.lineTo(3765,800),this.sGround2.lineTo(3732,865),this.sGround2.lineTo(3733,915),this.sGround2.lineTo(3714,925),this.sGround2.lineTo(3669,900),this.sGround2.lineTo(3632,840),this.sGround2.lineTo(3602,858),this.sGround2.lineTo(3549,839),this.sGround2.lineTo(3515,756),this.sGround2.lineTo(3483,723),this.sGround2.lineTo(3462,582),this.sGround2.lineTo(3509,509),this.sGround2.lineTo(3492,450),this.sGround2.lineTo(3459,405),this.sGround2.lineTo(3495,335),this.sGround2.lineTo(3503,291),this.sGround2.lineTo(3587,279),this.sGround2.lineTo(3778,335),this.sGround2.lineTo(3927,305),this.sGround2.lineTo(4007,350),this.sGround2.lineTo(4162,347),this.sGround2.lineTo(4217,386),this.sGround2.lineTo(4253,356),this.sGround2.lineTo(4434,437),this.sGround2.lineTo(4541,537),this.sGround2.lineTo(4625,561),this.sGround2.lineTo(4716,685),this.sGround2.lineTo(4700,760),this.sGround2.lineTo(4725,909),this.sGround2.lineTo(4767,948),this.sGround2.lineTo(4753,1109),this.sGround2.lineTo(4710,1195),this.sGround2.lineTo(4716,1304),this.sGround2.lineTo(4400,1500),this.sGround2.lineTo(4167,1380),this.sGround2.endFill(),this.sGround1.lineStyle(0,0,0),this.sGround2.lineStyle(0,0,0),this.DrawCaveRock(1324,1148,1271,1260,1370,1313),this.DrawCaveRock(1134,1040,1099,1148,1295,1130),this.DrawCaveRock(1214,770,1334,759,1315,869),this.DrawCaveRock(1141,638,1289,554,1262,667),this.DrawCaveRock(1350,514,1400,496,1412,582),this.DrawCaveRock(1472,650,1554,581,1552,653),this.DrawCaveRock(1686,506,1824,441,1787,630),this.DrawCaveRock(1900,503,1842,613,1945,667),this.DrawCaveRock(1997,352,2133,391,2072,433),this.DrawCaveRock(2121,633,2279,607,2266,694),this.DrawCaveRock(2137,764,2186,746,2198,832),this.DrawCaveRock(3559,714,3662,738,3604,780),this.DrawCaveRock(3589,429,3671,361,3668,435),this.DrawCaveRock(3674,605,3811,540,3776,729),this.DrawCaveRock(3909,493,3965,380,4010,543),this.DrawCaveRock(4058,631,4242,620,4179,688),this.DrawCaveRock(4163,497,4297,540,4261,436),this.DrawCaveRock(4406,649,4440,538,4603,629),this.DrawCaveRock(4416,866,4518,890,4459,932),this.DrawCaveRock(4514,807,4675,782,4661,870),this.DrawCaveRock(4432,1054,4579,1024,4502,1199),this.DrawCaveRock(4639,1063,4688,1045,4701,1130),this.DrawCaveRock(4362,1318,4443,1249,4440,1321),this.sGround2.beginFill(2990382),this.sGround2.drawRect(3477,1369,1083,197),this.sGround2.endFill(),this.DrawGroundOutlineCircle(1029,1353,63),this.DrawGroundOutlineCircle(2201,1377,63),this.DrawGroundOutlineCircle(3393,1368,63),this.DrawGroundOutlineCircle(4472,1323,63),this.DrawGroundOutlineCircle(1593,1665,63),this.DrawGroundOutlineCircle(1908,1644,63),this.DrawGroundOutlineCircle(2104,1416,80),this.DrawGroundOutlineCircle(4565,1278,104),this.DrawGroundOutlineCircle(4313,1530,104),this.DrawGroundOutlineCircle(3855,1491,104),this.DrawGroundOutlineCircle(3804,1578,104),this.DrawGroundOutlineCircle(4425,1380,138),this.DrawGroundOutlineCircle(3650,1403,138),this.DrawGroundOutlineCircle(3460,1413,138),this.DrawGroundOutlineCircle(1898,1374,138),this.DrawGroundOutlineCircle(1106,1326,138),this.DrawGroundOutlineCircle(1234,1410,138),this.DrawGroundOutlineCircle(1927,1449,138),this.DrawGroundOutlineCircle(1359,1383,189),this.DrawGroundOutlineCircle(1591,1390,189),this.DrawGroundOutlineCircle(3978,1446,189),(r=new ca.Matrix).translate(0,550),this.sGround1.beginTextureFill({texture:Ks.getLinearGradientTexture(["#6BD354","#54BA3D"],700),matrix:r}),this.sGround1.drawRect(1550,1391,600,100),this.sGround1.endFill(),this.sGround2.beginTextureFill({texture:Ks.getLinearGradientTexture(["#6BD354","#54BA3D"],700),matrix:r}),this.sGround2.drawRect(3483,1375,1071,185),this.sGround2.endFill(),this.DrawGroundCircle(1029,1353,63),this.DrawGroundCircle(2201,1377,63),this.DrawGroundCircle(3393,1368,63),this.DrawGroundCircle(4472,1323,63),this.DrawGroundCircle(1593,1665,63),this.DrawGroundCircle(1908,1644,63),this.DrawGroundCircle(2104,1416,80),this.DrawGroundCircle(4565,1278,104),this.DrawGroundCircle(4313,1530,104),this.DrawGroundCircle(3855,1491,104),this.DrawGroundCircle(3804,1578,104),this.DrawGroundCircle(4425,1380,138),this.DrawGroundCircle(3650,1403,138),this.DrawGroundCircle(3460,1413,138),this.DrawGroundCircle(1898,1374,138),this.DrawGroundCircle(1106,1326,138),this.DrawGroundCircle(1234,1410,138),this.DrawGroundCircle(1927,1449,138),this.DrawGroundCircle(1359,1383,189),this.DrawGroundCircle(1591,1390,189),this.DrawGroundCircle(3978,1446,189),this.DrawRock(1,1380,1488,35),this.DrawRock(2,2095,1559,35),this.DrawRock(2,3604,1484,35),this.DrawRock(1,4206,1698,35),this.DrawRock(0,4472,1446,35),this.DrawRock(2,1152,1420,43.5),this.DrawRock(0,1572,1637,43.5),this.DrawRock(2,1954,1471,43.5),this.DrawRock(1,3992,1453,43.5),this.DrawRock(1,4257,1453,52),this.DrawRock(2,3812,1511,69),this.DrawRock(1,1739,1454,69),this.sGround1.lineStyle(6,7439501,1),this.sGround1.beginFill(12898004),s=0;s<9;s++)this.sGround1.drawCircle(2257+144*s,1089,8);this.sGround1.endFill(),this.sGround1.lineStyle(6,10324289),this.sGround1.beginFill(13546582),this.sGround1.drawRect(1550,1368,683,56),this.sGround1.endFill(),this.sGround2.lineStyle(6,10324289),this.sGround2.beginFill(13546582),this.sGround2.drawRect(3510,1368,930,56),this.sGround2.endFill(),this.sGround1.cacheAsBitmap=!0,this.sGround2.cacheAsBitmap=!0,this.addChild(this.sGround1),this.addChild(this.sGround2)}Init(t){super.Init(t),na.viewingUnsavedReplay||this.ShowTutorialDialog(107,!0)}CloseTutorialDialog(t){107==t?this.ShowTutorialDialog(64):super.CloseTutorialDialog(t)}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,276,130,e)}DrawGroundOutlineCircle(t,e,i){var s=t<3e3?this.sGround1:this.sGround2;s.beginFill(2990382),s.drawCircle(t+i,e+i,i+6),s.endFill()}DrawGroundCircle(t,e,i){var s=t<3e3?this.sGround1:this.sGround2,r=new ca.Matrix;r.scale(1,700/255),r.translate(0,550),s.beginTextureFill({texture:Ks.getLinearGradientTexture(["#6BD354","#54BA3D"],255),matrix:r}),s.drawCircle(t+i,e+i,i),s.endFill()}DrawCaveRock(t,e,i,s,r,n){var o=t<3e3?this.sGround1:this.sGround2,a=new ca.Matrix;o.beginTextureFill({texture:Ks.getLinearGradientTexture(["#AAB9BD","#95A1A5"],1500),matrix:a}),o.moveTo(t,e),o.lineTo(i,s),o.lineTo(r,n),o.lineTo(t,e),o.endFill()}DrawRock(t,e,i,s){var r=e<3e3?this.sGround1:this.sGround2;r.lineStyle(6,7057498);var n=new ca.Matrix;n.translate(0,i),r.beginTextureFill({texture:Ks.getLinearGradientTexture(0==t?["#8EDB82","#7FBF72"]:1==t?["#80D970","#6DBE5D"]:["#70C160","#63AB52"],2*s),matrix:n}),r.drawCircle(e+s,i+s,s),r.endFill()}GetMinX(){return-15}GetMaxX(){return 72}GetMinY(){return-20}GetMaxY(){return 25}Update(){super.Update(),this.sSky.Update(this.hasZoomed,this.hasPanned),this.hasZoomed&&(this.sGround1.width=this.World2ScreenX(50.11)-this.World2ScreenX(0),this.sGround1.scale.y=this.sGround1.scale.x,this.sGround2.scale.x=this.sGround1.scale.x,this.sGround2.scale.y=this.sGround2.scale.x),(this.hasZoomed||this.hasPanned)&&(this.sGround1.visible=this.World2ScreenX(40)>0,this.sGround2.visible=this.World2ScreenX(38)<800,this.sGround1.visible&&(this.sGround1.x=this.World2ScreenX(-30.8),this.sGround1.y=this.World2ScreenY(-17.08)),this.sGround2.visible&&(this.sGround2.x=this.World2ScreenX(-30.8),this.sGround2.y=this.World2ScreenY(-17.08))),this.hasPanned=!1,this.hasZoomed=!1}saveButton(){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}submitButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}a("7qcjp");ca=a("VYQOJ"),$s=a("kpTES");class Za extends ja{constructor(){var t;super(),this.sSky=new tr(this,0),this.BuildBuildArea(),(t=new _h(-72.55,7.68,.6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(-44.38,7.28,.42)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(-44.9,7.82,.6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(-37.2,7.6,.6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(-37.36,7.96,.6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(-14.43,9.75,.42)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(-14.58,9.25,.42)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(-14.3,9.6,.42)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-71.2698308993082,6.94054573405073,-72.5,7.2,-63,9)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-71.2698308993082,6.94054573405073,-70.9623750960799,6.38712528823982,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-70.9623750960799,6.38712528823982,-70.7625288239816,6.32563412759416,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-70.7625288239816,6.32563412759416,-70.5626825518832,5.91056879323597,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-70.5626825518832,5.91056879323597,-70.2244811683321,5.8337048424289,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-70.2244811683321,5.8337048424289,-70.0707532667179,5.64923136049193,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-70.0707532667179,5.64923136049193,-69.5788239815527,5.55699461952345,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-69.5788239815527,5.55699461952345,-69.2867409684858,5.06506533435819,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-69.2867409684858,5.06506533435819,-69.0407763259032,4.95745580322829,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-69.0407763259032,4.95745580322829,-68.702574942352,4.41940814757879,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-68.702574942352,4.41940814757879,-68.3643735588009,4.35791698693313,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-68.3643735588009,4.35791698693313,-68.256764027671,4.12732513451192,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-68.256764027671,4.12732513451192,-68.0107993850884,4.03508839354343,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-68.0107993850884,4.03508839354343,-67.9339354342813,3.81986933128363,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-67.9339354342813,3.81986933128363,-67.5957340507302,3.60465026902383,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-67.5957340507302,3.60465026902383,-66.6426210607225,3.63539584934666,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-66.6426210607225,3.63539584934666,-66.2583013066872,4.06583397386626,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-66.2583013066872,4.06583397386626,-65.4589162182936,4.35791698693313,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-65.4589162182936,4.35791698693313,-65.3666794773251,4.5423904688701,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-65.3666794773251,4.5423904688701,-64.7056495003843,4.74223674096849,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-64.7056495003843,4.74223674096849,-64.5058032282859,4.91133743274404,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-64.5058032282859,4.91133743274404,-63.5680630284397,4.94208301306687,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-63.5680630284397,4.94208301306687,-63.1837432744043,5.28028439661799,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-63.1837432744043,5.28028439661799,-63.1376249039201,5.49550345887779,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-63.1376249039201,5.49550345887779,-62.691813989239,5.81833205226749,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-62.691813989239,5.81833205226749,-62.5842044581091,6.09504227517295,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-62.5842044581091,6.09504227517295,-62.0769023827825,6.24877017678709,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-62.0769023827825,6.24877017678709,-61.8616833205227,6.52548039969255,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-61.8616833205227,6.52548039969255,-61.4773635664873,6.70995388162952,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-61.4773635664873,6.70995388162952,-61.3082628747118,7.04815526518063,-63,6)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new gh(-61.4,6.95,12.3,.5,!1)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new gh(-49.1,6.9,4.5,.5,!1)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-49.1,6.9,-49.1,6.95,-49.6,6.95)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-14.9467432950192,10.3,-14.9467432950192,10,-14.2,9.8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-14.9467432950192,9.934178187404,-14.9467432950192,10.6407834101383,-20,11)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-14.9467432950192,10.6407834101383,-15.0386973180077,10.7329493087558,-20,11)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-15.0386973180077,10.7329493087558,-15.0386973180077,11.3166666666667,-20,11)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-15.0386973180077,11.3166666666667,-15.283908045977,11.5778033794163,-20,11)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-15.283908045977,11.5778033794163,-15.2532567049808,12.4226574500768,-20,11)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-15.2532567049808,12.4226574500768,-15.3911877394636,12.7913210445469,-20,11)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-15.3911877394636,12.7913210445469,-15.3298850574713,13.2675115207373,-20,11)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-15.3298850574713,13.2675115207373,-13.9199233716475,13.2828725038402,-10,16)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-13.9199233716475,13.2828725038402,-13.4448275862069,13.0217357910906,-10,16)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-13.4448275862069,13.0217357910906,-10.9467432950191,13.2675115207373,-10,16)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-10.9467432950191,13.2675115207373,-9.73601532567049,13.6976190476191,-10,16)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-9.73601532567049,13.6976190476191,-9.21494252873562,14.2198924731183,-10,16)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-9.21494252873562,14.2198924731183,-7.95823754789271,14.6346390168971,-10,16)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-7.95823754789271,14.6346390168971,-5.59808429118773,14.5117511520737,-10,16)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-5.59808429118773,14.5117511520737,-4.96973180076628,14.1277265745008,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-4.96973180076628,14.1277265745008,-4.1727969348659,13.9280337941628,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-4.1727969348659,13.9280337941628,-3.74367816091953,13.4825652841782,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-3.74367816091953,13.4825652841782,-2.76283524904214,13.2521505376344,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-2.76283524904214,13.2521505376344,-2.77816091954023,12.1154377880184,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-2.77816091954023,12.1154377880184,-3.1919540229885,11.5778033794163,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-3.1919540229885,11.5778033794163,-3.20727969348658,10.6254224270353,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-3.20727969348658,10.6254224270353,-3.42183908045976,10.1799539170507,-3,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-3.42183908045976,10.1799539170507,-3.39118773946359,9.61159754224271,-3,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-3.39118773946359,9.61159754224271,-3.25325670498084,9.31973886328725,-3,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-3.25325670498084,9.31973886328725,-3.16130268199232,9.2736559139785,-3,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-3.16130268199232,9.2736559139785,-3.03869731800766,9.15076804915515,-3,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-3.03869731800766,9.15076804915515,-2.76283524904214,9.13540706605223,-3,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-2.76283524904214,9.13540706605223,-2.54827586206896,9.28901689708142,-3,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-2.54827586206896,9.28901689708142,-2.5022988505747,9.64231950844854,-3,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-2.5022988505747,9.64231950844854,-2.51762452107279,9.91881720430108,-3,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-2.51762452107279,9.91881720430108,-2.34904214559387,9.98026113671275,-3,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-2.34904214559387,9.98026113671275,-.847126436781608,9.98026113671275,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-.847126436781608,9.98026113671275,-.647892720306501,10.0724270353303,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-.647892720306501,10.0724270353303,1.55900383141763,10.1031490015361,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(1.55900383141763,10.1031490015361,1.85019157088124,10.0263440860215,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(1.85019157088124,10.0263440860215,3.93448275862069,10.1492319508449,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(3.93448275862069,10.1492319508449,5.63563218390806,10.0109831029186,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(5.63563218390806,10.0109831029186,7.16819923371648,10.0417050691244,0,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(40.75,9.19612903225807,41.1637931034483,8.28983102918587,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(41.1637931034483,8.28983102918587,41.7001915708812,8.02869431643626,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(41.7001915708812,8.02869431643626,41.9760536398467,6.96878648233487,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(41.9760536398467,6.96878648233487,42.6044061302682,6.56940092165899,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(42.6044061302682,6.56940092165899,43.5852490421456,6.29290322580645,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(43.5852490421456,6.29290322580645,44.0756704980843,5.54021505376344,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(44.0756704980843,5.54021505376344,46.2212643678161,5.43268817204301,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(46.2212643678161,5.43268817204301,46.3745210727969,5.23299539170507,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(46.3745210727969,5.23299539170507,46.6350574712644,5.18691244239632,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(46.6350574712644,5.18691244239632,46.9109195402299,4.86433179723502,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(46.9109195402299,4.86433179723502,49.6388888888889,4.78752688172043,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(49.6388888888889,4.78752688172043,49.9454022988506,4.94113671274962,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(49.9454022988506,4.94113671274962,50.6197318007663,5.11010752688172,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(50.6197318007663,5.11010752688172,51.3247126436782,4.81824884792627,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(51.3247126436782,4.81824884792627,51.6159003831418,4.83360983102919,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(51.6159003831418,4.83360983102919,51.8611111111111,4.38814132104455,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(51.8611111111111,4.38814132104455,52.0756704980843,4.2652534562212,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(52.0756704980843,4.2652534562212,52.2749042145594,3.92731182795699,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(52.2749042145594,3.92731182795699,52.6120689655172,3.86586789554532,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(52.6120689655172,3.86586789554532,52.8266283524904,3.62009216589862,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(52.8266283524904,3.62009216589862,53.2404214559387,3.52792626728111,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(53.2404214559387,3.52792626728111,53.9760536398468,3.86586789554532,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(53.9760536398468,3.86586789554532,54.7270114942529,3.91195084485407,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(54.7270114942529,3.91195084485407,54.8955938697318,4.03483870967742,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(54.8955938697318,4.03483870967742,55.5239463601532,4.0194777265745,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(55.5239463601532,4.0194777265745,55.6159003831418,4.12700460829493,52,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(55.6159003831418,4.12700460829493,55.8304597701149,4.00411674347158,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(55.8304597701149,4.00411674347158,56.2749042145594,3.95803379416283,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(56.2749042145594,3.95803379416283,56.5967432950192,3.40503840245776,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(56.5967432950192,3.40503840245776,57.1484674329502,2.92884792626728,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(57.1484674329502,2.92884792626728,57.3783524904215,2.5294623655914,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(57.3783524904215,2.5294623655914,58.0526819923372,2.45265745007681,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(58.0526819923372,2.45265745007681,58.7116858237548,2.65235023041475,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(58.7116858237548,2.65235023041475,58.8189655172414,2.80596006144393,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(58.8189655172414,2.80596006144393,59.2174329501916,2.88276497695853,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(59.2174329501916,2.88276497695853,59.4932950191571,3.00565284178187,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(59.4932950191571,3.00565284178187,60.2289272030651,3.12854070660522,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(60.2289272030651,3.12854070660522,60.5967432950192,3.32823348694317,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(60.5967432950192,3.32823348694317,61.3936781609195,3.45112135176651,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(61.3936781609195,3.45112135176651,61.9913793103448,3.68153609831029,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(61.9913793103448,3.68153609831029,62.7576628352491,3.80442396313364,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(62.7576628352491,3.80442396313364,62.9875478927203,4.00411674347158,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(62.9875478927203,4.00411674347158,63.3247126436782,4.11164362519201,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(63.3247126436782,4.11164362519201,63.845785440613,4.12700460829493,60,10)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(63.845785440613,4.12700460829493,64.0143678160919,3.86586789554532,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(64.0143678160919,3.86586789554532,64.2902298850575,3.77370199692781,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(64.2902298850575,3.77370199692781,64.4894636015326,3.48184331797235,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(64.4894636015326,3.48184331797235,64.7193486590038,3.45112135176651,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(64.7193486590038,3.45112135176651,64.8419540229885,3.26678955453149,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(64.8419540229885,3.26678955453149,65.1331417624521,3.15926267281106,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(65.1331417624521,3.15926267281106,65.5622605363985,3.12854070660522,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(65.5622605363985,3.12854070660522,65.8687739463602,3.25142857142857,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(65.8687739463602,3.25142857142857,67.6465517241379,3.25142857142857,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(67.6465517241379,3.25142857142857,67.9990421455939,2.85204301075269,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(67.9990421455939,2.85204301075269,68.3055555555555,2.74451612903226,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(68.3055555555555,2.74451612903226,68.5047892720307,2.40657450076805,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(68.5047892720307,2.40657450076805,68.7193486590038,2.31440860215054,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(68.7193486590038,2.31440860215054,68.8419540229885,2.06863287250384,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(68.8419540229885,2.06863287250384,69.301724137931,1.82285714285715,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(69.301724137931,1.82285714285715,69.8994252873563,1.82285714285715,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(69.8994252873563,1.82285714285715,70.0526819923372,1.91502304147465,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(70.0526819923372,1.91502304147465,70.6503831417625,1.89966205837174,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(70.6503831417625,1.89966205837174,70.9109195402299,2.08399385560676,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(70.9109195402299,2.08399385560676,71.1408045977012,1.96110599078341,68,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(71.1408045977012,1.96110599078341,71.5392720306514,1.85357910906298,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(71.5392720306514,1.85357910906298,72.6886973180077,1.88430107526882,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(72.6886973180077,1.88430107526882,72.9645593869732,1.93038402457757,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(72.9645593869732,1.93038402457757,73.1637931034483,1.53099846390169,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(73.1637931034483,1.53099846390169,73.47030651341,1.33130568356375,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(73.47030651341,1.33130568356375,74.1139846743295,-.174070660522272,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(74.1139846743295,-.174070660522272,74.9722222222222,-.972841781874038,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(74.9722222222222,-.972841781874038,75.4013409961686,-1.01892473118279,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(75.4013409961686,-1.01892473118279,75.7844827586207,-1.6026420890937,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(75.7844827586207,-1.6026420890937,76.5814176245211,-2.0941935483871,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(76.5814176245211,-2.0941935483871,76.8879310344828,-2.23244239631336,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(76.8879310344828,-2.23244239631336,77.0105363984674,-2.72399385560676,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(77.0105363984674,-2.72399385560676,76.9185823754789,-3.06193548387097,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(76.9185823754789,-3.06193548387097,77.301724137931,-3.36915514592934,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(77.301724137931,-3.36915514592934,78.0526819923372,-3.44596006144393,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(78.0526819923372,-3.44596006144393,78.6044061302682,-3.7531797235023,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(78.6044061302682,-3.7531797235023,79.5699233716475,-3.72245775729647,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(79.5699233716475,-3.72245775729647,79.7538314176245,-3.53812596006144,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(79.7538314176245,-3.53812596006144,80.382183908046,-3.39987711213518,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(80.382183908046,-3.39987711213518,80.8419540229885,-3.03121351766513,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(80.8419540229885,-3.03121351766513,81.4703065134099,-2.63182795698925,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(81.4703065134099,-2.63182795698925,81.7461685823755,-1.49511520737327,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(81.7461685823755,-1.49511520737327,81.5316091954023,-1.09572964669739,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(81.5316091954023,-1.09572964669739,81.8074712643678,.256036866359448,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(81.8074712643678,.256036866359448,81.654214559387,.809032258064516,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(81.654214559387,.809032258064516,81.8994252873563,1.71533026113671,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(81.8994252873563,1.71533026113671,82.3132183908046,2.00718894009217,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(82.3132183908046,2.00718894009217,82.4818007662835,2.39121351766513,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(82.4818007662835,2.39121351766513,83.6465517241379,2.6984331797235,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(83.6465517241379,2.6984331797235,84.2749042145594,3.1899846390169,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(84.2749042145594,3.1899846390169,84.4741379310345,4.29597542242704,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(84.4741379310345,4.29597542242704,84.8266283524904,4.74144393241168,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(84.8266283524904,4.74144393241168,85.0105363984674,5.89351766513057,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(85.0105363984674,5.89351766513057,86.3285440613027,6.47723502304148,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(86.3285440613027,6.47723502304148,86.6197318007663,7.72147465437788,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(86.6197318007663,7.72147465437788,87.0028735632184,7.92116743471582,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(87.0028735632184,7.92116743471582,87.294061302682,9.31901689708142,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(87.294061302682,9.31901689708142,88.3975095785441,9.8873732718894,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(88.3975095785441,9.8873732718894,88.7653256704981,11.7306912442396,75,8)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(7,10.018509984639,10.8003831417625,10.0109831029186,20,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(10.8003831417625,10.0109831029186,13.804214559387,10.118509984639,20,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(13.804214559387,10.118509984639,14.5858237547893,9.96490015360983,20,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(14.5858237547893,9.96490015360983,18.2026819923372,10.0109831029186,20,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(18.2026819923372,10.0109831029186,18.9229885057471,9.96490015360983,20,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(18.9229885057471,9.96490015360983,19.7352490421456,9.84201228878648,20,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(19.7352490421456,9.84201228878648,23.1375478927203,9.84201228878648,20,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(23.1375478927203,9.84201228878648,25.2371647509579,9.38118279569893,20,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(25.2371647509579,9.38118279569893,36.9459770114943,9.38118279569893,40,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(36.9459770114943,9.38118279569893,37.1911877394636,9.21221198156682,40,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(37.1911877394636,9.21221198156682,39.9344827586207,9.18149001536099,40,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(39.9344827586207,9.18149001536099,41.2065134099617,9.24293394777266,40,15)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-37.291570881226,7.07703533026114,-32.7704980842912,7.03095238095238,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-32.7704980842912,7.03095238095238,-30.9773946360153,7.01559139784946,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-30.9773946360153,7.01559139784946,-30.8241379310345,7.01559139784946,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-30.8241379310345,7.01559139784946,-30.3950191570881,7.03095238095238,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-30.3950191570881,7.03095238095238,-30.0272030651341,7.07703533026114,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-30.0272030651341,7.07703533026114,-29.5214559386973,7.13847926267281,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-29.5214559386973,7.13847926267281,-29.0463601532567,7.19992319508449,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-29.0463601532567,7.19992319508449,-28.0655172413793,7.36889400921659,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-28.0655172413793,7.36889400921659,-26.8088122605364,7.56858678955454,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-26.8088122605364,7.56858678955454,-25.8586206896552,7.72219662058372,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-25.8586206896552,7.72219662058372,-25.0003831417624,7.8758064516129,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-25.0003831417624,7.8758064516129,-24.0195402298851,8.02941628264209,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-24.0195402298851,8.02941628264209,-23.651724137931,8.07549923195085,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-23.651724137931,8.07549923195085,-23.0080459770115,8.1215821812596,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-23.0080459770115,8.1215821812596,-22.5329501915709,8.18302611367128,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-22.5329501915709,8.18302611367128,-21.0003831417624,8.41344086021506,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-21.0003831417624,8.41344086021506,-19.6363984674329,8.62849462365592,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-19.6363984674329,8.62849462365592,-18.3643678160919,8.79746543778802,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-18.3643678160919,8.79746543778802,-16.9697318007663,8.96643625192012,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-16.9697318007663,8.96643625192012,-16.1727969348659,9.04324116743472,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-16.1727969348659,9.04324116743472,-15.7436781609195,9.05860215053764,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-15.7436781609195,9.05860215053764,-15.3452107279693,9.05860215053764,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-15.3452107279693,9.05860215053764,-15.1306513409962,9.0278801843318,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new bh(-15.1306513409962,9.0278801843318,-14.8854406130268,8.96643625192012,-20,14)).isStatic=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),this.sGround1=new $s.Graphics,this.sGround2=new $s.Graphics,this.sGround3=new $s.Graphics,this.sGround2.beginFill(29536),this.sGround3.beginFill(29536),this.sGround3.drawCircle(8261,2170,258),this.sGround2.drawCircle(6148,2133,258),this.sGround3.drawCircle(9235,2334,337),this.sGround3.drawCircle(7306,2182,384),this.sGround2.endFill(),this.sGround3.endFill(),this.sGround2.beginFill(3451263),this.sGround3.beginFill(3451263),this.sGround3.drawCircle(8261,2170,252),this.sGround2.drawCircle(6148,2133,252),this.sGround3.drawCircle(9235,2334,331),this.sGround3.drawCircle(7306,2182,378),this.sGround2.endFill(),this.sGround3.endFill(),this.sGround1.beginFill(31303),this.sGround3.beginFill(31303),this.sGround3.drawCircle(9165,2259,150),this.sGround1.drawCircle(1200,1707,150),this.sGround3.drawCircle(6844,2126,207),this.sGround1.endFill(),this.sGround3.endFill(),this.sGround3.beginFill(31303),this.sGround3.drawCircle(6600,1993,126),this.sGround3.drawCircle(8931,2180,207),this.sGround3.endFill(),this.sGround1.beginFill(3583590),this.sGround3.beginFill(3583590),this.sGround3.drawCircle(9165,2259,144),this.sGround1.drawCircle(1200,1707,144),this.sGround3.drawCircle(6844,2126,201),this.sGround1.endFill(),this.sGround3.endFill(),this.sGround3.beginFill(3583590),this.sGround3.drawCircle(6600,1993,120),this.sGround3.drawCircle(8931,2180,201),this.sGround3.endFill(),this.sGround1.beginFill(34348),this.sGround2.beginFill(34348),this.sGround3.beginFill(34348),this.sGround1.drawCircle(1492,1732,167),this.sGround2.drawCircle(5923,2146,167),this.sGround3.drawCircle(6808,1907,226),this.sGround3.drawCircle(9580,2158,281),this.sGround1.endFill(),this.sGround2.endFill(),this.sGround3.endFill(),this.sGround2.beginFill(34348),this.sGround3.beginFill(34348),this.sGround3.drawCircle(7217,1978,337),this.sGround2.drawCircle(5549,2088,337),this.sGround2.endFill(),this.sGround3.endFill(),this.sGround1.beginFill(4110928),this.sGround2.beginFill(4110928),this.sGround3.beginFill(4110928),this.sGround1.drawCircle(1492,1732,161),this.sGround2.drawCircle(5923,2146,161),this.sGround3.drawCircle(6808,1907,220),this.sGround3.drawCircle(9580,2158,275),this.sGround1.endFill(),this.sGround2.endFill(),this.sGround3.endFill(),this.sGround2.beginFill(4110928),this.sGround3.beginFill(4110928),this.sGround3.drawCircle(7217,1978,331),this.sGround2.drawCircle(5549,2088,331),this.sGround2.endFill(),this.sGround3.endFill(),this.DrawGroundOutlineCircle(303,1500,26.5),this.DrawGroundOutlineCircle(2105,1450,26.5),this.DrawGroundOutlineCircle(2059,1474,38),this.DrawGroundOutlineCircle(253,1464,38),this.DrawGroundOutlineCircle(333,1520,38),this.DrawGroundOutlineCircle(385,1511,63),this.DrawGroundOutlineCircle(1755,1579,63),this.DrawGroundOutlineCircle(1951,1483,63),this.DrawGroundOutlineCircle(1855,1522,80),this.DrawGroundOutlineCircle(1478,1610,80),this.DrawGroundOutlineCircle(433,1554,80),this.DrawGroundOutlineCircle(549,1531,104),this.DrawGroundOutlineCircle(1313,1561,104),this.DrawGroundOutlineCircle(1599,1557,104),this.DrawGroundOutlineCircle(5649,1932,104),this.DrawGroundOutlineCircle(6330,1780,104),this.DrawGroundOutlineCircle(6152,1764,123),this.DrawGroundOutlineCircle(682,1600,123),this.DrawGroundOutlineCircle(8155,1952,123),this.DrawGroundOutlineCircle(10035,1896,123),this.DrawGroundOutlineCircle(8859,2033,138),this.DrawGroundOutlineCircle(6479,1654,138),this.DrawGroundOutlineCircle(6708,1655,161),this.DrawGroundOutlineCircle(6881,1750,161),this.DrawGroundOutlineCircle(1064,1537,161),this.DrawGroundOutlineCircle(7128,1761,189),this.DrawGroundOutlineCircle(10198,1761,189),this.DrawGroundOutlineCircle(9291,1750,220),this.DrawGroundOutlineCircle(5318,1768,220),this.DrawGroundOutlineCircle(800,1472,220),this.DrawGroundOutlineCircle(5729,1667,252),this.DrawGroundOutlineCircle(7376,1715,252),this.DrawGroundOutlineCircle(8932,1751,252),this.DrawGroundOutlineCircle(7698,1589,303),this.DrawGroundOutlineCircle(4900,1662,331),this.DrawGroundOutlineCircle(9532,1590,331),this.DrawGroundOutlineCircle(8294,1614,378),this.sGround1.lineStyle(6,2990382,1),this.sGround2.lineStyle(6,2990382,1),this.sGround3.lineStyle(6,2990382,1);var e=new ca.Matrix;e.translate(0,850),this.sGround1.beginTextureFill({texture:Ks.getLinearGradientTexture(["#6BD354","#54BA3D"],1500),matrix:e}),this.sGround1.moveTo(290,1464),this.sGround1.lineTo(325,1465),this.sGround1.lineTo(337,1459),this.sGround1.lineTo(359,1457),this.sGround1.lineTo(373,1450),this.sGround1.lineTo(429,1447),this.sGround1.lineTo(487,1443),this.sGround1.lineTo(747,1448),this.sGround1.lineTo(839,1450),this.sGround1.lineTo(1026,1450),this.sGround1.lineTo(1026,1453),this.sGround1.lineTo(1785,1453),this.sGround1.lineTo(1822,1450),this.sGround1.lineTo(2133,1450),this.sGround1.lineTo(2133,1482),this.sGround1.lineTo(2029,1539),this.sGround1.lineTo(1850,1631),this.sGround1.lineTo(1354,1725),this.sGround1.lineTo(709,1690),this.sGround1.lineTo(290,1511),this.sGround1.lineTo(290,1464),this.sGround1.endFill(),this.sGround2.beginTextureFill({texture:Ks.getLinearGradientTexture(["#6BD354","#54BA3D"],1500),matrix:e}),this.sGround2.moveTo(5370,1658),this.sGround2.lineTo(5605,1651),this.sGround2.lineTo(5801,1658),this.sGround2.lineTo(5852,1648),this.sGround2.lineTo(6088,1651),this.sGround2.lineTo(6135,1648),this.sGround2.lineTo(6188,1640),this.sGround2.lineTo(6410,1640),this.sGround2.lineStyle(0,0,0),this.sGround2.lineTo(6410,1900),this.sGround2.lineTo(5370,1900),this.sGround2.lineTo(5370,1658),this.sGround2.endFill(),this.sGround3.beginTextureFill({texture:Ks.getLinearGradientTexture(["#6BD354","#54BA3D"],1500),matrix:e}),this.sGround3.moveTo(6410,1640),this.sGround3.lineTo(6547,1610),this.sGround3.lineTo(7311,1610),this.sGround3.lineTo(7327,1599),this.sGround3.lineTo(7506,1597),this.sGround3.lineTo(7589,1601),this.sGround3.lineTo(7988,1603),this.sGround3.lineTo(8665,1606),this.sGround3.lineTo(9291,1610),this.sGround3.lineTo(10126,1614),this.sGround3.lineTo(10377,1869),this.sGround3.lineTo(10278,1989),this.sGround3.lineTo(10098,2002),this.sGround3.lineTo(8438,2101),this.sGround3.lineTo(6646,1803),this.sGround3.lineTo(6394,1850),this.sGround3.lineTo(6410,1850),this.sGround3.lineTo(6410,1640),this.sGround3.endFill(),this.sGround1.lineStyle(0,0,0),this.sGround3.lineStyle(0,0,0),this.sGround2.beginTextureFill({texture:Ks.getLinearGradientTexture(["#6BD354","#54BA3D"],1500),matrix:e}),this.sGround3.drawRect(6250,1643,200,327),this.sGround3.endFill(),this.DrawGroundCircle(303,1500,26.5),this.DrawGroundCircle(2105,1450,26.5),this.DrawGroundCircle(2059,1474,38),this.DrawGroundCircle(253,1464,38),this.DrawGroundCircle(333,1520,38),this.DrawGroundCircle(385,1511,63),this.DrawGroundCircle(1755,1579,63),this.DrawGroundCircle(1951,1483,63),this.DrawGroundCircle(1855,1522,80),this.DrawGroundCircle(1478,1610,80),this.DrawGroundCircle(433,1554,80),this.DrawGroundCircle(549,1531,104),this.DrawGroundCircle(1313,1561,104),this.DrawGroundCircle(1599,1557,104),this.DrawGroundCircle(5649,1932,104),this.DrawGroundCircle(6330,1780,104),this.DrawGroundCircle(6152,1764,123),this.DrawGroundCircle(682,1600,123),this.DrawGroundCircle(8155,1952,123),this.DrawGroundCircle(10035,1896,123),this.DrawGroundCircle(8859,2033,138),this.DrawGroundCircle(6479,1654,138),this.DrawGroundCircle(6708,1655,161),this.DrawGroundCircle(6881,1750,161),this.DrawGroundCircle(1064,1537,161),this.DrawGroundCircle(7128,1761,189),this.DrawGroundCircle(10198,1761,189),this.DrawGroundCircle(9291,1750,220),this.DrawGroundCircle(5318,1768,220),this.DrawGroundCircle(800,1472,220),this.DrawGroundCircle(5729,1667,252),this.DrawGroundCircle(7376,1715,252),this.DrawGroundCircle(8932,1751,252),this.DrawGroundCircle(7698,1589,303),this.DrawGroundCircle(4900,1662,331),this.DrawGroundCircle(9532,1590,331),this.DrawGroundCircle(8294,1614,378),this.sGround1.lineStyle(6,8951192,1),this.sGround2.lineStyle(6,8951192,1),this.sGround3.lineStyle(6,8951192,1),(e=new ca.Matrix).translate(0,750),this.sGround1.beginTextureFill({texture:Ks.getLinearGradientTexture(["#B6C6CA","#9AA9AD"],2050),matrix:e}),this.sGround1.moveTo(376,1450),this.sGround1.lineTo(396,1414),this.sGround1.lineTo(409,1410),this.sGround1.lineTo(422,1383),this.sGround1.lineTo(444,1378),this.sGround1.lineTo(454,1366),this.sGround1.lineTo(486,1360),this.sGround1.lineTo(505,1328),this.sGround1.lineTo(521,1321),this.sGround1.lineTo(543,1286),this.sGround1.lineTo(565,1282),this.sGround1.lineTo(572,1267),this.sGround1.lineTo(588,1261),this.sGround1.lineTo(593,1247),this.sGround1.lineTo(615,1233),this.sGround1.lineTo(677,1235),this.sGround1.lineTo(702,1263),this.sGround1.lineTo(754,1282),this.sGround1.lineTo(760,1294),this.sGround1.lineTo(803,1307),this.sGround1.lineTo(816,1318),this.sGround1.lineTo(877,1320),this.sGround1.lineTo(902,1342),this.sGround1.lineTo(905,1356),this.sGround1.lineTo(934,1377),this.sGround1.lineTo(941,1395),this.sGround1.lineTo(974,1405),this.sGround1.lineTo(988,1423),this.sGround1.lineTo(1013,1435),this.sGround1.lineTo(1024,1457),this.sGround1.lineTo(1018,1463),this.sGround1.lineTo(870,1464),this.sGround1.lineTo(847,1497),this.sGround1.lineTo(751,1498),this.sGround1.lineTo(741,1513),this.sGround1.lineTo(725,1515),this.sGround1.lineTo(710,1540),this.sGround1.lineTo(615,1545),this.sGround1.lineTo(579,1520),this.sGround1.lineTo(548,1520),this.sGround1.lineTo(522,1499),this.sGround1.lineTo(422,1497),this.sGround1.lineTo(396,1473),this.sGround1.lineTo(377,1464),this.sGround1.lineTo(376,1450),this.sGround1.endFill(),this.sGround2.beginTextureFill({texture:Ks.getLinearGradientTexture(["#B6C6CA","#9AA9AD"],2050),matrix:e}),this.sGround2.moveTo(2503,1544),this.sGround2.lineTo(2675,1498),this.sGround2.lineTo(3050,1522),this.sGround2.lineTo(3811,1615),this.sGround2.lineTo(3925,1646),this.sGround2.lineTo(3925,1692),this.sGround2.lineTo(3919,1698),this.sGround2.lineTo(3919,1736),this.sGround2.lineTo(3903,1753),this.sGround2.lineTo(3905,1808),this.sGround2.lineTo(3896,1832),this.sGround2.lineTo(3900,1863),this.sGround2.lineTo(3992,1864),this.sGround2.lineTo(4023,1847),this.sGround2.lineTo(4186,1863),this.sGround2.lineTo(4265,1891),this.sGround2.lineTo(4299,1925),this.sGround2.lineTo(4381,1952),this.sGround2.lineTo(4535,1944),this.sGround2.lineTo(4576,1919),this.sGround2.lineTo(4628,1906),this.sGround2.lineTo(4656,1877),this.sGround2.lineTo(4720,1862),this.sGround2.lineTo(4719,1788),this.sGround2.lineTo(4692,1753),this.sGround2.lineTo(4691,1691),this.sGround2.lineTo(4677,1662),this.sGround2.lineTo(4679,1625),this.sGround2.lineTo(4688,1606),this.sGround2.lineTo(4694,1603),this.sGround2.lineTo(4702,1595),this.sGround2.lineTo(4720,1594),this.sGround2.lineTo(4734,1604),this.sGround2.lineTo(4737,1627),this.sGround2.lineTo(4736,1645),this.sGround2.lineTo(4747,1649),this.sGround2.lineTo(4845,1649),this.sGround2.lineTo(4858,1655),this.sGround2.lineTo(5002,1657),this.sGround2.lineTo(5021,1652),this.sGround2.lineTo(5157,1660),this.sGround2.lineTo(5268,1651),this.sGround2.lineTo(5368,1653),this.sGround2.lineTo(5392,1674),this.sGround2.lineTo(5390,1722),this.sGround2.lineTo(5364,1745),this.sGround2.lineTo(5357,1836),this.sGround2.lineTo(5296,1860),this.sGround2.lineTo(5279,1911),this.sGround2.lineTo(5251,1924),this.sGround2.lineTo(5215,1993),this.sGround2.lineTo(5172,2010),this.sGround2.lineTo(5148,2066),this.sGround2.lineTo(5106,2084),this.sGround2.lineTo(5040,2179),this.sGround2.lineTo(4985,2197),this.sGround2.lineTo(4934,2287),this.sGround2.lineTo(4857,2342),this.sGround2.lineTo(4806,2314),this.sGround2.lineTo(4712,2339),this.sGround2.lineTo(4682,2393),this.sGround2.lineTo(4659,2400),this.sGround2.lineTo(4616,2480),this.sGround2.lineTo(4568,2501),this.sGround2.lineTo(4520,2563),this.sGround2.lineTo(4449,2587),this.sGround2.lineTo(4424,2553),this.sGround2.lineTo(4343,2476),this.sGround2.lineTo(4334,2432),this.sGround2.lineTo(4281,2394),this.sGround2.lineTo(4263,2361),this.sGround2.lineTo(4216,2368),this.sGround2.lineTo(4164,2427),this.sGround2.lineTo(4168,2448),this.sGround2.lineTo(4143,2477),this.sGround2.lineTo(4177,2532),this.sGround2.lineTo(4150,2626),this.sGround2.lineTo(4094,2669),this.sGround2.lineTo(4084,2713),this.sGround2.lineTo(4023,2783),this.sGround2.lineTo(3959,2741),this.sGround2.lineTo(3908,2581),this.sGround2.lineTo(3775,2449),this.sGround2.lineTo(3736,2284),this.sGround2.lineTo(3680,2267),this.sGround2.lineTo(3645,2157),this.sGround2.lineTo(3571,2197),this.sGround2.lineTo(3541,2309),this.sGround2.lineTo(3505,2336),this.sGround2.lineTo(3456,2317),this.sGround2.lineTo(3417,2372),this.sGround2.lineTo(3356,2405),this.sGround2.lineTo(3331,2454),this.sGround2.lineTo(3270,2439),this.sGround2.lineTo(3234,2364),this.sGround2.lineTo(3147,2327),this.sGround2.lineTo(3104,2229),this.sGround2.lineTo(3111,2208),this.sGround2.lineTo(3060,2055),this.sGround2.lineTo(3006,2027),this.sGround2.lineTo(2977,1944),this.sGround2.lineTo(2767,1880),this.sGround2.lineTo(2752,1849),this.sGround2.lineTo(2718,1837),this.sGround2.lineTo(2707,1809),this.sGround2.lineTo(2668,1794),this.sGround2.lineTo(2632,1690),this.sGround2.lineTo(2532,1650),this.sGround2.lineTo(2503,1544),this.sGround2.endFill(),this.sGround3.beginTextureFill({texture:Ks.getLinearGradientTexture(["#B6C6CA","#9AA9AD"],2050),matrix:e}),this.sGround3.moveTo(7569,1596),this.sGround3.lineTo(7596,1537),this.sGround3.lineTo(7631,1520),this.sGround3.lineTo(7649,1451),this.sGround3.lineTo(7690,1425),this.sGround3.lineTo(7754,1407),this.sGround3.lineTo(7786,1358),this.sGround3.lineTo(7926,1351),this.sGround3.lineTo(7936,1338),this.sGround3.lineTo(7953,1335),this.sGround3.lineTo(7971,1314),this.sGround3.lineTo(8149,1309),this.sGround3.lineTo(8169,1319),this.sGround3.lineTo(8213,1330),this.sGround3.lineTo(8259,1311),this.sGround3.lineTo(8278,1312),this.sGround3.lineTo(8294,1283),this.sGround3.lineTo(8308,1275),this.sGround3.lineTo(8321,1253),this.sGround3.lineTo(8343,1249),this.sGround3.lineTo(8357,1233),this.sGround3.lineTo(8384,1227),this.sGround3.lineTo(8432,1249),this.sGround3.lineTo(8481,1252),this.sGround3.lineTo(8492,1260),this.sGround3.lineTo(8533,1259),this.sGround3.lineTo(8539,1266),this.sGround3.lineTo(8553,1258),this.sGround3.lineTo(8582,1255),this.sGround3.lineTo(8603,1219),this.sGround3.lineTo(8639,1188),this.sGround3.lineTo(8654,1162),this.sGround3.lineTo(8698,1157),this.sGround3.lineTo(8741,1170),this.sGround3.lineTo(8748,1180),this.sGround3.lineTo(8774,1185),this.sGround3.lineTo(8792,1193),this.sGround3.lineTo(8840,1201),this.sGround3.lineTo(8864,1214),this.sGround3.lineTo(8916,1222),this.sGround3.lineTo(8955,1237),this.sGround3.lineTo(9005,1245),this.sGround3.lineTo(9020,1258),this.sGround3.lineTo(9042,1265),this.sGround3.lineTo(9076,1266),this.sGround3.lineTo(9087,1249),this.sGround3.lineTo(9105,1243),this.sGround3.lineTo(9118,1224),this.sGround3.lineTo(9133,1222),this.sGround3.lineTo(9141,1210),this.sGround3.lineTo(9160,1203),this.sGround3.lineTo(9188,1201),this.sGround3.lineTo(9208,1209),this.sGround3.lineTo(9324,1209),this.sGround3.lineTo(9347,1183),this.sGround3.lineTo(9367,1176),this.sGround3.lineTo(9380,1154),this.sGround3.lineTo(9394,1148),this.sGround3.lineTo(9402,1132),this.sGround3.lineTo(9432,1116),this.sGround3.lineTo(9471,1116),this.sGround3.lineTo(9481,1122),this.sGround3.lineTo(9520,1121),this.sGround3.lineTo(9537,1133),this.sGround3.lineTo(9552,1125),this.sGround3.lineTo(9578,1118),this.sGround3.lineTo(9653,1120),this.sGround3.lineTo(9671,1123),this.sGround3.lineTo(9684,1097),this.sGround3.lineTo(9704,1084),this.sGround3.lineTo(9746,986),this.sGround3.lineTo(9802,934),this.sGround3.lineTo(9830,931),this.sGround3.lineTo(9855,893),this.sGround3.lineTo(9907,861),this.sGround3.lineTo(9927,852),this.sGround3.lineTo(9935,820),this.sGround3.lineTo(9929,798),this.sGround3.lineTo(9954,778),this.sGround3.lineTo(10003,773),this.sGround3.lineTo(10039,753),this.sGround3.lineTo(10102,755),this.sGround3.lineTo(10114,767),this.sGround3.lineTo(10155,776),this.sGround3.lineTo(10185,800),this.sGround3.lineTo(10226,826),this.sGround3.lineTo(10244,900),this.sGround3.lineTo(10230,926),this.sGround3.lineTo(10248,1014),this.sGround3.lineTo(10238,1050),this.sGround3.lineTo(10254,1109),this.sGround3.lineTo(10281,1128),this.sGround3.lineTo(10292,1153),this.sGround3.lineTo(10368,1173),this.sGround3.lineTo(10409,1205),this.sGround3.lineTo(10422,1277),this.sGround3.lineTo(10445,1306),this.sGround3.lineTo(10457,1381),this.sGround3.lineTo(10543,1419),this.sGround3.lineTo(10562,1500),this.sGround3.lineTo(10587,1513),this.sGround3.lineTo(10606,1604),this.sGround3.lineTo(10678,1641),this.sGround3.lineTo(10702,1761),this.sGround3.lineTo(10685,1808),this.sGround3.lineTo(10649,1846),this.sGround3.lineTo(10643,1897),this.sGround3.lineTo(10568,1940),this.sGround3.lineTo(10523,1910),this.sGround3.lineTo(10340,1905),this.sGround3.lineTo(10309,1878),this.sGround3.lineTo(10256,1867),this.sGround3.lineTo(10233,1810),this.sGround3.lineTo(10097,1785),this.sGround3.lineTo(10057,1728),this.sGround3.lineTo(10002,1712),this.sGround3.lineTo(9959,1627),this.sGround3.lineTo(9911,1629),this.sGround3.lineTo(9890,1643),this.sGround3.lineTo(9827,1651),this.sGround3.lineTo(9795,1673),this.sGround3.lineTo(9700,1690),this.sGround3.lineTo(9682,1722),this.sGround3.lineTo(9651,1736),this.sGround3.lineTo(9581,1893),this.sGround3.lineTo(9557,1904),this.sGround3.lineTo(9529,1959),this.sGround3.lineTo(9329,1979),this.sGround3.lineTo(9297,2036),this.sGround3.lineTo(9259,2041),this.sGround3.lineTo(9217,2099),this.sGround3.lineTo(9162,2106),this.sGround3.lineTo(9135,2127),this.sGround3.lineTo(8992,2136),this.sGround3.lineTo(8960,2104),this.sGround3.lineTo(8903,2090),this.sGround3.lineTo(8839,2014),this.sGround3.lineTo(8751,2008),this.sGround3.lineTo(8634,1825),this.sGround3.lineTo(8466,1816),this.sGround3.lineTo(8450,1785),this.sGround3.lineTo(8306,1786),this.sGround3.lineTo(8242,1714),this.sGround3.lineTo(7911,1702),this.sGround3.lineTo(7878,1669),this.sGround3.lineTo(7646,1660),this.sGround3.lineTo(7606,1614),this.sGround3.lineTo(7579,1608),this.sGround3.lineTo(7569,1596),this.sGround3.endFill(),this.sGround1.lineStyle(0,0,0),this.sGround2.lineStyle(0,0,0),this.sGround3.lineStyle(0,0,0),this.DrawCaveRock(425,1426,447,1454,434,1476),this.DrawCaveRock(437,1420,451,1435,484,1400),this.DrawCaveRock(497,1364,537,1361,531,1387),this.DrawCaveRock(543,1450,596,1434,609,1459),this.DrawCaveRock(631,1447,651,1471,673,1413),this.DrawCaveRock(621,1537,703,1532,718,1507),this.DrawCaveRock(613,1344,632,1323,681,1318),this.DrawCaveRock(598,1319,612,1322,629,1303),this.DrawCaveRock(676,1244,699,1271,698,1302),this.DrawCaveRock(730,1377,758,1392,756,1381),this.DrawCaveRock(802,1375,816,1427,840,1407),this.DrawCaveRock(804,1490,844,1490,873,1447),this.DrawCaveRock(828,1325,875,1326,867,1348),this.DrawCaveRock(970,1411,963,1434,981,1427),this.DrawCaveRock(2677,1782,2795,1771,2726,1803),this.DrawCaveRock(2946,1728,3056,1744,2975,1813),this.DrawCaveRock(3017,2021,3091,2056,3157,1982),this.DrawCaveRock(3252,1762,3308,1726,3306,1778),this.DrawCaveRock(3395,1904,3327,1967,3400,2016),this.DrawCaveRock(3333,2324,3446,2313,3411,2359),this.DrawCaveRock(3570,2182,3639,2147,3599,2130),this.DrawCaveRock(3598,1802,3670,1780,3675,1851),this.DrawCaveRock(3821,1837,3895,1752,3896,1810),this.DrawCaveRock(3743,2282,3823,2208,3787,2314),this.DrawCaveRock(3942,2059,4014,2103,3984,2150),this.DrawCaveRock(4058,2233,4018,2296,4081,2287),this.DrawCaveRock(4067,2596,4139,2619,4168,2535),this.DrawCaveRock(4161,2123,4167,2034,4259,2061),this.DrawCaveRock(4211,1946,4258,1899,4287,1931),this.DrawCaveRock(4340,2423,4390,2407,4374,2361),this.DrawCaveRock(4416,1979,4532,1968,4498,2016),this.DrawCaveRock(4452,2566,4517,2549,4579,2460),this.DrawCaveRock(4533,2190,4565,2239,4605,2148),this.DrawCaveRock(4647,1924,4726,1952,4673,1968),this.DrawCaveRock(4793,2292,4856,2328,4927,2276),this.DrawCaveRock(4731,1788,4763,1778,4709,1754),this.DrawCaveRock(4698,1687,4720,1682,4686,1666),this.DrawCaveRock(4720,1635,4733,1626,4729,1662),this.DrawCaveRock(4830,1765,4870,1703,4893,1757),this.DrawCaveRock(4920,1945,4919,2012,4988,1984),this.DrawCaveRock(5052,2030,5159,2011,5138,2060),this.DrawCaveRock(5104,1838,5152,1808,5147,1838),this.DrawCaveRock(5054,1696,5033,1663,5154,1674),this.DrawCaveRock(5209,1801,5279,1858,5346,1829),this.DrawCaveRock(5380,1716,5383,1680,5339,1688),this.DrawCaveRock(7654,1520,7669,1469,7744,1518),this.DrawCaveRock(7833,1602,7918,1688,8192,1695),this.DrawCaveRock(7982,1331,8001,1372,8136,1329),this.DrawCaveRock(8140,1519,8099,1611,8219,1613),this.DrawCaveRock(8246,1503,8277,1501,8282,1462),this.DrawCaveRock(8427,1617,8298,1721,8542,1669),this.DrawCaveRock(8595,1761,8478,1804,8630,1811),this.DrawCaveRock(8600,1259,8645,1205,8681,1295),this.DrawCaveRock(8866,1342,8902,1355,8899,1387),this.DrawCaveRock(8847,1512,8788,1633,8913,1663),this.DrawCaveRock(8801,1906,8923,2055,9069,2072),this.DrawCaveRock(8973,1408,9015,1345,9037,1400),this.DrawCaveRock(9091,1421,9090,1489,9160,1462),this.DrawCaveRock(9077,1588,9043,1631,9116,1608),this.DrawCaveRock(9021,1636,8986,1677,9016,1674),this.DrawCaveRock(9137,1838,9032,1899,9081,1911),this.DrawCaveRock(9220,1222,9324,1225,9302,1268),this.DrawCaveRock(9323,1410,9422,1437,9341,1531),this.DrawCaveRock(9339,1699,9485,1658,9447,1771),this.DrawCaveRock(9308,1969,9519,1946,9548,1888),this.DrawCaveRock(9600,1675,9658,1638,9657,1693),this.DrawCaveRock(9697,1674,9721,1632,9792,1656),this.DrawCaveRock(9724,1097,9761,1010,9866,1079),this.DrawCaveRock(9870,905,9933,874,9923,947),this.DrawCaveRock(10073,878,10141,785,10171,865),this.DrawCaveRock(10134,1072,10098,1115,10172,1093),this.DrawCaveRock(9900,1204,9830,1269,9905,1320),this.DrawCaveRock(10306,1307,10392,1210,10404,1285),this.DrawCaveRock(10359,1437,10443,1384,10419,1571),this.DrawCaveRock(10140,1518,10214,1562,10183,1611),this.DrawCaveRock(10113,1773,10237,1796,10288,1702),this.DrawCaveRock(10607,1793,10670,1803,10637,1834),this.DrawGroundOutlineCircle(3321,1586,26.5),this.DrawGroundOutlineCircle(3806,1612,26.5),this.DrawGroundOutlineCircle(3899,1612,26.5),this.DrawGroundOutlineCircle(3933,1610,26.5),this.DrawGroundOutlineCircle(3941,1602,26.5),this.DrawGroundOutlineCircle(3923,1578,26.5),this.DrawGroundOutlineCircle(3843,1612,38),this.DrawGroundOutlineCircle(3749,1592,38),this.DrawGroundOutlineCircle(3365,1578,38),this.DrawGroundOutlineCircle(3403,1594,38),this.DrawGroundOutlineCircle(3257,1560,38),this.DrawGroundOutlineCircle(3123,1546,38),this.DrawGroundOutlineCircle(2469,1508,38),this.DrawGroundOutlineCircle(2422,1482,38),this.DrawGroundOutlineCircle(2432,1459,38),this.DrawGroundOutlineCircle(2516,1492,63),this.DrawGroundOutlineCircle(2616,1474,63),this.DrawGroundOutlineCircle(3016,1525,63),this.DrawGroundOutlineCircle(3174,1520,63),this.DrawGroundOutlineCircle(3642,1598,63),this.DrawGroundOutlineCircle(3458,1570,63),this.DrawGroundOutlineCircle(3524,1581,80),this.DrawGroundOutlineCircle(2696,1479,80),this.DrawGroundOutlineCircle(2824,1482,104),this.sGround2.lineStyle(6,2990382,1),e=new ca.Matrix,this.sGround2.beginTextureFill({texture:Ks.getLinearGradientTexture(["#6BD354","#54BA3D"]),matrix:e}),this.sGround2.moveTo(2467,1460),this.sGround2.lineTo(2762,1457),this.sGround2.lineTo(2879,1456),this.sGround2.lineTo(2889,1456),this.sGround2.lineTo(2917,1457),this.sGround2.lineTo(2941,1460),this.sGround2.lineTo(2974,1464),this.sGround2.lineTo(3005,1468),this.sGround2.lineTo(3069,1479),this.sGround2.lineTo(3151,1492),this.sGround2.lineTo(3213,1502),this.sGround2.lineTo(3269,1512),this.sGround2.lineTo(3333,1522),this.sGround2.lineTo(3357,1525),this.sGround2.lineTo(3399,1528),this.sGround2.lineTo(3430,1532),this.sGround2.lineTo(3530,1547),this.sGround2.lineTo(3619,1561),this.sGround2.lineTo(3702,1572),this.sGround2.lineTo(3793,1583),this.sGround2.lineTo(3845,1588),this.sGround2.lineTo(3873,1589),this.sGround2.lineTo(3899,1589),this.sGround2.lineTo(3913,1587),this.sGround2.lineTo(3929,1583),this.sGround2.lineTo(3940,1580),this.sGround2.lineTo(3947,1578),this.sGround2.lineTo(3955,1587),this.sGround2.lineTo(3956,1637),this.sGround2.lineTo(3548,1639),this.sGround2.lineTo(3170,1583),this.sGround2.lineTo(2870,1576),this.sGround2.lineTo(2522,1554),this.sGround2.lineTo(2468,1494),this.sGround2.lineTo(2467,1460),this.sGround2.endFill(),this.sGround2.lineStyle(0,0,0),this.DrawGroundCircle(3321,1586,26.5),this.DrawGroundCircle(3806,1612,26.5),this.DrawGroundCircle(3899,1612,26.5),this.DrawGroundCircle(3933,1610,26.5),this.DrawGroundCircle(3941,1602,26.5),this.DrawGroundCircle(3923,1578,26.5),this.DrawGroundCircle(3843,1612,38),this.DrawGroundCircle(3749,1592,38),this.DrawGroundCircle(3365,1578,38),this.DrawGroundCircle(3403,1594,38),this.DrawGroundCircle(3257,1560,38),this.DrawGroundCircle(3123,1546,38),this.DrawGroundCircle(2469,1508,38),this.DrawGroundCircle(2422,1482,38),this.DrawGroundCircle(2432,1459,38),this.DrawGroundCircle(2516,1492,63),this.DrawGroundCircle(2616,1474,63),this.DrawGroundCircle(3016,1525,63),this.DrawGroundCircle(3174,1520,63),this.DrawGroundCircle(3642,1598,63),this.DrawGroundCircle(3458,1570,63),this.DrawGroundCircle(3524,1581,80),this.DrawGroundCircle(2696,1479,80),this.DrawGroundCircle(2824,1482,104),this.DrawRock(0,477,1572,35),this.DrawRock(1,761,1702,35),this.DrawRock(1,1301,1541,35),this.DrawRock(2,1436,1481,35),this.DrawRock(2,1915,1478,35),this.DrawRock(2,2518,1500,35),this.DrawRock(0,2710,1468,35),this.DrawRock(2,3187,1516,35),this.DrawRock(2,3582,1621,35),this.DrawRock(1,5461,1755,35),this.DrawRock(1,6109,1701,35),this.DrawRock(0,6235,1864,35),this.DrawRock(1,6973,1686,35),this.DrawRock(0,7382,1636,35),this.DrawRock(2,7855,2034,35),this.DrawRock(1,9263,2104,35),this.DrawRock(0,9672,1776,35),this.DrawRock(1,10080,1853,52),this.DrawRock(2,8386,1861,52),this.DrawRock(0,7720,1696,52),this.DrawRock(1,6791,1747,52),this.DrawRock(2,6388,1707,52),this.DrawRock(2,5608,1677,52),this.DrawRock(0,2873,1517,52),this.DrawRock(1,917,1496,52),this.DrawRock(1,1593,1556,69),this.DrawRock(1,7714,1816,69),this.DrawRock(0,1123,1634,86),this.DrawRock(2,5805,1873,86),this.DrawRock(0,7928,1816,86),this.DrawRock(2,8495,2059,106),this.DrawRock(2,7510,1875,106),this.DrawRock(2,5206,1986,106),this.DrawRock(0,9708,1895,137.5),this.sGround1.cacheAsBitmap=!0,this.sGround2.cacheAsBitmap=!0,this.sGround3.cacheAsBitmap=!0,this.addChild(this.sGround1),this.addChild(this.sGround2),this.addChild(this.sGround3)}DrawGroundOutlineCircle(t,e,i){var s=t<2300?this.sGround1:t<6300?this.sGround2:this.sGround3;s.beginFill(2990382),s.drawCircle(t+i,e+i,i+6),s.endFill()}DrawGroundCircle(t,e,i){var s=t<2300?this.sGround1:t<6300?this.sGround2:this.sGround3,r=new ca.Matrix;r.scale(1,1500/255),r.translate(0,850),s.beginTextureFill({texture:Ks.getLinearGradientTexture(["#6BD354","#54BA3D"],255),matrix:r}),s.drawCircle(t+i,e+i,i),s.endFill()}DrawCaveRock(t,e,i,s,r,n){var o=t<2300?this.sGround1:t<6300?this.sGround2:this.sGround3,a=new ca.Matrix;o.beginTextureFill({texture:Ks.getLinearGradientTexture(["#AAB9BD","#95A1A5"],1500),matrix:a}),o.moveTo(t,e),o.lineTo(i,s),o.lineTo(r,n),o.lineTo(t,e),o.endFill()}DrawRock(t,e,i,s){var r=e<2300?this.sGround1:e<6200?this.sGround2:this.sGround3;r.lineStyle(6,7057498);var n=new ca.Matrix;n.translate(0,i),r.beginTextureFill({texture:Ks.getLinearGradientTexture(0==t?["#8EDB82","#7FBF72"]:1==t?["#80D970","#6DBE5D"]:["#70C160","#63AB52"],2*s),matrix:n}),r.drawCircle(e+s,i+s,s),r.endFill()}GetMinX(){return-80}GetMaxX(){return 100}GetMinY(){return-18}GetMaxY(){return 32}Update(){super.Update(),this.sSky.Update(this.hasZoomed,this.hasPanned),this.hasZoomed&&(this.sGround1.width=this.World2ScreenX(29.34)-this.World2ScreenX(0),this.sGround1.scale.y=this.sGround1.scale.x,this.sGround2.scale.x=this.sGround1.scale.x,this.sGround2.scale.y=this.sGround2.scale.x,this.sGround3.scale.x=this.sGround1.scale.x,this.sGround3.scale.y=this.sGround3.scale.x),(this.hasZoomed||this.hasPanned)&&(this.sGround1.visible=this.World2ScreenX(-41)>0,this.sGround2.visible=this.World2ScreenX(24)>0&&this.World2ScreenX(-39)<800,this.sGround3.visible=this.World2ScreenX(19)<800,this.sGround1.visible&&(this.sGround1.x=this.World2ScreenX(-77),this.sGround1.y=this.World2ScreenY(-15.3)),this.sGround2.visible&&(this.sGround2.x=this.World2ScreenX(-75),this.sGround2.y=this.World2ScreenY(-15.3)),this.sGround3.visible&&(this.sGround3.x=this.World2ScreenX(-75),this.sGround3.y=this.World2ScreenY(-15.3))),this.hasPanned=!1,this.hasZoomed=!1}GetScore(){return 1e3}submitButton(){this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader(),this.ShowDisabledDialog()}}a("7qcjp");ca=a("VYQOJ");class Qa extends Za{constructor(){super(),this.madeTriangle=!1,this.madeRectangle=!1,this.madeCircle=!1,this.draw.m_drawXOff=-950,this.draw.m_drawYOff=-180}Init(t){super.Init(t),na.viewingUnsavedReplay||this.ShowTutorialDialog(4,!1)}Update(){super.Update(),this.m_sidePanel.DisableStuffForShapesLevel(),na.playingReplay||(!this.madeRectangle&&this.allParts[this.allParts.length-1]instanceof ca.Rectangle&&this.allParts[this.allParts.length-1].isEditable&&(this.madeRectangle=!0,this.ShowTutorialDialog(5)),this.madeRectangle&&!this.madeTriangle&&this.allParts[this.allParts.length-1]instanceof bh&&this.allParts[this.allParts.length-1].isEditable&&(this.madeTriangle=!0,this.ShowTutorialDialog(6)),this.madeRectangle&&this.madeTriangle&&!this.madeCircle&&this.allParts[this.allParts.length-1]instanceof ca.Circle&&this.allParts[this.allParts.length-1].isEditable&&(this.madeCircle=!0,this.ShowTutorialDialog(7)))}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,this.World2ScreenX(-14),this.World2ScreenY(1),e)}ChallengeOver(){if(this.simStarted){for(var t=0;t<this.allParts.length;t++)if(this.allParts[t].isEditable&&this.allParts[t]instanceof ca.Circle&&this.allParts[t].GetBody().GetWorldCenter().x>-15&&this.allParts[t].GetBody().GetWorldCenter().x<-3&&this.allParts[t].GetBody().GetWorldCenter().y>10)return!0;return!1}return!1}GetBuildingArea(){var t=new ps.b2AABB;return t.lowerBound.Set(-29,-1),t.upperBound.Set(-16,9.5),t}fjButton(){this.ShowDisabledDialog()}rjButton(){this.ShowDisabledDialog()}pjButton(){this.ShowDisabledDialog()}textButton(){this.ShowDisabledDialog()}rotateButton(){this.ShowDisabledDialog()}saveButton(){this.ShowDisabledDialog()}loadButton(t=!0){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}loadRobotButton(t=!0){this.ShowDisabledDialog()}loadReplayButton(t=!0){this.ShowDisabledDialog()}loadChallengeButton(t=!0){this.ShowDisabledDialog()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}a("7qcjp");js=a("4Y6fG");class $a extends Za{constructor(){super(),this.madeFirstJoint=!1,this.madeSecondJoint=!1,this.hitPlay=!1,this.hitSnapToCenter=!1,this.enabledMotors=!1,this.draw.m_drawXOff=360,this.draw.m_drawYOff=-220,this.partsFit=!1,this.sGround3.lineStyle(6,10324289),this.sGround3.beginFill(13546582),this.sGround3.drawRect(6598,1610,650,56),this.sGround3.endFill(),na.snapToCenter=!0;var t=new bh(-2.5,10.1,3,10.1,-2.5,8);t.isEditable=!1,t.red=220,t.green=220,t.blue=60,t.drawAnyway=!1,this.allParts.push(t),na.playingReplay||this.LoadParts(),this.controlText=new js.Text(""),this.controlText.x=400,this.controlText.y=102,this.controlText.text="Use the left/right arrow keys to control the car.  Jump into the pit on the left to finish this level!",this.controlText.visible=!1,this.controlText.anchor.set(.5);var e=new js.TextStyle;e.align="center",e.fontFamily=Sa.GLOBAL_FONT,e.fontSize=14,e.leading=1,this.controlText.style=e,this.addChild(this.controlText)}LoadParts(){var t=new gh(20,8,3,1);t.blue=40,t.green=50,t.red=245,this.allParts.push(t),(t=new _h(20.5,8.5,.7)).blue=80,t.green=80,t.red=80,this.allParts.push(t),(t=new _h(22.5,8.5,.7)).blue=80,t.green=80,t.red=80,this.allParts.push(t)}Init(t){super.Init(t),na.viewingUnsavedReplay||this.ShowTutorialDialog(8,!0)}CloseTutorialDialog(t){8==t?this.ShowTutorialDialog(9):super.CloseTutorialDialog(t)}Update(){super.Update(),na.viewingUnsavedReplay||(this.controlText.visible=!this.paused),this.m_sidePanel.DisableStuffForCarLevel(),na.playingReplay||(!this.madeFirstJoint&&this.allParts[this.allParts.length-1]instanceof xh&&(this.madeFirstJoint=!0,this.ShowTutorialDialog(10)),!this.madeSecondJoint&&this.allParts[this.allParts.length-1]instanceof xh&&this.allParts[this.allParts.length-2]instanceof xh&&(this.madeSecondJoint=!0,this.ShowTutorialDialog(12)),!this.enabledMotors&&this.allParts[this.allParts.length-1]instanceof xh&&this.allParts[this.allParts.length-2]instanceof xh&&this.allParts[this.allParts.length-1].enableMotor&&this.allParts[this.allParts.length-2].enableMotor&&(this.enabledMotors=!0,this.ShowTutorialDialog(13)))}centerBox(){super.centerBox(),this.madeFirstJoint&&!this.hitSnapToCenter&&(this.hitSnapToCenter=!0,this.ShowTutorialDialog(11))}HideDialog(){super.HideDialog(),this.hitPlay||-1==this.m_progressDialog.GetMessage().search("You must fit your robot")||(this.hitPlay=!0,this.ShowTutorialDialog(14,!1))}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,this.World2ScreenX(15),this.World2ScreenY(-1),e)}ChallengeOver(){if(this.simStarted){for(var t=0;t<this.allParts.length;t++)if(this.allParts[t].isEditable&&this.allParts[t]instanceof mh&&this.allParts[t].GetBody().GetWorldCenter().x<-7&&this.allParts[t].GetBody().GetWorldCenter().y>12)return!0;return!1}return!1}GetBuildingArea(){var t=new ps.b2AABB;return t.lowerBound.Set(26,2),t.upperBound.Set(36,9.42),t}circleButton(){this.ShowDisabledDialog()}rectButton(){this.ShowDisabledDialog()}triangleButton(){this.ShowDisabledDialog()}fjButton(){this.ShowDisabledDialog()}pjButton(){this.ShowDisabledDialog()}textButton(){this.ShowDisabledDialog()}deleteButton(){1==this.selectedParts.length&&this.selectedParts[0]instanceof xh?super.deleteButton():this.ShowDisabledDialog()}multiDeleteButton(){this.ShowDisabledDialog()}cutButton(){this.ShowDisabledDialog()}copyButton(){this.ShowDisabledDialog()}pasteButton(){this.ShowDisabledDialog()}rotateButton(){this.ShowDisabledDialog()}saveButton(){this.ShowDisabledDialog()}loadButton(t=!0){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}loadRobotButton(t=!0){this.ShowDisabledDialog()}loadReplayButton(t=!0){this.ShowDisabledDialog()}loadChallengeButton(t=!0){this.ShowDisabledDialog()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}a("7qcjp");js=a("4Y6fG");class th extends Za{constructor(){super(),this.hasWon=!1,this.draw.m_drawYOff=-300,this.draw.m_drawXOff=1520,this.object=new gh(0,9,1,1),this.object.red=22,this.object.green=73,this.object.blue=255,this.object.isEditable=!1,this.object.drawAnyway=!1,this.allParts.push(this.object);var t=new bh(57.5,2.4,58.5,2.4,58,1.6);t.red=255,t.green=207,t.blue=94,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(50.4,4.6,.3)).red=255,t.green=207,t.blue=94,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(51.4,4.3,.35)).red=255,t.green=207,t.blue=94,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(54,3.5,.25)).red=255,t.green=207,t.blue=94,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(54.8,3.6,.3)).red=255,t.green=207,t.blue=94,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(55.5,3.7,.3)).red=255,t.green=207,t.blue=94,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(56.1,3.4,.35)).red=255,t.green=207,t.blue=94,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(56.9,2.8,.3)).red=255,t.green=207,t.blue=94,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(60,2.7,.25)).red=255,t.green=207,t.blue=94,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(62,3.2,.3)).red=255,t.green=207,t.blue=94,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(63.8,3.7,.3)).red=255,t.green=207,t.blue=94,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t);var e=new gh(70.4,.7,2.2,.6);e.red=30,e.green=130,e.blue=60,e.density=20,e.isCameraFocus=!0,e.isEditable=!1,e.drawAnyway=!1,this.allParts.push(e),(t=new _h(70.5,1,.6)).red=30,t.green=130,t.blue=60,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(71.5,1,.6)).red=30,t.green=130,t.blue=60,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new _h(72.5,1,.6)).red=30,t.green=130,t.blue=60,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new xh(this.allParts[this.allParts.length-3],e,70.5,1)).enableMotor=!0,t.motorStrength=30,t.motorSpeed=15,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new xh(this.allParts[this.allParts.length-3],e,71.5,1)).enableMotor=!0,t.motorStrength=30,t.motorSpeed=15,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new xh(this.allParts[this.allParts.length-3],e,72.5,1)).enableMotor=!0,t.motorStrength=30,t.motorSpeed=15,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t);for(var i=0;i<7;i++)(t=new gh(70.1+.4*i,.3,.4,.2)).red=30,t.green=90,t.blue=50,t.isTank=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t);for(i=0;i<3;i++)(t=new gh(72.8,.4+.4*i,.2,.4)).red=30,t.green=90,t.blue=50,t.isTank=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t);for(i=0;i<7;i++)(t=new gh(72.5-.4*i,1.5,.4,.2)).red=30,t.green=90,t.blue=50,t.isTank=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t);for(i=0;i<3;i++)(t=new gh(70,1.2-.4*i,.2,.4)).red=30,t.green=90,t.blue=50,t.isTank=!0,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t);for(i=0;i<7;i++)(t=new xh(this.allParts[this.allParts.length-20],this.allParts[this.allParts.length-19],70.5+.4*i,.4)).isEditable=!1,t.drawAnyway=!1,this.allParts.push(t);for(i=0;i<3;i++)(t=new xh(this.allParts[this.allParts.length-20],this.allParts[this.allParts.length-19],72.9,.8+.4*i)).isEditable=!1,t.drawAnyway=!1,this.allParts.push(t);for(i=0;i<7;i++)(t=new xh(this.allParts[this.allParts.length-20],this.allParts[this.allParts.length-19],72.5-.4*i,1.6)).isEditable=!1,t.drawAnyway=!1,this.allParts.push(t);for(i=0;i<3;i++)(t=new xh(this.allParts[this.allParts.length-20],this.allParts[2==i?this.allParts.length-39:this.allParts.length-19],70.1,1.2-.4*i)).isEditable=!1,t.drawAnyway=!1,this.allParts.push(t);(t=new gh(69.5,1,2,.1)).red=30,t.green=90,t.blue=50,t.collide=!1,t.density=1,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new gh(69.5,0,.1,1.2)).red=30,t.green=90,t.blue=50,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new gh(68.4,1.1,1.2,.1)).red=30,t.green=90,t.blue=50,t.isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new xh(this.allParts[this.allParts.length-3],e,71.4,1.05)).isEditable=!1,t.drawAnyway=!1,t.isStiff=!0,t.enableMotor=!0,t.motorStrength=20,t.motorSpeed=2,t.motorCWKey=38,t.motorCCWKey=40,this.allParts.push(t),(t=new vh(this.allParts[this.allParts.length-3],this.allParts[this.allParts.length-4],69.55,1.05)).isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),(t=new vh(this.allParts[this.allParts.length-3],this.allParts[this.allParts.length-4],69.55,1.15)).isEditable=!1,t.drawAnyway=!1,this.allParts.push(t),this.controlText=new js.Text(""),this.controlText.x=400,this.controlText.y=102,this.controlText.text='Use the left/right/up/down arrow keys to control the tank. Your goal is to descend the rocky slope, then lift the blue square\ninto the pit on the left.  If you get stuck, click "Stop Simulation" and try again.',this.controlText.visible=!1,this.controlText.anchor.set(.5,0);var s=new js.TextStyle;s.align="center",s.fontFamily=Sa.GLOBAL_FONT,s.fontSize=13,s.leading=1,this.controlText.style=s,this.addChild(this.controlText)}Init(t){super.Init(t),na.viewingUnsavedReplay||this.ShowTutorialDialog(0,!0)}CloseTutorialDialog(t){0==t?this.ShowTutorialDialog(1,!0):1==t?this.ShowTutorialDialog(2):3==t?this.ShowTutorialWindow(55,276,this.World2ScreenY(2)):55==t?(this.m_tutorialDialog.visible=!1,this.m_scoreWindow.visible?this.m_scoreWindow.HideFader():this.m_fader.visible=!1):super.CloseTutorialDialog(t)}Update(){super.Update(),na.viewingUnsavedReplay||(this.controlText.visible=!this.paused),!this.wonChallenge||this.hasWon||na.playingReplay||(this.hasWon=!0,this.m_scoreWindow.ShowFader(),this.ShowTutorialWindow(3,276,this.World2ScreenY(2),!0))}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,this.World2ScreenX(57),this.World2ScreenY(-5),e)}ChallengeOver(){return!!this.simStarted&&(this.object.GetBody().GetWorldCenter().x>-15&&this.object.GetBody().GetWorldCenter().y>12&&this.object.GetBody().GetWorldCenter().x<-3)}GetBuildingArea(){var t=new ps.b2AABB;return t.lowerBound.Set(67,-2),t.upperBound.Set(73.3,5.2),t}circleButton(){this.ShowDisabledDialog()}rectButton(){this.ShowDisabledDialog()}triangleButton(){this.ShowDisabledDialog()}fjButton(){this.ShowDisabledDialog()}rjButton(){this.ShowDisabledDialog()}pjButton(){this.ShowDisabledDialog()}textButton(){this.ShowDisabledDialog()}undoButton(){this.ShowDisabledDialog()}redoButton(){this.ShowDisabledDialog()}pasteButton(){this.ShowDisabledDialog()}saveButton(){this.ShowDisabledDialog()}loadButton(t=!0){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}loadRobotButton(t=!0){this.ShowDisabledDialog()}loadReplayButton(t=!0){this.ShowDisabledDialog()}loadChallengeButton(t=!0){this.ShowDisabledDialog()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}a("7qcjp");js=a("4Y6fG");class eh extends Za{constructor(){super(),this.madePiston=!1,this.enabledPiston=!1,this.hitReset=!1,this.increasedPower=!1,this.decreasedDensity=!1,this.draw.m_drawXOff=-1880,this.draw.m_drawYOff=-220,na.snapToCenter=!0,this.sGround1.lineStyle(6,10324289),this.sGround1.beginFill(13546582),this.sGround1.drawRect(1045,1452,681,56),this.sGround1.endFill(),na.playingReplay||this.LoadParts(),this.controlText=new js.Text(""),this.controlText.x=400,this.controlText.y=102,this.controlText.anchor.set(.5,0),this.controlText.text="Use the left/right arrow keys to rotate the wheels. Control the sliding joint with the up/down arrow keys.\nTry to jump the gap to the right and fall into the pit.",this.controlText.visible=!1;var t=new js.TextStyle;t.align="center",t.fontFamily=Sa.GLOBAL_FONT,t.fontSize=14,t.leading=1,this.controlText.style=t,this.addChild(this.controlText)}LoadParts(){this.carBody=new gh(-58.25,5,3.5,1),this.carBody.blue=40,this.carBody.green=50,this.carBody.red=245,this.allParts.push(this.carBody);var t=new _h(-58,5.9,1);t.blue=80,t.green=80,t.red=80,t.density=1,this.allParts.push(t),(t=new _h(-55,5.9,1)).blue=80,t.green=80,t.red=80,t.density=1,this.allParts.push(t),(t=new xh(this.allParts[this.allParts.length-3],this.allParts[this.allParts.length-2],-58,5.9)).enableMotor=!0,this.allParts.push(t),(t=new xh(this.allParts[this.allParts.length-4],this.allParts[this.allParts.length-2],-55,5.9)).enableMotor=!0,this.allParts.push(t),(t=new bh(-56,6.8,-57,6.3,-57,6.8)).blue=150,t.green=240,t.red=130,this.allParts.push(t)}Init(t){super.Init(t),na.viewingUnsavedReplay||this.ShowTutorialDialog(15)}Update(){super.Update(),na.viewingUnsavedReplay||(this.controlText.visible=!this.paused),this.m_sidePanel.DisableStuffForJumpbotLevel(),na.playingReplay||(!this.madePiston&&this.allParts[this.allParts.length-1]instanceof Sh&&(this.madePiston=!0,this.ShowTutorialDialog(16)),!this.enabledPiston&&this.allParts[this.allParts.length-1]instanceof Sh&&this.allParts[this.allParts.length-1].enablePiston&&(this.enabledPiston=!0,this.ShowTutorialDialog(17)),this.hitReset&&!this.increasedPower&&this.allParts[this.allParts.length-1]instanceof Sh&&this.allParts[this.allParts.length-1].pistonStrength>15&&this.allParts[this.allParts.length-1].pistonSpeed>15&&(this.increasedPower=!0,this.ShowTutorialDialog(19)),this.increasedPower&&!this.decreasedDensity&&this.carBody.density<15&&(this.decreasedDensity=!0,this.ShowTutorialDialog(20))),!this.paused&&this.carBody.GetBody().GetWorldCenter().y>50&&this.resetButton()}resetButton(t=!0){super.resetButton(t),this.enabledPiston&&!this.hitReset&&(this.hitReset=!0,this.ShowTutorialDialog(18))}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,this.World2ScreenX(-48),this.World2ScreenY(-1),e)}ChallengeOver(){if(this.simStarted){for(var t=0;t<this.allParts.length;t++)if(this.allParts[t].isEditable&&this.allParts[t]instanceof mh&&this.allParts[t].GetBody().GetWorldCenter().x>-15&&this.allParts[t].GetBody().GetWorldCenter().x<-3&&this.allParts[t].GetBody().GetWorldCenter().y>11&&this.allParts[t].GetBody().GetWorldCenter().y<18)return!0;return!1}return!1}GetBuildingArea(){var t=new ps.b2AABB;return t.lowerBound.Set(-61,-1),t.upperBound.Set(-50.5,7),t}circleButton(){this.ShowDisabledDialog()}rectButton(){this.ShowDisabledDialog()}triangleButton(){this.ShowDisabledDialog()}fjButton(){this.ShowDisabledDialog()}rjButton(){this.ShowDisabledDialog()}pjButton(){Sh.jbTutorial=!0,super.pjButton()}textButton(){this.ShowDisabledDialog()}deleteButton(){1==this.selectedParts.length&&this.selectedParts[0]instanceof Sh?super.deleteButton():this.ShowDisabledDialog()}multiDeleteButton(){this.ShowDisabledDialog()}cutButton(){this.ShowDisabledDialog()}copyButton(){this.ShowDisabledDialog()}pasteButton(){this.ShowDisabledDialog()}rotateButton(){this.ShowDisabledDialog()}saveButton(){this.ShowDisabledDialog()}loadButton(t=!0){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}loadRobotButton(t=!0){this.ShowDisabledDialog()}loadReplayButton(t=!0){this.ShowDisabledDialog()}loadChallengeButton(t=!0){this.ShowDisabledDialog()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}centerBox(){this.ShowDisabledDialog()}GetGravity(){return this.decreasedDensity?new ps.b2Vec2(0,12):new ps.b2Vec2(0,18)}}a("7qcjp");js=a("4Y6fG");class ih extends Za{constructor(){super(),this.madeRectangle=!1,this.madeWheels=!1,this.madeJoints=!1,this.madeArm=!1,this.clickedJoint=!1,this.madeArmJoint=!1,this.solidifiedArmJoint=!1,this.changedControlKeys=!1,this.madeBucket=!1,this.fixedBucket=!1,this.fixedBucket2=!1,this.adjustedMotor=!1,this.draw.m_drawXOff=360,this.draw.m_drawYOff=-220,this.sGround3.lineStyle(6,10324289),this.sGround3.beginFill(13546582),this.sGround3.drawRect(6598,1610,650,56),this.sGround3.endFill(),this.object1=new gh(-.5,9,1,1),this.object1.red=255,this.object1.green=207,this.object1.blue=94,this.object1.isEditable=!1,this.object1.drawAnyway=!1,this.allParts.push(this.object1),this.object2=new _h(.9,9.7,.3),this.object2.red=255,this.object2.green=207,this.object2.blue=94,this.object2.isEditable=!1,this.object2.drawAnyway=!1,this.allParts.push(this.object2),this.object3=new bh(-2,9.9,-1,9.9,-1.5,8.9),this.object3.red=255,this.object3.green=207,this.object3.blue=94,this.object3.isEditable=!1,this.object3.drawAnyway=!1,this.allParts.push(this.object3),na.playingReplay||(this.tutorialPart=new gh(30,7,3.5,1.5),this.tutorialPart.isEditable=!1,this.tutorialPart.isStatic=!0,this.tutorialPart.drawAnyway=!0,this.tutorialPart.collide=!1,this.tutorialPart.red=75,this.tutorialPart.green=185,this.tutorialPart.blue=75,this.tutorialPart.opacity=0,this.allParts.push(this.tutorialPart)),this.controlText=new js.Text(""),this.controlText.x=400,this.controlText.y=102,this.controlText.anchor.set(.5,0),this.controlText.text="Use the left/right arrow keys to rotate the wheels. Control the loading arm with the up/down arrow keys.\nDump the objects into the pit to the left.",this.controlText.selectable=!1,this.controlText.visible=!1;var t=new js.TextStyle;t.align="center",t.fontFamily=Sa.GLOBAL_FONT,t.fontSize=14,t.leading=1,this.controlText.style=t,this.addChild(this.controlText)}Init(t){super.Init(t),na.viewingUnsavedReplay||this.ShowTutorialDialog(21)}Update(){super.Update(),na.viewingUnsavedReplay||(this.controlText.visible=!this.paused),this.m_sidePanel.DisableStuffForDumpbotLevel(),na.playingReplay||(!this.madeRectangle&&this.allParts[this.allParts.length-1]instanceof gh&&this.allParts[this.allParts.length-1].isEditable&&(this.madeRectangle=!0,this.allParts=Vs.RemoveFromArray(this.tutorialPart,this.allParts),this.tutorialPart=new _h(30.5,7.75,1),this.tutorialPart.isEditable=!1,this.tutorialPart.isStatic=!0,this.tutorialPart.drawAnyway=!0,this.tutorialPart.collide=!1,this.tutorialPart.red=75,this.tutorialPart.green=185,this.tutorialPart.blue=75,this.tutorialPart.opacity=0,this.allParts.push(this.tutorialPart),this.tutorialPart2=new _h(33,7.75,1),this.tutorialPart2.isEditable=!1,this.tutorialPart2.isStatic=!0,this.tutorialPart2.drawAnyway=!0,this.tutorialPart2.collide=!1,this.tutorialPart2.red=75,this.tutorialPart2.green=185,this.tutorialPart2.blue=75,this.tutorialPart2.opacity=0,this.allParts.push(this.tutorialPart2),this.redrawRobot=!0,this.ShowTutorialDialog(22)),this.madeRectangle&&!this.madeWheels&&this.allParts[this.allParts.length-1]instanceof _h&&this.allParts[this.allParts.length-2]instanceof _h&&this.allParts[this.allParts.length-1].isEditable&&this.allParts[this.allParts.length-2].isEditable&&this.allParts[this.allParts.length-1].isEnabled&&this.allParts[this.allParts.length-2].isEnabled&&this.curAction!=na.PASTE&&(this.madeWheels=!0,this.ShowTutorialDialog(23)),this.madeWheels&&!this.madeJoints&&this.allParts[this.allParts.length-1]instanceof xh&&this.allParts[this.allParts.length-2]instanceof xh&&this.allParts[this.allParts.length-1].enableMotor&&this.allParts[this.allParts.length-2].enableMotor&&this.allParts[this.allParts.length-1].isEnabled&&this.allParts[this.allParts.length-2].isEnabled&&(this.madeJoints=!0,this.allParts=Vs.RemoveFromArray(this.tutorialPart,this.allParts),this.allParts=Vs.RemoveFromArray(this.tutorialPart2,this.allParts),this.tutorialPart=new gh(28.5,8,2,.2),this.tutorialPart.isEditable=!1,this.tutorialPart.isStatic=!0,this.tutorialPart.drawAnyway=!0,this.tutorialPart.collide=!1,this.tutorialPart.red=75,this.tutorialPart.green=185,this.tutorialPart.blue=75,this.tutorialPart.opacity=0,this.allParts.push(this.tutorialPart),this.redrawRobot=!0,this.ShowTutorialDialog(24)),this.madeJoints&&!this.madeArm&&this.allParts[this.allParts.length-1]instanceof gh&&this.allParts[this.allParts.length-1].isEditable&&this.allParts[this.allParts.length-1].isEnabled&&(this.madeArm=!0,this.allParts=Vs.RemoveFromArray(this.tutorialPart,this.allParts),this.redrawRobot=!0,this.ShowTutorialDialog(25)),this.madeArm&&!this.clickedJoint&&this.curAction==na.NEW_REVOLUTE_JOINT&&(this.clickedJoint=!0,this.tutorialPart=new _h(30.3,8.1,.15),this.tutorialPart.isEditable=!1,this.tutorialPart.isStatic=!0,this.tutorialPart.drawAnyway=!0,this.tutorialPart.collide=!1,this.tutorialPart.red=75,this.tutorialPart.green=185,this.tutorialPart.blue=75,this.tutorialPart.opacity=0,this.allParts.push(this.tutorialPart),this.redrawRobot=!0,this.ShowTutorialDialog(58),na.snapToCenter=!1),this.clickedJoint&&!this.madeArmJoint&&this.allParts[this.allParts.length-1]instanceof xh&&this.allParts[this.allParts.length-1].isEnabled&&(this.madeArmJoint=!0,this.allParts=Vs.RemoveFromArray(this.tutorialPart,this.allParts),this.redrawRobot=!0,this.ShowTutorialDialog(26)),this.madeArmJoint&&!this.solidifiedArmJoint&&this.allParts[this.allParts.length-1]instanceof xh&&this.allParts[this.allParts.length-1].enableMotor&&this.allParts[this.allParts.length-1].isStiff&&(this.solidifiedArmJoint=!0,this.ShowTutorialDialog(57)),this.solidifiedArmJoint&&!this.changedControlKeys&&this.allParts[this.allParts.length-1]instanceof xh&&38==this.allParts[this.allParts.length-1].motorCWKey&&40==this.allParts[this.allParts.length-1].motorCCWKey&&(this.changedControlKeys=!0,this.tutorialPart=new gh(28.5,5.6,1.5,.1),this.tutorialPart.isEditable=!1,this.tutorialPart.isStatic=!0,this.tutorialPart.drawAnyway=!0,this.tutorialPart.collide=!1,this.tutorialPart.red=75,this.tutorialPart.green=185,this.tutorialPart.blue=75,this.tutorialPart.opacity=0,this.allParts.push(this.tutorialPart),this.tutorialPart2=new gh(29.6,4.5,.1,1.2),this.tutorialPart2.isEditable=!1,this.tutorialPart2.isStatic=!0,this.tutorialPart2.drawAnyway=!0,this.tutorialPart2.collide=!1,this.tutorialPart2.red=75,this.tutorialPart2.green=185,this.tutorialPart2.blue=75,this.tutorialPart2.opacity=0,this.allParts.push(this.tutorialPart2),this.redrawRobot=!0,this.ShowTutorialDialog(27)),this.changedControlKeys&&!this.madeBucket&&this.allParts[this.allParts.length-1]instanceof gh&&this.allParts[this.allParts.length-2]instanceof gh&&this.allParts[this.allParts.length-1].isEditable&&this.allParts[this.allParts.length-2].isEditable&&this.allParts[this.allParts.length-1].isEnabled&&this.allParts[this.allParts.length-2].isEnabled&&(this.madeBucket=!0,this.allParts=Vs.RemoveFromArray(this.tutorialPart,this.allParts),this.allParts=Vs.RemoveFromArray(this.tutorialPart2,this.allParts),this.ShowTutorialDialog(28)),this.madeBucket&&!this.fixedBucket&&this.allParts[this.allParts.length-1]instanceof vh&&this.allParts[this.allParts.length-1].isEnabled&&(this.fixedBucket=!0,this.ShowTutorialDialog(29)),this.fixedBucket&&!this.fixedBucket2&&this.allParts[this.allParts.length-1]instanceof vh&&this.allParts[this.allParts.length-2]instanceof vh&&this.allParts[this.allParts.length-1].isEnabled&&this.allParts[this.allParts.length-2].isEnabled&&(this.fixedBucket2=!0,this.ShowTutorialDialog(30)),this.fixedBucket2&&!this.adjustedMotor&&1==this.selectedParts.length&&this.selectedParts[0]instanceof xh&&this.selectedParts[0].motorSpeed<15&&this.selectedParts[0].motorStrength>15&&this.selectedParts[0].isStiff&&(this.adjustedMotor=!0,this.ShowTutorialDialog(31)))}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,this.World2ScreenX(14.5),this.World2ScreenY(.5),e)}ChallengeOver(){return!!this.simStarted&&(this.object1.GetBody().GetWorldCenter().x>-15&&this.object1.GetBody().GetWorldCenter().y>12&&this.object1.GetBody().GetWorldCenter().x<-3&&this.object2.GetBody().GetWorldCenter().x>-15&&this.object2.GetBody().GetWorldCenter().y>12&&this.object2.GetBody().GetWorldCenter().x<-3&&this.object3.GetBody().GetWorldCenter().x>-15&&this.object3.GetBody().GetWorldCenter().y>12&&this.object3.GetBody().GetWorldCenter().x<-3)}GetBuildingArea(){var t=new ps.b2AABB;return t.lowerBound.Set(26,2),t.upperBound.Set(36,9.42),t}textButton(){this.ShowDisabledDialog()}saveButton(){this.ShowDisabledDialog()}loadButton(t=!0){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}loadRobotButton(t=!0){this.ShowDisabledDialog()}loadReplayButton(t=!0){this.ShowDisabledDialog()}loadChallengeButton(t=!0){this.ShowDisabledDialog()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}a("7qcjp");js=a("4Y6fG");class sh extends Za{constructor(){super(),this.limitedMotor=!1,this.limitedMotor2=!1,this.focusedBall=!1,this.draw.m_drawXOff=-1880,this.draw.m_drawYOff=-220,this.sGround1.lineStyle(6,10324289),this.sGround1.beginFill(13546582),this.sGround1.drawRect(1045,1452,681,56),this.sGround1.endFill(),na.playingReplay||this.LoadParts(),this.controlText=new js.Text(""),this.controlText.x=400,this.controlText.y=102,this.controlText.anchor.set(.5,0),this.controlText.text='Use the left/right arrow keys to rotate the catapult\'s arm. Try to launch the ball into the pit to the right.\nWhen finished, click "Stop Simulation" to continue the tutorial.',this.controlText.visible=!1;var t=new js.TextStyle;t.align="center",t.fontFamily=Sa.GLOBAL_FONT,t.fontSize=14,t.leading=1,this.controlText.style=t,this.addChild(this.controlText)}LoadParts(){var t=new gh(-57,3.9,5,3);t.red=160,t.green=120,t.blue=70,this.allParts.push(t),(t=new gh(-60,4.9,4,.2)).red=160,t.green=120,t.blue=70,this.allParts.push(t),(t=new gh(-60,4.7,.1,.4)).red=160,t.green=120,t.blue=70,this.allParts.push(t),(t=new gh(-59.5,4.7,.1,.4)).red=160,t.green=120,t.blue=70,this.allParts.push(t),t=new vh(this.allParts[this.allParts.length-3],this.allParts[this.allParts.length-2],-59.95,5),this.allParts.push(t),t=new vh(this.allParts[this.allParts.length-4],this.allParts[this.allParts.length-2],-59.45,5),this.allParts.push(t),this.motor=new xh(this.allParts[this.allParts.length-6],this.allParts[this.allParts.length-5],-56.5,5),this.motor.enableMotor=!0,this.motor.motorSpeed=10,this.motor.motorStrength=10,this.allParts.push(this.motor),this.ball=new _h(-59.7,4.8,.1),this.ball.red=100,this.ball.green=255,this.ball.blue=40,this.allParts.push(this.ball)}Init(t){super.Init(t),na.viewingUnsavedReplay||this.ShowTutorialDialog(32,!0)}CloseTutorialDialog(t){32==t?this.ShowTutorialDialog(33,!0):33==t?this.ShowTutorialDialog(34):super.CloseTutorialDialog(t)}Update(){super.Update(),na.viewingUnsavedReplay||(this.controlText.visible=!this.paused),this.m_sidePanel.DisableStuffForCatapultLevel(),na.playingReplay||(this.limitedMotor||-10!=this.motor.motorLowerLimit||(this.limitedMotor=!0,this.ShowTutorialDialog(35)),this.limitedMotor&&!this.limitedMotor2&&50==this.motor.motorUpperLimit&&(this.limitedMotor2=!0,this.ShowTutorialDialog(36)))}resetButton(t=!0){if(super.resetButton(t),this.limitedMotor2&&!this.focusedBall){this.controlText.text="Use the left/right arrow keys to rotate the catapult's arm. Try to launch the ball into the pit to the right.";var e=new js.TextStyle;e.align="center",e.fontFamily=Sa.GLOBAL_FONT,e.fontSize=13,e.leading=1,this.controlText.style=e,this.focusedBall=!0,this.ShowTutorialDialog(37)}}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,this.World2ScreenX(-48),this.World2ScreenY(-1),e)}ChallengeOver(){return!!this.simStarted&&(this.focusedBall&&this.ball.GetBody().GetWorldCenter().x>-15&&this.ball.GetBody().GetWorldCenter().x<-3&&this.ball.GetBody().GetWorldCenter().y>12.5)}GetBuildingArea(){var t=new ps.b2AABB;return t.lowerBound.Set(-61,-1),t.upperBound.Set(-50.5,7),t}textButton(){this.ShowDisabledDialog()}saveButton(){this.ShowDisabledDialog()}loadButton(t=!0){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}loadRobotButton(t=!0){this.ShowDisabledDialog()}loadReplayButton(t=!0){this.ShowDisabledDialog()}loadChallengeButton(t=!0){this.ShowDisabledDialog()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}class rh extends Ya{constructor(){super(),this.rectSelected=!1,this.rotatedRect=!1,this.draggedRect=!1,this.selectedRects=!1,this.draggedRects=!1,this.fixatedRects=!1,this.autoWheel=!1,this.endUncollided=!1,this.shownEnd=!1,this.draw.m_drawXOff=-100,this.draw.m_drawYOff=-290,this.m_physScale=22.5,na.playingReplay||this.LoadParts()}LoadParts(){var t=new gh(17,-3,8,.3);t.isStatic=!0,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(17,-4,.3,1)).isStatic=!0,t.red=199,t.green=199,t.blue=199,this.allParts.push(t),(t=new gh(16.8,-4.3,.6,.3)).isStatic=!0,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(10,-3.1,1,.3)).isStatic=!0,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(16.35,-4.26,.5,.3)).isStatic=!0,t.red=120,t.green=255,t.blue=112,t.angle=-.15,this.allParts.push(t),t.red=120,t.green=255,t.blue=112,(t=new gh(10.95,-3.15,.5,.3)).isStatic=!0,t.red=120,t.green=255,t.blue=112,t.angle=-.15,this.allParts.push(t),this.straightRect=new gh(16,-7.5,.3,2.5),this.straightRect.isStatic=!0,this.straightRect.red=120,this.straightRect.green=255,this.straightRect.blue=112,this.allParts.push(this.straightRect),this.angledRect=new gh(12,-6.5,2.5,.3),this.angledRect.isStatic=!0,this.angledRect.red=120,this.angledRect.green=255,this.angledRect.blue=112,this.angledRect.angle=-.2,this.allParts.push(this.angledRect),t=new gh(23,-3.8,1.5,.5),this.allParts.push(t),t=new gh(22.5,-4.3,2.5,.7),this.allParts.push(t),t=new gh(24.7,-5.1,.3,.8),this.allParts.push(t),t=new vh(this.allParts[this.allParts.length-3],this.allParts[this.allParts.length-2],23.75,-3.75),this.allParts.push(t),t=new vh(this.allParts[this.allParts.length-3],this.allParts[this.allParts.length-2],24.85,-4.35),this.allParts.push(t),(t=new _h(23.1,-3.5,.5)).red=200,t.green=70,t.blue=50,this.allParts.push(t),(t=new _h(24.4,-3.5,.5)).red=200,t.green=70,t.blue=50,this.allParts.push(t),t=new xh(this.allParts[this.allParts.length-2],this.allParts[this.allParts.length-7],23.1,-3.5),this.allParts.push(t),this.wheelMotor=new xh(this.allParts[this.allParts.length-2],this.allParts[this.allParts.length-8],24.4,-3.5),this.wheelMotor.enableMotor=!0,this.allParts.push(this.wheelMotor),(t=new gh(2.8,-1.7,6,.2)).red=199,t.green=199,t.blue=199,this.allParts.push(t),(t=new gh(8.6,-2.7,.2,1.5)).red=150,t.green=150,t.blue=150,this.allParts.push(t),(t=new gh(8.6,-1.4,1.6,.2)).red=150,t.green=150,t.blue=150,this.allParts.push(t),(t=new _h(3,-1.6,.86)).red=70,t.green=70,t.blue=70,this.allParts.push(t),(t=new _h(4.8,-1.6,.5)).red=150,t.green=150,t.blue=150,t.isStatic=!0,this.allParts.push(t),t=new vh(this.allParts[this.allParts.length-5],this.allParts[this.allParts.length-4],8.7,-1.6),this.allParts.push(t),t=new vh(this.allParts[this.allParts.length-5],this.allParts[this.allParts.length-4],8.7,-1.3),this.allParts.push(t),t=new vh(this.allParts[this.allParts.length-7],this.allParts[this.allParts.length-4],3,-1.6),this.allParts.push(t),t=new xh(this.allParts[this.allParts.length-8],this.allParts[this.allParts.length-4],4.8,-1.6),this.allParts.push(t),(t=new gh(7.5,-1,.3,1)).isStatic=!0,t.red=199,t.green=199,t.blue=199,this.allParts.push(t),(t=new gh(7.5,0,2.5,.3)).isStatic=!0,t.red=199,t.green=199,t.blue=199,this.allParts.push(t),(t=new gh(9.7,-.5,.3,.5)).isStatic=!0,t.red=199,t.green=199,t.blue=199,this.allParts.push(t),(t=new gh(10,-.5,1,.3)).isStatic=!0,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(11,-.45,.8,.3)).isStatic=!0,t.angle=.15,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(11.7,-.28,.8,.3)).isStatic=!0,t.angle=.3,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(12.4,0,.8,.3)).isStatic=!0,t.angle=.45,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(13,.36,.8,.3)).isStatic=!0,t.angle=.6,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(13.6,.83,.8,.3)).isStatic=!0,t.angle=.75,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(14.15,1.35,.8,.3)).isStatic=!0,t.angle=.75,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(14.63,1.75,.8,.3)).isStatic=!0,t.angle=.6,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(15.05,2,.8,.3)).isStatic=!0,t.angle=.45,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(15.45,2.2,.8,.3)).isStatic=!0,t.angle=.3,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(15.8,2.3,.8,.3)).isStatic=!0,t.angle=.15,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(16.1,2.35,.8,.3)).isStatic=!0,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(16.4,2.3,.8,.3)).isStatic=!0,t.angle=-.15,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(16.7,2.2,.8,.3)).isStatic=!0,t.angle=-.3,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(17,2.05,.8,.3)).isStatic=!0,t.angle=-.45,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(17.3,1.85,.8,.3)).isStatic=!0,t.angle=-.6,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(17.6,1.6,.8,.3)).isStatic=!0,t.angle=-.75,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(20.6,2.6,1.2,.3)).isStatic=!0,t.angle=-Math.PI/2,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(20.85,3.5,.6,.3)).isStatic=!0,t.angle=-1.36,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(20.75,3.75,.6,.3)).isStatic=!0,t.angle=-1.15,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(20.6,3.95,.6,.3)).isStatic=!0,t.angle=-.94,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(20.4,4.1,.6,.3)).isStatic=!0,t.angle=-.73,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(20.15,4.2,.6,.3)).isStatic=!0,t.angle=-.52,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(19.85,4.25,.6,.3)).isStatic=!0,t.angle=-.31,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(12,4.65,8,.3)).isStatic=!0,t.angle=-.08,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(9,5.98,2.1,.5)).isStatic=!0,t.angle=-.1,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(5.5,6.6,1.6,.3)).isStatic=!0,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(.2,7.2,8,.2)).red=199,t.green=199,t.blue=199,this.allParts.push(t),(t=new gh(8,6.6,.2,.8)).red=199,t.green=199,t.blue=199,this.allParts.push(t),(t=new gh(7.2,6.6,2,.2)).density=10,t.red=150,t.green=150,t.blue=150,this.allParts.push(t),(t=new _h(.2,7.3,1)).red=70,t.green=70,t.blue=70,this.allParts.push(t),(t=new _h(2.9,7.3,.5)).isStatic=!0,t.red=150,t.green=150,t.blue=150,this.allParts.push(t),(t=new _h(8.1,7.3,.2)).red=150,t.green=150,t.blue=150,this.allParts.push(t),t=new vh(this.allParts[this.allParts.length-6],this.allParts[this.allParts.length-3],.2,7.3),this.allParts.push(t),t=new xh(this.allParts[this.allParts.length-7],this.allParts[this.allParts.length-3],2.9,7.3),this.allParts.push(t),t=new vh(this.allParts[this.allParts.length-8],this.allParts[this.allParts.length-3],8.1,7.3),this.allParts.push(t),t=new vh(this.allParts[this.allParts.length-8],this.allParts[this.allParts.length-4],8.1,7.3),this.allParts.push(t),t=new vh(this.allParts[this.allParts.length-9],this.allParts[this.allParts.length-8],8.1,6.7),this.allParts.push(t),(t=new gh(8.2,5.8,.2,.8)).red=150,t.green=150,t.blue=150,this.allParts.push(t),(t=new gh(7.7,5.8,.2,.8)).red=150,t.green=150,t.blue=150,this.allParts.push(t),(t=new gh(7.2,5.8,.2,.8)).density=20,t.red=150,t.green=150,t.blue=150,this.allParts.push(t),(t=new gh(6.7,5.8,.2,.8)).density=20,t.red=150,t.green=150,t.blue=150,this.allParts.push(t),(t=new gh(6.1,5.6,.3,1)).red=150,t.green=150,t.blue=150,this.allParts.push(t),(t=new gh(5.5,5.6,.3,1)).red=150,t.green=150,t.blue=150,this.allParts.push(t),(t=new gh(8.85,8.72,.7,.3)).isStatic=!0,t.angle=.6,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(9.25,9,.7,.3)).isStatic=!0,t.angle=.5,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(9.7,9.25,.7,.3)).isStatic=!0,t.angle=.4,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(10.2,9.45,.7,.3)).isStatic=!0,t.angle=.3,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(10.75,9.6,.7,.3)).isStatic=!0,t.angle=.2,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(11.35,9.7,.7,.3)).isStatic=!0,t.angle=.1,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(12,9.73,3,.3)).isStatic=!0,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(14.95,9.7,.5,.3)).isStatic=!0,t.angle=-.1,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(15.25,9.65,.5,.3)).isStatic=!0,t.angle=-.2,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(15.55,9.57,.5,.3)).isStatic=!0,t.angle=-.3,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(15.85,9.46,.5,.3)).isStatic=!0,t.angle=-.3,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(16.15,9.38,.5,.3)).isStatic=!0,t.angle=-.2,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(16.45,9.34,.5,.3)).isStatic=!0,t.angle=-.1,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(16.8,9.33,8,.3)).isStatic=!0,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(25.35,9.21,1,.3)).isStatic=!0,t.red=120,t.green=255,t.blue=112,this.allParts.push(t),(t=new gh(17.9,6,.6,2.5)).isStatic=!0,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),(t=new gh(18.5,6,1.5,.5)).isStatic=!0,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),(t=new gh(18.5,7.05,1.2,.4)).isStatic=!0,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),(t=new gh(18.5,8,1.5,.5)).isStatic=!0,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),(t=new gh(20.1,7.3,2.4,.6)).isStatic=!0,t.angle=.9,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),this.endChunk=new gh(20.2,6.5,.6,2.5),this.endChunk.isStatic=!0,this.endChunk.red=251,this.endChunk.green=241,this.endChunk.blue=116,this.allParts.push(this.endChunk),(t=new gh(21.8,6.2,.6,2.5)).isStatic=!0,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),(t=new gh(23.4,6.4,1.2,.5)).isStatic=!0,t.angle=.9,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),(t=new gh(23.4,7.6,1.2,.5)).isStatic=!0,t.angle=-.9,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),(t=new gh(22.7,6,.5,2.5)).isStatic=!0,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),(t=new gh(22.6,6,1.2,.5)).isStatic=!0,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),(t=new gh(22.6,8,1.2,.5)).isStatic=!0,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),(t=new gh(23.95,6.9,.6,.7)).isStatic=!0,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),(t=new gh(24.75,6,.6,2.5)).isStatic=!0,t.red=251,t.green=241,t.blue=116,this.allParts.push(t),this.ball=new _h(24.4,-4.6,.3),this.ball.red=251,this.ball.green=241,this.ball.blue=116,this.ball.density=30,this.ball.isCameraFocus=!0,this.allParts.push(this.ball)}Init(t){super.Init(t),na.playingReplay||this.ShowTutorialDialog(70,!0)}CloseTutorialDialog(t){if(70==t)this.ShowTutorialDialog(71,!0);else if(71==t)this.ShowTutorialDialog(72);else{if(81==t){if(Ws.SetLevelDone(7),this.m_scoreWindow)try{this.removeChild(this.m_scoreWindow)}catch(t){}this.m_scoreWindow=new Ma(this,this.GetScore()),na.winSound.play(),this.addChild(this.m_scoreWindow),this.m_fader.visible=!0}super.CloseTutorialDialog(t)}}Update(){super.Update(),na.playingReplay||(this.rectSelected||1!=this.selectedParts.length||this.selectedParts[0]!=this.straightRect||(this.rectSelected=!0,this.ShowTutorialWindow(73,this.World2ScreenX(2),this.World2ScreenY(-4))),this.rectSelected&&!this.rotatedRect&&this.wasRotating&&this.curAction!=na.ROTATE&&(this.rotatedRect=!0,this.ShowTutorialWindow(74,this.World2ScreenX(2),this.World2ScreenY(-4))),this.rotatedRect&&!this.draggedRect&&this.wasDragging&&this.draggingPart!=this.straightRect&&(this.draggedRect=!0,this.ShowTutorialDialog(75)),this.draggedRect&&!this.selectedRects&&2==this.selectedParts.length&&Vs.ObjectInArray(this.straightRect,this.selectedParts)&&Vs.ObjectInArray(this.angledRect,this.selectedParts)&&(this.selectedRects=!0,this.ShowTutorialDialog(76)),this.selectedRects&&!this.draggedRects&&this.wasDragging2&&!this.draggingPart&&this.angledRect.centerY>-5&&(this.draggedRects=!0,this.ShowTutorialDialog(77)),this.draggedRects&&!this.fixatedRects&&this.straightRect.isStatic&&this.angledRect.isStatic&&(this.fixatedRects=!0,this.ShowTutorialDialog(78)),this.fixatedRects&&!this.autoWheel&&this.wheelMotor.autoCCW&&(this.autoWheel=!0,this.ShowTutorialDialog(79)),!this.autoWheel||this.endUncollided||this.endChunk.collide||(this.endUncollided=!0,this.ShowTutorialDialog(80)),this.endUncollided&&!this.shownEnd&&!this.paused&&this.ball.GetBody().GetWorldCenter().x>25&&this.ball.GetBody().GetWorldCenter().y>9&&(this.shownEnd=!0,this.ShowTutorialDialog(81))),this.wasDragging=this.draggingPart==this.straightRect,this.wasDragging2=Vs.ObjectInArray(this.straightRect,this.draggingParts)&&Vs.ObjectInArray(this.angledRect,this.draggingParts),this.wasRotating=this.curAction==na.ROTATE}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,this.World2ScreenX(-10),this.World2ScreenY(-10),e)}ChallengeOver(){return!1}GetScore(){return 1e3}saveButton(){this.ShowDisabledDialog()}loadButton(t=!0){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}submitButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}viewReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}loadRobotButton(t=!0){this.ShowDisabledDialog()}loadReplayButton(t=!0){this.ShowDisabledDialog()}loadChallengeButton(t=!0){this.ShowDisabledDialog()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}class nh extends Ya{constructor(){super(),this.dialog=null,this.wasPasting=!1,this.wasSaveWindowVisible=!1,this.colouredFace=!1,this.unoutlinedStuff=!1,this.movedLegsBack=!1,this.createdRect=!1,this.fixated=!1,this.invisiblised=!1,this.enabledShoulder=!1,this.copiedRagdoll=!1,this.pastedRagdoll=!1,this.madeText=!1,this.enteredText=!1,this.uncheckedAlwaysDisplay=!1,this.draw.m_drawXOff=100,this.draw.m_drawYOff=-150,na.playingReplay||this.LoadParts()}LoadParts(){this.hair1=new _h(9.5,1,.7),this.hair1.red=255,this.hair1.green=209,this.hair1.blue=59,this.allParts.push(this.hair1),this.neck=new gh(9.6,2.8,.8,1),this.neck.red=255,this.neck.green=216,this.neck.blue=136,this.allParts.push(this.neck),this.face=new _h(10,2,1.1),this.face.red=180,this.face.green=180,this.face.blue=180,this.face.density=5,this.allParts.push(this.face),this.hair2=new bh(9.1,.8,10.6,.75,8.8,1.9),this.hair2.red=255,this.hair2.green=209,this.hair2.blue=59,this.allParts.push(this.hair2),this.hair3=new bh(9.1,.8,10.6,.75,11.3,1.9),this.hair3.red=255,this.hair3.green=209,this.hair3.blue=59,this.allParts.push(this.hair3),this.leftEye=new _h(9.6,1.8,.2),this.leftEye.red=244,this.leftEye.green=243,this.leftEye.blue=238,this.leftEye.outline=!1,this.allParts.push(this.leftEye),this.rightEye=new _h(10.4,1.8,.2),this.rightEye.red=244,this.rightEye.green=243,this.rightEye.blue=238,this.rightEye.outline=!1,this.allParts.push(this.rightEye),this.leftPupil=new _h(9.6,1.8,.1),this.leftPupil.red=124,this.leftPupil.green=141,this.leftPupil.blue=233,this.leftPupil.outline=!1,this.allParts.push(this.leftPupil),this.rightPupil=new _h(10.4,1.8,.1),this.rightPupil.red=124,this.rightPupil.green=141,this.rightPupil.blue=233,this.rightPupil.outline=!1,this.allParts.push(this.rightPupil),this.nose=new bh(9.95,1.9,10.18,2.2,9.9,2.3),this.nose.red=255,this.nose.green=216,this.nose.blue=136,this.allParts.push(this.nose),this.mouth=new bh(9.5,2.5,10.4,2.5,10.1,2.85),this.mouth.red=244,this.mouth.green=243,this.mouth.blue=238,this.allParts.push(this.mouth),this.lowerSkirt=new bh(10,6.3,8.2,8.7,11.8,8.7),this.lowerSkirt.red=120,this.lowerSkirt.green=108,this.lowerSkirt.blue=110,this.allParts.push(this.lowerSkirt),this.upperSkirt=new bh(10,5.3,8.4,7.7,11.6,7.7),this.upperSkirt.red=120,this.upperSkirt.green=108,this.upperSkirt.blue=110,this.allParts.push(this.upperSkirt),this.upperTorso=new gh(8.9,3.6,2.2,1.8),this.upperTorso.red=255,this.upperTorso.green=133,this.upperTorso.blue=74,this.allParts.push(this.upperTorso),this.lowerTorso=new gh(9.1,5.3,1.8,1.5),this.lowerTorso.red=255,this.lowerTorso.green=133,this.lowerTorso.blue=74,this.allParts.push(this.lowerTorso),this.upperLeftArm=new gh(7.35,4.05,2,.5),this.upperLeftArm.angle=-.6,this.upperLeftArm.red=255,this.upperLeftArm.green=216,this.upperLeftArm.blue=136,this.allParts.push(this.upperLeftArm),this.lowerLeftArm=new gh(7.25,5.1,2,.5),this.lowerLeftArm.angle=.8,this.lowerLeftArm.red=255,this.lowerLeftArm.green=216,this.lowerLeftArm.blue=136,this.allParts.push(this.lowerLeftArm),this.leftHand=new _h(8.75,5.85,.4),this.leftHand.red=255,this.leftHand.green=216,this.leftHand.blue=136,this.allParts.push(this.leftHand),this.upperRightArm=new gh(10.85,3.65,.5,2),this.upperRightArm.angle=-.1,this.upperRightArm.red=255,this.upperRightArm.green=216,this.upperRightArm.blue=136,this.allParts.push(this.upperRightArm),this.lowerRightArm=new gh(10.95,5.3,.5,2),this.lowerRightArm.red=255,this.lowerRightArm.green=216,this.lowerRightArm.blue=136,this.allParts.push(this.lowerRightArm),this.rightHand=new _h(11.2,7.2,.4),this.rightHand.red=255,this.rightHand.green=216,this.rightHand.blue=136,this.allParts.push(this.rightHand),this.leftFoot=new bh(9,12,9.6,11.2,10.2,12),this.leftFoot.red=174,this.leftFoot.green=134,this.leftFoot.blue=174,this.allParts.push(this.leftFoot),this.rightFoot=new bh(10.25,12,10.85,11.2,11.45,12),this.rightFoot.red=174,this.rightFoot.green=134,this.rightFoot.blue=174,this.allParts.push(this.rightFoot),this.upperLeftLeg=new gh(9.2,7.5,.6,2.2),this.upperLeftLeg.angle=.1,this.upperLeftLeg.red=255,this.upperLeftLeg.green=216,this.upperLeftLeg.blue=136,this.allParts.push(this.upperLeftLeg),this.lowerLeftLeg=new gh(9.2,9.4,.6,2.2),this.lowerLeftLeg.angle=-.1,this.lowerLeftLeg.red=255,this.lowerLeftLeg.green=216,this.lowerLeftLeg.blue=136,this.allParts.push(this.lowerLeftLeg),this.upperRightLeg=new gh(10.2,7.5,.6,2.2),this.upperRightLeg.angle=-.05,this.upperRightLeg.red=255,this.upperRightLeg.green=216,this.upperRightLeg.blue=136,this.allParts.push(this.upperRightLeg),this.lowerRightLeg=new gh(10.4,9.4,.6,2.2),this.lowerRightLeg.angle=-.15,this.lowerRightLeg.red=255,this.lowerRightLeg.green=216,this.lowerRightLeg.blue=136,this.allParts.push(this.lowerRightLeg);var t=new vh(this.face,this.hair1,10,.9);this.allParts.push(t),t=new vh(this.face,this.hair2,10,.9),this.allParts.push(t),t=new vh(this.face,this.hair3,10,.9),this.allParts.push(t),t=new vh(this.face,this.leftEye,10,.9),this.allParts.push(t),t=new vh(this.face,this.leftPupil,10,.9),this.allParts.push(t),t=new vh(this.face,this.rightEye,10,.9),this.allParts.push(t),t=new vh(this.face,this.rightPupil,10,.9),this.allParts.push(t),t=new vh(this.face,this.nose,10,.9),this.allParts.push(t),t=new vh(this.face,this.mouth,10,.9),this.allParts.push(t),t=new vh(this.lowerLeftArm,this.leftHand,10,.9),this.allParts.push(t),t=new vh(this.lowerRightArm,this.rightHand,10,.9),this.allParts.push(t),t=new vh(this.face,this.neck,10,.9),this.allParts.push(t);var e=new xh(this.neck,this.upperTorso,10,3.7);e.motorLowerLimit=-10,e.motorUpperLimit=10,this.allParts.push(e),(e=new xh(this.lowerTorso,this.upperTorso,10,5.35)).motorLowerLimit=-5,e.motorUpperLimit=5,this.allParts.push(e),(e=new xh(this.lowerTorso,this.upperSkirt,10,6.5)).motorLowerLimit=-10,e.motorUpperLimit=10,this.allParts.push(e),(e=new xh(this.lowerSkirt,this.upperSkirt,10,7.2)).motorLowerLimit=-10,e.motorUpperLimit=10,this.allParts.push(e),(e=new xh(this.lowerSkirt,this.upperLeftLeg,9.6,7.6)).motorLowerLimit=-40,e.motorUpperLimit=40,this.allParts.push(e),(e=new xh(this.lowerSkirt,this.upperRightLeg,10.4,7.6)).motorLowerLimit=-40,e.motorUpperLimit=40,this.allParts.push(e),(e=new xh(this.lowerLeftLeg,this.upperLeftLeg,9.4,9.55)).motorLowerLimit=-20,e.motorUpperLimit=20,this.allParts.push(e),(e=new xh(this.lowerRightLeg,this.upperRightLeg,10.6,9.55)).motorLowerLimit=-20,e.motorUpperLimit=20,this.allParts.push(e),(e=new xh(this.lowerLeftLeg,this.leftFoot,9.6,11.4)).motorLowerLimit=-10,e.motorUpperLimit=10,this.allParts.push(e),(e=new xh(this.lowerRightLeg,this.rightFoot,10.85,11.4)).motorLowerLimit=-10,e.motorUpperLimit=10,this.allParts.push(e),this.shoulderJoint1=new xh(this.upperTorso,this.upperLeftArm,9,3.7),this.shoulderJoint1.motorLowerLimit=-90,this.shoulderJoint1.motorUpperLimit=90,this.allParts.push(this.shoulderJoint1),this.shoulderJoint2=new xh(this.upperTorso,this.upperRightArm,11,3.7),this.shoulderJoint2.motorLowerLimit=-130,this.shoulderJoint2.motorUpperLimit=50,this.allParts.push(this.shoulderJoint2),(e=new xh(this.upperLeftArm,this.lowerLeftArm,7.7,4.8)).motorLowerLimit=-100,e.motorUpperLimit=50,this.allParts.push(e),(e=new xh(this.upperRightArm,this.lowerRightArm,11.2,5.4)).motorLowerLimit=-140,e.motorUpperLimit=10,this.allParts.push(e)}Init(t){super.Init(t),na.playingReplay||this.ShowTutorialDialog(38,!0)}CloseTutorialDialog(t){if(38==t)this.ShowTutorialDialog(39,!0);else if(39==t)this.ShowTutorialDialog(40);else if(50==t)this.m_loginWindow.HideFader(),this.m_tutorialDialog.visible=!1;else if(51==t)this.m_newUserWindow.HideFader(),this.m_tutorialDialog.visible=!1;else if(52==t)this.ShowTutorialDialog(54);else{if(54==t){if(Ws.SetLevelDone(6),this.m_fader.visible=!0,this.m_scoreWindow)try{this.removeChild(this.m_scoreWindow)}catch(t){}this.m_scoreWindow=new Ma(this,this.GetScore()),na.winSound.play(),this.addChild(this.m_scoreWindow)}super.CloseTutorialDialog(t)}}Update(){if(super.Update(),this.m_sidePanel.DisableStuffForHomeMoviesLevel(),!na.playingReplay){if(this.colouredFace||255!=this.face.red||216!=this.face.green||136!=this.face.blue||(this.colouredFace=!0,this.ShowTutorialDialog(41)),this.colouredFace&&!this.unoutlinedStuff&&0==this.hair1.outline&&0==this.hair2.outline&&0==this.hair3.outline&&(this.unoutlinedStuff=!0,this.ShowTutorialDialog(42)),this.unoutlinedStuff&&!this.movedLegsBack)for(var t=!1,e=!1,i=this.allParts.length,s=0;s<i;s++)this.allParts[s]==this.upperLeftLeg&&(t=!0),this.allParts[s]==this.upperRightLeg&&(e=!0),this.allParts[s]==this.lowerSkirt&&t&&e&&(this.movedLegsBack=!0,this.ShowTutorialDialog(56),this.tutorialPart=new gh(7.6,5.8,4.8,.5),this.tutorialPart.isEditable=!1,this.tutorialPart.isStatic=!0,this.tutorialPart.drawAnyway=!0,this.tutorialPart.collide=!1,this.tutorialPart.red=75,this.tutorialPart.green=185,this.tutorialPart.blue=75,this.tutorialPart.opacity=0,this.allParts.push(this.tutorialPart),this.redrawRobot=!0);this.movedLegsBack&&!this.createdRect&&this.allParts[this.allParts.length-1]instanceof vh&&this.allParts[this.allParts.length-2]instanceof gh&&(this.createdRect=!0,this.ShowTutorialDialog(59),this.allParts=Vs.RemoveFromArray(this.tutorialPart,this.allParts),this.redrawRobot=!0),this.createdRect&&!this.fixated&&this.allParts[this.allParts.length-2]instanceof gh&&this.allParts[this.allParts.length-2].isStatic&&(this.fixated=!0,this.ShowTutorialDialog(60)),this.fixated&&!this.invisiblised&&this.allParts[this.allParts.length-2]instanceof gh&&this.allParts[this.allParts.length-2].isStatic&&0==this.allParts[this.allParts.length-2].opacity&&0==this.allParts[this.allParts.length-2].outline&&(this.invisiblised=!0,this.ShowTutorialDialog(43)),this.invisiblised&&!this.enabledShoulder&&(this.shoulderJoint1.enableMotor||this.shoulderJoint2.enableMotor)&&(this.enabledShoulder=!0,this.ShowTutorialDialog(44)),this.copiedRagdoll&&!this.pastedRagdoll&&this.wasPasting&&this.curAction!=na.PASTE&&(this.pastedRagdoll=!0,this.ShowTutorialDialog(46)),this.pastedRagdoll&&!this.madeText&&this.allParts[this.allParts.length-1]instanceof wh&&(this.dialog=this.allParts[this.allParts.length-1],this.madeText=!0,this.ShowTutorialDialog(47)),this.madeText&&!this.enteredText&&this.curAction!=na.RESIZING_TEXT&&("New Text"!=this.dialog.text&&(4!=this.dialog.w||2!=this.dialog.h)||this.allParts[this.allParts.length-1]instanceof wh&&"New Text"!=this.allParts[this.allParts.length-1].text&&(4!=this.allParts[this.allParts.length-1].w||2!=this.allParts[this.allParts.length-1].h))&&(this.enteredText=!0,this.ShowTutorialDialog(48)),this.enteredText&&!this.uncheckedAlwaysDisplay&&(!this.dialog.alwaysVisible||this.allParts[this.allParts.length-1]instanceof wh&&!this.allParts[this.allParts.length-1].alwaysVisible)&&(this.uncheckedAlwaysDisplay=!0,this.ShowTutorialDialog(52,!0))}this.wasPasting=this.curAction==na.PASTE,this.wasSaveWindowVisible=this.m_chooserWindow&&this.m_chooserWindow.visible}copyButton(){super.copyButton(),this.enabledShoulder&&!this.copiedRagdoll&&Vs.ObjectInArray(this.face,this.selectedParts)&&Vs.ObjectInArray(this.lowerSkirt,this.selectedParts)&&Vs.ObjectInArray(this.shoulderJoint1,this.selectedParts)&&Vs.ObjectInArray(this.shoulderJoint1,this.selectedParts)&&Vs.ObjectInArray(this.lowerLeftArm,this.selectedParts)&&Vs.ObjectInArray(this.upperRightArm,this.selectedParts)&&Vs.ObjectInArray(this.upperLeftLeg,this.selectedParts)&&Vs.ObjectInArray(this.lowerRightLeg,this.selectedParts)&&(this.copiedRagdoll=!0,this.ShowTutorialDialog(45))}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,this.World2ScreenX(18),this.World2ScreenY(.5),e)}ChallengeOver(){return!1}GetScore(){return 1e3}saveButton(){this.ShowDisabledDialog()}loadButton(t=!0){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}submitButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}viewReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}loadRobotButton(t=!0){this.ShowDisabledDialog()}loadReplayButton(t=!0){this.ShowDisabledDialog()}loadChallengeButton(t=!0){this.ShowDisabledDialog()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}class oh extends Ha{constructor(){super(),this.clickedBuildBox=!1,this.builtBuildBox=!1,this.clickedConditions=!1,this.addingCondition=!1,this.addedWinCondition=!1,this.addingLossCondition1=!1,this.addedLossCondition1=!1,this.addingLossCondition2=!1,this.addedLossCondition2=!1,this.clickedRestrictions=!1,this.excludedStuff=!1,this.disallowedControl=!1,this.balloonTime=-1,na.playingReplay||this.LoadParts(),oh.playChallengeMode=!1,oh.playOnlyMode=!1}LoadParts(){this.draw.m_drawXOff=-480,this.draw.m_drawYOff=-200,this.m_physScale=16.875;var t=new gh(-30,10,20,5,!1);t.isStatic=!0,t.red=100,t.green=210,t.blue=80,this.allParts.push(t),(t=new gh(5,10,30,5,!1)).isStatic=!0,t.red=100,t.green=210,t.blue=80,this.allParts.push(t),(t=new gh(20,6,4,4.1)).blue=200,t.green=200,t.red=200,t.collide=!1,t.isStatic=!0,t.terrain=!0,this.allParts.push(t),(t=new gh(21,7,3,3.1)).blue=30,t.green=30,t.red=30,t.collide=!1,t.isStatic=!0,this.allParts.push(t);var e=new gh(-25,8.8,3,1);e.isCameraFocus=!0,e.blue=40,e.green=50,e.red=245,this.allParts.push(e),this.wheel1=new _h(-24.5,9.3,.7),this.wheel1.blue=80,this.wheel1.green=80,this.wheel1.red=80,this.allParts.push(this.wheel1),this.wheel2=new _h(-22.5,9.3,.7),this.wheel2.blue=80,this.wheel2.green=80,this.wheel2.red=80,this.allParts.push(this.wheel2);var i=new xh(e,this.wheel1,-24.5,9.3);i.enableMotor=!0,this.allParts.push(i),(i=new xh(e,this.wheel2,-22.5,9.3)).enableMotor=!0,this.allParts.push(i),(t=new gh(24,6,6,4.1)).blue=200,t.green=200,t.red=200,t.collide=!1,t.isStatic=!0,t.terrain=!0,this.allParts.push(t),this.garage=new gh(29.95,7,.2,4.1),this.garage.opacity=0,this.garage.outline=!1,this.garage.isStatic=!0,this.allParts.push(this.garage),(t=new gh(24.65,7.5,.8,.8)).blue=200,t.green=100,t.red=20,t.collide=!1,t.isStatic=!0,t.outline=!1,this.allParts.push(t),(t=new gh(25.95,7.5,.8,.8)).blue=200,t.green=100,t.red=20,t.collide=!1,t.isStatic=!0,t.outline=!1,this.allParts.push(t),(t=new gh(27.25,7.5,.8,.8)).blue=200,t.green=100,t.red=20,t.collide=!1,t.isStatic=!0,t.outline=!1,this.allParts.push(t),(t=new gh(28.55,7.5,.8,.8)).blue=200,t.green=100,t.red=20,t.collide=!1,t.isStatic=!0,t.outline=!1,this.allParts.push(t),(t=new gh(31.2,7.9,.1,.6)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new gh(31.2,8.4,.1,.6)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new gh(31.2,8.9,.1,.6)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new gh(31.2,9.4,.1,.61)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new gh(32.7,7.9,.1,.6)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new gh(32.7,8.4,.1,.6)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new gh(32.7,8.9,.1,.6)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new gh(32.7,9.4,.1,.61)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new gh(34.2,7.9,.1,.6)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new gh(34.2,8.4,.1,.6)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new gh(34.2,8.9,.1,.6)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new gh(34.2,9.4,.1,.61)).blue=230,t.green=230,t.red=230,this.allParts.push(t),(t=new bh(31,8,31.5,8,31.25,7.7)).blue=80,t.green=230,t.red=230,t.density=1,this.allParts.push(t),(t=new bh(32.5,8,33,8,32.75,7.7)).blue=80,t.green=230,t.red=80,t.density=1,this.allParts.push(t),(t=new bh(34,8,34.5,8,34.25,7.7)).blue=80,t.green=80,t.red=230,t.density=1,this.allParts.push(t),(t=new _h(31.25,7.2,.7)).blue=80,t.green=230,t.red=230,t.density=1,t.terrain=!0,this.allParts.push(t),(t=new _h(32.75,7.2,.7)).blue=80,t.green=230,t.red=80,t.density=1,t.terrain=!0,this.allParts.push(t),(t=new _h(34.25,7.2,.7)).blue=80,t.green=80,t.red=230,t.density=1,t.terrain=!0,this.allParts.push(t);var s=new vh(this.allParts[this.allParts.length-6],this.allParts[this.allParts.length-3],31.25,7.8);this.allParts.push(s),s=new vh(this.allParts[this.allParts.length-6],this.allParts[this.allParts.length-3],32.75,7.8),this.allParts.push(s),s=new vh(this.allParts[this.allParts.length-6],this.allParts[this.allParts.length-3],34.25,7.8),this.allParts.push(s),i=new xh(this.allParts[this.allParts.length-9],this.allParts[this.allParts.length-21],31.25,7.95),this.allParts.push(i),i=new xh(this.allParts[this.allParts.length-22],this.allParts[this.allParts.length-21],31.25,8.45),this.allParts.push(i),i=new xh(this.allParts[this.allParts.length-22],this.allParts[this.allParts.length-21],31.25,8.95),this.allParts.push(i),i=new xh(this.allParts[this.allParts.length-22],this.allParts[this.allParts.length-21],31.25,9.45),this.allParts.push(i),this.balloonJoint1=new xh(this.allParts[this.allParts.length-22],this.allParts[this.allParts.length-39],31.25,10.005),this.allParts.push(this.balloonJoint1),i=new xh(this.allParts[this.allParts.length-13],this.allParts[this.allParts.length-22],32.75,7.95),this.allParts.push(i),i=new xh(this.allParts[this.allParts.length-23],this.allParts[this.allParts.length-22],32.75,8.45),this.allParts.push(i),i=new xh(this.allParts[this.allParts.length-23],this.allParts[this.allParts.length-22],32.75,8.95),this.allParts.push(i),i=new xh(this.allParts[this.allParts.length-23],this.allParts[this.allParts.length-22],32.75,9.45),this.allParts.push(i),this.balloonJoint2=new xh(this.allParts[this.allParts.length-23],this.allParts[this.allParts.length-44],32.75,10.005),this.allParts.push(this.balloonJoint2),i=new xh(this.allParts[this.allParts.length-17],this.allParts[this.allParts.length-23],34.25,7.95),this.allParts.push(i),i=new xh(this.allParts[this.allParts.length-24],this.allParts[this.allParts.length-23],34.25,8.45),this.allParts.push(i),i=new xh(this.allParts[this.allParts.length-24],this.allParts[this.allParts.length-23],34.25,8.95),this.allParts.push(i),i=new xh(this.allParts[this.allParts.length-24],this.allParts[this.allParts.length-23],34.25,9.45),this.allParts.push(i),this.balloonJoint3=new xh(this.allParts[this.allParts.length-24],this.allParts[this.allParts.length-49],34.25,10.005),this.allParts.push(this.balloonJoint3),this.th1=new Ah(this.allParts[this.allParts.length-21],31.25,7.2),this.th1.autoOn=!0,this.th1.strength=2,this.th1.isBalloon=!0,this.allParts.push(this.th1),this.th2=new Ah(this.allParts[this.allParts.length-21],32.75,7.2),this.th2.autoOn=!0,this.th2.strength=2,this.th2.isBalloon=!0,this.allParts.push(this.th2),this.th3=new Ah(this.allParts[this.allParts.length-21],34.25,7.2),this.th3.autoOn=!0,this.th3.strength=2,this.th3.isBalloon=!0,this.allParts.push(this.th3)}Init(t){super.Init(t);var e=new wh(this,21.3,6.2,3,1,"GARAGE");this.allParts.push(e),na.playingReplay||this.ShowTutorialDialog(90,!0)}CloseTutorialDialog(t){if(90==t)this.ShowTutorialDialog(91,!0);else if(91==t)this.ShowTutorialDialog(92);else if(97==t)this.ShowTutorialWindow(98,0,160);else if(103==t)this.ShowTutorialWindow(104,0,220);else{if(106==t){if(Ws.SetLevelDone(9),this.m_fader.visible=!0,this.m_scoreWindow)try{this.removeChild(this.m_scoreWindow)}catch(t){}this.m_scoreWindow=new Ma(this,this.GetScore()),na.winSound.play(),this.addChild(this.m_scoreWindow)}super.CloseTutorialDialog(t)}}Update(){super.Update(),na.playingReplay||(this.clickedBuildBox||this.curAction!=na.DRAWING_BUILD_BOX?this.clickedBuildBox&&!this.builtBuildBox&&1==this.NumBuildingAreas()?(this.builtBuildBox=!0,this.ShowTutorialDialog(94)):this.builtBuildBox&&!this.clickedConditions&&this.m_conditionsDialog&&this.m_conditionsDialog.visible?(this.clickedConditions=!0,this.ShowTutorialWindow(95,276,130)):!this.clickedConditions||this.addingCondition||this.m_conditionsDialog.visible||this.curAction!=na.SELECTING_SHAPE?this.addingCondition&&!this.addedWinCondition&&1==oh.challenge.winConditions.length?(this.addedWinCondition=!0,this.ShowTutorialWindow(97,0,160,!0)):!this.addedWinCondition||this.addingLossCondition1||this.m_conditionsDialog.visible||this.curAction!=na.DRAWING_HORIZONTAL_LINE?this.addingLossCondition1&&!this.addedLossCondition1&&1==oh.challenge.lossConditions.length?(this.addedLossCondition1=!0,this.ShowTutorialWindow(100,276,130)):!this.addedLossCondition1||this.addingLossCondition2||this.m_conditionsDialog.visible||this.curAction!=na.SELECTING_SHAPE?this.addingLossCondition2&&!this.addedLossCondition2&&2==oh.challenge.lossConditions.length?(this.addedLossCondition2=!0,this.ShowTutorialWindow(102,276,130)):this.addedLossCondition2&&!this.clickedRestrictions&&this.m_restrictionsDialog&&this.m_restrictionsDialog.visible?(this.clickedRestrictions=!0,this.ShowTutorialWindow(103,0,220,!0)):this.clickedRestrictions&&!this.excludedStuff&&this.m_restrictionsDialog.fjBox.selected&&this.m_restrictionsDialog.sjBox.selected&&this.m_restrictionsDialog.thrustersBox.selected?(this.excludedStuff=!0,this.ShowTutorialWindow(105,0,220)):!this.excludedStuff||this.disallowedControl||oh.challenge.botControlAllowed||this.m_restrictionsDialog.visible||(this.disallowedControl=!0,this.ShowTutorialWindow(106,276,180)):(this.addingLossCondition2=!0,this.ShowTutorialDialog(101)):(this.addingLossCondition1=!0,this.ShowTutorialDialog(99)):(this.addingCondition=!0,this.ShowTutorialDialog(96)):(this.clickedBuildBox=!0,this.ShowTutorialDialog(93))),na.playingReplay||!this.simStarted||this.paused||(this.balloonTime--,5==this.balloonTime?(this.m_world.DestroyJoint(this.balloonJoint1.m_joint),this.balloonJoint1.m_joint=null):0==this.balloonTime&&(this.m_world.DestroyJoint(this.balloonJoint3.m_joint),this.balloonJoint3.m_joint=null))}ContactAdded(t){super.ContactAdded(t),(t.GetFixtureA().GetShape()==this.wheel1.GetShape()&&t.GetFixtureB().GetShape()==this.garage.GetShape()||t.GetFixtureA().GetShape()==this.wheel2.GetShape()&&t.GetFixtureB().GetShape()==this.garage.GetShape()||t.GetFixtureB().GetShape()==this.wheel1.GetShape()&&t.GetFixtureA().GetShape()==this.garage.GetShape()||t.GetFixtureB().GetShape()==this.wheel2.GetShape()&&t.GetFixtureA().GetShape()==this.garage.GetShape())&&(this.m_world.DestroyJoint(this.balloonJoint2.m_joint),this.balloonJoint2.m_joint=null,this.balloonTime=10)}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,this.World2ScreenX(-10),this.World2ScreenY(-10),e)}saveButton(){this.ShowDisabledDialog()}loadButton(t=!0){this.ShowDisabledDialog()}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}submitButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}viewReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}loadRobotButton(t=!0){this.ShowDisabledDialog()}loadReplayButton(t=!0){this.ShowDisabledDialog()}loadChallengeButton(t=!0){this.ShowDisabledDialog()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}a("7qcjp");js=a("4Y6fG");class ah extends Ya{constructor(){super(),this.partsConnected=!1,this.outlinesBehinded=!1,this.simStopped=!1,this.shapesUndragabled=!1,this.botInBox=!1,this.wasPlaying=!1,this.draw.m_drawXOff=-100,this.draw.m_drawYOff=-290,this.m_physScale=22.5,this.goalText=new js.Text(""),this.goalText.x=400,this.goalText.y=102,this.goalText.anchor.set(.5,0),this.goalText.text="Drag the balloon animal into the box on the left to complete the tutorial!",this.goalText.visible=!1;var t=new js.TextStyle;t.align="center",t.fill=14540253,t.fontFamily=Sa.GLOBAL_FONT,t.fontSize=14,t.leading=1,this.goalText.style=t,this.addChild(this.goalText),na.playingReplay||this.LoadParts()}LoadParts(){var t=new gh(-40,-10,20,.5,!1);t.red=180,t.green=200,t.blue=50,t.isStatic=!0,t.isEditable=!1,this.allParts.push(t),(t=new gh(-40,-10,.5,20,!1)).red=180,t.green=200,t.blue=50,t.isStatic=!0,t.isEditable=!1,this.allParts.push(t),(t=new gh(-40,9.5,20,.5,!1)).red=180,t.green=200,t.blue=50,t.isStatic=!0,t.isEditable=!1,this.allParts.push(t);var e=245,i=50,s=40;this.leg1Rect=new gh(15.52,4.96,2.48,2.9155),this.leg1Rect.angle=-.48,this.leg1Rect.blue=s,this.leg1Rect.green=i,this.leg1Rect.red=e,this.allParts.push(this.leg1Rect),this.leg2Rect=new gh(6,4.96,2.48,2.9155),this.leg2Rect.angle=.48,this.leg2Rect.blue=s,this.leg2Rect.green=i,this.leg2Rect.red=e,this.allParts.push(this.leg2Rect),this.leg1Circle1=new _h(16.05,5.04,1.2),this.leg1Circle1.blue=s,this.leg1Circle1.green=i,this.leg1Circle1.red=e,this.allParts.push(this.leg1Circle1),this.leg1Circle2=new _h(17.36,7.58,1.2),this.leg1Circle2.blue=s,this.leg1Circle2.green=i,this.leg1Circle2.red=e,this.allParts.push(this.leg1Circle2),this.leg2Circle1=new _h(7.95,5.04,1.2),this.leg2Circle1.blue=s,this.leg2Circle1.green=i,this.leg2Circle1.red=e,this.allParts.push(this.leg2Circle1),this.leg2Circle2=new _h(6.64,7.58,1.2),this.leg2Circle2.blue=s,this.leg2Circle2.green=i,this.leg2Circle2.red=e,this.allParts.push(this.leg2Circle2),this.neckRect=new gh(7.62,-2,2.26,2.26),this.neckRect.angle=-.26,this.neckRect.blue=s,this.neckRect.green=i,this.neckRect.red=e,this.allParts.push(this.neckRect),this.neckCircle1=new _h(9.03,.2,1.1),this.neckCircle1.blue=s,this.neckCircle1.green=i,this.neckCircle1.red=e,this.allParts.push(this.neckCircle1),this.neckCircle2=new _h(8.5,-1.8,1.1),this.neckCircle2.blue=s,this.neckCircle2.green=i,this.neckCircle2.red=e,this.allParts.push(this.neckCircle2);var r=new gh(16.8,-3.3,7,.3);r.angle=-.6,r.blue=s,r.green=i,r.red=e,this.allParts.push(r),this.tailRect=new gh(15.8,-2.2,3,2.1),this.tailRect.angle=-.6,this.tailRect.blue=s,this.tailRect.green=i,this.tailRect.red=e,this.allParts.push(this.tailRect),this.tailCircle1=new _h(15.9,-.2,1.02),this.tailCircle1.blue=s,this.tailCircle1.green=i,this.tailCircle1.red=e,this.allParts.push(this.tailCircle1),this.tailCircle2=new _h(18.5,-1.98,1.02),this.tailCircle2.blue=s,this.tailCircle2.green=i,this.tailCircle2.red=e,this.allParts.push(this.tailCircle2),(t=new gh(9.18,-5.12,1.5,2.08)).blue=s,t.green=i,t.red=e,t.angle=-.52,this.allParts.push(t);var n=new _h(9.3,-3.7,1);n.blue=s,n.green=i,n.red=e,n.terrain=!0,this.allParts.push(n),(t=new _h(10.5,-4.4,1)).blue=s,t.green=i,t.red=e,t.terrain=!0,this.allParts.push(t);var o=new vh(n,this.allParts[this.allParts.length-3],9.3,-3.7);this.allParts.push(o),o=new vh(this.allParts[this.allParts.length-4],this.allParts[this.allParts.length-2],10.5,-4.4),this.allParts.push(o);var a=new _h(7.04,-3.18,1.2);a.blue=s,a.green=i,a.red=e,this.allParts.push(a);var h=new _h(5.85,-3.7,.2);h.blue=s,h.green=i,h.red=e,this.allParts.push(h);var l=new _h(23.3,-5.2,1);l.blue=s,l.green=i,l.red=e,this.allParts.push(l),this.middle=new _h(12,2,2),this.middle.blue=s,this.middle.green=i,this.middle.red=e,this.allParts.push(this.middle),o=new vh(this.leg1Circle1,this.leg1Rect,16.05,5.04),this.allParts.push(o),o=new vh(this.leg1Circle2,this.leg1Rect,17.36,7.58),this.allParts.push(o),o=new vh(this.leg2Circle1,this.leg2Rect,7.95,5.04),this.allParts.push(o),o=new vh(this.leg2Circle2,this.leg2Rect,6.64,7.58),this.allParts.push(o),o=new vh(this.neckCircle1,this.neckRect,9.03,.2),this.allParts.push(o),o=new vh(this.neckCircle2,this.neckRect,8.5,-1.8),this.allParts.push(o),o=new vh(this.tailCircle1,this.tailRect,15.9,-.2),this.allParts.push(o),o=new vh(this.tailCircle2,this.tailRect,18.5,-1.98),this.allParts.push(o),o=new vh(n,this.neckCircle2,9,-2.8),this.allParts.push(o),o=new vh(h,a,6,-3.7),this.allParts.push(o),o=new vh(this.neckCircle2,a,7.7,-2.5),this.allParts.push(o),o=new vh(r,l,23.3,-5.2),this.allParts.push(o),o=new vh(r,this.tailCircle2,18.5,-1.98),this.allParts.push(o),(t=new gh(-10,8,2.5,.4)).red=220,t.green=220,t.blue=220,t.density=30,t.collide=!1,this.allParts.push(t),(t=new gh(-7.6,8,2.5,.4)).red=220,t.green=220,t.blue=220,t.density=30,t.collide=!1,this.allParts.push(t),(t=new gh(-5.2,8,2.5,.4)).red=220,t.green=220,t.blue=220,t.density=30,t.collide=!1,this.allParts.push(t),(t=new gh(-2.8,8,2.5,.4)).red=220,t.green=220,t.blue=220,t.density=30,t.collide=!1,this.allParts.push(t),o=new xh(this.allParts[this.allParts.length-4],this.allParts[this.allParts.length-3],-7.55,8.2),this.allParts.push(o),o=new xh(this.allParts[this.allParts.length-4],this.allParts[this.allParts.length-3],-5.15,8.2),this.allParts.push(o),o=new xh(this.allParts[this.allParts.length-4],this.allParts[this.allParts.length-3],-2.75,8.2),this.allParts.push(o)}Init(t){super.Init(t),na.playingReplay||this.ShowTutorialDialog(82,!0)}CloseTutorialDialog(t){if(82==t)this.ShowTutorialDialog(83,!0);else if(83==t)this.ShowTutorialDialog(84);else{if(89==t){if(Ws.SetLevelDone(8),this.m_scoreWindow)try{this.removeChild(this.m_scoreWindow)}catch(t){}this.m_scoreWindow=new Ma(this,this.GetScore()),na.winSound.play(),this.addChild(this.m_scoreWindow),this.m_fader.visible=!0}super.CloseTutorialDialog(t)}}Update(){super.Update(),na.playingReplay||(!(!this.partsConnected&&this.allParts[this.allParts.length-1]instanceof vh&&this.allParts[this.allParts.length-2]instanceof vh&&this.allParts[this.allParts.length-3]instanceof vh&&this.allParts[this.allParts.length-4]instanceof vh&&4==this.middle.GetActiveJoints().length)||2!=this.leg1Circle1.GetActiveJoints().length&&3!=this.leg1Rect.GetActiveJoints().length||2!=this.leg2Circle1.GetActiveJoints().length&&3!=this.leg2Rect.GetActiveJoints().length||2!=this.neckCircle1.GetActiveJoints().length&&3!=this.neckRect.GetActiveJoints().length||2!=this.tailCircle1.GetActiveJoints().length&&3!=this.tailRect.GetActiveJoints().length||(this.partsConnected=!0,this.ShowTutorialDialog(85)),this.partsConnected&&!this.outlinesBehinded&&this.leg1Circle1.terrain&&this.leg1Circle2.terrain&&this.leg2Circle1.terrain&&this.leg2Circle2.terrain&&this.neckCircle1.terrain&&this.neckCircle2.terrain&&this.tailCircle1.terrain&&this.tailCircle2.terrain&&(this.outlinesBehinded=!0,this.ShowTutorialDialog(86)),this.outlinesBehinded&&!this.simStopped&&this.wasPlaying&&!this.simStarted&&(this.simStopped=!0,this.ShowTutorialDialog(87)),this.simStopped&&!this.shapesUndragabled&&this.middle.undragable&&this.leg1Circle1.undragable&&this.leg1Circle2.undragable&&this.leg2Circle1.undragable&&this.leg2Circle2.undragable&&this.neckCircle1.undragable&&this.neckCircle2.undragable&&this.tailCircle1.undragable&&this.tailCircle2.undragable&&(this.shapesUndragabled=!0,this.ShowTutorialDialog(88)),this.shapesUndragabled&&!this.botInBox&&this.simStarted&&this.middle.GetBody().GetWorldCenter().x<-25&&this.middle.GetBody().GetWorldCenter().y>-8&&(this.botInBox=!0,this.ShowTutorialDialog(89))),this.goalText.visible=!this.paused&&this.shapesUndragabled,this.wasPlaying=this.simStarted}ShowTutorialDialog(t,e=!1){this.ShowTutorialWindow(t,this.World2ScreenX(-10),this.World2ScreenY(-10),e)}ChallengeOver(){return!1}GetScore(){return 1e3}saveReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}submitButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}viewReplayButton(){this.ShowDisabledDialog(),this.m_scoreWindow&&this.m_scoreWindow.visible&&this.m_scoreWindow.ShowFader()}saveButton(){this.ShowDisabledDialog()}loadButton(t=!0){this.ShowDisabledDialog()}loadRobotButton(t=!0){this.ShowDisabledDialog()}loadReplayButton(t=!0){this.ShowDisabledDialog()}loadChallengeButton(t=!0){this.ShowDisabledDialog()}commentButton(t="",e=!1){this.ShowDisabledDialog()}linkButton(t="",e=!1){this.ShowDisabledDialog()}embedButton(t="",e=!1){this.ShowDisabledDialog()}commentReplayButton(t="",e=!1){this.ShowDisabledDialog()}linkReplayButton(t="",e=!1){this.ShowDisabledDialog()}embedReplayButton(t="",e=!1){this.ShowDisabledDialog()}}class hh{static Encrypt(t){return t}static AddUser(t,e,i){if(!hh.waitingForResponse){hh.loader=new URLLoader;var s=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=addUser&user="+escape(t)+"&password="+MD5.encrypt(e)));s.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,i),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(s),hh.curAction=hh.ACTION_ADD_USER,hh.nonfatalErrorOccurred=!0,hh.latestCompletionFunction=i,hh.StartTimer()}}static Login(t,e,i){if(!hh.waitingForResponse){hh.loader=new URLLoader;var s=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=login&user="+escape(t)+"&password="+MD5.encrypt(e)));s.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,i),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(s),hh.curAction=hh.ACTION_LOGIN,hh.nonfatalErrorOccurred=!0,hh.latestCompletionFunction=i,hh.StartTimer(),hh.waitingForResponse=!0,hh.curTransactionType=hh.curAction}}static LoginGold(t,e,i){if(!hh.waitingForResponse){hh.loader=new URLLoader;var s=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=goldLogin&user="+escape(t)+"&password="+MD5.encrypt(e)));s.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,i),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(s),hh.curAction=hh.ACTION_LOGIN_GOLD,hh.nonfatalErrorOccurred=!0,hh.latestCompletionFunction=i,hh.StartTimer(),hh.waitingForResponse=!0,hh.curTransactionType=hh.curAction}}static SaveRobot(t,e,i,s,r,n,o,a,h,l){if(!hh.waitingForResponse){var c=hh.PutRobotIntoByteArray(i);c.compress(),hh.loader=new URLLoader;var d=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=uploadRobot&user="+escape(t)+"&password="+e+"&shared="+n+"&allowEdit="+o+"&prop="+a+(null==s?"":"&name="+escape(s))+(null==r?"":"&desc="+escape(r))+(""==h?"":"&challenge="+h)));d.data=c,d.method=URLRequestMethod.POST,d.contentType="application/octet-stream",hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,l),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(d),hh.curAction=hh.ACTION_SAVE_ROBOT,hh.latestCompletionFunction=l,hh.StartTimer()}}static ExportRobot(t,e,i,s,r,n,o){var a=hh.PutRobotIntoByteArray(t),h=new cs;h.writeUTF(e),h.writeUTF(i),h.writeInt(s),h.writeInt(r),h.writeInt(n),a.position=0,h.writeBytes(a),h.compress(),h.position=0;var l=new ds;l.encodeBytes(h),o(l.toString(),"robot")}static ExportReplay(t,e,i,s,r,n,o,a,h){var l=hh.PutRobotIntoByteArray(r);l.compress();var c=hh.PutReplayIntoByteArray(t);c.compress();var d=new cs;for(d.writeInt(c.length),d.writeInt(l.length),c.position=0;c.position!=c.length;)d.writeByte(c.readByte());for(l.position=0;l.position!=l.length;)d.writeByte(l.readByte());d.writeUTF(e),d.writeUTF(i),d.writeUTF(s),d.writeInt(n),d.writeUTF(o),d.writeInt(a),d.compress(),d.position=0;var u=new ds;u.encodeBytes(d),h(u.toString(),"replay")}static ExportChallenge(t,e,i,s,r,n){var o=hh.PutChallengeIntoByteArray(t),a=new cs;a.writeUTF(e),a.writeUTF(i),a.writeInt(s),a.writeInt(r),o.position=0,a.writeBytes(o),a.compress(),a.position=0;var h=new ds;h.encodeBytes(a),n(h.toString(),"challenge")}static GetRobotData(t,e,i,s,r,n,o,a){if(!hh.waitingForResponse){hh.robotType=i?hh.SHARED:hh.NORMAL,hh.curShared=i,hh.curSortType=s,hh.curSortPeriod=r,hh.curRobotPage=n,hh.curSearch=o,hh.loader=new URLLoader;var h=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=getRobots&user="+(i?"_Public":escape(t))+"&password="+e+"&sortType="+s+"&sortPeriod="+r+"&page="+n+"&search="+escape(o)));h.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,a),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(h),hh.curAction=hh.ACTION_GET_ROBOT_DATA,hh.latestCompletionFunction=a,hh.StartTimer()}}static LoadRobot(t,e,i,s){if(!hh.waitingForResponse){hh.loader=new URLLoader;var r=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=downloadRobot&user="+escape(t)+"&password="+e+"&id="+hh.robotList[i].id));r.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.BINARY,hh.loader.addEventListener(Event.COMPLETE,s),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(r),hh.curAction=hh.ACTION_LOAD_ROBOT,hh.latestCompletionFunction=s,hh.StartTimer()}}static LoadRobotByID(t,e){if(!hh.waitingForResponse){hh.loader=new URLLoader;var i=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=downloadRobot&user=_Public&password=blah&id="+t));i.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.BINARY,hh.loader.addEventListener("complete",e),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(i),hh.curAction=hh.ACTION_LOAD_ROBOT,hh.latestCompletionFunction=e,hh.StartTimer()}}static DeleteRobot(t,e,i,s){if(!hh.waitingForResponse){hh.loader=new URLLoader;var r=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=deleteRobot&user="+escape(t)+"&password="+e+"&id="+hh.robotList[i].id));r.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,s),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(r),hh.curAction=hh.ACTION_DELETE_ROBOT,hh.deleteNumber=i,hh.nonfatalErrorOccurred=!0,hh.latestCompletionFunction=s,hh.StartTimer()}}static SaveReplay(t,e,i,s,r,n,o,a,h,l,c){if(!hh.waitingForResponse){var d=new cs,u=hh.PutReplayIntoByteArray(i);for(u.compress(),u.position=0;u.position!=u.length;)d.writeByte(u.readByte());hh.loader=new URLLoader;var p=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=uploadReplay&user="+escape(t)+"&password="+e+"&shared="+l+(null==s?"":"&name="+escape(s))+(null==r?"":"&desc="+escape(r))+"&robot="+n+"&replayLength="+d.length+"&score="+a+"&challenge="+h));if(""==n){var m=hh.PutRobotIntoByteArray(o);for(m.compress(),m.position=0;m.position!=m.length;)d.writeByte(m.readByte())}p.data=d,p.method=URLRequestMethod.POST,p.contentType="application/octet-stream",hh.loader.addEventListener(Event.COMPLETE,c),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(p),hh.curAction=hh.ACTION_SAVE_REPLAY,hh.latestCompletionFunction=c,hh.StartTimer()}}static GetReplayData(t,e,i,s,r,n,o,a){if(!hh.waitingForResponse){hh.replayType=i?hh.SHARED:hh.NORMAL,hh.curShared=i,hh.curSortType=s,hh.curSortPeriod=r,hh.curReplayPage=n,hh.curSearch=o,hh.loader=new URLLoader;var h=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=getReplays&user="+(i?"_Public":escape(t))+"&password="+e+"&sortType="+s+"&sortPeriod="+r+"&page="+n+"&search="+escape(o)));h.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,a),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(h),hh.curAction=hh.ACTION_GET_REPLAY_DATA,hh.latestCompletionFunction=a,hh.StartTimer()}}static LoadReplay(t,e,i,s){if(!hh.waitingForResponse){hh.loader=new URLLoader;var r=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=downloadReplay&user="+escape(t)+"&password="+e+"&id="+hh.replayList[i].id+"&robot="+hh.replayList[i].robotID));r.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.BINARY,hh.loader.addEventListener("complete",s),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(r),hh.curAction=hh.ACTION_LOAD_REPLAY,hh.latestCompletionFunction=s,hh.StartTimer()}}static LoadReplayByID(t,e){if(!hh.waitingForResponse){hh.loader=new URLLoader;var i=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=downloadReplay&user=_Public&password=blah&id="+t+"&robot=-1"));i.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.BINARY,hh.loader.addEventListener("complete",e),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(i),hh.curAction=hh.ACTION_LOAD_REPLAY,hh.latestCompletionFunction=e,hh.StartTimer()}}static LoadReplayFromScore(t,e,i,s){if(!hh.waitingForResponse){hh.loader=new URLLoader;var r=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=downloadReplay&user="+escape(t)+"&password="+e+"&id="+hh.scoreList[i].replayID+"&robot="+hh.scoreList[i].robotID));r.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.BINARY,hh.loader.addEventListener("complete",s),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(r),hh.curAction=hh.ACTION_LOAD_REPLAY,hh.latestCompletionFunction=s,hh.StartTimer()}}static DeleteReplay(t,e,i,s){if(!hh.waitingForResponse){hh.loader=new URLLoader;var r=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=deleteReplay&user="+escape(t)+"&password="+e+"&id="+hh.replayList[i].id));r.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener("complete",s),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(r),hh.curAction=hh.ACTION_DELETE_REPLAY,hh.deleteNumber=i,hh.nonfatalErrorOccurred=!0,hh.latestCompletionFunction=s,hh.StartTimer()}}static GetScoreData(t,e,i,s,r,n,o,a,h){if(!hh.waitingForResponse){hh.highScoresChallenge=i,hh.highScoresDaily=s,hh.highScoresPersonal=r,hh.scoreType=s?hh.DAILY:r?hh.PERSONAL:hh.ALLTIME,hh.highScoresSortType=n,hh.curScorePage=o,hh.curSearch=a,hh.loader=new URLLoader;var l=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=getScores&user="+escape(t)+"&password="+e+"&challenge="+i+"&daily="+(s?1:0)+"&personal="+(r?1:0)+"&sortType="+n+"&page="+o+"&search="+escape(a)));l.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,h),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(l),hh.curAction=hh.ACTION_GET_SCORE_DATA,hh.latestCompletionFunction=h,hh.StartTimer()}}static SaveChallenge(t,e,i,s,r,n,o,a,h){if(!hh.waitingForResponse){i.allParts=n;var l=hh.PutChallengeIntoByteArray(i);l.compress(),hh.loader=new URLLoader;var c=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=uploadChallenge&user="+escape(t)+"&password="+e+"&shared="+o+"&allowEdit="+a+(null==s?"":"&name="+escape(s))+(null==r?"":"&desc="+escape(r))));c.data=l,c.method=URLRequestMethod.POST,c.contentType="application/octet-stream",hh.loader.addEventListener(Event.COMPLETE,h),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(c),hh.curAction=hh.ACTION_SAVE_CHALLENGE,hh.latestCompletionFunction=h,hh.StartTimer()}}static GetChallengeData(t,e,i,s,r,n,o,a){if(!hh.waitingForResponse){hh.challengeType=i?hh.SHARED:hh.NORMAL,hh.curShared=i,hh.curSortType=s,hh.curSortPeriod=r,hh.curChallengePage=n,hh.curSearch=o,hh.loader=new URLLoader;var h=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=getChallenges&user="+(i?"_Public":escape(t))+"&password="+e+"&sortType="+s+"&sortPeriod="+r+"&page="+n+"&search="+escape(o)));h.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,a),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(h),hh.curAction=hh.ACTION_GET_CHALLENGE_DATA,hh.latestCompletionFunction=a,hh.StartTimer()}}static LoadChallenge(t,e,i,s){if(!hh.waitingForResponse){hh.loader=new URLLoader;var r=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=downloadChallenge&user="+escape(t)+"&password="+e+"&id="+hh.challengeList[i].id));r.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.BINARY,hh.loader.addEventListener("complete",s),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(r),hh.curAction=hh.ACTION_LOAD_CHALLENGE,hh.latestCompletionFunction=s,hh.StartTimer()}}static LoadChallengeByID(t,e){if(!hh.waitingForResponse){hh.loader=new URLLoader;var i=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=downloadChallenge&user=_Public&password=blah&id="+t));i.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.BINARY,hh.loader.addEventListener("complete",e),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(i),hh.curAction=hh.ACTION_LOAD_CHALLENGE,hh.latestCompletionFunction=e,hh.StartTimer()}}static DeleteChallenge(t,e,i,s){if(!hh.waitingForResponse){hh.loader=new URLLoader;var r=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=deleteChallenge&user="+escape(t)+"&password="+e+"&id="+hh.challengeList[i].id));r.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener("complete",s),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(r),hh.curAction=hh.ACTION_DELETE_CHALLENGE,hh.deleteNumber=i,hh.nonfatalErrorOccurred=!0,hh.latestCompletionFunction=s,hh.StartTimer()}}static CommentOnRobot(t,e){if(!hh.waitingForResponse){hh.loader=new URLLoader;var i=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=commentRobot&id="+t));i.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,e),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(i),hh.curAction=hh.ACTION_COMMENT_ROBOT,hh.latestCompletionFunction=e,hh.StartTimer()}}static CommentOnReplay(t,e){if(!hh.waitingForResponse){hh.loader=new URLLoader;var i=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=commentReplay&id="+t));i.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,e),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(i),hh.curAction=hh.ACTION_COMMENT_REPLAY,hh.latestCompletionFunction=e,hh.StartTimer()}}static CommentOnChallenge(t,e){if(!hh.waitingForResponse){hh.loader=new URLLoader;var i=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=commentChallenge&id="+t));i.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,e),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(i),hh.curAction=hh.ACTION_COMMENT_CHALLENGE,hh.latestCompletionFunction=e,hh.StartTimer()}}static ReportRobot(t,e,i,s){if(!hh.waitingForResponse){hh.loader=new URLLoader;var r=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=reportRobot&id="+t+"&user="+escape(e)+"&desc="+escape(i)));r.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,s),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(r),hh.curAction=hh.ACTION_REPORT_ROBOT,hh.latestCompletionFunction=s,hh.StartTimer()}}static ReportReplay(t,e,i,s){if(!hh.waitingForResponse){hh.loader=new URLLoader;var r=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=reportReplay&id="+t+"&user="+escape(e)+"&desc="+escape(i)));r.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,s),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(r),hh.curAction=hh.ACTION_REPORT_REPLAY,hh.latestCompletionFunction=s,hh.StartTimer()}}static ReportChallenge(t,e,i,s){if(!hh.waitingForResponse){hh.loader=new URLLoader;var r=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=reportChallenge&id="+t+"&user="+escape(e)+"&desc="+escape(i)));r.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,s),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(r),hh.curAction=hh.ACTION_REPORT_CHALLENGE,hh.latestCompletionFunction=s,hh.StartTimer()}}static RateRobot(t,e,i){if(!hh.waitingForResponse){hh.loader=new URLLoader;var s=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=rateRobot&id="+t+"&rating="+e));s.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,i),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(s),hh.curAction=hh.ACTION_RATE_ROBOT,hh.latestCompletionFunction=i,hh.StartTimer()}}static RateReplay(t,e,i){if(!hh.waitingForResponse){hh.loader=new URLLoader;var s=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=rateReplay&id="+t+"&rating="+e));s.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,i),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(s),hh.curAction=hh.ACTION_RATE_REPLAY,hh.latestCompletionFunction=i,hh.StartTimer()}}static RateChallenge(t,e,i){if(!hh.waitingForResponse){hh.loader=new URLLoader;var s=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=rateChallenge&id="+t+"&rating="+e));s.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,i),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(s),hh.curAction=hh.ACTION_RATE_CHALLENGE,hh.latestCompletionFunction=i,hh.StartTimer()}}static FeatureRobot(t,e,i){if(!hh.waitingForResponse){hh.loader=new URLLoader;var s=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=featureRobot&id="+t+"&featured="+(e?1:0)));s.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,i),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(s),hh.curAction=hh.ACTION_FEATURE_ROBOT,hh.latestCompletionFunction=i,hh.StartTimer()}}static FeatureReplay(t,e,i){if(!hh.waitingForResponse){hh.loader=new URLLoader;var s=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=featureReplay&id="+t+"&featured="+(e?1:0)));s.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,i),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(s),hh.curAction=hh.ACTION_FEATURE_ROBOT,hh.latestCompletionFunction=i,hh.StartTimer()}}static FeatureChallenge(t,e,i){if(!hh.waitingForResponse){hh.loader=new URLLoader;var s=new URLRequest(hh.Encrypt(hh.BASE_URL+"op=featureChallenge&id="+t+"&featured="+(e?1:0)));s.method=URLRequestMethod.GET,hh.loader.dataFormat=URLLoaderDataFormat.TEXT,hh.loader.addEventListener(Event.COMPLETE,i),hh.loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.addEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.loader.load(s),hh.curAction=hh.ACTION_FEATURE_CHALLENGE,hh.latestCompletionFunction=i,hh.StartTimer()}}static FinishFeaturing(t){hh.StopTimer();var e=t.target.data.substring(4);if(0==e.search("ERROR"))return e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),!1;if(0==e.length)return hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),!1;try{return hh.nonfatalErrorOccurred=!1,1==parseInt(e)}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return!1}static FinishRating(t){hh.StopTimer();var e=t.target.data.substring(4);if(0==e.search("ERROR"))return e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),!1;if(0==e.length)return hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),!1;try{return hh.nonfatalErrorOccurred=!1,1==parseInt(e)}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return!1}static FinishCommenting(t){hh.StopTimer();var e=t.target.data.substring(4);if(0==e.search("ERROR"))return e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),-1;if(0==e.length)return hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),-1;try{return hh.nonfatalErrorOccurred=!1,parseInt(e)}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return-1}static FinishReporting(t){hh.StopTimer();var e=t.target.data.substring(4);if(0==e.search("ERROR"))return e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),-1;if(0==e.length)return hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),-1;try{return hh.nonfatalErrorOccurred=!1,parseInt(e)}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return-1}static FinishAddingUser(t){hh.StopTimer();var e=t.target.data.substring(4);return 0==e.search("ERROR")?(e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),""):0==e.length?(hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),""):(hh.nonfatalErrorOccurred=!1,e)}static FinishLoggingIn(t){hh.StopTimer();var e=t.target.data.substring(4);return 0==e.search("ERROR")?(e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),""):0==e.length?(hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),""):(hh.nonfatalErrorOccurred=!1,e)}static FinishSavingRobot(t){hh.StopTimer();var e=t.target.data.substring(4);return-1!=e.search("ERROR")?(e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),""):0==e.length?(hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),""):e}static FinishGettingRobotData(t){hh.StopTimer();var e=t.target.data.substring(4);if(-1!=e.search("ERROR")&&e.search("ERROR")<5)return e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),!1;try{for(hh.numPages=parseInt(e.substr(0,e.indexOf("\n"))),e=e.substr(e.indexOf("\n")+1),hh.robotList=new Array;e.length>0;){var i=new Object;i.id=e.substr(0,e.indexOf("\t")),e=e.substr(e.indexOf("\t")+1),i.user=unescape(e.substr(0,e.indexOf("\t"))).replace(/\+/g," "),e=e.substr(e.indexOf("\t")+1),i.name=unescape(e.substr(0,e.indexOf("\t"))).replace(/\+/g," "),e=e.substr(e.indexOf("\t")+1),i.description=unescape(e.substr(0,e.indexOf("\t"))).replace(/\+/g," "),e=e.substr(e.indexOf("\t")+1),i.editable=1==parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.shared=1==parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.viewCount=parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.createTime=hh.ParseTimestamp(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.editTime=hh.ParseTimestamp(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.rating=parseFloat(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.numRatings=parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.featured=1==parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.prop=1==parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.challenge=e.substr(0,e.indexOf("\n")),e=e.substr(e.indexOf("\n")+1),hh.robotList.push(i)}return!0}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return!1}static async ImportRobot(t){var e=new us;e.decode(t);var i=e.toByteArray();return await i.uncompress(),i.readUTF(),i.readUTF(),i.readInt(),i.readInt(),na.potentialRobotPublic=!0,na.potentialRobotEditable=!0,i.readInt(),hh.ExtractRobotFromByteArray(i)}static ImportReplay(t){var e=new us;e.decode(t);var i=e.toByteArray();i.uncompress();for(var s=i.readInt(),r=i.readInt(),n=new cs,o=new cs;i.position<s+8;)n.writeByte(i.readByte());for(n.uncompress();i.position<s+r+8;)o.writeByte(i.readByte());o.uncompress();var a=hh.ExtractReplayFromByteArray(n),h=hh.ExtractRobotFromByteArray(o);return i.readUTF(),i.readUTF(),i.readUTF(),i.readInt(),i.readUTF(),na.potentialReplayPublic=!0,[a,h]}static ImportChallenge(t){var e=new us;e.decode(t);var i=e.toByteArray();return i.uncompress(),i.readUTF(),i.readUTF(),i.readInt(),i.readInt(),na.potentialChallengePublic=!0,na.potentialChallengeEditable=!0,hh.ExtractChallengeFromByteArray(i)}static FinishLoadingRobot(t){hh.StopTimer();var e=hh.StripNewlinesAndExtractByte(t.target.data);if(6==e.length||7==e.length){if("ERROR"==e.readUTFBytes(5))return hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e.readUTFBytes(e.bytesAvailable))]),null;e.position=0}else if(0==e.length)return hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),null;try{for(var i="";e.position!=e.length;){var s=e.readByte();if(10==s)break;i=i.concat(String.fromCharCode(s))}var r=parseInt(i);e=hh.StripNewlines(e);for(var n=new cs,o=0;o<r;o++)n.writeByte(e.readByte());n.uncompress(),n.position=0;for(var a=hh.ExtractRobotFromByteArray(n),h=new cs;e.position!=e.length;)h.writeByte(e.readByte());return h.length>0&&(h.uncompress(),h.position=0,a.challenge=hh.ExtractChallengeFromByteArray(h)),a}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return null}static FinishDeletingRobot(t){hh.StopTimer();var e=t.target.data.substring(4);if(-1!=e.search("ERROR"))return e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),"";if(0==e.length)return hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),"";try{var i=hh.robotList[hh.deleteNumber].id;return hh.robotList=Vs.RemoveFromArray(hh.robotList[hh.deleteNumber],hh.robotList),hh.nonfatalErrorOccurred=!1,i}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return""}static FinishSavingReplay(t){hh.StopTimer();var e=t.target.data.substring(4);return-1!=e.search("ERROR")?(e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),""):0==e.length?(hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),""):e}static FinishGettingReplayData(t){hh.StopTimer();var e=t.target.data.substring(4);if(-1!=e.search("ERROR")&&e.search("ERROR")<5)return e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),!1;try{for(hh.numPages=parseInt(e.substr(0,e.indexOf("\n"))),e=e.substr(e.indexOf("\n")+1),hh.replayList=new Array;e.length>0;){var i=new Object;i.id=e.substr(0,e.indexOf("\t")),e=e.substr(e.indexOf("\t")+1),i.user=unescape(e.substr(0,e.indexOf("\t"))).replace(/\+/g," "),e=e.substr(e.indexOf("\t")+1),i.name=unescape(e.substr(0,e.indexOf("\t"))).replace(/\+/g," "),e=e.substr(e.indexOf("\t")+1),i.description=unescape(e.substr(0,e.indexOf("\t"))).replace(/\+/g," "),e=e.substr(e.indexOf("\t")+1),i.robotID=e.substr(0,e.indexOf("\t")),e=e.substr(e.indexOf("\t")+1),i.shared=1==parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.viewCount=parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.createTime=hh.ParseTimestamp(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.editTime=hh.ParseTimestamp(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.rating=parseFloat(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.numRatings=parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.featured=1==parseInt(e.substr(0,e.indexOf("\n"))),e=e.substr(e.indexOf("\n")+1),hh.replayList.push(i)}return!0}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return!1}static FinishLoadingReplay(t){hh.StopTimer();var e=hh.StripNewlines(t.target.data);if(6==e.length||7==e.length){if("ERROR"==e.readUTFBytes(5))return hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e.readUTFBytes(e.bytesAvailable))]),null;e.position=0}else if(0==e.length)return hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),null;try{for(var i="";e.position!=e.length;){var s=e.readByte();if(10==s)break;i=i.concat(String.fromCharCode(s))}var r=parseInt(i);e=hh.StripNewlines(e);for(var n=new cs,o=0;o<r;o++)n.writeByte(e.readByte());n.uncompress(),n.position=0;for(var a=hh.ExtractReplayFromByteArray(n),h=new cs;e.position!=e.length;)h.writeByte(e.readByte());h.uncompress(),h.position=0;var l=hh.ExtractRobotFromByteArray(h),c=new Array;return c.push(a),c.push(l),c}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return null}static FinishDeletingReplay(t){hh.StopTimer();var e=t.target.data.substring(4);if(-1!=e.search("ERROR"))return e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),!1;if(0==e.length)return hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),!1;try{return hh.replayList=Vs.RemoveFromArray(hh.replayList[hh.deleteNumber],hh.replayList),hh.nonfatalErrorOccurred=!1,!0}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return!1}static FinishSavingChallenge(t){hh.StopTimer();var e=t.target.data.substring(4);return-1!=e.search("ERROR")?(e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),""):0==e.length?(hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),""):e}static FinishGettingChallengeData(t){hh.StopTimer();var e=t.target.data.substring(4);if(-1!=e.search("ERROR")&&e.search("ERROR")<5)return e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),!1;try{for(hh.numPages=parseInt(e.substr(0,e.indexOf("\n"))),e=e.substr(e.indexOf("\n")+1),hh.challengeList=new Array;e.length>0;){var i=new Object;i.id=e.substr(0,e.indexOf("\t")),e=e.substr(e.indexOf("\t")+1),i.user=unescape(e.substr(0,e.indexOf("\t"))).replace(/\+/g," "),e=e.substr(e.indexOf("\t")+1),i.name=unescape(e.substr(0,e.indexOf("\t"))).replace(/\+/g," "),e=e.substr(e.indexOf("\t")+1),i.description=unescape(e.substr(0,e.indexOf("\t"))).replace(/\+/g," "),e=e.substr(e.indexOf("\t")+1),i.editable=1==parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.shared=1==parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.viewCount=parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.createTime=hh.ParseTimestamp(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.editTime=hh.ParseTimestamp(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.rating=parseFloat(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.numRatings=parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.featured=1==parseInt(e.substr(0,e.indexOf("\n"))),e=e.substr(e.indexOf("\n")+1),hh.challengeList.push(i)}return!0}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return!1}static FinishLoadingChallenge(t){hh.StopTimer();var e=hh.StripNewlinesAndExtractByte(t.target.data);if(6==e.length||7==e.length){if("ERROR"==e.readUTFBytes(5))return hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e.readUTFBytes(e.bytesAvailable))]),null;e.position=0}else if(0==e.length)return hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),null;try{return e.uncompress(),hh.ExtractChallengeFromByteArray(e)}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return null}static FinishDeletingChallenge(t){hh.StopTimer();var e=t.target.data.substring(4);if(-1!=e.search("ERROR"))return e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),!1;if(0==e.length)return hh.ErrorHandler(new Event(""),hh.NO_DATA_MESSAGE),!1;try{return hh.challengeList=Vs.RemoveFromArray(hh.challengeList[hh.deleteNumber],hh.challengeList),hh.nonfatalErrorOccurred=!1,!0}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return!1}static FinishGettingScoreData(t){hh.StopTimer();var e=t.target.data.substring(4);if(-1!=e.search("ERROR")&&e.search("ERROR")<5)return e=e.substring(5),hh.ErrorHandler(new Event(""),hh.ERROR_MESSAGES[parseInt(e)]),!1;try{for(hh.numPages=parseInt(e.substr(0,e.indexOf("\n"))),e=e.substr(e.indexOf("\n")+1),hh.highScoresChallengeName=e.substr(0,e.indexOf("\n")),e=e.substr(e.indexOf("\n")+1),hh.scoreList=new Array;e.length>0;){var i=new Object;i.user=unescape(e.substr(0,e.indexOf("\t"))).replace(/\+/g," "),e=e.substr(e.indexOf("\t")+1),i.score=parseInt(e.substr(0,e.indexOf("\t"))),e=e.substr(e.indexOf("\t")+1),i.replayID=e.substr(0,e.indexOf("\t")),e=e.substr(e.indexOf("\t")+1),i.robotID=e.substr(0,e.indexOf("\n")),e=e.substr(e.indexOf("\n")+1),hh.scoreList.push(i)}return!0}catch(t){hh.ErrorHandler(new Event(""),hh.EXCEPTION_MESSAGE)}return!1}static StartTimer(){hh.timeoutTimer=new Timer(1e3*hh.TIMEOUT_SECONDS),hh.timeoutTimer.addEventListener(TimerEvent.TIMER,hh.TimeoutHandler),hh.timeoutTimer.start(),hh.waitingForResponse=!0,hh.curTransactionType=hh.curAction}static StopTimer(){hh.waitingForResponse=!1,hh.timeoutTimer&&(hh.timeoutTimer.stop(),hh.timeoutTimer.removeEventListener(TimerEvent.TIMER,hh.TimeoutHandler))}static TimeoutHandler(t){hh.loader.removeEventListener(Event.COMPLETE,hh.latestCompletionFunction),hh.loader.removeEventListener(SecurityErrorEvent.SECURITY_ERROR,hh.ErrorHandler),hh.loader.removeEventListener(IOErrorEvent.IO_ERROR,hh.ErrorHandler),hh.ErrorHandler(t,hh.ERROR_MESSAGES[0])}static ErrorHandler(t,e=hh.UNKNOWN_MESSAGE){hh.StopTimer(),hh.errorOccurred=!0,e==hh.UNKNOWN_MESSAGE?(e=t instanceof SecurityErrorEvent?hh.SECURITY_MESSAGE:hh.IO_MESSAGE,hh.lastErrorMsg="Error: "+e+"  Code: "+t.text):hh.lastErrorMsg="Error: "+e,e==hh.ERROR_MESSAGES[hh.WRONG_VERSION_CODE]&&(hh.versionErrorOccurred=!0)}static IsPartOfRobot(t,e,i){return t.drawAnyway}static IsShape(t,e,i){return t instanceof mh}static PutChallengeIntoByteArray(t){var e=hh.PutPartsIntoByteArray(t.allParts,new cs);e.position=0;var i=hh.ExtractPartsFromByteArray(e);e.writeObject(t.settings),e.writeBoolean(t.circlesAllowed),e.writeBoolean(t.rectanglesAllowed),e.writeBoolean(t.trianglesAllowed),e.writeBoolean(t.fixedJointsAllowed),e.writeBoolean(t.rotatingJointsAllowed),e.writeBoolean(t.slidingJointsAllowed),e.writeBoolean(t.thrustersAllowed),e.writeBoolean(t.fixateAllowed),e.writeBoolean(t.mouseDragAllowed),e.writeBoolean(t.botControlAllowed),e.writeDouble(t.minDensity),e.writeDouble(t.maxDensity),e.writeDouble(t.maxRJStrength),e.writeDouble(t.maxRJSpeed),e.writeDouble(t.maxSJStrength),e.writeDouble(t.maxSJSpeed),e.writeDouble(t.maxThrusterStrength),e.writeObject(t.buildAreas);for(var s=i.filter(hh.IsShape),r=t.winConditions.length-1;r>=0;r--){if(t.winConditions[r].shape1)for(var n=0;n<s.length;n++)t.winConditions[r].shape1.equals(s[n])&&(t.winConditions[r].shape1Index=n);if(t.winConditions[r].shape2)for(n=0;n<s.length;n++)t.winConditions[r].shape2.equals(s[n])&&(t.winConditions[r].shape2Index=n);(0==t.winConditions[r].subject&&-1==t.winConditions[r].shape1Index||t.winConditions[r].object>4&&-1==t.winConditions[r].shape2Index)&&(t.winConditions=Vs.RemoveFromArray(t.winConditions[r],t.winConditions))}for(r=t.lossConditions.length-1;r>=0;r--){if(t.lossConditions[r].shape1)for(n=0;n<s.length;n++)t.lossConditions[r].shape1.equals(s[n])&&(t.lossConditions[r].shape1Index=n);if(t.lossConditions[r].shape2)for(n=0;n<s.length;n++)t.lossConditions[r].shape2.equals(s[n])&&(t.lossConditions[r].shape2Index=n);(0==t.lossConditions[r].subject&&-1==t.lossConditions[r].shape1Index||t.lossConditions[r].object>4&&-1==t.lossConditions[r].shape2Index)&&(t.lossConditions=Vs.RemoveFromArray(t.lossConditions[r],t.lossConditions))}for(e.writeObject(t.winConditions),e.writeObject(t.lossConditions),r=0;r<t.winConditions.length;r++)t.winConditions[r].shape1Index=-1,t.winConditions[r].shape2Index=-1;for(r=0;r<t.lossConditions.length;r++)t.lossConditions[r].shape1Index=-1,t.lossConditions[r].shape2Index=-1;return e.writeBoolean(t.winConditionsAnded),e.writeFloat(t.cameraX),e.writeFloat(t.cameraY),e.writeFloat(t.zoomLevel),e.writeBoolean(t.nonCollidingAllowed),e.writeBoolean(t.showConditions),e.writeBoolean(t.cannonsAllowed),e}static ExtractChallengeFromByteArray(t){var e=hh.ExtractPartsFromByteArray(t),i=t.readObject(),s=new Ga(new La(i.gravity,i.size,i.terrainType,i.terrainTheme,i.background,i.backgroundR,i.backgroundG,i.backgroundB));s.allParts=e,s.circlesAllowed=t.readBoolean(),s.rectanglesAllowed=t.readBoolean(),s.trianglesAllowed=t.readBoolean(),s.fixedJointsAllowed=t.readBoolean(),s.rotatingJointsAllowed=t.readBoolean(),s.slidingJointsAllowed=t.readBoolean(),s.thrustersAllowed=t.readBoolean(),s.fixateAllowed=t.readBoolean(),s.mouseDragAllowed=t.readBoolean(),s.botControlAllowed=t.readBoolean(),s.minDensity=t.readDouble(),s.maxDensity=t.readDouble(),s.maxRJStrength=t.readDouble(),s.maxRJSpeed=t.readDouble(),s.maxSJStrength=t.readDouble(),s.maxSJSpeed=t.readDouble(),s.maxThrusterStrength=t.readDouble();var r=t.readObject();s.buildAreas=new Array;for(var n=0;n<r.length;n++){var o=new ps.b2AABB;o.lowerBound=Vs.Vector(r[n].lowerBound.x,r[n].lowerBound.y),o.upperBound=Vs.Vector(r[n].upperBound.x,r[n].upperBound.y),s.buildAreas.push(o)}var a=t.readObject(),h=e.filter(hh.IsShape);for(n=0;n<a.length;n++){var l=new dh(a[n].name,a[n].subject,a[n].object);l.minX=a[n].minX,l.maxX=a[n].maxX,l.minY=a[n].minY,l.maxY=a[n].maxY,-1!=a[n].shape1Index&&(l.shape1=h[a[n].shape1Index]),-1!=a[n].shape2Index&&(l.shape2=h[a[n].shape2Index]),s.winConditions.push(l)}for(a=t.readObject(),n=0;n<a.length;n++){var c=new ch(a[n].name,a[n].subject,a[n].object,a[n].immediate);c.minX=a[n].minX,c.maxX=a[n].maxX,c.minY=a[n].minY,c.maxY=a[n].maxY,-1!=a[n].shape1Index&&(c.shape1=h[a[n].shape1Index]),-1!=a[n].shape2Index&&(c.shape2=h[a[n].shape2Index]),s.lossConditions.push(c)}return s.winConditionsAnded=t.readBoolean(),t.position!=t.length&&(s.cameraX=t.readFloat(),s.cameraY=t.readFloat(),s.zoomLevel=t.readFloat()),t.position!=t.length&&(s.nonCollidingAllowed=t.readBoolean(),s.showConditions=t.readBoolean()),t.position!=t.length?s.cannonsAllowed=t.readBoolean():s.cannonsAllowed=s.rectanglesAllowed&&s.slidingJointsAllowed&&s.rotatingJointsAllowed&&s.slidingJointsAllowed&&s.thrustersAllowed,s}static PutPartsIntoByteArray(t,e){t=t.filter(hh.IsPartOfRobot);for(var i=new Array,s=0;s<t.length;s++)(t[s]instanceof mh||t[s]instanceof wh)&&i.push(t[s]);var r=0;for(s=0;s<t.length;s++)t[s]instanceof fh||t[s]instanceof Ah?(i.push(t[s]),t[s]instanceof Sh&&(t[s].arrayIndex=r,r++)):r++;for(s=0;s<i.length;s++)if(i[s]instanceof fh)for(var n=0;n<t.length;n++)i[n]==i[s].part1&&(i[s].part1Index=n),i[n]==i[s].part2&&(i[s].part2Index=n);else if(i[s]instanceof Ah)for(n=0;n<t.length;n++)i[n]==i[s].shape&&(i[s].shapeIndex=n);return e.writeObject(i),e}static ExtractPartsFromByteArray(t){for(var e=t.readObject(),i=new Array,s=0;s<e.length;s++){var r;if("Circle"==e[s].type||"Rectangle"==e[s].type||"Triangle"==e[s].type||"Cannon"==e[s].type)"Circle"==e[s].type?r=new _h(e[s].centerX,e[s].centerY,e[s].radius,!1):"Rectangle"==e[s].type?r=new gh(e[s].x,e[s].y,e[s].w,e[s].h,!1):"Triangle"==e[s].type?r=new bh(e[s].x1,e[s].y1,e[s].x2,e[s].y2,e[s].x3,e[s].y3):"Cannon"==e[s].type&&((r=new yh(e[s].x,e[s].y,e[s].w)).fireKey=e[s].fireKey,r.strength=e[s].strength),r.angle=e[s].angle,r.density=e[s].density,r.collide=e[s].collide,r.isStatic=e[s].isStatic,r.isCameraFocus=e[s].isCameraFocus,r.red=e[s].red,r.green=e[s].green,r.blue=e[s].blue,r.opacity=e[s].opacity,r.outline=e[s].outline,e[s].hasOwnProperty("terrain")&&(r.terrain=e[s].terrain),e[s].hasOwnProperty("undragable")&&(r.undragable=e[s].undragable),i.push(r);else if("TextPart"==e[s].type){var n=new wh(Sa.m_curController,e[s].x,e[s].y,e[s].w,e[s].h,e[s].text,e[s].inFront);n.inFront=e[s].inFront,n.scaleWithZoom=e[s].scaleWithZoom,n.alwaysVisible=e[s].alwaysVisible,n.displayKey=e[s].displayKey,n.red=e[s].red,n.green=e[s].green,n.blue=e[s].blue,n.size=e[s].size,i.push(n)}else if("Thrusters"==e[s].type){if(e[s].shapeIndex>=0){var o=new Ah(i[e[s].shapeIndex],e[s].centerX,e[s].centerY);o.strength=e[s].strength,o.angle=e[s].angle,o.thrustKey=e[s].thrustKey,o.autoOn=e[s].autoOn,i.push(o)}}else if("FixedJoint"==e[s].type||"RevoluteJoint"==e[s].type||"PrismaticJoint"==e[s].type){var a;if(e[s].part1Index>=0&&e[s].part2Index>=0)"FixedJoint"==e[s].type?a=new vh(i[e[s].part1Index],i[e[s].part2Index],e[s].anchorX,e[s].anchorY):"RevoluteJoint"==e[s].type?((a=new xh(i[e[s].part1Index],i[e[s].part2Index],e[s].anchorX,e[s].anchorY)).enableMotor=e[s].enableMotor,a.motorCWKey=e[s].motorCWKey,a.motorCCWKey=e[s].motorCCWKey,a.motorStrength=e[s].motorStrength,a.motorSpeed=e[s].motorSpeed,a.motorLowerLimit=e[s].motorLowerLimit,a.motorUpperLimit=e[s].motorUpperLimit,a.isStiff=e[s].isStiff,a.autoCW=e[s].autoCW,a.autoCCW=e[s].autoCCW):"PrismaticJoint"==e[s].type&&((a=new Sh(i[e[s].part1Index],i[e[s].part2Index],0,0,1,1)).anchorX=e[s].anchorX,a.anchorY=e[s].anchorY,a.axis=new ps.b2Vec2(e[s].axis.x,e[s].axis.y),a.enablePiston=e[s].enablePiston,a.pistonUpKey=e[s].pistonUpKey,a.pistonDownKey=e[s].pistonDownKey,a.pistonStrength=e[s].pistonStrength,a.pistonSpeed=e[s].pistonSpeed,a.isStiff=e[s].isStiff,a.autoOscillate=e[s].autoOscillate,a.initLength=e[s].initLength,a.red=e[s].red,a.green=e[s].green,a.blue=e[s].blue,a.opacity=e[s].opacity,a.outline=e[s].outline,a.collide=e[s].collide,e[s].hasOwnProperty("arrayIndex")&&(a.arrayIndex=e[s].arrayIndex)),i.push(a)}}for(s=0;s<i.length;s++)if(i[s]instanceof Sh&&-1!=i[s].arrayIndex){var h=i[s];i=Vs.RemoveFromArray(h,i),i=Vs.InsertIntoArray(h,i,h.arrayIndex)}return i}static PutRobotIntoByteArray(t){var e=hh.PutPartsIntoByteArray(t.allParts,new cs);return e.writeObject(t.settings),e.writeFloat(t.cameraX),e.writeFloat(t.cameraY),e.writeFloat(t.zoomLevel),e}static ExtractRobotFromByteArray(t){var e=hh.ExtractPartsFromByteArray(t);if(t.position==t.length)return new Fa(e,new La(15,1,0,0,0),Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);var i=t.readObject(),s=Number.MAX_VALUE,r=Number.MAX_VALUE,n=Number.MAX_VALUE;return t.position!=t.length&&(s=t.readFloat(),r=t.readFloat(),n=t.readFloat()),new Fa(e,new La(i.gravity,i.size,i.terrainType,i.terrainTheme,i.background,i.backgroundR,i.backgroundG,i.backgroundB),s,r,n)}static PutReplayIntoByteArray(t){for(var e=new cs,i=0;i<t.cameraMovements.length;i++)hh.WriteInt(e,t.cameraMovements[i].frame),hh.WriteFloat(e,t.cameraMovements[i].x/100),hh.WriteFloat(e,t.cameraMovements[i].y/100),hh.WriteFloat(e,t.cameraMovements[i].scale);for(hh.WriteInt(e,Number.MIN_VALUE),hh.WriteInt(e,Number.MIN_VALUE),i=0;i<t.syncPoints.length;i++){hh.WriteInt(e,t.syncPoints[i].frame);for(var s=0;s<t.syncPoints[i].positions.length;s++)0!=i&&i!=t.syncPoints.length-1&&t.syncPoints[i].positions[s].x==t.syncPoints[i-1].positions[s].x&&t.syncPoints[i].positions[s].y==t.syncPoints[i-1].positions[s].y&&t.syncPoints[i].angles[s]==t.syncPoints[i-1].angles[s]||(hh.WriteFloat(e,t.syncPoints[i].positions[s].x),hh.WriteFloat(e,t.syncPoints[i].positions[s].y),t.syncPoints[i].angles[s]<=-32.7||t.syncPoints[i].angles[s]>=32.8?hh.WriteFloat(e,10*hh.NormalizeAngle(t.syncPoints[i].angles[s])):hh.WriteFloat(e,10*t.syncPoints[i].angles[s]),hh.WriteInt(e,s));if(hh.WriteFloat(e,Number.NEGATIVE_INFINITY),t.syncPoints[i].cannonballPositions.length>0){for(hh.WriteInt(e,-1),s=0;s<t.syncPoints[i].cannonballPositions.length;s++)hh.WriteFloat(e,t.syncPoints[i].cannonballPositions[s].x),hh.WriteFloat(e,t.syncPoints[i].cannonballPositions[s].y);hh.WriteFloat(e,Number.NEGATIVE_INFINITY)}}for(hh.WriteInt(e,Number.MIN_VALUE),e.writeObject(t.version),hh.WriteInt(e,t.numFrames),i=0;i<t.keyPresses.length;i++)hh.WriteInt(e,t.keyPresses[i].frame),hh.WriteInt(e,t.keyPresses[i].key);return hh.WriteInt(e,Number.MIN_VALUE),e}static async ExtractReplayFromByteArray(t){for(var e=new Array;;){var i=hh.ReadInt(t);if(i==Number.MIN_VALUE)break;var s=100*hh.ReadFloat(t),r=100*hh.ReadFloat(t),n=hh.ReadFloat(t);e.push(new Va(i,s,r,n))}var o=new Array,a=!1,h=!0;for((i=hh.ReadInt(t))==Number.MIN_VALUE&&(a=!0,h=!1);h||(i=hh.ReadInt(t)),h=!1,i!=Number.MIN_VALUE;)if(-1==i)for(;(s=hh.ReadFloat(t))!=Number.NEGATIVE_INFINITY;)r=hh.ReadFloat(t),o[o.length-1].cannonballPositions.push(Vs.Vector(s,r));else{var l=new Na;l.frame=i;for(var c=0;;){if((s=hh.ReadFloat(t))!=Number.NEGATIVE_INFINITY){r=hh.ReadFloat(t);var d=hh.ReadFloat(t);a&&(d/=10)}var u;if(s==Number.NEGATIVE_INFINITY){if(0==o.length)break;u=o[o.length-1].positions.length}else u=hh.ReadInt(t);for(;c<u;)l.positions.push(o[o.length-1].positions[c]),l.angles.push(o[o.length-1].angles[c]),c++;if(s==Number.NEGATIVE_INFINITY)break;l.positions.push(Vs.Vector(s,r)),l.angles.push(d),c++}o.push(l)}var p=t.readObject().toString(),m=hh.ReadInt(t),f=new Array;if(t.position!=t.length)for(;(i=hh.ReadInt(t))!=Number.MIN_VALUE;){var _=hh.ReadInt(t);f.push(new Js(i,_))}return new ka(e,o,f,m,p)}static WriteFloat(t,e){if(e==Number.NEGATIVE_INFINITY)return t.writeByte(-128),void t.writeByte(-128);if(e==Number.POSITIVE_INFINITY)return t.writeByte(127),void t.writeByte(127);e+=327,e*=100;var i=Vs.NearestInt(e),s=i/256,r=i%256;t.writeByte(s-128),t.writeByte(r-128)}static WriteInt(t,e){e==Number.MIN_VALUE?(t.writeByte(-1),t.writeByte(-1)):-1==e?(t.writeByte(0),t.writeByte(-1)):(t.writeByte(e/128),t.writeByte(e%128))}static ReadFloat(t){var e=t.readByte()+128,i=t.readByte()+128;if(0==e&&0==i)return Number.NEGATIVE_INFINITY;if(255==e&&255==i)return Number.POSITIVE_INFINITY;var s=Number(256*e+i);return s/=100,s-=327}static ReadInt(t){var e=t.readByte(),i=t.readByte();return-1==e&&-1==i?Number.MIN_VALUE:0==e&&-1==i?-1:128*e+i}static NormalizeAngle(t){for(;t>=32.8;)t-=10*Math.PI;for(;t<=-32.7;)t+=10*Math.PI;return t}static StripNewlines(t){var e=new cs;for(t.position+=4;t.position!=t.length;)e.writeByte(t.readByte());return e.position=0,e}static StripNewlinesAndExtractByte(t){var e=new cs;for(t.position+=4,na.potentialRobotEditable=49==t.readByte();t.position!=t.length;)e.writeByte(t.readByte());return e.position=0,e}static ParseTimestamp(t){var e=Date.parse(t.replace("-","/").replace("-","/").replace("T"," "));return isNaN(e)&&14==t.length&&(t=t.substr(0,4)+"/"+t.substr(4,2)+"/"+t.substr(6,2)+" "+t.substr(8,2)+":"+t.substr(10,2)+":"+t.substr(12,2),e=Date.parse(t)),e}}hh.waitingForResponse=!1,hh.curTransactionType=0,hh.errorOccurred=!1,hh.versionErrorOccurred=!1,hh.nonfatalErrorOccurred=!1,hh.curRobotPage=1,hh.curReplayPage=1,hh.curScorePage=1,hh.curChallengePage=1,hh.numPages=-1,hh.highScoresChallenge="",hh.highScoresChallengeName="",hh.highScoresSortType=-1,hh.highScoresDaily=!1,hh.highScoresPersonal=!1,hh.curSortType=1,hh.curSortPeriod=-1,hh.curShared=!0,hh.curSearch="",hh.NORMAL=0,hh.SHARED=1,hh.ALLTIME=2,hh.DAILY=3,hh.PERSONAL=4,hh.SORT_BY_SCORE=-1,hh.SORT_BY_VIEW_COUNT=0,hh.SORT_BY_CREATION_TIME=1,hh.SORT_BY_EDIT_TIME=2,hh.SORT_ALPHABETICALLY=3,hh.SORT_BY_RATING=4,hh.SORT_PERIOD_FEATURED=-1,hh.SORT_PERIOD_ALLTIME=0,hh.SORT_PERIOD_TODAY=1,hh.SORT_PERIOD_7DAYS=2,hh.SORT_PERIOD_30DAYS=3,hh.SORT_PERIOD_PROP=4,hh.NUM_ACTIONS=28,hh.ACTION_SAVE_ROBOT=0,hh.ACTION_GET_ROBOT_DATA=1,hh.ACTION_LOAD_ROBOT=2,hh.ACTION_DELETE_ROBOT=3,hh.ACTION_SAVE_REPLAY=4,hh.ACTION_GET_REPLAY_DATA=5,hh.ACTION_LOAD_REPLAY=6,hh.ACTION_DELETE_REPLAY=7,hh.ACTION_GET_SCORE_DATA=8,hh.ACTION_ADD_USER=9,hh.ACTION_LOGIN=10,hh.ACTION_COMMENT_ROBOT=11,hh.ACTION_COMMENT_REPLAY=12,hh.ACTION_REPORT_ROBOT=13,hh.ACTION_REPORT_REPLAY=14,hh.ACTION_RATE_ROBOT=15,hh.ACTION_RATE_REPLAY=16,hh.ACTION_FEATURE_ROBOT=17,hh.ACTION_FEATURE_REPLAY=18,hh.ACTION_LOGIN_GOLD=19,hh.ACTION_SAVE_CHALLENGE=20,hh.ACTION_GET_CHALLENGE_DATA=21,hh.ACTION_LOAD_CHALLENGE=22,hh.ACTION_DELETE_CHALLENGE=23,hh.ACTION_COMMENT_CHALLENGE=24,hh.ACTION_REPORT_CHALLENGE=25,hh.ACTION_RATE_CHALLENGE=26,hh.ACTION_FEATURE_CHALLENGE=27,hh.WRONG_VERSION_CODE=17,hh.VERSION_STRING_FOR_REPLAYS="0.03",hh.BASE_URL="http://localhost:8888/incredibots2/database/ggscores.php?version="+hh.VERSION_STRING_FOR_REPLAYS+"&",hh.UNKNOWN_MESSAGE="UNKNOWN",hh.IO_MESSAGE="An I/O error has occurred.",hh.SECURITY_MESSAGE="A security error has occurred.",hh.NO_DATA_MESSAGE="An unknown error has occurred.",hh.EXCEPTION_MESSAGE="An error has occurred.",hh.ERROR_MESSAGES=["Failed to connect to the server.","A URL error has occurred.","A URL error has occurred.","A URL error has occurred.","A URL error has occurred.","You don't have permission to access that robot.","An invalid robot ID was used.","An unknown error has occurred (code 7).","An incorrect password was used.","The given username instanceof already in use.","An invalid username was used.","The given name instanceof too long.","The given name contains invalid characters.","The given name contains profanity.","An unknown error has occurred (code 14).","A URL error has occurred.","A database error has occurred.","You are playing an old version of IncrediBots.  Click OK to redirect to the current version.","An invalid replay ID was used.","Sorry, that user instanceof not an IncrediBots supporter. Click Subscribe to become one.","Your IncrediBots Gold subscription has expired.  Click Subscribe to renew.","An invalid challenge ID was used."],hh.TIMEOUT_SECONDS=20;class lh{constructor(t,e,i){this.shape1=null,this.shape1Index=-1,this.shape2=null,this.shape2Index=-1,this.isSatisfied=!1,this.name=t,this.subject=e,this.object=i}Update(t,e){var i=Number.MAX_VALUE,s=-Number.MAX_VALUE,r=Number.MAX_VALUE,n=-Number.MAX_VALUE;if(0==this.subject){if(this.shape1.GetShape()instanceof ps.b2CircleShape){var o=this.shape1.GetShape(),a=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(t[d].GetBody().GetTransform(),o.m_p,a),i=a.x-o.m_radius,s=a.x+o.m_radius,r=a.y-o.m_radius,n=a.y+o.m_radius}else if(this.shape1.GetShape()instanceof ps.b2PolygonShape){var h=this.shape1.GetShape(),l=h.m_count,c=h.m_vertices;for(d=0;d<l;d++){const t=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(this.shape1.GetBody().GetTransform(),c[d],t),t.x<i&&(i=t.x),t.x>s&&(s=t.x),t.y<r&&(r=t.y),t.y>n&&(n=t.y)}}0==this.object?this.isSatisfied=i>this.minX&&s<this.maxX&&r>this.minY&&n<this.maxY:1==this.object?this.isSatisfied=n<this.minY:2==this.object?this.isSatisfied=r>this.maxY:3==this.object?this.isSatisfied=s<this.minX:4==this.object?this.isSatisfied=i>this.maxX:5==this.object&&(this.isSatisfied=!1)}else if(1==this.subject)if(t=t.filter(this.PartIsntStatic),this.object<5){this.isSatisfied=!1;for(var d=0;d<t.length;d++){if(i=Number.MAX_VALUE,s=-Number.MAX_VALUE,r=Number.MAX_VALUE,n=-Number.MAX_VALUE,t[d].GetShape()instanceof ps.b2CircleShape){o=t[d].GetShape();a=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(t[d].GetBody().GetTransform(),o.m_p,a),i=a.x-o.m_radius,s=a.x+o.m_radius,r=a.y-o.m_radius,n=a.y+o.m_radius}else if(t[d].GetShape()instanceof ps.b2PolygonShape){l=(h=t[d].GetShape()).m_count,c=h.m_vertices;for(var u=0;u<l;u++){const e=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(t[d].GetBody().GetTransform(),c[u],e),e.x<i&&(i=e.x),e.x>s&&(s=e.x),e.y<r&&(r=e.y),e.y>n&&(n=e.y)}}0==this.object?i>this.minX&&s<this.maxX&&r>this.minY&&n<this.maxY&&(this.isSatisfied=!0):1==this.object?n<this.minY&&(this.isSatisfied=!0):2==this.object?r>this.maxY&&(this.isSatisfied=!0):3==this.object?s<this.minX&&(this.isSatisfied=!0):4==this.object&&i>this.maxX&&(this.isSatisfied=!0)}for(d=0;d<e.length;d++){o=e[d].GetShapeList();const t=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(e[d].GetTransform(),o.m_p,t),i=t.x-o.m_radius,s=t.x+o.m_radius,r=t.y-o.m_radius,n=t.y+o.m_radius,0==this.object?i>this.minX&&s<this.maxX&&r>this.minY&&n<this.maxY&&(this.isSatisfied=!0):1==this.object?n<this.minY&&(this.isSatisfied=!0):2==this.object?r>this.maxY&&(this.isSatisfied=!0):3==this.object?s<this.minX&&(this.isSatisfied=!0):4==this.object&&i>this.maxX&&(this.isSatisfied=!0)}}else 5==this.object&&(this.isSatisfied=!1);else if(2==this.subject){if(0==(t=t.filter(this.PartIsEditable).filter(this.PartIsntStatic)).length)return void(this.isSatisfied=!1);if(this.object<5)for(this.isSatisfied=!0,d=0;d<t.length;d++){if(i=Number.MAX_VALUE,s=-Number.MAX_VALUE,r=Number.MAX_VALUE,n=-Number.MAX_VALUE,t[d].GetShape()instanceof ps.b2CircleShape){o=t[d].GetShape();a=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(t[d].GetBody().GetTransform(),o.m_p,a),i=a.x-o.m_radius,s=a.x+o.m_radius,r=a.y-o.m_radius,n=a.y+o.m_radius}else if(t[d].GetShape()instanceof ps.b2PolygonShape)for(l=(h=t[d].GetShape()).m_count,c=h.m_vertices,u=0;u<l;u++){const e=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(t[d].GetBody().GetTransform(),c[u],e),e.x<i&&(i=e.x),e.x>s&&(s=e.x),e.y<r&&(r=e.y),e.y>n&&(n=e.y)}0==this.object?(i<this.minX||s>this.maxX||r<this.minY||n>this.maxY)&&(this.isSatisfied=!1):1==this.object?n>this.minY&&(this.isSatisfied=!1):2==this.object?r<this.maxY&&(this.isSatisfied=!1):3==this.object?s>this.minX&&(this.isSatisfied=!1):4==this.object&&i<this.maxX&&(this.isSatisfied=!1)}else 5==this.object&&(this.isSatisfied=!1)}else if(3==this.subject)if(t=t.filter(this.PartIsntEditable).filter(this.PartIsntStatic),this.object<5)for(this.isSatisfied=!1,d=0;d<t.length;d++){if(i=Number.MAX_VALUE,s=-Number.MAX_VALUE,r=Number.MAX_VALUE,n=-Number.MAX_VALUE,t[d].GetShape()instanceof ps.b2CircleShape){o=t[d].GetShape();a=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(t[d].GetBody().GetTransform(),o.m_p,a),i=a.x-o.m_radius,s=a.x+o.m_radius,r=a.y-o.m_radius,n=a.y+o.m_radius}else if(t[d].GetShape()instanceof ps.b2PolygonShape)for(l=(h=t[d].GetShape()).m_count,c=h.m_vertices,u=0;u<l;u++){const e=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(t[d].GetBody().GetTransform(),c[u],e),e.x<i&&(i=e.x),e.x>s&&(s=e.x),e.y<r&&(r=e.y),e.y>n&&(n=e.y)}0==this.object?i>this.minX&&s<this.maxX&&r>this.minY&&n<this.maxY&&(this.isSatisfied=!0):1==this.object?n<this.minY&&(this.isSatisfied=!0):2==this.object?r>this.maxY&&(this.isSatisfied=!0):3==this.object?s<this.minX&&(this.isSatisfied=!0):4==this.object&&i>this.maxX&&(this.isSatisfied=!0)}else 5==this.object&&(this.isSatisfied=!1);else if(this.object<5)for(this.isSatisfied=!1,d=0;d<e.length;d++){o=e[d].GetShapeList();a=new ps.b2Vec2;ps.b2Transform.MultiplyVec2(t[d].GetBody().GetTransform(),o.m_p,a),i=a.x-o.m_radius,s=a.x+o.m_radius,r=a.y-o.m_radius,n=a.y+o.m_radius,0==this.object?i>this.minX&&s<this.maxX&&r>this.minY&&n<this.maxY&&(this.isSatisfied=!0):1==this.object?n<this.minY&&(this.isSatisfied=!0):2==this.object?r>this.maxY&&(this.isSatisfied=!0):3==this.object?s<this.minX&&(this.isSatisfied=!0):4==this.object&&i>this.maxX&&(this.isSatisfied=!0)}}ContactAdded(t,e,i){const s=t.GetFixtureA().GetShape(),r=t.GetFixtureB().GetShape();if(5==this.object||6==this.object)if(0==this.subject)(s==this.shape1.GetShape()&&r==this.shape2.GetShape()||s==this.shape2.GetShape()&&r==this.shape1.GetShape())&&(this.isSatisfied=!0);else if(1==this.subject)s!=this.shape2.GetShape()&&r!=this.shape2.GetShape()||(this.isSatisfied=!0);else if(2==this.subject){if(s==this.shape2.GetShape()||r==this.shape2.GetShape()){e=e.filter(this.PartIsEditable);for(var n=0;n<e.length;n++)s!=e[n].GetShape()&&r!=e[n].GetShape()||(this.isSatisfied=!0)}}else if(3==this.subject){if(s==this.shape2.GetShape()||r==this.shape2.GetShape())for(e=e.filter(this.PartIsntEditable),n=0;n<e.length;n++)s!=e[n].GetShape()&&r!=e[n].GetShape()||(this.isSatisfied=!0)}else if(s==this.shape2.GetShape()||r==this.shape2.GetShape())for(n=0;n<i.length;n++)s!=i[n].GetShapeList()&&r!=i[n].GetShapeList()||(this.isSatisfied=!0)}PartIsntStatic(t,e,i){return t instanceof mh&&!t.isStatic}PartIsEditable(t,e,i){return t instanceof mh&&t.isEditable}PartIsntEditable(t,e,i){return t instanceof mh&&!t.isEditable}}class ch extends lh{constructor(t,e,i,s){super(t,e,i),this.immediate=s}}class dh extends lh{constructor(t,e,i){super(t,e,i)}}class uh extends Error{}class ph{IsEnabled(t,e,i){return this.isEnabled}Init(t,e=null){this.isInitted=!0}UnInit(t){this.isInitted=!1}InsideShape(t,e,i){throw new uh("abstract Part.InsideShape() called")}Move(t,e){throw new uh("abstract Part.Move() called")}RotateAround(t,e,i){throw new uh("abstract Part.RotateAround() called")}KeyInput(t,e,i){throw new uh("abstract Part.KeyInput() called")}Update(t){throw new uh("abstract Part.Update() called")}GetAttachedParts(t=null){throw new uh("abstract Part.GetAttachedParts() called")}IntersectsBox(t,e,i,s){throw new uh("abstract Part.IntersectsBox() called")}PrepareForResizing(){throw new uh("abstract Part.PrepareForResizing() called")}ToString(){return"isEnabled="+this.isEnabled+", isStatic="+this.isStatic+", isEditable="+this.isEditable+", isInitted="+this.isInitted+", type="+this.type}constructor(){this.isEnabled=!0,this.isStatic=!1,this.isEditable=!0,this.isInitted=!1,this.checkedCollisionGroup=!1,this.drawAnyway=!0,this.isSandbox=!1}}class mh extends ph{constructor(t,e){super(),this.collide=!0,this.isCameraFocus=!1,this.m_collisionGroup=Number.MIN_SAFE_INTEGER,this.highlightForJoint=!1,this.isBullet=!1,this.m_body=null,this.m_shape=null,this.m_fixture=null,this.centerX=t,this.centerY=e,na.minDensity>15?this.density=na.minDensity:na.maxDensity<15?this.density=na.maxDensity:this.density=15,this.angle=0,this.red=na.defaultR,this.green=na.defaultG,this.blue=na.defaultB,this.opacity=na.defaultO,this.outline=!0,this.terrain=!1,this.undragable=!1,this.m_joints=new Array,this.m_thrusters=new Array}GetBody(){return this.m_body}GetShape(){return this.m_shape}GetFixture(){return this.m_fixture}GetUserData(){return this.m_body.GetUserData()||{}}AddJoint(t){this.m_joints.push(t)}AddThrusters(t){this.m_thrusters.push(t)}Move(t,e){this.centerX=t,this.centerY=e}RotateAround(t,e,i){var s=Vs.GetDist(this.centerX,this.centerY,t,e),r=this.rotateAngle+i;this.Move(t+s*Math.cos(r),e+s*Math.sin(r)),this.angle=i+this.rotateOrientation}MakeCopy(){throw new uh("abstract ShapePart.MakeCopy() called")}HeavierThan(t){return this.m_body.GetMass()>t.GetBody().GetMass()}GetMass(){return this.m_body?this.m_body.GetMass():this.GetArea()*(this.density+5)/10}GetArea(){throw new uh("abstract ShapePart.GetArea() called")}UnInit(t){this.isInitted&&(super.UnInit(t),this.m_body&&(this.m_body.GetUserData()&&this.m_body.GetUserData().deleted||(t.DestroyBody(this.m_body),this.m_body.GetUserData()||this.m_body.SetUserData({}),this.m_body.GetUserData().deleted=!0),this.m_body=null))}Update(t){}KeyInput(t,e,i){}SetCollisionGroup(t){if(!this.checkedCollisionGroup){this.checkedCollisionGroup=!0,this.m_collisionGroup=t;for(var e=0;e<this.m_joints.length;e++)this.m_joints[e].isEnabled&&this.m_joints[e].GetOtherPart(this).SetCollisionGroup(t)}}GetActiveJoints(){return this.m_joints.filter((()=>this.IsEnabled()))}GetActiveThrusters(){return this.m_thrusters.filter((()=>this.IsEnabled()))}WillBeStatic(t=null){if(this.isStatic)return!0;null==t&&(t=new Array),t.push(this);for(var e=0;e<this.m_joints.length;e++)if(this.m_joints[e]instanceof vh){var i=this.m_joints[e].GetOtherPart(this);if(!Vs.ObjectInArray(i,t)&&i.WillBeStatic(t))return!0}return!1}GetAttachedParts(t=null){null==t&&(t=new Array),t.push(this);for(var e=0;e<this.m_joints.length;e++)if(this.m_joints[e].isEnabled){for(var i=!1,s=0;s<t.length;s++)this.m_joints[e]==t[s]&&(i=!0);i||t.concat(this.m_joints[e].GetAttachedParts(t))}for(e=0;e<this.m_thrusters.length;e++)if(this.m_thrusters[e].isEnabled){for(i=!1,s=0;s<t.length;s++)this.m_thrusters[e]==t[s]&&(i=!0);i||t.concat(this.m_thrusters[e].GetAttachedParts(t))}return t}static GetOutlineVertices(t,e,i){var s=new Array;if(3==e){var r=Vs.Vector((t[0].x+t[1].x+t[2].x)/3,(t[0].y+t[1].y+t[2].y)/3),n=Vs.GetDist(t[0].x,t[0].y,t[1].x,t[1].y),o=Vs.GetDist(t[0].x,t[0].y,t[2].x,t[2].y),a=Vs.GetDist(t[1].x,t[1].y,t[2].x,t[2].y),h=(n+o+a)/3,l=Vs.NormalizeAngle(Math.acos((n*n+o*o-a*a)/(2*n*o))),c=Vs.NormalizeAngle(Math.acos((n*n+a*a-o*o)/(2*n*a))),d=Vs.NormalizeAngle(Math.acos((o*o+a*a-n*n)/(2*o*a))),u=180*Math.min(l,c,d)/Math.PI,p=1+2.5*i/h*(u<30?30/u:1);s.push(Vs.Vector(r.x+(t[0].x-r.x)*p,r.y+(t[0].y-r.y)*p)),s.push(Vs.Vector(r.x+(t[1].x-r.x)*p,r.y+(t[1].y-r.y)*p)),s.push(Vs.Vector(r.x+(t[2].x-r.x)*p,r.y+(t[2].y-r.y)*p))}else for(var m=0;m<e;m++){var f=0==m?t[e-1]:t[m-1],_=t[m],g=m==e-1?t[0]:t[m+1],b=Math.atan2(f.y-_.y,f.x-_.x),y=Math.atan2(g.y-_.y,g.x-_.x),w=Vs.NormalizeAngle((b+y)/2+(Math.max(b,y)-Math.min(b,y)<Math.PI?Math.PI:0));s.push(Vs.Vector(_.x+Math.cos(w)*i*1.1,_.y+Math.sin(w)*i*1.1))}return s}equals(t){return this.isStatic==t.isStatic&&this.NumbersEqual(this.centerX,t.centerX)&&this.NumbersEqual(this.centerY,t.centerY)&&this.NumbersEqual(this.density,t.density)&&this.NumbersEqual(this.angle,t.angle)&&this.collide==t.collide&&this.red==t.red&&this.green==t.green&&this.blue==t.blue&&this.opacity==t.opacity&&this.outline==t.outline&&this.terrain==t.terrain&&this.undragable==t.undragable}NumbersEqual(t,e){return Math.abs(t-e)<1e-4}ToString(){return"centerX="+this.centerX+", centerY="+this.centerY+", density="+this.density+", angle="+this.angle+", collide="+this.collide+", "+super.ToString()}}class fh extends ph{constructor(t,e){super(),this.part1Index=-1,this.part2Index=-1,this.part1=t,this.part2=e,this.part1.AddJoint(this),this.part2.AddJoint(this),this.anchorX=0,this.anchorY=0}GetJoint(){return this.m_joint}GetOtherPart(t){return t==this.part1?this.part2:t==this.part2?this.part1:null}UnInit(t){this.isInitted&&(super.UnInit(t),this.m_joint=null)}Move(t,e){this.anchorX=t,this.anchorY=e}RotateAround(t,e,i){var s=Vs.GetDist(this.anchorX,this.anchorY,t,e),r=this.rotateAngle+i;this.Move(t+s*Math.cos(r),e+s*Math.sin(r))}MakeCopy(t,e){throw new uh("abstract JointPart.MakeCopy() called")}GetAttachedParts(t=null){null==t&&(t=new Array),t.push(this);for(var e=!1,i=!1,s=0;s<t.length;s++)this.part1==t[s]&&(e=!0),this.part2==t[s]&&(i=!0);return e||t.concat(this.part1.GetAttachedParts(t)),i||t.concat(this.part2.GetAttachedParts(t)),t}IntersectsBox(t,e,i,s){return this.anchorX>=t&&this.anchorX<=t+i&&this.anchorY>=e&&this.anchorY<=e+s}PrepareForResizing(){}ToString(){return"anchorX="+this.anchorX+", anchorY="+this.anchorY+", "+super.ToString()}}class _h extends mh{constructor(t,e,i,s=!0){super(t,e),s&&(i<_h.MIN_RADIUS&&(i=_h.MIN_RADIUS),i>_h.MAX_RADIUS&&(i=_h.MAX_RADIUS)),this.radius=i,this.type="Circle"}InsideShape(t,e,i){return Vs.GetDist(this.centerX,this.centerY,t,e)<=this.radius}GetArea(){return Math.PI*this.radius*this.radius}MakeCopy(){var t=new _h(this.centerX,this.centerY,this.radius);return t.density=this.density,t.angle=this.angle,t.collide=this.collide,t.isStatic=this.isStatic,t.red=this.red,t.green=this.green,t.blue=this.blue,t.opacity=this.opacity,t.outline=this.outline,t.terrain=this.terrain,t.undragable=this.undragable,t}Init(t,e=null){if(this.isInitted)return;super.Init(t);var i=new ps.b2CircleShape;i.Set({x:0,y:0},this.radius);var s=!1;if(e)i.Set({x:this.centerX-e.GetPosition().x,y:this.centerY-e.GetPosition().y}),this.m_body=e,s=e.GetType()===ps.b2BodyType.b2_staticBody;else{var r={position:{x:this.centerX,y:this.centerY},type:this.isStatic?ps.b2BodyType.b2_staticBody:ps.b2BodyType.b2_dynamicBody};if(this.isEditable){for(var n=!1,o=0;o<this.m_joints.length;o++)if(this.m_joints[o].isEnabled){n=!0;break}n||(r.bullet=!0)}this.isBullet&&(r.bullet=!0),this.m_body=t.CreateBody(r)}this.m_fixture=this.m_body.CreateFixture({shape:i,friction:.4,restitution:.3,density:(this.density+5)/10});const a=new Object;a.collide=this.collide,a.editable=this.isEditable,a.red=this.red,a.green=this.green,a.blue=this.blue,a.outline=this.outline,a.terrain=this.terrain,a.undragable=this.undragable,a.isPiston=-1,a.isSandbox=this.isSandbox,this.m_body.SetUserData(a),this.m_fixture.SetUserData(a),this.m_collisionGroup!=Number.MIN_VALUE&&this.m_fixture.SetFilterData({groupIndex:this.m_collisionGroup}),this.m_shape=i,this.isStatic||s?this.m_body.SetMassData(new ps.b2MassData):this.m_body.ResetMassData();for(var h=0;h<this.m_joints.length;h++)if(this.m_joints[h].isEnabled&&this.m_joints[h]instanceof vh){var l=this.m_joints[h].GetOtherPart(this);l.isEnabled&&l.Init(t,this.m_body)}}IntersectsBox(t,e,i,s){if(this.centerX>=t&&this.centerX<=t+i&&this.centerY>=e&&this.centerY<=e+s)return!0;if(this.centerX>=t&&this.centerX<=t+i){if(Math.abs(e-this.centerY)<=this.radius)return!0;if(Math.abs(e+s-this.centerY)<=this.radius)return!0}if(this.centerY>=e&&this.centerY<=e+s){if(Math.abs(t-this.centerX)<=this.radius)return!0;if(Math.abs(t+i-this.centerX)<=this.radius)return!0}return Vs.GetDist(this.centerX,this.centerY,t,e)<this.radius||(Vs.GetDist(this.centerX,this.centerY,t+i,e)<this.radius||(Vs.GetDist(this.centerX,this.centerY,t+i,e+s)<this.radius||Vs.GetDist(this.centerX,this.centerY,t,e+s)<this.radius))}PrepareForResizing(){this.initRadius=this.radius}equals(t){return t instanceof _h&&this.NumbersEqual(this.radius,t.radius)&&super.equals(t)}ToString(){return"Circle: radius="+this.radius+", "+super.ToString()}}_h.MIN_RADIUS=.1,_h.MAX_RADIUS=5;class gh extends mh{constructor(t,e,i,s,r=!0){super(0,0),this.isTank=!1,r&&(i<0&&(t+=Math.max(-gh.MAX_WIDTH,i),i=-i),s<0&&(e+=Math.max(-gh.MAX_WIDTH,s),s=-s),i<gh.MIN_WIDTH&&(i=gh.MIN_WIDTH),s<gh.MIN_WIDTH&&(s=gh.MIN_WIDTH),i>gh.MAX_WIDTH&&(i=gh.MAX_WIDTH),s>gh.MAX_WIDTH&&(s=gh.MAX_WIDTH)),this.x=t,this.y=e,this.w=i,this.h=s,this.centerX=t+i/2,this.centerY=e+s/2,this.type="Rectangle"}GetArea(){return this.w*this.h}GetVertices(){var t=new Array(4);t[0]=new ps.b2Vec2(this.x,this.y),t[1]=new ps.b2Vec2(this.x+this.w,this.y),t[2]=new ps.b2Vec2(this.x+this.w,this.y+this.h),t[3]=new ps.b2Vec2(this.x,this.y+this.h);for(var e=Math.sqrt(this.w*this.w/4+this.h*this.h/4),i=0;i<4;i++){var s=Math.atan2(t[i].y-this.centerY,t[i].x-this.centerX);s=Vs.NormalizeAngle(this.angle+s),t[i].x=this.centerX+e*Math.cos(s),t[i].y=this.centerY+e*Math.sin(s)}return t}InsideShape(t,e,i){for(var s=!0,r=this.GetVertices(),n=0;n<4;n++){var o;o=r[(n+1)%4].x==r[n].x?r[(n+1)%4].y>=r[n].y?1e8:-1e8:(r[(n+1)%4].y-r[n].y)/(r[(n+1)%4].x-r[n].x);var a=e-r[n].y-o*(t-r[n].x),h=r[(n+2)%4].y-r[n].y-o*(r[(n+2)%4].x-r[n].x);(a<0&&h>0||a>0&&h<0)&&(s=!1)}return s}Move(t,e){this.x=t-this.w/2,this.y=e-this.h/2,super.Move(t,e)}MakeCopy(){var t=new gh(this.x,this.y,this.w,this.h);return t.density=this.density,t.angle=this.angle,t.collide=this.collide,t.isStatic=this.isStatic,t.red=this.red,t.green=this.green,t.blue=this.blue,t.opacity=this.opacity,t.outline=this.outline,t.terrain=this.terrain,t.undragable=this.undragable,t}Init(t,e=null){if(this.isInitted)return;super.Init(t);var i=new ps.b2PolygonShape;i.Set(this.GetVertices(),4);var s,r=!1;if(e){for(s=0;s<4;s++)i.m_vertices[s].x-=e.GetPosition().x,i.m_vertices[s].y-=e.GetPosition().y;this.m_body=e,r=e.GetType()===ps.b2BodyType.b2_staticBody}else{for(s=0;s<4;s++)i.m_vertices[s].x-=this.centerX,i.m_vertices[s].y-=this.centerY;var n={position:{x:this.centerX,y:this.centerY},type:this.isStatic?ps.b2BodyType.b2_staticBody:ps.b2BodyType.b2_dynamicBody};if(this.isEditable){for(var o=!1,a=0;a<this.m_joints.length;a++)if(this.m_joints[a].isEnabled){o=!0;break}o||(n.bullet=!0)}this.isBullet&&(n.bullet=!0),this.m_body=t.CreateBody(n)}this.m_fixture=this.m_body.CreateFixture({shape:i,friction:.4,restitution:.3,density:(this.density+5)/10}),this.m_collisionGroup!=Number.MIN_VALUE&&this.m_fixture.SetFilterData({groupIndex:this.m_collisionGroup});const h=new Object;for(h.collide=this.collide,h.editable=this.isEditable||this.isTank,h.red=this.red,h.green=this.green,h.blue=this.blue,h.outline=this.outline,h.terrain=this.terrain,h.undragable=this.undragable,h.isPiston=-1,h.isSandbox=this.isSandbox,this.m_body.SetUserData(h),this.m_fixture.SetUserData(h),this.m_shape=i,this.isStatic||r?this.m_body.SetMassData(new ps.b2MassData):this.m_body.ResetMassData(),s=0;s<this.m_joints.length;s++)if(this.m_joints[s].isEnabled&&this.m_joints[s]instanceof vh){var l=this.m_joints[s].GetOtherPart(this);l.isEnabled&&l.Init(t,this.m_body)}}IntersectsBox(t,e,i,s){if(this.centerX>=t&&this.centerX<=t+i&&this.centerY>=e&&this.centerY<=e+s)return!0;for(var r=this.GetVertices(),n=0;n<4;n++){if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%4].x,r[(n+1)%4].y,t,e,t+i,e))return!0;if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%4].x,r[(n+1)%4].y,t+i,e,t+i,e+s))return!0;if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%4].x,r[(n+1)%4].y,t+i,e+s,t,e+s))return!0;if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%4].x,r[(n+1)%4].y,t,e+s,t,e))return!0}return!1}GetVerticesForOutline(t){return gh.GetOutlineVertices(this.GetVertices(),4,t)}PrepareForResizing(){this.initW=this.w,this.initH=this.h}equals(t){return t instanceof gh&&this.NumbersEqual(this.x,t.x)&&this.NumbersEqual(this.y,t.y)&&this.NumbersEqual(this.w,t.w)&&this.NumbersEqual(this.h,t.h)&&super.equals(t)}ToString(){return"Rectangle: x="+this.x+", y="+this.y+", w="+this.w+", h="+this.h+", "+super.ToString()}}gh.MIN_WIDTH=.1,gh.MAX_WIDTH=10;class bh extends mh{constructor(t,e,i,s,r,n){super(t,i),this.x1=t,this.y1=e,this.x2=i,this.y2=s,this.x3=r,this.y3=n,this.SwapVertices();var o=(this.x1+this.x2+this.x3)/3,a=(this.y1+this.y2+this.y3)/3;this.centerX=o,this.centerY=a,this.type="Triangle"}SwapVertices(){var t=Vs.NormalizeAngle(Math.atan2(this.y1-this.y2,this.x2-this.x1)),e=Vs.NormalizeAngle(Math.atan2(this.y1-this.y3,this.x3-this.x1));if(e<t&&(e+=2*Math.PI),e-t<=Math.PI){var i=this.x2,s=this.y2;this.x2=this.x3,this.y2=this.y3,this.x3=i,this.y3=s}}GetArea(){var t=Vs.GetDist(this.x1,this.y1,this.x2,this.y2),e=Vs.GetDist(this.x1,this.y1,this.x3,this.y3),i=Vs.GetDist(this.x2,this.y2,this.x3,this.y3);return Math.sqrt(Math.pow(t*t+e*e+i*i,2)-2*(t*t*t*t+e*e*e*e+i*i*i*i))/4}GetVertices(){var t=new Array(3);t[0]=new ps.b2Vec2(this.x1,this.y1),t[1]=new ps.b2Vec2(this.x2,this.y2),t[2]=new ps.b2Vec2(this.x3,this.y3);for(var e=0;e<3;e++){var i=Vs.GetDist(this.centerX,this.centerY,t[e].x,t[e].y),s=Math.atan2(t[e].y-this.centerY,t[e].x-this.centerX);s=Vs.NormalizeAngle(this.angle+s),t[e].x=this.centerX+i*Math.cos(s),t[e].y=this.centerY+i*Math.sin(s)}return t}GetVerticesForOutline(t){return bh.GetOutlineVertices(this.GetVertices(),3,t)}InsideShape(t,e,i){for(var s=!0,r=this.GetVertices(),n=0;n<3;n++){var o;o=r[(n+1)%3].x==r[n].x?r[(n+1)%3].y>=r[n].y?1e8:-1e8:(r[(n+1)%3].y-r[n].y)/(r[(n+1)%3].x-r[n].x);var a=e-r[n].y-o*(t-r[n].x),h=r[(n+2)%3].y-r[n].y-o*(r[(n+2)%3].x-r[n].x);(a<0&&h>0||a>0&&h<0)&&(s=!1)}return s}Move(t,e){this.x1=t+(this.x1-this.centerX),this.y1=e+(this.y1-this.centerY),this.x2=t+(this.x2-this.centerX),this.y2=e+(this.y2-this.centerY),this.x3=t+(this.x3-this.centerX),this.y3=e+(this.y3-this.centerY),super.Move(t,e)}MakeCopy(){var t=new bh(this.x1,this.y1,this.x2,this.y2,this.x3,this.y3);return t.density=this.density,t.angle=this.angle,t.collide=this.collide,t.isStatic=this.isStatic,t.red=this.red,t.green=this.green,t.blue=this.blue,t.opacity=this.opacity,t.outline=this.outline,t.terrain=this.terrain,t.undragable=this.undragable,t}Init(t,e=null){if(this.isInitted)return;super.Init(t);var i=new ps.b2PolygonShape;i.Set(this.GetVertices(),3);var s,r=!1;if(e){for(s=0;s<3;s++)i.m_vertices[s].x-=e.GetPosition().x,i.m_vertices[s].y-=e.GetPosition().y;this.m_body=e,r=e.GetType()===ps.b2BodyType.b2_staticBody}else{for(s=0;s<3;s++)i.m_vertices[s].x-=this.centerX,i.m_vertices[s].y-=this.centerY;var n={position:{x:this.centerX,y:this.centerY},type:this.isStatic?ps.b2BodyType.b2_staticBody:ps.b2BodyType.b2_dynamicBody};if(this.isEditable){for(var o=!1,a=0;a<this.m_joints.length;a++)if(this.m_joints[a].isEnabled){o=!0;break}o||(n.bullet=!0)}this.isBullet&&(n.bullet=!0),this.m_body=t.CreateBody(n)}this.m_fixture=this.m_body.CreateFixture({shape:i,friction:.4,restitution:.3,density:(this.density+5)/10}),this.m_collisionGroup!=Number.MIN_VALUE&&this.m_fixture.SetFilterData({groupIndex:this.m_collisionGroup});const h=new Object;for(h.collide=this.collide,h.editable=this.isEditable,h.red=this.red,h.green=this.green,h.blue=this.blue,h.outline=this.outline,h.terrain=this.terrain,h.undragable=this.undragable,h.isPiston=-1,h.isSandbox=this.isSandbox,this.m_body.SetUserData(h),this.m_fixture.SetUserData(h),this.m_shape=i,this.isStatic||r?this.m_body.SetMassData(new ps.b2MassData):this.m_body.ResetMassData(),s=0;s<this.m_joints.length;s++)if(this.m_joints[s].isEnabled&&this.m_joints[s]instanceof vh){var l=this.m_joints[s].GetOtherPart(this);l.isEnabled&&l.Init(t,this.m_body)}}IntersectsBox(t,e,i,s){if(this.centerX>=t&&this.centerX<=t+i&&this.centerY>=e&&this.centerY<=e+s)return!0;for(var r=this.GetVertices(),n=0;n<3;n++){if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%3].x,r[(n+1)%3].y,t,e,t+i,e))return!0;if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%3].x,r[(n+1)%3].y,t+i,e,t+i,e+s))return!0;if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%3].x,r[(n+1)%3].y,t+i,e+s,t,e+s))return!0;if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%3].x,r[(n+1)%3].y,t,e+s,t,e))return!0}return!1}PrepareForResizing(){this.initX1=this.x1-this.centerX,this.initY1=this.y1-this.centerY,this.initX2=this.x2-this.centerX,this.initY2=this.y2-this.centerY,this.initX3=this.x3-this.centerX,this.initY3=this.y3-this.centerY}equals(t){return t instanceof bh&&this.NumbersEqual(this.x1,t.x1)&&this.NumbersEqual(this.y1,t.y1)&&this.NumbersEqual(this.x2,t.x2)&&this.NumbersEqual(this.y2,t.y2)&&this.NumbersEqual(this.x3,t.x3)&&this.NumbersEqual(this.y3,t.y3)&&super.equals(t)}ToString(){return"Triangle: x1="+this.x1+", y1="+this.y1+", x2="+this.x2+", y2="+this.y2+", x3="+this.x3+", y3="+this.y3+super.ToString()}}bh.MIN_SIDE_LENGTH=.1,bh.MAX_SIDE_LENGTH=10,bh.MIN_TRIANGLE_ANGLE=5*Math.PI/180;class yh extends mh{constructor(t,e,i,s=!0){super(0,0),this.createCannonball=!1,this.cannonballs=new Array,this.cannonballCounters=new Array;var r=!1;s&&(i<0&&(t+=Math.max(-yh.MAX_WIDTH,i),e+=Math.max(-yh.MAX_WIDTH/2,i/2),i=-i,r=!0),i<yh.MIN_WIDTH&&(i=yh.MIN_WIDTH),i>yh.MAX_WIDTH&&(i=yh.MAX_WIDTH)),this.x=t,this.y=e,this.w=i,this.centerX=t+i/2,this.centerY=e+i/4,this.fireKey=40,this.strength=15,r&&(this.angle=Math.PI),this.type="Cannon"}GetArea(){return this.w*this.w/2}Move(t,e){this.x=t-this.w/2,this.y=e-this.w/4,super.Move(t,e)}GetVertices(){var t=new Array(4);t[0]=new ps.b2Vec2(this.x,this.y),t[1]=new ps.b2Vec2(this.x+this.w,this.y),t[2]=new ps.b2Vec2(this.x+this.w,this.y+this.w/2),t[3]=new ps.b2Vec2(this.x,this.y+this.w/2);for(var e=Math.sqrt(5*this.w*this.w/16),i=0;i<4;i++){var s=Math.atan2(t[i].y-this.centerY,t[i].x-this.centerX);s=Vs.NormalizeAngle(this.angle+s),t[i].x=this.centerX+e*Math.cos(s),t[i].y=this.centerY+e*Math.sin(s)}return t}GetSpawnPoint(){return Vs.Vector(this.centerX+2*Math.cos(this.angle)*this.w/3,this.centerY+2*Math.sin(this.angle)*this.w/3)}InsideShape(t,e,i){for(var s=!0,r=this.GetVertices(),n=0;n<4;n++){var o;o=r[(n+1)%4].x==r[n].x?r[(n+1)%4].y>=r[n].y?1e8:-1e8:(r[(n+1)%4].y-r[n].y)/(r[(n+1)%4].x-r[n].x);var a=e-r[n].y-o*(t-r[n].x),h=r[(n+2)%4].y-r[n].y-o*(r[(n+2)%4].x-r[n].x);(a<0&&h>0||a>0&&h<0)&&(s=!1)}return s}MakeCopy(){var t=new yh(this.x,this.y,this.w);return t.density=this.density,t.angle=this.angle,t.collide=this.collide,t.isStatic=this.isStatic,t.red=this.red,t.green=this.green,t.blue=this.blue,t.opacity=this.opacity,t.outline=this.outline,t.terrain=this.terrain,t.undragable=this.undragable,t.fireKey=this.fireKey,t.strength=this.strength,t}Init(t,e=null){if(this.isInitted)return;super.Init(t);var i=new ps.b2PolygonShape;i.Set(this.GetVertices(),4);var s,r=!1;if(e){for(s=0;s<4;s++)i.m_vertices[s].x-=e.GetPosition().x,i.m_vertices[s].y-=e.GetPosition().y;this.m_body=e,r=e.GetType()===ps.b2BodyType.b2_staticBody}else{for(s=0;s<4;s++)i.m_vertices[s].x-=this.centerX,i.m_vertices[s].y-=this.centerY;var n={position:{x:this.centerX,y:this.centerY},type:this.isStatic?ps.b2BodyType.b2_staticBody:ps.b2BodyType.b2_dynamicBody};this.m_body=t.CreateBody(n)}this.m_fixture=this.m_body.CreateFixture({shape:i,friction:.4,restitution:.3,density:this.density+.5}),this.m_collisionGroup!=Number.MIN_VALUE&&this.m_fixture.SetFilterData({groupIndex:this.m_collisionGroup});const o=new Object;for(o.collide=this.collide,o.editable=this.isEditable,o.red=this.red,o.green=this.green,o.blue=this.blue,o.outline=this.outline,o.terrain=this.terrain,o.undragable=this.undragable,o.isPiston=-1,this.m_body.SetUserData(o),this.m_fixture.SetUserData(o),this.m_shape=i,this.isStatic||r?this.m_body.SetMassData(new ps.b2MassData):this.m_body.ResetMassData(),this.cannonballs.length=0,this.cannonballCounters.length=0,s=0;s<this.m_joints.length;s++)if(this.m_joints[s].isEnabled&&this.m_joints[s]instanceof vh){var a=this.m_joints[s].GetOtherPart(this);a.isEnabled&&a.Init(t,this.m_body)}this.relativeCannonPos=Vs.Vector(this.centerX,this.centerY),this.relativeCannonPos.Subtract(this.m_body.GetPosition())}KeyInput(t,e,i){t==this.fireKey&&e&&(this.createCannonball=!0)}Update(t){this.isInitted&&this.createCannonball&&this.cannonballs.length<50&&this.CreateCannonball(t),this.createCannonball=!1;for(var e=0;e<this.cannonballCounters.length;e++)this.cannonballCounters[e]--,0==this.cannonballCounters[e]&&(this.cannonballs[e].GetFixtureList().m_filter.groupIndex=0)}CreateCannonball(t){var e=new ps.b2CircleShape;e.Set({x:0,y:0},this.w/6);var i=this.GetSpawnPoint();i.Subtract(Vs.Vector(this.centerX,this.centerY)),i.Add(this.relativeCannonPos);const s=new ps.b2Vec2;this.m_body.GetWorldPoint(i,s);var r={position:s,type:ps.b2BodyType.b2_dynamicBody,bullet:!0},n=t.CreateBody(r);this.cannonballs.push(n);const o=n.CreateFixture({shape:e,friction:.4,restitution:.3,density:(this.density+5)/10});this.m_collisionGroup!=Number.MIN_VALUE&&o.SetFilterData({groupIndex:this.m_collisionGroup}),n.ResetMassData();const a=new Object;a.collide=!0,a.editable=this.isEditable,a.red=this.red,a.green=this.green,a.blue=this.blue,a.outline=this.outline,a.terrain=!1,a.undragable=!0,a.isPiston=-1,n.SetUserData(a),o.SetUserData(a);var h=this.angle+this.m_body.GetAngle(),l=.15*this.w*this.w*o.GetDensity()*(4+2*this.strength),c=Vs.Vector(Math.cos(h)*l,Math.sin(h)*l),d=new ps.b2Vec2;this.m_body.GetWorldPoint(this.relativeCannonPos,d),n.ApplyLinearImpulse(c,n.GetWorldCenter()),c=c.Negate(),this.m_body.ApplyLinearImpulse(c,d),na.cannonballs&&na.cannonballs.push(n),Xa.cannonballs&&Xa.cannonballs.push(n),this.cannonballCounters.push(5)}IntersectsBox(t,e,i,s){if(this.centerX>=t&&this.centerX<=t+i&&this.centerY>=e&&this.centerY<=e+s)return!0;for(var r=this.GetVertices(),n=0;n<4;n++){if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%4].x,r[(n+1)%4].y,t,e,t+i,e))return!0;if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%4].x,r[(n+1)%4].y,t+i,e,t+i,e+s))return!0;if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%4].x,r[(n+1)%4].y,t+i,e+s,t,e+s))return!0;if(Vs.SegmentsIntersect(r[n].x,r[n].y,r[(n+1)%4].x,r[(n+1)%4].y,t,e+s,t,e))return!0}return!1}PrepareForResizing(){this.initW=this.w}GetVerticesForOutline(t){return yh.GetOutlineVertices(this.GetVertices(),4,t)}equals(t){return t instanceof yh&&this.x==t.x&&this.y==t.y&&this.w==t.w&&this.fireKey==t.fireKey&&this.strength==t.strength&&super.equals(t)}ToString(){return"Cannon: x="+this.x+", y="+this.y+", w="+this.w+", fireKey="+this.fireKey+", strength="+this.strength+super.ToString()}}yh.MIN_WIDTH=.5,yh.MAX_WIDTH=10,a("7qcjp");js=a("4Y6fG");class wh extends ph{constructor(t,e,i,s,r,n,o=!0){super(),this.alwaysVisible=!0,this.inFront=!0,this.scaleWithZoom=!0,this.displayKey=32,this.displayKeyPressed=!1,this.is_added=!1,this.m_controller=t,this.x=e,this.y=i,this.w=s,this.h=r,this.text=n,this.red=0,this.green=0,this.blue=0,this.size=14;const a=new js.TextStyle({wordWrap:!0,wordWrapWidth:1,breakWords:!0});this.m_textField=new js.Text(n,a),this.m_textField.x=e,this.m_textField.y=i,this.type="TextPart",this.inFront=o,this.m_controller.addChild(this.m_textField)}Move(t,e){this.x=t,this.y=e}RotateAround(t,e,i){}KeyInput(t,e,i){t==this.displayKey&&e&&(this.displayKeyPressed=!this.displayKeyPressed)}Update(t){}GetAttachedParts(t=null){return null==t&&(t=new Array),t.push(this),t}MakeCopy(){var t=new wh(this.m_controller,this.x,this.y,this.w,this.h,this.text);return t.inFront=this.inFront,t.scaleWithZoom=this.scaleWithZoom,t.alwaysVisible=this.alwaysVisible,t.displayKey=this.displayKey,t.red=this.red,t.green=this.green,t.blue=this.blue,t.size=this.size,t}Resize(t,e){0==this.corner?(this.x=this.initX+t,this.w=this.initW-t,this.w<1&&(this.x=this.initX+this.initW-1,this.w=1),this.y=this.initY+e,this.h=this.initH-e,this.h<1&&(this.y=this.initY+this.initH-1,this.h=1)):1==this.corner?(this.w=this.initW+t,this.w<1&&(this.w=1),this.y=this.initY+e,this.h=this.initH-e,this.h<1&&(this.y=this.initY+this.initH-1,this.h=1)):2==this.corner?(this.w=this.initW+t,this.w<1&&(this.w=1),this.h=this.initH+e,this.h<1&&(this.h=1)):(this.x=this.initX+t,this.w=this.initW-t,this.w<1&&(this.x=this.initX+this.initW-1,this.w=1),this.h=this.initH+e,this.h<1&&(this.h=1))}InsideShape(t,e,i){return this.x+this.w>=t&&this.x<t&&this.y+this.h>=e&&this.y<e}InsideMoveBox(t,e,i,s=!1){return Math.abs(t-this.x)<6/i&&Math.abs(e-this.y)<6/i?(s&&(this.corner=0,this.initX=this.x,this.initY=this.y,this.initW=this.w,this.initH=this.h),!0):Math.abs(t-this.x-this.w)<6/i&&Math.abs(e-this.y)<6/i?(s&&(this.corner=1,this.initX=this.x,this.initY=this.y,this.initW=this.w,this.initH=this.h),!0):Math.abs(t-this.x-this.w)<6/i&&Math.abs(e-this.y-this.h)<6/i?(s&&(this.corner=2,this.initX=this.x,this.initY=this.y,this.initW=this.w,this.initH=this.h),!0):Math.abs(t-this.x)<6/i&&Math.abs(e-this.y-this.h)<6/i&&(s&&(this.corner=3,this.initX=this.x,this.initY=this.y,this.initW=this.w,this.initH=this.h),!0)}IntersectsBox(t,e,i,s){return this.x+this.w>=t&&this.x<t+i&&this.y+this.h>=e&&this.y<e+s}Init(t,e=null){super.Init(t),this.displayKeyPressed=!1}PrepareForResizing(){this.initW=this.w,this.initH=this.h}ToString(){return"TextPart: "+super.ToString()}}class vh extends fh{constructor(t,e,i,s){super(t,e),this.anchorX=i,this.anchorY=s,this.type="FixedJoint"}Init(t,e=null){!this.isInitted&&this.part1.isInitted&&this.part2.isInitted&&super.Init(t)}MakeCopy(t,e){return new vh(t,e,this.anchorX,this.anchorY)}Update(t){}InsideShape(t,e,i){return Vs.GetDist(this.anchorX,this.anchorY,t,e)<.18*30/i}KeyInput(t,e,i){}ToString(){return"FixedJoint: "+super.ToString()}}class xh extends fh{constructor(t,e,i,s){super(t,e),this.isKeyDown1=!1,this.isKeyDown2=!1,this.wasKeyDown1=!1,this.wasKeyDown2=!1,this.anchorX=i,this.anchorY=s,this.enableMotor=!1,this.isStiff=!1,this.autoCW=!1,this.autoCCW=!1,this.motorCWKey=39,this.motorCCWKey=37,na.maxRJStrength<15?this.motorStrength=na.maxRJStrength:this.motorStrength=15,na.maxRJSpeed<15?this.motorSpeed=na.maxRJSpeed:this.motorSpeed=15,this.motorLowerLimit=-Number.MAX_VALUE,this.motorUpperLimit=Number.MAX_VALUE,this.type="RevoluteJoint"}SetJointProperties(t){this.enableMotor=t.enableMotor,this.motorCWKey=t.motorCWKey,this.motorCCWKey=t.motorCCWKey,this.motorStrength=t.motorStrength,this.motorSpeed=t.motorSpeed,this.motorLowerLimit=t.motorLowerLimit,this.motorUpperLimit=t.motorUpperLimit,this.isStiff=t.isStiff,this.autoCW=t.autoCW,this.autoCCW=t.autoCCW}MakeCopy(t,e){var i=new xh(t,e,this.anchorX,this.anchorY);return i.enableMotor=this.enableMotor,i.motorCWKey=this.motorCWKey,i.motorCCWKey=this.motorCCWKey,i.motorStrength=this.motorStrength,i.motorSpeed=this.motorSpeed,i.motorLowerLimit=this.motorLowerLimit,i.motorUpperLimit=this.motorUpperLimit,i.isStiff=this.isStiff,i.autoCW=this.autoCW,i.autoCCW=this.autoCCW,i}Init(t,e=null){if(!this.isInitted&&this.part1.isInitted&&this.part2.isInitted&&(super.Init(t),this.part1.GetBody()!=this.part2.GetBody())){var i=new ps.b2RevoluteJointDef;i.enableMotor=this.enableMotor,i.maxMotorTorque=30*this.motorStrength,i.enableLimit=this.motorLowerLimit!=-Number.MAX_VALUE||this.motorUpperLimit!=Number.MAX_VALUE,this.motorLowerLimit==-Number.MAX_VALUE?i.lowerAngle=-Number.MAX_VALUE:i.lowerAngle=this.motorLowerLimit*Math.PI/180,this.motorUpperLimit==Number.MAX_VALUE?i.upperAngle=Number.MAX_VALUE:i.upperAngle=this.motorUpperLimit*Math.PI/180,this.part1 instanceof _h&&!(this.part2 instanceof _h)?i.Initialize(this.part2.GetBody(),this.part1.GetBody(),new ps.b2Vec2(this.anchorX,this.anchorY)):this.part2 instanceof _h&&!(this.part1 instanceof _h)||this.part1.HeavierThan(this.part2)?i.Initialize(this.part1.GetBody(),this.part2.GetBody(),new ps.b2Vec2(this.anchorX,this.anchorY)):i.Initialize(this.part2.GetBody(),this.part1.GetBody(),new ps.b2Vec2(this.anchorX,this.anchorY)),this.m_joint=t.CreateJoint(i),this.targetJointAngle=0,this.isKeyDown1=!1,this.isKeyDown2=!1,this.wasKeyDown1=!1,this.wasKeyDown2=!1}}CheckForBreakage(t){if(this.m_joint){var e=this.m_joint;const i=new ps.b2Vec2,s=new ps.b2Vec2;e.GetAnchorA(i),e.GetAnchorB(s),Vs.GetDist(i.x,i.y,s.x,s.y)>3&&(t.DestroyJoint(this.m_joint),this.m_joint=null)}}Update(t){if(this.m_joint&&this.enableMotor){var e=this.m_joint;(this.isKeyDown1||this.isKeyDown2)&&(e.EnableMotor(!0),e.m_maxMotorTorque=30*this.motorStrength,this.part1.GetBody().SetAwake(!0),this.part2.GetBody().SetAwake(!0)),this.isKeyDown1||this.autoCW&&!this.isKeyDown2?(e.SetMotorSpeed(this.motorSpeed),this.isStiff&&this.wasKeyDown1&&e.GetJointAngle()<this.prevJointAngle&&(e.SetMotorSpeed(0),e.m_maxMotorTorque=3e3*this.motorStrength)):this.isKeyDown2||this.autoCCW?(e.SetMotorSpeed(0-this.motorSpeed),this.isStiff&&this.wasKeyDown2&&e.GetJointAngle()>this.prevJointAngle&&(e.SetMotorSpeed(0),e.m_maxMotorTorque=3e3*this.motorStrength)):((this.wasKeyDown1||this.wasKeyDown2)&&(this.targetJointAngle=e.GetJointAngle()),e.EnableMotor(this.isStiff),e.SetMotorSpeed(0),e.m_maxMotorTorque=3e3*this.motorStrength),this.wasKeyDown1=this.isKeyDown1,this.wasKeyDown2=this.isKeyDown2,this.prevJointAngle=e.GetJointAngle()}}InsideShape(t,e,i){return Vs.GetDist(this.anchorX,this.anchorY,t,e)<.18*30/i}KeyInput(t,e,i){t==this.motorCWKey&&(this.isKeyDown1=!e),t==this.motorCCWKey&&(this.isKeyDown2=!e)}ToString(){return"RevoluteJoint: enableMotor="+this.enableMotor+", motorCWKey="+this.motorCWKey+", motorCCWKey="+this.motorCCWKey+", motorStrength="+this.motorStrength+", motorSpeed="+this.motorSpeed+", motorLowerLimit="+this.motorLowerLimit+", motorUpperLimit="+this.motorUpperLimit+", isStiff="+this.isStiff+", "+super.ToString()}}class Sh extends fh{constructor(t,e,i,s,r,n){if(super(t,e),this.collide=!0,this.arrayIndex=-1,this.isKeyDown1=!1,this.isKeyDown2=!1,this.wasKeyDown1=!1,this.wasKeyDown2=!1,this.expanding=!0,this.m_shapes=[],this.m_fixtures=[],Sh.jbTutorial&&t.centerY>e.centerY){var o=e;e=t,t=o;var a=r;r=i,i=a,a=n,n=s,s=a,Sh.jbTutorial=!1}this.part1=t,this.part2=e,this.anchorX=(i+r)/2,this.anchorY=(s+n)/2,this.axis=new ps.b2Vec2(r-i,n-s),this.axis.Normalize(),this.enablePiston=!1,this.isStiff=!1,this.autoOscillate=!1,this.pistonUpKey=38,this.pistonDownKey=40,na.maxSJStrength<15?this.pistonStrength=na.maxSJStrength:this.pistonStrength=15,na.maxSJSpeed<15?this.pistonSpeed=na.maxSJSpeed:this.pistonSpeed=15,this.red=na.defaultR,this.green=na.defaultG,this.blue=na.defaultB,this.opacity=na.defaultO,this.outline=!0,this.initLength=Vs.GetDist(i,s,r,n),this.type="PrismaticJoint"}SetJointProperties(t){this.enablePiston=t.enablePiston,this.pistonUpKey=t.pistonUpKey,this.pistonDownKey=t.pistonDownKey,this.pistonStrength=t.pistonStrength,this.pistonSpeed=t.pistonSpeed,this.isStiff=t.isStiff,this.autoOscillate=t.autoOscillate,this.red=t.red,this.green=t.green,this.blue=t.blue,this.opacity=t.opacity,this.outline=t.outline,this.collide=t.collide}RotateAround(t,e,i){super.RotateAround(t,e,i);var s=i+this.rotateOrientation;this.axis=new ps.b2Vec2(Math.cos(s),Math.sin(s))}MakeCopy(t,e){var i=this.anchorX-this.axis.x*this.initLength/2,s=this.anchorY-this.axis.y*this.initLength/2,r=this.anchorX+this.axis.x*this.initLength/2,n=this.anchorY+this.axis.y*this.initLength/2,o=new Sh(t,e,i,s,r,n);return o.enablePiston=this.enablePiston,o.pistonUpKey=this.pistonUpKey,o.pistonDownKey=this.pistonDownKey,o.pistonStrength=this.pistonStrength,o.pistonSpeed=this.pistonSpeed,o.isStiff=this.isStiff,o.autoOscillate=this.autoOscillate,o.red=this.red,o.green=this.green,o.blue=this.blue,o.opacity=this.opacity,o.outline=this.outline,o.collide=this.collide,o}InsideShape(t,e,i){var s=!0,r=new Array,n=this.anchorX-this.axis.x*this.initLength/2,o=this.anchorY-this.axis.y*this.initLength/2,a=this.anchorX+this.axis.x*this.initLength/2,h=this.anchorY+this.axis.y*this.initLength/2,l=Math.atan2(this.axis.y,this.axis.x)+Math.PI/2;r[0]=new ps.b2Vec2(n-.25*Math.cos(l),o-.25*Math.sin(l)),r[1]=new ps.b2Vec2(n+.25*Math.cos(l),o+.25*Math.sin(l)),r[2]=new ps.b2Vec2(a+.25*Math.cos(l),h+.25*Math.sin(l)),r[3]=new ps.b2Vec2(a-.25*Math.cos(l),h-.25*Math.sin(l));for(var c=0;c<4;c++){var d;d=r[(c+1)%4].x==r[c].x?r[(c+1)%4].y>=r[c].y?1e8:-1e8:(r[(c+1)%4].y-r[c].y)/(r[(c+1)%4].x-r[c].x);var u=e-r[c].y-d*(t-r[c].x),p=r[(c+2)%4].y-r[c].y-d*(r[(c+2)%4].x-r[c].x);(u<0&&p>0||u>0&&p<0)&&(s=!1)}return s}Init(t,e=null){if(!this.isInitted&&this.part1.isInitted&&this.part2.isInitted&&(super.Init(t),this.expanding=!0,this.m_shapes=[],this.m_fixtures=[],this.part1.GetBody()!=this.part2.GetBody())){var i=na.collisionGroup;this.part1.GetFixture().SetFilterData({...this.part1.GetFixture().GetFilterData(),categoryBits:i}),this.part2.GetFixture().SetFilterData({...this.part2.GetFixture().GetFilterData(),categoryBits:i});var s=this.anchorX-this.axis.x*this.initLength/2,r=this.anchorY-this.axis.y*this.initLength/2,n=this.anchorX+this.axis.x*this.initLength/2,o=this.anchorY+this.axis.y*this.initLength/2,a=Math.atan2(this.axis.y,this.axis.x),h=new ps.b2PolygonShape;const e=new Object;e.red=this.red,e.green=this.green,e.blue=this.blue,e.outline=this.outline,e.collide=this.collide,e.editable=this.isEditable,e.isPiston=i;const _={friction:.4,restitution:.3,density:5,filter:{maskBits:65535^i,groupIndex:this.part1.GetFixture().GetFilterData().groupIndex},userData:e},g={friction:.4,restitution:.3,density:5,filter:{maskBits:65535^i,groupIndex:this.part2.GetFixture().GetFilterData().groupIndex},userData:e};var l=new Array;l[0]=new ps.b2Vec2(s-.25,r-.05),l[1]=new ps.b2Vec2(s+.25,r-.05),l[2]=new ps.b2Vec2(s+.25,r+.05),l[3]=new ps.b2Vec2(s-.25,r+.05);for(var c=Math.sqrt(.065),d=0;d<4;d++){var u=Math.atan2(l[d].y-r,l[d].x-s);u=Vs.NormalizeAngle(a+u+Math.PI/2),l[d].x=s+c*Math.cos(u)-this.part1.GetBody().GetPosition().x,l[d].y=r+c*Math.sin(u)-this.part1.GetBody().GetPosition().y}h.Set(l),this.m_fixtures.push(this.part1.GetBody().CreateFixture({..._,shape:h})),this.m_shapes.push(h),h=new ps.b2PolygonShape;var p=s+(c=Math.sqrt(.2*.2+this.initLength*this.initLength/4))*Math.cos(Math.atan2(-this.initLength/2,-.2)+a+Math.PI/2),m=r+c*Math.sin(Math.atan2(-this.initLength/2,-.2)+a+Math.PI/2);for(l[0]=new ps.b2Vec2(s-.05,r-this.initLength/2),l[1]=new ps.b2Vec2(s+.05,r-this.initLength/2),l[2]=new ps.b2Vec2(s+.05,r+this.initLength/2),l[3]=new ps.b2Vec2(s-.05,r+this.initLength/2),c=Math.sqrt(.05*.05+this.initLength*this.initLength/4),d=0;d<4;d++)u=Math.atan2(l[d].y-r,l[d].x-s),u=Vs.NormalizeAngle(a+u+Math.PI/2),l[d].x=p+c*Math.cos(u)-this.part1.GetBody().GetPosition().x,l[d].y=m+c*Math.sin(u)-this.part1.GetBody().GetPosition().y;for(h.Set(l),this.m_fixtures.push(this.part1.GetBody().CreateFixture({..._,shape:h})),this.m_shapes.push(h),h=new ps.b2PolygonShape,p=s+(c=Math.sqrt(.2*.2+this.initLength*this.initLength/4))*Math.cos(Math.atan2(-this.initLength/2,.2)+a+Math.PI/2),m=r+c*Math.sin(Math.atan2(-this.initLength/2,.2)+a+Math.PI/2),l[0]=new ps.b2Vec2(s-.05,r-this.initLength/2),l[1]=new ps.b2Vec2(s+.05,r-this.initLength/2),l[2]=new ps.b2Vec2(s+.05,r+this.initLength/2),l[3]=new ps.b2Vec2(s-.05,r+this.initLength/2),c=Math.sqrt(.05*.05+this.initLength*this.initLength/4),d=0;d<4;d++)u=Math.atan2(l[d].y-r,l[d].x-s),u=Vs.NormalizeAngle(a+u+Math.PI/2),l[d].x=p+c*Math.cos(u)-this.part1.GetBody().GetPosition().x,l[d].y=m+c*Math.sin(u)-this.part1.GetBody().GetPosition().y;for(h.Set(l),this.m_fixtures.push(this.part1.GetBody().CreateFixture({..._,shape:h})),this.m_shapes.push(h),h=new ps.b2PolygonShape,p=s+(c=Math.sqrt(.0225+this.initLength*this.initLength))*Math.cos(Math.atan2(-this.initLength,-.15)+a+Math.PI/2),m=r+c*Math.sin(Math.atan2(-this.initLength,-.15)+a+Math.PI/2),l[0]=new ps.b2Vec2(s-.095,r-.05),l[1]=new ps.b2Vec2(s+.095,r-.05),l[2]=new ps.b2Vec2(s+.095,r+.05),l[3]=new ps.b2Vec2(s-.095,r+.05),c=Math.sqrt(.011525),d=0;d<4;d++)u=Math.atan2(l[d].y-r,l[d].x-s),u=Vs.NormalizeAngle(a+u+Math.PI/2),l[d].x=p+c*Math.cos(u)-this.part1.GetBody().GetPosition().x,l[d].y=m+c*Math.sin(u)-this.part1.GetBody().GetPosition().y;for(h.Set(l),this.m_fixtures.push(this.part1.GetBody().CreateFixture({..._,shape:h})),this.m_shapes.push(h),h=new ps.b2PolygonShape,p=s+(c=Math.sqrt(.0225+this.initLength*this.initLength))*Math.cos(Math.atan2(-this.initLength,.15)+a+Math.PI/2),m=r+c*Math.sin(Math.atan2(-this.initLength,.15)+a+Math.PI/2),l[0]=new ps.b2Vec2(s-.095,r-.05),l[1]=new ps.b2Vec2(s+.095,r-.05),l[2]=new ps.b2Vec2(s+.095,r+.05),l[3]=new ps.b2Vec2(s-.095,r+.05),c=Math.sqrt(.011525),d=0;d<4;d++)u=Math.atan2(l[d].y-r,l[d].x-s),u=Vs.NormalizeAngle(a+u+Math.PI/2),l[d].x=p+c*Math.cos(u)-this.part1.GetBody().GetPosition().x,l[d].y=m+c*Math.sin(u)-this.part1.GetBody().GetPosition().y;for(h.Set(l),this.m_fixtures.push(this.part1.GetBody().CreateFixture({..._,shape:h})),this.m_shapes.push(h),h=new ps.b2PolygonShape,p=n+(c=this.initLength/2-.1)*Math.cos(Math.atan2(this.initLength/2-.1,0)+a+Math.PI/2),m=o+c*Math.sin(Math.atan2(this.initLength/2-.1,0)+a+Math.PI/2),l[0]=new ps.b2Vec2(n-.05,o-this.initLength/2),l[1]=new ps.b2Vec2(n+.05,o-this.initLength/2),l[2]=new ps.b2Vec2(n+.05,o+this.initLength/2),l[3]=new ps.b2Vec2(n-.05,o+this.initLength/2),c=Math.sqrt(.05*.05+this.initLength*this.initLength/4),d=0;d<4;d++)u=Math.atan2(l[d].y-o,l[d].x-n),u=Vs.NormalizeAngle(a+u+Math.PI/2),l[d].x=p+c*Math.cos(u)-this.part2.GetBody().GetPosition().x,l[d].y=m+c*Math.sin(u)-this.part2.GetBody().GetPosition().y;for(h.Set(l),this.m_fixtures.push(this.part2.GetBody().CreateFixture({...g,shape:h})),this.m_shapes.push(h),h=new ps.b2PolygonShape,p=n+(c=this.initLength-.1)*Math.cos(Math.atan2(this.initLength-.1,0)+a+Math.PI/2),m=o+c*Math.sin(Math.atan2(this.initLength-.1,0)+a+Math.PI/2),l[0]=new ps.b2Vec2(n-.13,o-.05),l[1]=new ps.b2Vec2(n+.13,o-.05),l[2]=new ps.b2Vec2(n+.13,o+.05),l[3]=new ps.b2Vec2(n-.13,o+.05),c=Math.sqrt(.0194),d=0;d<4;d++)u=Math.atan2(l[d].y-o,l[d].x-n),u=Vs.NormalizeAngle(a+u+Math.PI/2),l[d].x=p+c*Math.cos(u)-this.part2.GetBody().GetPosition().x,l[d].y=m+c*Math.sin(u)-this.part2.GetBody().GetPosition().y;h.Set(l),this.m_fixtures.push(this.part2.GetBody().CreateFixture({...g,shape:h})),this.m_shapes.push(h);var f=new ps.b2PrismaticJointDef;f.enableMotor=this.enablePiston,f.maxMotorForce=30*this.pistonStrength,f.enableLimit=!0,f.lowerTranslation=0,f.upperTranslation=this.initLength-.2,f.collideConnected=!0,f.Initialize(this.part1.GetBody(),this.part2.GetBody(),new ps.b2Vec2(this.anchorX,this.anchorY),this.axis),f.userData=new Object,f.userData.localPoint1=new ps.b2Vec2(s-this.part1.centerX,r-this.part1.centerY),f.userData.localPoint2=new ps.b2Vec2(n-this.part2.centerX,o-this.part2.centerY),this.m_joint=t.CreateJoint(f),this.targetJointDisp=0,this.part1.WillBeStatic()||this.part1.GetBody().ResetMassData(),this.part2.WillBeStatic()||this.part2.GetBody().ResetMassData(),this.part1.isStatic||this.part2.isStatic||this.part2.GetBody().SetBullet(!0),this.isKeyDown1=!1,this.isKeyDown2=!1,this.wasKeyDown1=!1,this.wasKeyDown2=!1}}GetJointPerpTranslation(){var t=this.part1.GetBody(),e=this.part2.GetBody();const i=new ps.b2Vec2,s=new ps.b2Vec2,r=new ps.b2Vec2,n=new ps.b2Vec2;t.GetWorldPoint(this.m_joint.GetLocalAnchorA(),i),e.GetWorldPoint(this.m_joint.GetLocalAnchorB(),s),t.GetWorldVector(this.m_joint.GetLocalAxisA(),r),t.GetWorldPoint(this.m_joint.GetUserData().localPoint1,n);var o=Vs.DistanceFromPointToLine(i,n,r),a=Vs.DistanceFromPointToLine(s,n,r);return Math.max(o,a)}CheckForBreakage(t){if(this.m_joint){var e=this.m_joint;Math.abs(e.GetBodyA().GetAngle()-e.GetBodyA().GetAngle())>90*Math.PI/180&&(t.DestroyJoint(this.m_joint),this.m_joint=null)}}Update(t){if(this.m_joint&&this.enablePiston){var e=this.m_joint;(this.isKeyDown1||this.isKeyDown2)&&(e.EnableMotor(!0),e.SetMaxMotorForce(30*this.pistonStrength),this.part1.GetBody().SetAwake(!0),this.part2.GetBody().SetAwake(!0)),this.isKeyDown1&&(!this.autoOscillate||this.expanding)||this.autoOscillate&&this.expanding?(e.SetMotorSpeed(.4*this.pistonSpeed),this.isStiff&&this.wasKeyDown1&&e.GetJointTranslation()<this.prevJointDisp&&(e.SetMotorSpeed(0),e.SetMaxMotorForce(3e3*this.pistonStrength)),e.GetJointTranslation()>this.initLength-.4&&(this.expanding=!1)):this.isKeyDown2||this.autoOscillate&&!this.expanding?(e.SetMotorSpeed(.4*(0-this.pistonSpeed)),this.isStiff&&this.wasKeyDown2&&e.GetJointTranslation()>this.prevJointDisp&&(e.SetMotorSpeed(0),e.SetMaxMotorForce(3e3*this.pistonStrength)),e.GetJointTranslation()<.1&&(this.expanding=!0)):((this.wasKeyDown1||this.wasKeyDown2)&&(this.targetJointDisp=e.GetJointTranslation()),e.EnableMotor(this.isStiff),e.SetMotorSpeed(0),e.SetMaxMotorForce(3e3*this.pistonStrength)),this.wasKeyDown1=this.isKeyDown1,this.wasKeyDown2=this.isKeyDown2,this.prevJointDisp=e.GetJointTranslation()}}GetShapes(){return this.m_shapes}GetFixtures(){return this.m_fixtures}KeyInput(t,e,i){t==this.pistonUpKey&&(this.isKeyDown1=!e),t==this.pistonDownKey&&(this.isKeyDown2=!e)}PrepareForResizing(){this.initInitLength=this.initLength}ToString(){return"PrismaticJoint: axis=("+this.axis.x+","+this.axis.y+"), initLength="+this.initLength+", enablePiston="+this.enablePiston+", pistonUpKey="+this.pistonUpKey+", pistonDownKey="+this.pistonDownKey+", pistonStrength="+this.pistonStrength+", pistonSpeed="+this.pistonSpeed+", isStiff="+this.isStiff+", "+super.ToString()}}Sh.jbTutorial=!1;class Ah extends ph{constructor(t,e,i){super(),this.isBalloon=!1,this.shapeIndex=-1,this.isKeyDown=!1,this.shape=t,this.centerX=e,this.centerY=i,this.type="Thrusters",na.maxThrusterStrength<15?this.strength=na.maxThrusterStrength:this.strength=15,this.angle=-Math.PI/2,this.thrustKey=38,this.autoOn=!1,this.shape.AddThrusters(this)}MakeCopy(t){var e=new Ah(t,this.centerX,this.centerY);return e.strength=this.strength,e.autoOn=this.autoOn,e.thrustKey=this.thrustKey,e.angle=this.angle,e}InsideShape(t,e,i){return Vs.GetDist(this.centerX,this.centerY,t,e)<7.5/i}Init(t,e=null){!this.isInitted&&this.shape.isInitted&&(super.Init(t),this.isKeyDown=!1,this.relativeThrusterPos=Vs.Vector(this.centerX,this.centerY),this.relativeThrusterPos.Subtract(this.shape.GetBody().GetPosition()))}KeyInput(t,e,i){t==this.thrustKey&&(this.isKeyDown=!e)}Update(t){if(this.isInitted&&(this.isKeyDown||this.autoOn)){var e=this.angle+this.shape.GetBody().GetAngle();this.isBalloon&&(e=-Math.PI/2);var i=10+this.strength*this.strength*10,s=Vs.Vector(Math.cos(e)*i,Math.sin(e)*i),r=new ps.b2Vec2;this.shape.GetBody().GetWorldPoint(this.relativeThrusterPos,r),this.shape.GetBody().ApplyForce(s,r)}}Move(t,e){this.centerX=t,this.centerY=e}RotateAround(t,e,i){var s=Vs.GetDist(this.centerX,this.centerY,t,e),r=this.rotateAngle+i;this.Move(t+s*Math.cos(r),e+s*Math.sin(r)),this.angle=i+this.rotateOrientation}GetAttachedParts(t=null){null==t&&(t=new Array),t.push(this);for(var e=!1,i=0;i<t.length;i++)this.shape==t[i]&&(e=!0);return e||t.concat(this.shape.GetAttachedParts(t)),t}IntersectsBox(t,e,i,s){return this.centerX>=t&&this.centerX<=t+i&&this.centerY>=e&&this.centerY<=e+s}PrepareForResizing(){}ToString(){return"Thrusters: x="+this.centerX+", y="+this.centerY+", strength="+this.strength+", "+super.ToString()}}class Ph{constructor(t){this.partAffected=t}UndoAction(){throw new uh("abstract Action.UndoAction() called")}RedoAction(){throw new uh("abstract Action.RedoAction() called")}}class Ch extends Ph{constructor(t){super(t)}UndoAction(){Ch.m_controller.DeletePart(this.partAffected,!1)}RedoAction(){Ch.m_controller.allParts.push(this.partAffected),this.partAffected.isEnabled=!0}}class Th extends Ph{constructor(t,e,i,s){super(t),this.xMove=i,this.yMove=s,this.movedParts=e}UndoAction(){for(var t=0;t<this.movedParts.length;t++)this.movedParts[t]instanceof mh||this.movedParts[t]instanceof Ah?this.movedParts[t].Move(this.movedParts[t].centerX-this.xMove,this.movedParts[t].centerY-this.yMove):this.movedParts[t]instanceof wh?this.movedParts[t].Move(this.movedParts[t].x-this.xMove,this.movedParts[t].y-this.yMove):this.movedParts[t].Move(this.movedParts[t].anchorX-this.xMove,this.movedParts[t].anchorY-this.yMove)}RedoAction(){for(var t=0;t<this.movedParts.length;t++)this.movedParts[t]instanceof mh||this.movedParts[t]instanceof Ah?this.movedParts[t].Move(this.movedParts[t].centerX+this.xMove,this.movedParts[t].centerY+this.yMove):this.movedParts[t]instanceof wh?this.movedParts[t].Move(this.movedParts[t].x+this.xMove,this.movedParts[t].y+this.yMove):this.movedParts[t].Move(this.movedParts[t].anchorX+this.xMove,this.movedParts[t].anchorY+this.yMove)}}class Eh extends Ph{constructor(t,e,i=-1){super(t),this.type=e,this.oldIndex=i}UndoAction(){this.partAffected instanceof wh?this.type==Eh.FRONT_TYPE?(this.partAffected.inFront=!1,Eh.m_controller.removeChild(this.partAffected.m_textField),Eh.m_controller.addChildAt(this.partAffected.m_textField,Eh.m_controller.getChildIndex(Eh.m_controller.m_canvas))):(this.partAffected.inFront=!0,Eh.m_controller.removeChild(this.partAffected.m_textField),Eh.m_controller.addChildAt(this.partAffected.m_textField,Eh.m_controller.getChildIndex(Eh.m_controller.m_canvas)+1)):(Eh.m_controller.allParts=Vs.RemoveFromArray(this.partAffected,Eh.m_controller.allParts),Eh.m_controller.allParts=Vs.InsertIntoArray(this.partAffected,Eh.m_controller.allParts,this.oldIndex))}RedoAction(){if(this.partAffected instanceof wh)this.type==Eh.FRONT_TYPE?(this.partAffected.inFront=!0,Eh.m_controller.removeChild(this.partAffected.m_textField),Eh.m_controller.addChildAt(this.partAffected.m_textField,Eh.m_controller.getChildIndex(Eh.m_controller.m_canvas)+1)):(this.partAffected.inFront=!1,Eh.m_controller.removeChild(this.partAffected.m_textField),Eh.m_controller.addChildAt(this.partAffected.m_textField,Eh.m_controller.getChildIndex(Eh.m_controller.m_canvas)));else if(this.type==Eh.FRONT_TYPE)Eh.m_controller.allParts=Vs.RemoveFromArray(this.partAffected,Eh.m_controller.allParts),Eh.m_controller.allParts.push(this.partAffected);else{for(var t=!1,e=Eh.m_controller.allParts.length-1;e>0;e--)if(Eh.m_controller.allParts[e]==this.partAffected&&(t=!0),t){if(!Eh.m_controller.allParts[e-1].isEditable)break;Eh.m_controller.allParts[e]=Eh.m_controller.allParts[e-1]}Eh.m_controller.allParts[e]=this.partAffected}}}Eh.FRONT_TYPE=0,Eh.BACK_TYPE=1;class Rh extends Ph{constructor(t,e,i){super(t),this.angle=i,this.rotatedParts=e}UndoAction(){for(var t=0;t<this.rotatedParts.length;t++)this.rotatedParts[t]instanceof mh||this.rotatedParts[t]instanceof Ah?(this.rotatedParts[t].rotateAngle=Math.atan2(this.rotatedParts[t].centerY-this.partAffected.centerY,this.rotatedParts[t].centerX-this.partAffected.centerX),this.rotatedParts[t].rotateOrientation=this.rotatedParts[t].angle):(this.rotatedParts[t].rotateAngle=Math.atan2(this.rotatedParts[t].anchorY-this.partAffected.centerY,this.rotatedParts[t].anchorX-this.partAffected.centerX),this.rotatedParts[t]instanceof Sh&&(this.rotatedParts[t].rotateOrientation=Vs.GetAngle(this.rotatedParts[t].axis))),this.rotatedParts[t].RotateAround(this.partAffected.centerX,this.partAffected.centerY,-this.angle)}RedoAction(){for(var t=0;t<this.rotatedParts.length;t++)this.rotatedParts[t]instanceof mh||this.rotatedParts[t]instanceof Ah?(this.rotatedParts[t].rotateAngle=Math.atan2(this.rotatedParts[t].centerY-this.partAffected.centerY,this.rotatedParts[t].centerX-this.partAffected.centerX),this.rotatedParts[t].rotateOrientation=this.rotatedParts[t].angle):(this.rotatedParts[t].rotateAngle=Math.atan2(this.rotatedParts[t].anchorY-this.partAffected.centerY,this.rotatedParts[t].anchorX-this.partAffected.centerX),this.rotatedParts[t]instanceof Sh&&(this.rotatedParts[t].rotateOrientation=Vs.GetAngle(this.rotatedParts[t].axis))),this.rotatedParts[t].RotateAround(this.partAffected.centerX,this.partAffected.centerY,this.angle)}}a("7qcjp");ca=a("VYQOJ");class Bh extends Ph{constructor(t,e){super(t[0]),this.partsAffected=t,this.scaleFactor=e}UndoAction(){var t=this.partsAffected[0]instanceof fh?this.partsAffected[0].anchorX:this.partsAffected[0]instanceof wh?this.partsAffected[0].x+this.partsAffected[0].w/2:this.partsAffected[0].centerX,e=this.partsAffected[0]instanceof fh?this.partsAffected[0].anchorY:this.partsAffected[0]instanceof wh?this.partsAffected[0].y+this.partsAffected[0].h/2:this.partsAffected[0].centerY;for(i=0;i<this.partsAffected.length;i++)this.partsAffected[i].dragXOff=(this.partsAffected[i]instanceof fh?this.partsAffected[i].anchorX:this.partsAffected[i]instanceof wh?this.partsAffected[i].x+this.partsAffected[i].w/2:this.partsAffected[i].centerX)-t,this.partsAffected[i].dragYOff=(this.partsAffected[i]instanceof fh?this.partsAffected[i].anchorY:this.partsAffected[i]instanceof wh?this.partsAffected[i].y+this.partsAffected[i].h/2:this.partsAffected[i].centerY)-e,this.partsAffected[i].PrepareForResizing();for(var i=0;i<this.partsAffected.length;i++)this.partsAffected[i]instanceof ca.Circle?(this.partsAffected[i].radius=this.partsAffected[i].radius/this.scaleFactor,this.partsAffected[i].Move(t+this.partsAffected[i].dragXOff/this.scaleFactor,e+this.partsAffected[i].dragYOff/this.scaleFactor)):this.partsAffected[i]instanceof ca.Rectangle?(this.partsAffected[i].w=this.partsAffected[i].w/this.scaleFactor,this.partsAffected[i].h=this.partsAffected[i].h/this.scaleFactor,this.partsAffected[i].Move(t+this.partsAffected[i].dragXOff/this.scaleFactor,e+this.partsAffected[i].dragYOff/this.scaleFactor)):this.partsAffected[i]instanceof bh?(this.partsAffected[i].centerX=t+this.partsAffected[i].dragXOff/this.scaleFactor,this.partsAffected[i].centerY=e+this.partsAffected[i].dragYOff/this.scaleFactor,this.partsAffected[i].x1=this.partsAffected[i].centerX+this.partsAffected[i].initX1/this.scaleFactor,this.partsAffected[i].y1=this.partsAffected[i].centerY+this.partsAffected[i].initY1/this.scaleFactor,this.partsAffected[i].x2=this.partsAffected[i].centerX+this.partsAffected[i].initX2/this.scaleFactor,this.partsAffected[i].y2=this.partsAffected[i].centerY+this.partsAffected[i].initY2/this.scaleFactor,this.partsAffected[i].x3=this.partsAffected[i].centerX+this.partsAffected[i].initX3/this.scaleFactor,this.partsAffected[i].y3=this.partsAffected[i].centerY+this.partsAffected[i].initY3/this.scaleFactor):this.partsAffected[i]instanceof yh?(this.partsAffected[i].w=this.partsAffected[i].w/this.scaleFactor,this.partsAffected[i].Move(t+this.partsAffected[i].dragXOff/this.scaleFactor,e+this.partsAffected[i].dragYOff/this.scaleFactor)):this.partsAffected[i]instanceof fh?(this.partsAffected[i].Move(t+this.partsAffected[i].dragXOff/this.scaleFactor,e+this.partsAffected[i].dragYOff/this.scaleFactor),this.partsAffected[i]instanceof Sh&&(this.partsAffected[i].initLength=this.partsAffected[i].initInitLength/this.scaleFactor)):this.partsAffected[i]instanceof wh?(this.partsAffected[i].w=this.partsAffected[i].w/this.scaleFactor,this.partsAffected[i].h=this.partsAffected[i].h/this.scaleFactor,this.partsAffected[i].x=t+this.partsAffected[i].dragXOff/this.scaleFactor-this.partsAffected[i].w/2,this.partsAffected[i].y=e+this.partsAffected[i].dragYOff/this.scaleFactor-this.partsAffected[i].h/2):this.partsAffected[i]instanceof Ah&&this.partsAffected[i].Move(t+this.partsAffected[i].dragXOff/this.scaleFactor,e+this.partsAffected[i].dragYOff/this.scaleFactor)}RedoAction(){var t=this.partsAffected[0]instanceof fh?this.partsAffected[0].anchorX:this.partsAffected[0]instanceof wh?this.partsAffected[0].x+this.partsAffected[0].w/2:this.partsAffected[0].centerX,e=this.partsAffected[0]instanceof fh?this.partsAffected[0].anchorY:this.partsAffected[0]instanceof wh?this.partsAffected[0].y+this.partsAffected[0].h/2:this.partsAffected[0].centerY;for(i=0;i<this.partsAffected.length;i++)this.partsAffected[i].dragXOff=(this.partsAffected[i]instanceof fh?this.partsAffected[i].anchorX:this.partsAffected[i]instanceof wh?this.partsAffected[i].x+this.partsAffected[i].w/2:this.partsAffected[i].centerX)-t,this.partsAffected[i].dragYOff=(this.partsAffected[i]instanceof fh?this.partsAffected[i].anchorY:this.partsAffected[i]instanceof wh?this.partsAffected[i].y+this.partsAffected[i].h/2:this.partsAffected[i].centerY)-e,this.partsAffected[i].PrepareForResizing();for(var i=0;i<this.partsAffected.length;i++)this.partsAffected[i]instanceof ca.Circle?(this.partsAffected[i].radius=this.partsAffected[i].radius*this.scaleFactor,this.partsAffected[i].Move(t+this.partsAffected[i].dragXOff*this.scaleFactor,e+this.partsAffected[i].dragYOff*this.scaleFactor)):this.partsAffected[i]instanceof ca.Rectangle?(this.partsAffected[i].w=this.partsAffected[i].w*this.scaleFactor,this.partsAffected[i].h=this.partsAffected[i].h*this.scaleFactor,this.partsAffected[i].Move(t+this.partsAffected[i].dragXOff*this.scaleFactor,e+this.partsAffected[i].dragYOff*this.scaleFactor)):this.partsAffected[i]instanceof bh?(this.partsAffected[i].centerX=t+this.partsAffected[i].dragXOff*this.scaleFactor,this.partsAffected[i].centerY=e+this.partsAffected[i].dragYOff*this.scaleFactor,this.partsAffected[i].x1=this.partsAffected[i].centerX+this.partsAffected[i].initX1*this.scaleFactor,this.partsAffected[i].y1=this.partsAffected[i].centerY+this.partsAffected[i].initY1*this.scaleFactor,this.partsAffected[i].x2=this.partsAffected[i].centerX+this.partsAffected[i].initX2*this.scaleFactor,this.partsAffected[i].y2=this.partsAffected[i].centerY+this.partsAffected[i].initY2*this.scaleFactor,this.partsAffected[i].x3=this.partsAffected[i].centerX+this.partsAffected[i].initX3*this.scaleFactor,this.partsAffected[i].y3=this.partsAffected[i].centerY+this.partsAffected[i].initY3*this.scaleFactor):this.partsAffected[i]instanceof yh?(this.partsAffected[i].w=this.partsAffected[i].w*this.scaleFactor,this.partsAffected[i].Move(t+this.partsAffected[i].dragXOff*this.scaleFactor,e+this.partsAffected[i].dragYOff*this.scaleFactor)):this.partsAffected[i]instanceof fh?(this.partsAffected[i].Move(t+this.partsAffected[i].dragXOff*this.scaleFactor,e+this.partsAffected[i].dragYOff*this.scaleFactor),this.partsAffected[i]instanceof Sh&&(this.partsAffected[i].initLength=this.partsAffected[i].initInitLength*this.scaleFactor)):this.partsAffected[i]instanceof wh?(this.partsAffected[i].w=this.partsAffected[i].w*this.scaleFactor,this.partsAffected[i].h=this.partsAffected[i].h*this.scaleFactor,this.partsAffected[i].x=t+this.partsAffected[i].dragXOff*this.scaleFactor-this.partsAffected[i].w/2,this.partsAffected[i].y=e+this.partsAffected[i].dragYOff*this.scaleFactor-this.partsAffected[i].h/2):this.partsAffected[i]instanceof Ah&&this.partsAffected[i].Move(t+this.partsAffected[i].dragXOff/this.scaleFactor,e+this.partsAffected[i].dragYOff/this.scaleFactor)}}class Dh extends Ph{constructor(t,e){super(t),this.joints=e}UndoAction(){Dh.m_controller.allParts.push(this.partAffected);for(var t=0;t<this.joints.length;t++)Dh.m_controller.allParts.push(this.joints[t]),this.joints[t].isEnabled=!0;this.partAffected.isEnabled=!0}RedoAction(){Dh.m_controller.DeletePart(this.partAffected,!1)}}class Ih extends Ph{constructor(t){super(t[0]),this.parts=t}UndoAction(){for(var t=0;t<this.parts.length;t++)Ih.m_controller.allParts.push(this.parts[t]),this.parts[t].isEnabled=!0}RedoAction(){for(var t=0;t<this.parts.length;t++)Ih.m_controller.DeletePart(this.parts[t],!1)}}class Mh extends Ph{constructor(t,e,i,s){super(t),this.type=e,this.oldLimit=i,this.newLimit=s}UndoAction(){this.type==Mh.MIN_TYPE?this.partAffected.motorLowerLimit=this.oldLimit:this.partAffected.motorUpperLimit=this.oldLimit}RedoAction(){this.type==Mh.MIN_TYPE?this.partAffected.motorLowerLimit=this.newLimit:this.partAffected.motorUpperLimit=this.newLimit}}Mh.MIN_TYPE=0,Mh.MAX_TYPE=1;class Oh extends Ph{constructor(t,e,i,s){super(t),this.type=e,this.oldKey=i,this.newKey=s}UndoAction(){this.type==Oh.CW_TYPE?this.partAffected.motorCWKey=this.oldKey:this.type==Oh.CCW_TYPE?this.partAffected.motorCCWKey=this.oldKey:this.type==Oh.EXPAND_TYPE?this.partAffected.pistonUpKey=this.oldKey:this.type==Oh.CONTRACT_TYPE?this.partAffected.pistonDownKey=this.oldKey:this.type==Oh.TEXT_TYPE?this.partAffected.displayKey=this.oldKey:this.type==Oh.THRUSTERS_TYPE?this.partAffected.thrustKey=this.oldKey:this.type==Oh.CANNON_TYPE&&(this.partAffected.fireKey=this.oldKey)}RedoAction(){this.type==Oh.CW_TYPE?this.partAffected.motorCWKey=this.newKey:this.type==Oh.CCW_TYPE?this.partAffected.motorCCWKey=this.newKey:this.type==Oh.EXPAND_TYPE?this.partAffected.pistonUpKey=this.newKey:this.type==Oh.CONTRACT_TYPE?this.partAffected.pistonDownKey=this.newKey:this.type==Oh.TEXT_TYPE?this.partAffected.displayKey=this.newKey:this.type==Oh.THRUSTERS_TYPE?this.partAffected.thrustKey=this.newKey:this.type==Oh.CANNON_TYPE&&(this.partAffected.fireKey=this.oldKey)}}Oh.CW_TYPE=0,Oh.CCW_TYPE=1,Oh.EXPAND_TYPE=2,Oh.CONTRACT_TYPE=3,Oh.TEXT_TYPE=4,Oh.THRUSTERS_TYPE=5,Oh.CANNON_TYPE=6;class Lh extends Ph{constructor(t,e,i=null){super(t),this.isChecked=e,this.oldCameraPart=i}UndoAction(){this.partAffected.isCameraFocus=!this.isChecked,this.oldCameraPart&&(this.oldCameraPart.isCameraFocus=!0)}RedoAction(){this.partAffected.isCameraFocus=this.isChecked,this.oldCameraPart&&(this.oldCameraPart.isCameraFocus=!1)}}class Gh extends Ph{constructor(t,e,i){super(t),this.type=e,this.change=i}UndoAction(){this.type==Gh.DENSITY_TYPE?this.partAffected.density-=this.change:this.type==Gh.STRENGTH_TYPE&&this.partAffected instanceof xh?this.partAffected.motorStrength-=this.change:this.type==Gh.STRENGTH_TYPE&&this.partAffected instanceof Sh?this.partAffected.pistonStrength-=this.change:this.type==Gh.STRENGTH_TYPE&&this.partAffected instanceof Ah||this.type==Gh.STRENGTH_TYPE&&this.partAffected instanceof yh?this.partAffected.strength-=this.change:this.type==Gh.SPEED_TYPE&&this.partAffected instanceof xh?this.partAffected.motorSpeed-=this.change:this.partAffected.pistonSpeed-=this.change}RedoAction(){this.type==Gh.DENSITY_TYPE?this.partAffected.density+=this.change:this.type==Gh.STRENGTH_TYPE&&this.partAffected instanceof xh?this.partAffected.motorStrength+=this.change:this.type==Gh.STRENGTH_TYPE&&this.partAffected instanceof Sh?this.partAffected.pistonStrength+=this.change:this.type==Gh.STRENGTH_TYPE&&this.partAffected instanceof Ah||this.type==Gh.STRENGTH_TYPE&&this.partAffected instanceof yh?this.partAffected.strength+=this.change:this.type==Gh.SPEED_TYPE&&this.partAffected instanceof xh?this.partAffected.motorSpeed+=this.change:this.partAffected.pistonSpeed+=this.change}}Gh.DENSITY_TYPE=0,Gh.STRENGTH_TYPE=1,Gh.SPEED_TYPE=2;class Fh extends Ph{constructor(t,e){super(t),this.change=e}UndoAction(){this.partAffected.size-=this.change}RedoAction(){this.partAffected.size+=this.change}}class kh extends Ph{constructor(t,e,i){super(t),this.type=e,this.isChecked=i}UndoAction(){this.type==kh.SCALE_TYPE?this.partAffected.scaleWithZoom=!this.isChecked:this.partAffected.alwaysVisible=!this.isChecked}RedoAction(){this.type==kh.SCALE_TYPE?this.partAffected.scaleWithZoom=this.isChecked:this.partAffected.alwaysVisible=this.isChecked}}kh.SCALE_TYPE=0,kh.DISPLAY_TYPE=1;class Nh extends Ph{constructor(t){super(t[0]),this.parts=t}UndoAction(){for(var t=0;t<this.parts.length;t++)(this.parts[t]instanceof mh||this.parts[t]instanceof wh)&&Nh.m_controller.DeletePart(this.parts[t],!1)}RedoAction(){for(var t=0;t<this.parts.length;t++)Nh.m_controller.allParts.push(this.parts[t]),this.parts[t].isEnabled=!0}}class Vh extends Ph{constructor(t,e,i,s=!1){super(t),this.type=e,this.isChecked=i,this.sideEffect=s}UndoAction(){this.type==Vh.ENABLE_TYPE&&this.partAffected instanceof xh?this.partAffected.enableMotor=!this.isChecked:this.type==Vh.ENABLE_TYPE&&this.partAffected instanceof Sh?this.partAffected.enablePiston=!this.isChecked:this.type==Vh.RIGID_TYPE&&this.partAffected instanceof xh||this.type==Vh.RIGID_TYPE&&this.partAffected instanceof Sh?this.partAffected.isStiff=this.isChecked:this.type==Vh.AUTO_CW_TYPE?(this.partAffected.autoCW=!this.isChecked,this.sideEffect&&(this.partAffected.autoCCW=this.isChecked)):this.type==Vh.AUTO_CCW_TYPE?(this.partAffected.autoCCW=!this.isChecked,this.sideEffect&&(this.partAffected.autoCW=this.isChecked)):this.type==Vh.AUTO_ON_TYPE?this.partAffected.autoOn=!this.isChecked:this.partAffected.autoOscillate=!this.isChecked}RedoAction(){this.type==Vh.ENABLE_TYPE&&this.partAffected instanceof xh?this.partAffected.enableMotor=this.isChecked:this.type==Vh.ENABLE_TYPE&&this.partAffected instanceof Sh?this.partAffected.enablePiston=this.isChecked:this.type==Vh.RIGID_TYPE&&this.partAffected instanceof xh||this.type==Vh.RIGID_TYPE&&this.partAffected instanceof Sh?this.partAffected.isStiff=!this.isChecked:this.type==Vh.AUTO_CW_TYPE?(this.partAffected.autoCW=this.isChecked,this.sideEffect&&(this.partAffected.autoCCW=!this.isChecked)):this.type==Vh.AUTO_CCW_TYPE?(this.partAffected.autoCCW=this.isChecked,this.sideEffect&&(this.partAffected.autoCW=!this.isChecked)):this.type==Vh.AUTO_ON_TYPE?this.partAffected.autoOn=this.isChecked:this.partAffected.autoOscillate=this.isChecked}}Vh.ENABLE_TYPE=0,Vh.RIGID_TYPE=1,Vh.AUTO_CW_TYPE=2,Vh.AUTO_CCW_TYPE=3,Vh.AUTO_OSCILLATE_TYPE=4,Vh.AUTO_ON_TYPE=5;class Uh extends Ph{constructor(t,e,i,s,r){super(t),this.changeX=e,this.changeY=i,this.changeW=s,this.changeH=r}UndoAction(){this.partAffected.x-=this.changeX,this.partAffected.y-=this.changeY,this.partAffected.w-=this.changeW,this.partAffected.h-=this.changeH}RedoAction(){this.partAffected.x+=this.changeX,this.partAffected.y+=this.changeY,this.partAffected.w+=this.changeW,this.partAffected.h+=this.changeH}}class Wh extends Ph{constructor(t,e,i,s,r){super(t),this.red=e,this.green=i,this.blue=s,this.opacity=r}UndoAction(){(this.partAffected instanceof mh||this.partAffected instanceof Sh||this.partAffected instanceof wh)&&(this.partAffected.red-=this.red,this.partAffected.green-=this.green,this.partAffected.blue-=this.blue,this.partAffected instanceof wh||(this.partAffected.opacity-=this.opacity))}RedoAction(){(this.partAffected instanceof mh||this.partAffected instanceof Sh||this.partAffected instanceof wh)&&(this.partAffected.red+=this.red,this.partAffected.green+=this.green,this.partAffected.blue+=this.blue,this.partAffected instanceof wh||(this.partAffected.opacity+=this.opacity))}}class jh extends Ph{constructor(t,e,i){super(t),this.type=e,this.isChecked=i}UndoAction(){this.type==jh.COLLIDE_TYPE?(this.partAffected,this.partAffected.collide=!this.isChecked):this.type==jh.FIXATE_TYPE?this.partAffected.isStatic=!this.isChecked:this.type==jh.OUTLINE_TYPE?(this.partAffected,this.partAffected.outline=!this.isChecked):this.type==jh.TERRAIN_TYPE?this.partAffected.terrain=!this.isChecked:this.partAffected.undragable=!this.isChecked}RedoAction(){this.type==jh.COLLIDE_TYPE?(this.partAffected,this.partAffected.collide=this.isChecked):this.type==jh.FIXATE_TYPE?this.partAffected.isStatic=this.isChecked:this.type==jh.OUTLINE_TYPE?(this.partAffected,this.partAffected.outline=this.isChecked):this.type==jh.TERRAIN_TYPE?this.partAffected.terrain=this.isChecked:this.partAffected.undragable=!this.isChecked}}jh.COLLIDE_TYPE=0,jh.FIXATE_TYPE=1,jh.OUTLINE_TYPE=2,jh.TERRAIN_TYPE=3,jh.UNDRAGABLE_TYPE=4;class Xh extends Ph{constructor(t,e,i){super(t),this.oldText=e,this.newText=i}UndoAction(){this.partAffected.text=this.oldText,this.partAffected.m_textField.text=this.oldText}RedoAction(){this.partAffected.text=this.newText,this.partAffected.m_textField.text=this.newText}}class Yh extends Ph{constructor(t,e,i,s,r,n,o,a,h){super(t[0]),this.partsAffected=t,this.red=e,this.green=i,this.blue=s,this.opacity=r,this.oldReds=n,this.oldGreens=o,this.oldBlues=a,this.oldOpacitys=h}UndoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].red=this.oldReds[t],this.partsAffected[t].green=this.oldGreens[t],this.partsAffected[t].blue=this.oldBlues[t],this.partsAffected[t]instanceof wh||(this.partsAffected[t].opacity=this.oldOpacitys[t])}RedoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].red=this.red,this.partsAffected[t].green=this.green,this.partsAffected[t].blue=this.blue,this.partsAffected[t]instanceof wh||(this.partsAffected[t].opacity=this.opacity)}}class Hh extends Ph{constructor(t,e){super(t[0]),this.partsAffected=t,this.collide=e}UndoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].collide=!this.collide}RedoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].collide=this.collide}}class zh extends Ph{constructor(t,e){super(t[0]),this.partsAffected=t,this.outline=e}UndoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].outline=!this.outline}RedoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].outline=this.outline}}class Jh extends Ph{constructor(t,e){super(t[0]),this.partsAffected=t,this.undragable=e}UndoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].undragable=!this.undragable}RedoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].undragable=this.undragable}}class qh extends Ph{constructor(t,e){super(t[0]),this.partsAffected=t,this.fixate=e}UndoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].isStatic=!this.fixate}RedoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].isStatic=this.fixate}}class Kh extends Ph{constructor(t,e){super(t[0]),this.partsAffected=t,this.terrain=e}UndoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].terrain=!this.terrain}RedoAction(){for(var t=0;t<this.partsAffected.length;t++)this.partsAffected[t].terrain=this.terrain}}window.logCount=100,window.limitedLog=(...t)=>{window.logCount>0&&console.log(...t),window.logCount-=1},async function(){await sa.load();const t=new h.Application({transparent:!1,antialias:!0,width:800,height:600}),e=(new Sa(t),document.getElementById("game_wrapper"));e&&(e.innerHTML="",e.appendChild(t.view))}();
//# sourceMappingURL=index.59c5e5be.js.map
